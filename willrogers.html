<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script id="versionArea" type="text/javascript">
//<![CDATA[
var version = {title: "TiddlyWiki", major: 2, minor: 8, revision: 1, date: new Date("June 23, 2013"), extensions: {}};

//]]>
</script>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="copyright" content="
TiddlyWiki created by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Copyright (c) Jeremy Ruston 2004-2007
Copyright (c) UnaMesa Association 2007-2012

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the UnaMesa Association nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS' AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.

" />
<!--PRE-HEAD-START-->
<!--{{{-->
<link rel="shortcut icon" href="/recipes/willrogers_public/tiddlers/favicon.ico" />
<link href="/bags/willrogers_public/tiddlers.atom" rel="alternate"
	type="application/atom+xml" title="willrogers's public feed" />
<link rel="canonical" href="http://willrogers.tiddlyspace.com/" />
<!--}}}-->
<!--PRE-HEAD-END-->
<title>
willrogers - Online notebook
</title>
<style id="styleArea" type="text/css">
#saveTest {display:none;}
#messageArea {display:none;}
#copyright {display:none;}
#storeArea {display:none;}
#storeArea div {padding:0.5em; margin:1em 0em 0em 0em; border-color:#fff #666 #444 #ddd; border-style:solid; border-width:2px; overflow:auto;}
#shadowArea {display:none;}
#javascriptWarning {width:100%; text-align:center; font-weight:bold; background-color:#dd1100; color:#fff; padding:1em 0em;}

</style>
<!--POST-HEAD-START-->

<!--POST-HEAD-END-->
</head>
<body onload="main();" onunload="if(window.unload) unload();">
<!--PRE-BODY-START-->

<!--PRE-BODY-END-->
<div id="copyright">
Welcome to TiddlyWiki created by Jeremy Ruston; Copyright &copy; 2004-2007 Jeremy Ruston, Copyright &copy; 2007-2011 UnaMesa Association
</div>
<noscript>

<div id="javascriptWarning">
This page requires JavaScript to function properly.<br /><br />
If you do not use JavaScript you may still <a href="/tiddlers">browse
the content of this wiki</a>.
</div>

</noscript>
<div id="saveTest"></div>
<div id="backstageCloak"></div>
<div id="backstageButton"></div>
<div id="backstageArea"><div id="backstageToolbar"></div></div>
<div id="backstage">
	<div id="backstagePanel"></div>
</div>
<div id="contentWrapper"></div>
<div id="contentStash"></div>
<div id="shadowArea">
<div title="ColorPalette">
<pre>Background: #fff
Foreground: #000
PrimaryPale: #8cf
PrimaryLight: #18f
PrimaryMid: #04b
PrimaryDark: #014
SecondaryPale: #ffc
SecondaryLight: #fe8
SecondaryMid: #db4
SecondaryDark: #841
TertiaryPale: #eee
TertiaryLight: #ccc
TertiaryMid: #999
TertiaryDark: #666
Error: #f88
</pre>
</div>
<div title="EditTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::EditToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit title'&gt;&lt;/div&gt;
&lt;div macro='annotations'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit text'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit tags'&gt;&lt;/div&gt;&lt;div class='editorFooter'&gt;&lt;span macro='message views.editor.tagPrompt'&gt;&lt;/span&gt;&lt;span macro='tagChooser excludeLists'&gt;&lt;/span&gt;&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="GettingStarted">
<pre>To get started with this blank [[TiddlyWiki]], you'll need to modify the following tiddlers:
* [[SiteTitle]] &amp; [[SiteSubtitle]]: The title and subtitle of the site, as shown above (after saving, they will also appear in the browser title bar)
* [[MainMenu]]: The menu (usually on the left)
* [[DefaultTiddlers]]: Contains the names of the tiddlers that you want to appear when the TiddlyWiki is opened
You'll also need to enter your username for signing your edits: &lt;&lt;option txtUserName&gt;&gt;
</pre>
</div>
<div title="ImportTiddlers">
<pre>&lt;&lt;importTiddlers&gt;&gt;
</pre>
</div>
<div title="MarkupPreHead">
<pre>&lt;!--{{{--&gt;
&lt;link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' /&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="OptionsPanel">
<pre>These [[InterfaceOptions]] for customising [[TiddlyWiki]] are saved in your browser

Your username for signing your edits. Write it as a [[WikiWord]] (eg [[JoeBloggs]])

&lt;&lt;option txtUserName&gt;&gt;
&lt;&lt;option chkSaveBackups&gt;&gt; [[SaveBackups]]
&lt;&lt;option chkAutoSave&gt;&gt; [[AutoSave]]
&lt;&lt;option chkRegExpSearch&gt;&gt; [[RegExpSearch]]
&lt;&lt;option chkCaseSensitiveSearch&gt;&gt; [[CaseSensitiveSearch]]
&lt;&lt;option chkAnimate&gt;&gt; [[EnableAnimations]]

----
Also see [[AdvancedOptions]]
</pre>
</div>
<div title="PageTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='header' role='banner' macro='gradient vert [[ColorPalette::PrimaryLight]] [[ColorPalette::PrimaryMid]]'&gt;
&lt;div class='headerShadow'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class='headerForeground'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id='mainMenu' role='navigation' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
&lt;div id='sidebar'&gt;
&lt;div id='sidebarOptions' role='navigation' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
&lt;div id='sidebarTabs' role='complementary' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea' role='main'&gt;
&lt;div id='messageArea'&gt;&lt;/div&gt;
&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="StyleSheetColors">
<pre>/*{{{*/
body {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}

a {color:[[ColorPalette::PrimaryMid]];}
a:hover {background-color:[[ColorPalette::PrimaryMid]]; color:[[ColorPalette::Background]];}
a img {border:0;}

h1,h2,h3,h4,h5,h6 {color:[[ColorPalette::SecondaryDark]]; background:transparent;}
h1 {border-bottom:2px solid [[ColorPalette::TertiaryLight]];}
h2,h3 {border-bottom:1px solid [[ColorPalette::TertiaryLight]];}

.button {color:[[ColorPalette::PrimaryDark]]; border:1px solid [[ColorPalette::Background]];}
.button:hover {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::SecondaryLight]]; border-color:[[ColorPalette::SecondaryMid]];}
.button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::SecondaryDark]];}

.header {background:[[ColorPalette::PrimaryMid]];}
.headerShadow {color:[[ColorPalette::Foreground]];}
.headerShadow a {font-weight:normal; color:[[ColorPalette::Foreground]];}
.headerForeground {color:[[ColorPalette::Background]];}
.headerForeground a {font-weight:normal; color:[[ColorPalette::PrimaryPale]];}

.tabSelected {color:[[ColorPalette::PrimaryDark]];
	background:[[ColorPalette::TertiaryPale]];
	border-left:1px solid [[ColorPalette::TertiaryLight]];
	border-top:1px solid [[ColorPalette::TertiaryLight]];
	border-right:1px solid [[ColorPalette::TertiaryLight]];
}
.tabUnselected {color:[[ColorPalette::Background]]; background:[[ColorPalette::TertiaryMid]];}
.tabContents {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::TertiaryPale]]; border:1px solid [[ColorPalette::TertiaryLight]];}
.tabContents .button {border:0;}

#sidebar {}
#sidebarOptions input {border:1px solid [[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel {background:[[ColorPalette::PrimaryPale]];}
#sidebarOptions .sliderPanel a {border:none;color:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:hover {color:[[ColorPalette::Background]]; background:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:active {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::Background]];}

.wizard {background:[[ColorPalette::PrimaryPale]]; border:1px solid [[ColorPalette::PrimaryMid]];}
.wizard h1 {color:[[ColorPalette::PrimaryDark]]; border:none;}
.wizard h2 {color:[[ColorPalette::Foreground]]; border:none;}
.wizardStep {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];
	border:1px solid [[ColorPalette::PrimaryMid]];}
.wizardStep.wizardStepDone {background:[[ColorPalette::TertiaryLight]];}
.wizardFooter {background:[[ColorPalette::PrimaryPale]];}
.wizardFooter .status {background:[[ColorPalette::PrimaryDark]]; color:[[ColorPalette::Background]];}
.wizard .button {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryLight]]; border: 1px solid;
	border-color:[[ColorPalette::SecondaryPale]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryPale]];}
.wizard .button:hover {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Background]];}
.wizard .button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::Foreground]]; border: 1px solid;
	border-color:[[ColorPalette::PrimaryDark]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryDark]];}

.wizard .notChanged {background:transparent;}
.wizard .changedLocally {background:#80ff80;}
.wizard .changedServer {background:#8080ff;}
.wizard .changedBoth {background:#ff8080;}
.wizard .notFound {background:#ffff80;}
.wizard .putToServer {background:#ff80ff;}
.wizard .gotFromServer {background:#80ffff;}

#messageArea {border:1px solid [[ColorPalette::SecondaryMid]]; background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]];}
#messageArea .button {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::SecondaryPale]]; border:none;}

.popupTiddler {background:[[ColorPalette::TertiaryPale]]; border:2px solid [[ColorPalette::TertiaryMid]];}

.popup {background:[[ColorPalette::TertiaryPale]]; color:[[ColorPalette::TertiaryDark]]; border-left:1px solid [[ColorPalette::TertiaryMid]]; border-top:1px solid [[ColorPalette::TertiaryMid]]; border-right:2px solid [[ColorPalette::TertiaryDark]]; border-bottom:2px solid [[ColorPalette::TertiaryDark]];}
.popup hr {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::PrimaryDark]]; border-bottom:1px;}
.popup li.disabled {color:[[ColorPalette::TertiaryMid]];}
.popup li a, .popup li a:visited {color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:active {background:[[ColorPalette::SecondaryPale]]; color:[[ColorPalette::Foreground]]; border: none;}
.popupHighlight {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
.listBreak div {border-bottom:1px solid [[ColorPalette::TertiaryDark]];}

.tiddler .defaultCommand {font-weight:bold;}

.shadow .title {color:[[ColorPalette::TertiaryDark]];}

.title {color:[[ColorPalette::SecondaryDark]];}
.subtitle {color:[[ColorPalette::TertiaryDark]];}

.toolbar {color:[[ColorPalette::PrimaryMid]];}
.toolbar a {color:[[ColorPalette::TertiaryLight]];}
.selected .toolbar a {color:[[ColorPalette::TertiaryMid]];}
.selected .toolbar a:hover {color:[[ColorPalette::Foreground]];}

.tagging, .tagged {border:1px solid [[ColorPalette::TertiaryPale]]; background-color:[[ColorPalette::TertiaryPale]];}
.selected .tagging, .selected .tagged {background-color:[[ColorPalette::TertiaryLight]]; border:1px solid [[ColorPalette::TertiaryMid]];}
.tagging .listTitle, .tagged .listTitle {color:[[ColorPalette::PrimaryDark]];}
.tagging .button, .tagged .button {border:none;}

.footer {color:[[ColorPalette::TertiaryLight]];}
.selected .footer {color:[[ColorPalette::TertiaryMid]];}

.error, .errorButton {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Error]];}
.warning {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryPale]];}
.lowlight {background:[[ColorPalette::TertiaryLight]];}

.zoomer {background:none; color:[[ColorPalette::TertiaryMid]]; border:3px solid [[ColorPalette::TertiaryMid]];}

.imageLink, #displayArea .imageLink {background:transparent;}

.annotation {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border:2px solid [[ColorPalette::SecondaryMid]];}

.viewer .listTitle {list-style-type:none; margin-left:-2em;}
.viewer .button {border:1px solid [[ColorPalette::SecondaryMid]];}
.viewer blockquote {border-left:3px solid [[ColorPalette::TertiaryDark]];}

.viewer table, table.twtable {border:2px solid [[ColorPalette::TertiaryDark]];}
.viewer th, .viewer thead td, .twtable th, .twtable thead td {background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::Background]];}
.viewer td, .viewer tr, .twtable td, .twtable tr {border:1px solid [[ColorPalette::TertiaryDark]];}

.viewer pre {border:1px solid [[ColorPalette::SecondaryLight]]; background:[[ColorPalette::SecondaryPale]];}
.viewer code {color:[[ColorPalette::SecondaryDark]];}
.viewer hr {border:0; border-top:dashed 1px [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::TertiaryDark]];}

.highlight, .marked {background:[[ColorPalette::SecondaryLight]];}

.editor input {border:1px solid [[ColorPalette::PrimaryMid]];}
.editor textarea {border:1px solid [[ColorPalette::PrimaryMid]]; width:100%;}
.editorFooter {color:[[ColorPalette::TertiaryMid]];}
.readOnly {background:[[ColorPalette::TertiaryPale]];}

#backstageArea {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::TertiaryMid]];}
#backstageArea a {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstageArea a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; }
#backstageArea a.backstageSelTab {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
#backstageButton a {background:none; color:[[ColorPalette::Background]]; border:none;}
#backstageButton a:hover {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstagePanel {background:[[ColorPalette::Background]]; border-color: [[ColorPalette::Background]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]];}
.backstagePanelFooter .button {border:none; color:[[ColorPalette::Background]];}
.backstagePanelFooter .button:hover {color:[[ColorPalette::Foreground]];}
#backstageCloak {background:[[ColorPalette::Foreground]]; opacity:0.6; filter:alpha(opacity=60);}
/*}}}*/
</pre>
</div>
<div title="StyleSheetLayout">
<pre>/*{{{*/
* html .tiddler {height:1%;}

body {font-size:.75em; font-family:arial,helvetica; margin:0; padding:0;}

h1,h2,h3,h4,h5,h6 {font-weight:bold; text-decoration:none;}
h1,h2,h3 {padding-bottom:1px; margin-top:1.2em;margin-bottom:0.3em;}
h4,h5,h6 {margin-top:1em;}
h1 {font-size:1.35em;}
h2 {font-size:1.25em;}
h3 {font-size:1.1em;}
h4 {font-size:1em;}
h5 {font-size:.9em;}

hr {height:1px;}

a {text-decoration:none;}

dt {font-weight:bold;}

ol {list-style-type:decimal;}
ol ol {list-style-type:lower-alpha;}
ol ol ol {list-style-type:lower-roman;}
ol ol ol ol {list-style-type:decimal;}
ol ol ol ol ol {list-style-type:lower-alpha;}
ol ol ol ol ol ol {list-style-type:lower-roman;}
ol ol ol ol ol ol ol {list-style-type:decimal;}

.txtOptionInput {width:11em;}

#contentWrapper .chkOptionInput {border:0;}

.externalLink {text-decoration:underline;}

.indent {margin-left:3em;}
.outdent {margin-left:3em; text-indent:-3em;}
code.escaped {white-space:nowrap;}

.tiddlyLinkExisting {font-weight:bold;}
.tiddlyLinkNonExisting {font-style:italic;}

/* the 'a' is required for IE, otherwise it renders the whole tiddler in bold */
a.tiddlyLinkNonExisting.shadow {font-weight:bold;}

#mainMenu .tiddlyLinkExisting,
	#mainMenu .tiddlyLinkNonExisting,
	#sidebarTabs .tiddlyLinkNonExisting {font-weight:normal; font-style:normal;}
#sidebarTabs .tiddlyLinkExisting {font-weight:bold; font-style:normal;}

.header {position:relative;}
.header a:hover {background:transparent;}
.headerShadow {position:relative; padding:4.5em 0 1em 1em; left:-1px; top:-1px;}
.headerForeground {position:absolute; padding:4.5em 0 1em 1em; left:0; top:0;}

.siteTitle {font-size:3em;}
.siteSubtitle {font-size:1.2em;}

#mainMenu {position:absolute; left:0; width:10em; text-align:right; line-height:1.6em; padding:1.5em 0.5em 0.5em 0.5em; font-size:1.1em;}

#sidebar {position:absolute; right:3px; width:16em; font-size:.9em;}
#sidebarOptions {padding-top:0.3em;}
#sidebarOptions a {margin:0 0.2em; padding:0.2em 0.3em; display:block;}
#sidebarOptions input {margin:0.4em 0.5em;}
#sidebarOptions .sliderPanel {margin-left:1em; padding:0.5em; font-size:.85em;}
#sidebarOptions .sliderPanel a {font-weight:bold; display:inline; padding:0;}
#sidebarOptions .sliderPanel input {margin:0 0 0.3em 0;}
#sidebarTabs .tabContents {width:15em; overflow:hidden;}

.wizard {padding:0.1em 1em 0 2em;}
.wizard h1 {font-size:2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizard h2 {font-size:1.2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizardStep {padding:1em 1em 1em 1em;}
.wizard .button {margin:0.5em 0 0; font-size:1.2em;}
.wizardFooter {padding:0.8em 0.4em 0.8em 0;}
.wizardFooter .status {padding:0 0.4em; margin-left:1em;}
.wizard .button {padding:0.1em 0.2em;}

#messageArea {position:fixed; top:2em; right:0; margin:0.5em; padding:0.5em; z-index:2000; _position:absolute;}
.messageToolbar {display:block; text-align:right; padding:0.2em;}
#messageArea a {text-decoration:underline;}

.tiddlerPopupButton {padding:0.2em;}
.popupTiddler {position: absolute; z-index:300; padding:1em; margin:0;}

.popup {position:absolute; z-index:300; font-size:.9em; padding:0; list-style:none; margin:0;}
.popup .popupMessage {padding:0.4em;}
.popup hr {display:block; height:1px; width:auto; padding:0; margin:0.2em 0;}
.popup li.disabled {padding:0.4em;}
.popup li a {display:block; padding:0.4em; font-weight:normal; cursor:pointer;}
.listBreak {font-size:1px; line-height:1px;}
.listBreak div {margin:2px 0;}

.tabset {padding:1em 0 0 0.5em;}
.tab {margin:0 0 0 0.25em; padding:2px;}
.tabContents {padding:0.5em;}
.tabContents ul, .tabContents ol {margin:0; padding:0;}
.txtMainTab .tabContents li {list-style:none;}
.tabContents li.listLink { margin-left:.75em;}

#contentWrapper {display:block;}
#splashScreen {display:none;}

#displayArea {margin:1em 17em 0 14em;}

.toolbar {text-align:right; font-size:.9em;}

.tiddler {padding:1em 1em 0;}

.missing .viewer,.missing .title {font-style:italic;}

.title {font-size:1.6em; font-weight:bold;}

.missing .subtitle {display:none;}
.subtitle {font-size:1.1em;}

.tiddler .button {padding:0.2em 0.4em;}

.tagging {margin:0.5em 0.5em 0.5em 0; float:left; display:none;}
.isTag .tagging {display:block;}
.tagged {margin:0.5em; float:right;}
.tagging, .tagged {font-size:0.9em; padding:0.25em;}
.tagging ul, .tagged ul {list-style:none; margin:0.25em; padding:0;}
.tagClear {clear:both;}

.footer {font-size:.9em;}
.footer li {display:inline;}

.annotation {padding:0.5em; margin:0.5em;}

* html .viewer pre {width:99%; padding:0 0 1em 0;}
.viewer {line-height:1.4em; padding-top:0.5em;}
.viewer .button {margin:0 0.25em; padding:0 0.25em;}
.viewer blockquote {line-height:1.5em; padding-left:0.8em;margin-left:2.5em;}
.viewer ul, .viewer ol {margin-left:0.5em; padding-left:1.5em;}

.viewer table, table.twtable {border-collapse:collapse; margin:0.8em 1.0em;}
.viewer th, .viewer td, .viewer tr,.viewer caption,.twtable th, .twtable td, .twtable tr,.twtable caption {padding:3px;}
table.listView {font-size:0.85em; margin:0.8em 1.0em;}
table.listView th, table.listView td, table.listView tr {padding:0 3px 0 3px;}

.viewer pre {padding:0.5em; margin-left:0.5em; font-size:1.2em; line-height:1.4em; overflow:auto;}
.viewer code {font-size:1.2em; line-height:1.4em;}

.editor {font-size:1.1em;}
.editor input, .editor textarea {display:block; width:100%; font:inherit;}
.editorFooter {padding:0.25em 0; font-size:.9em;}
.editorFooter .button {padding-top:0; padding-bottom:0;}

.fieldsetFix {border:0; padding:0; margin:1px 0px;}

.zoomer {font-size:1.1em; position:absolute; overflow:hidden;}
.zoomer div {padding:1em;}

* html #backstage {width:99%;}
* html #backstageArea {width:99%;}
#backstageArea {display:none; position:relative; overflow: hidden; z-index:150; padding:0.3em 0.5em;}
#backstageToolbar {position:relative;}
#backstageArea a {font-weight:bold; margin-left:0.5em; padding:0.3em 0.5em;}
#backstageButton {display:none; position:absolute; z-index:175; top:0; right:0;}
#backstageButton a {padding:0.1em 0.4em; margin:0.1em;}
#backstage {position:relative; width:100%; z-index:50;}
#backstagePanel {display:none; z-index:100; position:absolute; width:90%; margin-left:3em; padding:1em;}
.backstagePanelFooter {padding-top:0.2em; float:right;}
.backstagePanelFooter a {padding:0.2em 0.4em;}
#backstageCloak {display:none; z-index:20; position:absolute; width:100%; height:100px;}

.whenBackstage {display:none;}
.backstageVisible .whenBackstage {display:block;}
/*}}}*/
</pre>
</div>
<div title="StyleSheetLocale">
<pre>/***
StyleSheet for use when a translation requires any css style changes.
This StyleSheet can be used directly by languages such as Chinese, Japanese and Korean which need larger font sizes.
***/
/*{{{*/
body {font-size:0.8em;}
#sidebarOptions {font-size:1.05em;}
#sidebarOptions a {font-style:normal;}
#sidebarOptions .sliderPanel {font-size:0.95em;}
.subtitle {font-size:0.8em;}
.viewer table.listView {font-size:0.95em;}
/*}}}*/
</pre>
</div>
<div title="StyleSheetPrint">
<pre>/*{{{*/
@media print {
#mainMenu, #sidebar, #messageArea, .toolbar, #backstageButton, #backstageArea {display: none !important;}
#displayArea {margin: 1em 1em 0em;}
noscript {display:none;} /* Fixes a feature in Firefox 1.5.0.2 where print preview displays the noscript content */
}
/*}}}*/
</pre>
</div>
<div title="ViewTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' role='navigation' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date'&gt;&lt;/span&gt; (&lt;span macro='message views.wikified.createdPrompt'&gt;&lt;/span&gt; &lt;span macro='view created date'&gt;&lt;/span&gt;)&lt;/div&gt;
&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;
&lt;div class='tagged' macro='tags'&gt;&lt;/div&gt;
&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>

</div>
<!--POST-SHADOWAREA-->
<div id="storeArea"><div title="CPPClasses" server.title="CPPClasses" server.page.revision="1302334" server.etag="&quot;willrogers_public/CPPClasses/1302334:1599bd646250eec57c3ee23cc62537c7c667da01&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130710132743" created="20110819125713" tags="" _hash="cb9d4e03f7cd8bf3f82e632a52c5eeef9addc069">
<pre>The most important change from C to C++ was of course the addition of classes.  With classes, as in Java, you can define your own objects, then create instances of them.  Along with this, you get encapsulation with a similar model to Java's.  There is a good introduction on this page: http://www.cplusplus.com/doc/tutorial/classes/

!!Defining a class
{{{
class ExampleClass {
    private:
        int mem;
    public:
        ExampleClass(args);
        ~ExampleClass();
        void set_mem(int);
        int get_mem();
};

ExampleClass::ExampleClass(args) {
 ...
}

ExampleClass::~ExampleClass() {
 ...
}
}}}
The first part is the class definition, which specifices the member variables and method declarations.  The second is the constructor, which may be overloaded in a similar way to Java.  The third is the destructor, which may not take any arguments.  Neither the constructor nor the destructor may return a value.

Like Java, if you don't specify a constructor there is a default one with no arguments.

!!Static members and methods
These work in the same way as Java - they are associated with the class as a whole as opposed to any instance of the class.</pre>
</div>
<div title="MetaLang" server.title="MetaLang" server.page.revision="661983" server.etag="&quot;willrogers_public/MetaLang/661983:41c3336b4263483ed3c5dce368ae7f8e667b68df&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120331182055" created="20120331172629" tags="ml" _hash="48c2ea4a42c246bcd9f5076f151c0bdc1555b268">
<pre>I mean ML, of course, but MetaLang makes a wiki word.

!!Advantages
* It's interactive
* It has flexible types
* It prevents crashing by hiding the hardware
* It's easy to understand mathematically

MetaLangSyntax
MetaLangRecursion


!!Numeric types
* int: {{{0, 1, ~1, 34}}}
* real: {{{0.0, ~1.14, 3.45e~7}}}
You can use +, 1, * div and mod for ints; you can use +, -, * and / for reals.  This is known as overloading.  It means you may need to provide type constraints on your functions or they won't work as you expect.
* {{{real 3 -&gt; 3.0}}}
* {{{floor 3.14 -&gt; 3}}}




</pre>
</div>
<div title="FreeXperia" server.title="FreeXperia" server.page.revision="1040738" server.etag="&quot;willrogers_public/FreeXperia/1040738:c0e3b69e114ba77b4c413cc865319fdf0b6eddbe&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130127214847" created="20121216182733" tags="" _hash="83e6ddee8e0406671bd4d272f3539edd68b0df4b">
<pre>FreeXperia is the team who maintain the CyanogenMod versions for Xperia phones.

!!Source code

Here are some instructions on how to build a ROM for the Ray: http://wiki.cyanogenmod.org/w/Build_for_urushi

I am yet to figure out how the ROMs are built.  There are projects on Github for both:
* FreeXperia: https://github.com/FreeXperia
* CyanogenMod: https://github.com/CyanogenMod

Apparently relevant projects include:
* https://github.com/CyanogenMod/android_device_sony_blue-common
</pre>
</div>
<div title="RepeaterBeater" server.title="RepeaterBeater" server.page.revision="364647" server.etag="&quot;willrogers_public/RepeaterBeater/364647:a3dbc63ba2f7307adef2cfa229b7e7ad2a88618a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110508140532" created="20110508135328" tags="mew tab" _hash="2d2e1cf032eb951fb9f26d790394bb014af8b929">
<pre>by Mew

{{{
F#m                             Bm
Sometimes, I've got, nothing to say,
           C#m                        F#m      E
Nothing to sing about, that makes you lie awake.
F#m                             Bm
Sometimes, I've got, nothing to do,
           C#m                      F#m        E
Nothing to signal out, when I can't be with you.

A                      E
Why should I hold this girlfriend
   C#m      A
As tight as I ever could?
    E                 C#m         A
Now why should I?  No reason why.

You wore me down.  Worse did I show.
F#m
Show me something good

Show me something, thing, thing
}}}</pre>
</div>
<div title="CFunctionPointers" server.title="CFunctionPointers" server.page.revision="1311157" server.etag="&quot;willrogers_public/CFunctionPointers/1311157:598d826928a44f31bc6b9f622c640e9ad5e2f471&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130717143801" created="20130716135148" tags="" _hash="ec8f3770a4190509c82729fd66367fb503b7657f">
<pre>Who knew that C had things as screwy as function pointers?  I think the main point is so that you are able to provide functions as callbacks.

This question is a good introduction: http://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work

!!Basics
{{{
// Function to which we will point
int addInt(int n, int m) {
    return n+m;
}

// Pointer to a function (int, int) -&gt; int
int (*functionPtr)(int,int);

// The types match, so you can point to the function.
functionPtr = &amp;addInt;

// Use the function at the end of the pointer
int sum = (*functionPtr)(2, 3); // sum == 5
}}}</pre>
</div>
<div title="DlsEnvironment" server.title="DlsEnvironment" server.page.revision="1420732" server.etag="&quot;willrogers_public/DlsEnvironment/1420732:e8738def3a2cddb686c46a4fc79f743d34275566&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130925122555" created="20130925122555" tags="" _hash="b22e355bc6e6080c782340509eedc948547ea69b">
<pre>!!!{{{dls_environment}}}
This seems to provide the locations on the {{{/dls_sw}}} filesystem.  The functions {{{devArea}}} and {{{prodArea}}} return locations on the {{{/dls_sw/prod}}} and {{{/dls_sw/work}}} filesystems respectively.  The one exception is that the prod location for EPICS is {{{/dls_sw/epics}}}, but the work location is {{{/dls_sw/work/epics}}}.

!!!!{{{dls_environment.py}}}
Contains the class {{{environment}}}, which does a bunch of mappings between versions and filesystem locations, and helper methods for this purpose.
!!!!{{{options.py}}}
A subclass of ~OptionParser,  with dls-specific options added as default - that is, {{{-a}}} (area), {{{-p}}} (python), {{{-i}}} (ioc)
!!!!{{{svn.py}}}
A class {{{svnClient}}} which provides all the details about the DLS svn repo.  It behaves like a {{{pysvn.Client()}}} object, but doesn't inherit from the class.</pre>
</div>
<div title="UbuntuTwelveTen" server.title="UbuntuTwelveTen" server.page.revision="937794" server.etag="&quot;willrogers_public/UbuntuTwelveTen/937794:6d3711c3b2129801a4c077d802001bca437f4753&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121110211719" created="20121110170847" tags="" _hash="fb846b6b2ecdf5a640e20151050cdf4c62bc9a11">
<pre>Installing alongside Windows 8 was painless.  However, when I tried to start Windows 8 again, it repaired itself a couple of times.  When it booted, a number of the Metro apps needed repairing, which you can do by going to the store.

!!Setup
* {{{sudo apt-get install aptitude}}}
* {{{sudo aptitude install vim}}}
* {{{sudo aptitude remove unity-lens-shopping}}}

!!Gnome
* {{{sudo aptitude install gnome-shell}}}
** I chose gdm when it gave me an option

I couldn't easily make proper multitouch work using the touchpad.  Instead, I opted to use the sides of the pad for scrolling.</pre>
</div>
<div title="CKeywords" server.title="CKeywords" server.page.revision="1308988" server.etag="&quot;willrogers_public/CKeywords/1308988:e67eb3fc51fa1595a12d7ca633d9d97f9cbb1bef&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130715155431" created="20130210103810" tags="" _hash="c4e189bae2fb7ff7e2dce9b433eac7dcb11a5cfc">
<pre>This page lists them all: http://tigcc.ticalc.org/doc/keywords.html

!!!{{{void}}}
This has several purposes:
* {{{int func(void) { .. } }}}
** This means that you're not allowed to pass an argument
* {{{void func(int i) { .. } }}}
** This means that the function returns nothing
* {{{void *p;}}}
** This means that the pointer doesn't have an explicit type, but it must be cast before dereferencing:
** {{{*(int*)p = 2;}}}
** The advantage is that the pointer can point to any type; the disadvantage is that you need to keep track of what it is actually pointing to.

!!!{{{const}}}
The {{{const}}} keyword has several interpretations.  The simple one is to declare a constant value: {{{const int ten = 10;}}}.  This means that the value of x is a constant, and any attempt to change it will result in a compiler error.

It gets much more complex when pointers are involved.
{{{
char * const str = "hello, world";
}}}
This makes the pointer constant, so while you can change the underlying string, you can't change the location specified by the pointer.
{{{
const char * str = "hello, world";
}}}
This is the opposite - the pointer value can be changed, but the underlying string cannot.  You can make them both constant with 
{{{
const char * const str = "hello world"; 
}}}
!!!{{{static}}}
This has two meanings:
* an external or global variable can't be used outside its file.  The same applies for functions.
* you can also set static variables in functions, which keep their values between function calls, similar to static variables in classes

!!!{{{union}}}
A union defines a variable which might have a different type at different times.  I don't think it's useful that often.

!!!{{{inline}}}
The idea behind this keyword is that it tells the compiler that this is an important function and it should try to optimise it.  There are a few ways of doing it, but the one I have seen is {{{static inline}}}.  The function was in a header file in this case.

!!!{{{register/volatile}}}
* {{{register}}} allows you to try and optimise code by saying a variable will be used a lot, but modern compilers ignore it.
* {{{volatile}}} is used if the variable may be altered unexpectedly, so you can make sure that it is loaded from memory each time rather than a cache.  It's fairly rare you'd want to use it, perhaps when dealing directly with hardware.</pre>
</div>
<div title="CEnums" server.title="CEnums" server.page.revision="1301284" server.etag="&quot;willrogers_public/CEnums/1301284:1613826dfdbd38e647b607452a36fb77c1f664fa&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130709094914" created="20130709092053" tags="" _hash="5444c1fdbec049b3b162222968d04280f94a0f29">
<pre>Enums are a ways of naming different values, so that you're not just using arbitrary constants all over the place.  They also make the code read more clearly, and allow some sort of type-checking.  Here's an example from Wikipedia:
&lt;&lt;&lt;
For instance:
myColor = TRIANGLE
can be forbidden, whilst
myColor = RED
is accepted, even if TRIANGLE and RED are both internally represented as 1.
&lt;&lt;&lt;
Here's an example:
{{{
enum boolean { NO, YES };
...
enum boolean finished = NO;
}}}
By default, an enum assigns 0 to the first item and imcrements; you can specify the first and it will increment from there, or you can specify them all.  In C, enums must be assigned integer values.

You cannot define two enums using the same name for some value.  Defining an enum effectively defines those constants.  This means that it is possible to define an anonymous enum.  Here's an example from FastFeedback:
{{{
enum {
  PM_POST = 0,
  PM_START,
  PM_FREE,
  PM_STOP
};
...
if(feedback.pmode == PM_STOP || (feedback.pmode == PM_POST &amp;&amp; feedback.ok == 0))
}}}
The {{{= 0}}} isn't strictly necessary in this example, because enums begin from zero by default.</pre>
</div>
<div title="VirtualMint" server.title="VirtualMint" server.page.revision="661471" server.etag="&quot;willrogers_public/VirtualMint/661471:0e928cccfedc1f822cf7647fa03d3eebe8690cff&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120331125236" created="20111020132156" tags="linux mint virtualbox" _hash="9efffe48ed23719bf6c3b8c96be8c90f5169f9a8">
<pre>An experimental attempt to install Linux Mint using VirtualBox. I followed the instructions in that page.

!!Running Slow
I think this is because I enabled 3D acceleration.  I changed this back, then set the video memory to 12MB, and it's working fine again.

!!Blocky Theme
Often, the desktop goes to a horrible blocky grey theme. You can fix it by running {{{sudo gnome-settings-daemon}}}.  However, to fix it on login, you have to follow the instructions [[here|http://www.webupd8.org/2011/06/fix-ubuntu-linux-mint-theme-changing-to.html]].


!!Configuration
You need the 'http://' on the front when setting http_proxy:
{{{
export http_proxy=http://wwwcache.rl.ac.uk:8080
}}}

!!Home 
I also installed this at home, and although it was very slow while it was installing it doesn't seem to be too bad when I'm using it.  Similarly, starting up takes a very long time, but pausing and restarting the machine is relatively quick.</pre>
</div>
<div title="LinuxFilesystem" server.title="LinuxFilesystem" server.page.revision="1614923" server.etag="&quot;willrogers_public/LinuxFilesystem/1614923:81f81b1c85b93bae723032c57903d3ed1d0a36d7&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20140103134508" created="20120627154652" tags="" _hash="57e9dd7c5ea1bf55b2d9b660ffb45e0d2389d623">
<pre>* See also LinuxLocations, LinuxPartitions, StickyBit

* {{{ls -al}}} shows full information about all files in a directory:

{{{
-rw-rw-r--  1 will will    75 Jul 28 12:20 .gitconfig
}}}
This includes:
* filetype
* permissions
* links?
* user 
* group
* size
* last changed
* name

!!!!File types
{{{/dev/}}} is a good place to go looking for less-common options. 
{{{
...
drwxr-xr-x   2 root root            80 Jan  3 10:18 dri
crw-------   1 root root       10,  61 Jan  3 10:18 ecryptfs
crw-rw----   1 root video      29,   0 Jan  3 10:18 fb0
lrwxrwxrwx   1 root root            13 Jan  3 10:18 fd -&gt; /proc/self/fd
crw-rw-rw-   1 root root        1,   7 Jan  3 10:18 full
crw-rw-rw-   1 root root       10, 229 Jan  3 10:18 fuse
crw-------   1 root root       10, 228 Jan  3 10:18 hpet
lrwxrwxrwx   1 root root            14 Jan  3 10:18 .initramfs -&gt; /run/initramfs
drwxr-xr-x   4 root root           320 Jan  3 10:18 input
crw-r--r--   1 root root        1,  11 Jan  3 10:18 kmsg
crw-rw----+  1 root root       10, 232 Jan  3 10:18 kvm
srw-rw-rw-   1 root root             0 Jan  3 10:18 log
brw-rw----   1 root disk        7,   0 Jan  3 10:18 loop0
...
}}}
* {{{-}}} is a regular file
* {{{d}}} is a directory
* {{{c}}} is a character stream, such as {{{/dev/null}}}, terminals
* {{{b}}} is a 'block device' such as a hard drive, CD or network drive
** devices ({{{b}}}, {{{c}}}) don't have a file size, but major and minor numbers referring to drivers and particular physical devices
* {{{s}}} is a socket
* {{{l}}} is a symbolic link
* {{{p}}} is a named pipe

!!Permissions
These are the standard permissions for user group and all.

</pre>
</div>
<div title="FakenhamFair" server.title="FakenhamFair" server.page.revision="364042" server.etag="&quot;willrogers_public/FakenhamFair/364042:4f0eb8367484cb88355c84c21a8e08acaa9e22d6&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110507181441" created="20110507142023" tags="bellowhead tab" _hash="5d14d439755feb50d16fb1650e0f532f420def50">
<pre>by Bellowhead

It's mostly in 5/4, though there are bits in between the singing that are 6/4.

{{{
  F            Bb
I never really fell in love
       F                     C
'Til I went down to Fakenham Fair
    F                          Bb
And chanced for to meet with a carnival girl
  F                    C
A-selling the fortunes there.
  Bb                   Bb
A try for a lamp, or a Spanish shawl
     F      C7  Bb
Or a golden filigree
    F       C         F         Bb
And all the while her eyes were saying
Bb          C7        F
Come take a chance on me.

   Bb                Bb
So swing around, the merry-go-round,
         F         C7       Bb
Give the wheel of fortune a whirl
        F      C        F        Bb
But the finest prize at Fakenham Fair
       Bb     C7       F
Is the pretty carnival girl.
                                
}}}</pre>
</div>
<div title="AccountingConsolidation" server.title="AccountingConsolidation" server.page.revision="363646" server.etag="&quot;willrogers_public/AccountingConsolidation/363646:1c49f70165052ef17986570615bea0a0b0740e14&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111017090206" created="20111017085448" tags="" _hash="9b48ab9821523564b6bdd4e1d6409450258fcd44">
<pre>One of EMI's aims is consolidation.  We've got some stuff.  We want to rationalise this stuff.  Here's the accounting part of that consolidation.

Information models
* Usage records more or less defined

Messaging systems 'adopted' by both APEL and DGAS, although I think Laurence was a bit optimistic about this.  Although DGAS information gets to APEL, you can hardly say that they are interoperable.

Harmonization of publishing clients
** DGAS Sensor
** APEL parsers
* What does EGI want?
* Is there a discussion for this? Do we need to know what's going on?  Does what is required filter through to us?

APEL or DGAS need to pick up some of this work?  John reckons there's no effort in APEL for this.  Storage?

In terms of other accounting, Laurence reckons we're not going to get through defining these etc within the last 18 months of EMI.</pre>
</div>
<div title="EmiCollaborations" server.title="EmiCollaborations" server.page.revision="922248" server.etag="&quot;willrogers_public/EmiCollaborations/922248:cdc59a6bb36492ad0e04ea1a6ff81a09c7d0814f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121029132528" created="20121029125223" tags="" _hash="eac3411a6854f3391f555d0dd46a0b26cf4109e0">
<pre>By Alberto di Meglio, EmiAhmBudapest

!!EMI Collaboration Plans
* Collaboration, current exploitation, deployment, commercial exploitation

* Collect information from partners about which products will be supported and how
* Produce a list of global tasks which EMI is providing - 20-25 people in total
* Determine which are needed after EMI
* How much of this could hypothetically be funded?

Then some discussion about the sustainability survey taken.

!!Collaboration Models
* Formal collaboration
* Technical coordination
* No explicit coordination

EGI and WLCG are working together on plans for post EGI/EMI strategies.

EGI proposes three types of product teams:
* Integrated: BDII, EMIR, VOMS, ARGUS, STS
* Community Platforms: ARC, UNICORE, CREAM, MPI, WN, UI, L&amp;B, proxyrenewal, dCache, ~StoRM, DPM, Hydra, AMGA, LFC, WMS FTC

</pre>
</div>
<div title="EpicsEdm" server.title="EpicsEdm" server.page.revision="1329004" server.etag="&quot;willrogers_public/EpicsEdm/1329004:590ddf22167e97361e50964b5d121f0ebeef0d95&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130731094128" created="20130703163540" tags="" _hash="2c5fc6d151769abe2c758c1d162c74ce8c2e77ed">
<pre>EDM is the 'extensible display manager' for EPICS.  It's a fairly old project, and it looks like it will be phased out over the next few years, but for the time being we have to support it.  Its webpage is here: http://ics-web.sns.ornl.gov/edm/.  The latest release was on 20/5/2013; you can find each version's source if you trawl back through the calendar on the webpage.

We are having problems moving to RHEL6 and 64-bit execution.  I've been given the job of debugging some of the code.

!!Environment
{{{
[hgs15624@pc0072 extensions]$ env | grep EPICS
EPICS_MBA_TEMPLATE_TOP=/dls_sw/epics/R3.14.11/base/templates/makeBaseApp/top
EPICS_BASE=/dls_sw/epics/R3.14.11/base
EPICS_EXTENSIONS=/dls_sw/epics/R3.14.11/extensions
EPICS_HOST_ARCH=linux-x86_64
DLS_EPICS_RELEASE=R3.14.11
EPICS_CA_MAX_ARRAY_BYTES=6000000
}}}

You can change these to change certain things about how EDM runs.

!!Compiling
CompilingEdm

!!Running
Having compiled my own version of edm, I've now got to figure out how to run it.

!!Bug
EdmBug

John Sinclair has now applied my patch and released a new version.

!!!Valgrind
I initially couldn't get any sensible output from valgrind.  This is because I was running it on a shell script {{{edm}}}.  Using the {{{--trace-children=yes}}} option means that you get the verbose output we need.

!!Versions
{{{edm -version}}} will give you the version. It is defined in {{{src/edm/lib/edm.version}}}.  It is also shown at the top of the annoying extra window each time you run a gui.
 

Now that the DiamondModules file {{{RHEL6-RHEL5}}} is not loaded by default, {{{which edm}}} returns
{{{
/dls_sw/epics/R3.14.11/extensions/bin/linux-x86/edm
}}}
Its version is {{{1-12-28}}}.

If you swap the EPICS version, it returns
{{{
/dls_sw/epics/R3.14.12.3/extensions/bin/linux-x86_64/edm
}}}
Its version is {{{1-12-85}}}.

The latest version of EDM is 1-12-89; it has been updated a few times since I started looking at it, and now my patch has been imported.


</pre>
</div>
<div title="VirtualSL6" server.title="VirtualSL6" server.page.revision="364890" server.etag="&quot;willrogers_public/VirtualSL6/364890:6abd43652862cb1706d715e6af1a8a17c5e3ae19&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120106152245" created="20120105163908" tags="" _hash="c3a5b7c2a7b74576368dbccbe12fb0e77cbb93a1">
<pre>See VirtualBox for general stuff.

I wanted to install a version of SL6 so that I could test my installations for EMI.

!!Notes
I had to install the LiveMiniCD to actually install it.  I then selected Install to Hard Drive from the IceWM menu which came up when I booted into the live CD.  The installation wizard failed once but worked next time.  I then had to remove the live CD and restart, at which point I gave a password for my user.

I chose password *******3 for will and ********2 for root.  Or the other way round, I can't remember.

* I had to visudo /etc/sudoers to add sudo rights to my main user (adding the second line here): 
{{{
root ALL=(ALL) ALL
will ALL=(ALL) ALL
}}}

To install guest additions, there were a few things I had to do:
* VBox menu -&gt; Devices -&gt; Install Guest Additions
* {{{mkdir /mnt/cdrom}}}
* {{{mount -t auto /dev/cdrom /mnt/cdrom}}}
* {{{yum install gcc}}}
* {{{yum install make}}}
* {{{yum update}}}
* {{{yum update kernel}}} - this took a good while to install - actually, not sure if it finished or if it was done by a later {{{yum update}}}.
* {{{yum install kernel-devel}}}
* {{{cd /mnt/cdrom}}}
* {{{./VBoxLinuxAdditions.run}}}

Even then it failed trying to do something with OpenGL, but I'm not sure what this is so I'm seeing if the desired effect has happened.

I'd like to get rid of the IceWM and get Gnome or KDE, but I'm not sure immediately how to do this.  I tried:

* {{{yum groupinstall "KDE Desktop"}}}, which was a 250MB download.  This worked fine - it gives you the option to log into KDE when you start.
</pre>
</div>
<div title="EmiSA2" server.title="EmiSA2" server.page.revision="710493" server.etag="&quot;willrogers_public/EmiSA2/710493:626481e032d3e3706d4028085bc1931037cfff20&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="201205150838" created="20111018153724" tags="" _hash="1b385408a7328fc54393bd81ea7ecf5107e241aa">
<pre>!!EMI SA2 - Quality Assurance
''Leader: Alberto Aimar''
https://twiki.cern.ch/twiki/bin/view/EMI/SA2

* Software Quality Assurance Plan
* Verification dashboard
* Product Teams:
** Testing report template
** Certification
** QA reports generated daily: cern.ch/emiqa
** Metrics for EPEL compliance (Debian to come)
* Bug-tracking dashboard (RfC tracking - same or not?)
* Rpmlint - check the quality of RPMs.
** The goal is to be EPEL-compliant, but I'm not sure that we know exactly what that entails.
* ETICS
** SL6, Debian 6
** Debian 6 testing infrastructure is not yet fully operational
** There is a Debian working group
** Maven repository?
** ETICS VM images - what are these for?
* EMI integration and certification testbed: EMI/TestBed.
** Also Large Scale Testing Testbed?
* Multiplatform handling
** Basically too many platforms to provide computers for.
** SL5, SL6, Debian 6; 32-bit, 64-bit; gLite, Unicore, ARC, EMI
* There are 22 QC checks on packages released; avg. no. passed has increaded from ~8 to ~16 since EMI1.
** A lot of failures are from lack of unit tests or regression tests.
* Some discussions about whether the QA process is useful.
** Does it find bugs?
** Should developers be finding all the bugs?  This seems unrealistic to me.
** Number of unit tests does not equal quality of tests
** Should bugs be found by the QA process?</pre>
</div>
<div title="EmiSA1" server.title="EmiSA1" server.page.revision="710518" server.etag="&quot;willrogers_public/EmiSA1/710518:f78220384cdb31a80f3febe21c2dc8445055030e&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120515090831" created="20111018153550" tags="emi" _hash="7d2a214cf4acdc30a819d8bc57959daa29556d17">
<pre>!!SA1 - Maintenance and Support

''Leader: Andrea Ceccanti''
https://twiki.cern.ch/twiki/bin/view/EMI/SA1

Parts:
* Software Maintenance: 3 types
** Corrective - priority deriven
** Adaptive - such as the new platforms supported
** Perfective - standardise, improve performance or functionality

* Release Management
** Three week update cycle: [[cycle updates|https://twiki.cern.ch/twiki/bin/view/EMI/EMI1Updates]]
** There are 54 products in EMI
** UMD redistributes EMI products - most but not quite all
** There is an extra roll-out phase for the UMD
** UMD version 1.2.0 was released in September

For Java projects, it might be wiser to get them into Maven Central than EPEL or Debian.
EMI wants the same versions in EMI and EPEL; if anything the EMI version should be newer.

Ticket response times, according to the SLA:
| Top priority | 4 hours |
| Very urgent | 2 days |
| Urgent | 5 days |
| Less urgent | 15 days |

* Ticket handling guidelines: http://bit.ly/user-support-howto

We have been doing well with respect to these targets.

</pre>
</div>
<div title="PThreads" server.title="PThreads" server.page.revision="1072076" server.etag="&quot;willrogers_public/PThreads/1072076:0e76757d3e95c01345f409d9ea456e8c52d19316&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130210175744" created="20130210162856" tags="c threads" _hash="3d59bb6f91acee9fd2c36eaea4d3266e2fdfb86e">
<pre>C and C++ use the POSIX thread specification, usually known as pthreads, and available in {{{&lt;pthread.h&gt;}}}.

This tutorial is very good and seems to be widely referenced: https://computing.llnl.gov/tutorials/pthreads/

The basic idea is that a process is fairly heavyweight, with its own complete memory allocation.  A thread is like a mini-process, with its own stack, but it shares the heap with the rest of the program.  The obvious problem with this is that you've got to be careful managing those shared resources to make sure the different threads don't do something inconsistent.

!!!Basics
You create any threads you want using the {{{pthread_create()}}} function.  You can pass it a function which it will carry out, and one argument, which may be a struct if you want to pass more information.

At the end, calling {{{pthread_exit()}}} helps avoid problems if the main function would exit before the threads themselves.

To get control back to the main thread, call {{{pthread_join()}}} with the thread's ID.

</pre>
</div>
<div title="PythonClasses" server.title="PythonClasses" server.page.revision="901920" server.etag="&quot;willrogers_public/PythonClasses/901920:e9dcde3818ade6e98643d9d5305cf1c904ed0a3e&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121007113708" created="20110727162838" tags="oop python" _hash="84421a0017588779211e07d2cdf9ca6597453d24">
<pre>I just found that I didn't understand python classes as well as I thought I did.  The Python Tutorial page is here: http://docs.python.org/tutorial/classes.html

See PythonStructs and PythonGarbage as well.

First, read PythonSelf.

!!Basics

To define a class:
{{{
class RecordGenerator(object):
    '''Demonstration class'''
    def __init__(self):    
        '''Constructor'''
        self._recs_per_msg = 0
        self._no_msgs = 0
        self._msg_path = ''
}}}
To inherit from the class:
{{{
class JobRecordGenerator(RecordGenerator):
    '''Inherits from RecordGenerator'''
    # Call the parent constructor
    super(JobRecordGenerator, self).__init()
    ... do something else ...
}}}

There is another way to call the parent constructor:
{{{
RecordGenerator.__init__(self)
}}}
I'm not yet sure which is better.  However, you do have to call the parent constructor explicitly.

Python supports multiple inheritance - you can put more than one parent in the parentheses.

To create an instance, just do it:
{{{
jrg = JobRecordGenerator()
}}}
To call a method from the parent class:
{{{
    record = RecordGenerator._get_record(self, keys, job_id)
}}}

It uses 'new style' classes which inherit from object, but I don't think there's any reason to use old style classes.

If a method is called on a subclass and there's no such method in there, it will look for the parent's version and call that.

!!{{{__init__(self, ...)}}}
The {{{__init__}}} method is like a constructor, but not exactly the same.  The instance of the class is created before {{{__init__}}} is called, but that is the next thing that happens.  Init methods can have default arguments like any function.

Init never returns a value.

!!Overloading
There is ''no'' overloading of methods or functions.  The name is the only way to refer to the method.  In Java, a method of the same name with different argument types can be a different method, but this is not the case in python.

!!Overriding
When you redefine a method in a derived class, you '''override''' the method in the base class.  Note that in python, this means that when that method is called, the overridden method will be used, even if (for example) the base class is calling the method and expects the original method to be called.

!!Special methods
When you create a class, there are some special methods you can define:
* {{{__len__}}} returns the length of an object, which then is returned from {{{len(obj)}}}
* {{{__cmp__}}} checks whether an item is equal
* {{{__repr__}}} returns a string representation

{{{__setitem__}}}, {{{__getitem__}}}, {{{__delitem__}}} mean that any class can act as a dictionary.

!!Class attributes
Logically enough, these are variables which are assigned to the class rather than any instance of the class.  They are equivalent to static variables in Java.  You put them in the logical place, inside the class definition but not in the init method.  They can be used as constants, but they can change.

You can get at them either using the class name or using an instance name.

!!Privacy
You can make a method or function private by starting it with two underscores.  It is then not allowed to call it directly, but there is a way using 'name-mangling'.  A variable or function beginning with one underscore is private by convention.</pre>
</div>
<div title="ThingsIdLike" server.title="ThingsIdLike" server.page.revision="1001634" server.etag="&quot;willrogers_public/ThingsIdLike/1001634:48aac6750f65fd43d98acac4b2ff266b9fd7fa18&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121224200853" created="20121118105201" tags="" _hash="8bdaf81d15846bdb006d504e76b679cc840e59bd">
<pre>!Things I'd Like

* Integrated delicious on Android
* OS maps on Android
* Free Android tracker app
** Tracker app with OS maps
* Decent free photo resizer
* A list of music not on Spotify
* A proper phone call charge calculator
* A delicious add-on for opera
* Data counter for PC
* Album length on Spotify</pre>
</div>
<div title="CoThread" server.title="CoThread" server.page.revision="1567168" server.etag="&quot;willrogers_public/CoThread/1567168:3a3825b9858547eef54d37b5887b13430343ecaa&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131129142942" created="20130520145949" tags="cothread epics python" _hash="bf50c09366ad7a09801cf356ff1f77bbc623fc86">
<pre>The EPICS python library, maintained by Michael Abbott, is built on top of the {{{cothread}}} package.  This is quite complex, because it requires a C python extension and even assembler to enable the frame switching needed by the coroutines.

To build cothread, use the magic command
{{{
dls-python setup.py build_ext -i
}}}

!!Usage
The top-level script must import cothread, spawn any child cothreads, and finally call {{{WaitForQuit()}}} or {{{WaitForAll()}}} before exiting.  This allows any cothreads to finish before the main thread exits.

Create a new cothread using {{{Spawn()}}}.  A function is passed; that function will be executed inside the cothread.

Each thread must take responsibility for ceding control when it doesn't need it, by calling one of the methods {{{Sleep()}}}, {{{SleepUntil()}}}, {{{Yield()}}}, {{{event.Wait()}}}.  

{{{caget()}}} is always a suspension point. {{{caput()}}} is generally a suspension point.  {{{camonitor()}}} does not suspend, so any code calling {{{camonitor()}}} will happily continue until a a suspension point is reached.

!!!Events
There are four types of event object, each a subclass of {{{EventBase}}}:
* {{{Event}}}
* {{{Spawn}}}
* {{{EventQueue}}}
* {{{Pulse}}}
You can create your own events, and use {{{event.Signal()}}} and {{{event.Wait()}}} to control flow of execution.

!!{{{cothread.py}}}
This contains the following.  An asterisk means that the item is in the public interface.
!!!Classes
* {{{_TimerQueue}}}
* {{{_WakeupQueue}}}
* {{{_Wakeup}}}
* {{{_Scheduler}}}
* *{{{Timedout}}} - an exception
* {{{EventBase}}}
** *{{{Spawn}}} 
** *{{{Event}}}
** *{{{Pulse}}}
** *{{{EventQueue}}}
* *{{{ThreadedEventQueue}}}
* {{{_Callback}}}
* *{{{Callback = _Callback()}}} - not sure of the purpose of this
* *{{{Timer}}}

!!!Methods

* *{{{WaitForAll}}}
* *{{{Quit}}}
* *{{{WaitForQuit}}}
* {{{_validate_thread}}}
* *{{{SleepUntil}}}
* *{{{Sleep}}}
* *{{{Yield}}}

!!!!Timeouts
These methods just manage the differences between a deadline (i.e. epoch time) and a timeout interval (a relative length of time).
* *{{{AbsTimeout}}}
* *{{{GetDeadline}}}
* *{{{Deadline}}}</pre>
</div>
<div title="EclipseDiamond" server.title="EclipseDiamond" server.page.revision="1255989" server.etag="&quot;willrogers_public/EclipseDiamond/1255989:57dc4738018be454744f1cb11d162d3fca1ce334&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130611153333" created="20130604130808" tags="eclipse pydev python" _hash="9deda77200b435994bf6d5531bb62db51207a29d">
<pre>Eclipse is installed on the Diamond machines, but I can't install addons because I don't have root.  This is how I set up eclipse locally.

!!Eclipse
Download a new version (I've got Juno service release 2)
* Unzip it to {{{/scratch/will/eclipse}}}
* You can then run it with {{{/scratch/will/eclipse/eclipse}}}

!!~PyDev
I installed this in a regular fashion (see EclipseNotes).  Same goes for Vrapper.

!!Python
This is a bit involved. 
!!!!{{{dls-python2.7}}}
Its path is {{{/dls_sw/prod/tools/RHEL6-x86_64/defaults/bin/dls-python2.7}}}.  I then kept the libraries from ~RHEL6 x86_64 and python 2.7.
!!!!{{{dls-python2.6}}}
Path: {{{/dls_sw/prod/tools/RHEL5/bin/python}}}.

!!~PyLint
~PyDev knows about pylint, but needs the executable.
</pre>
</div>
<div title="VirtualBox" server.title="VirtualBox" server.page.revision="364860" server.etag="&quot;willrogers_public/VirtualBox/364860:8c9a2d8ece1ecb8e6da6a2b1352399f20ff62ab9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120106094526" created="20110421105408" tags="machine virtual virtualbox vm" _hash="a53ff493304cf7ae55739c04419cc84297d0bdac">
<pre>Installing VirtualBox is a lot easier even than when I started working at RAL.  This page is about installing any virtual machine.  Notes on individual installations: VirtualUbuntu, VirtualMint, VirtualDebian, VirtualSL6.

!!!Installation
* Create a new virtual machine, using the defaults (except I tend to give 1GB RAM)
* Start the machine, and specify the appropriate ISO

!!!Configuration
* Devices -&gt; Install Guest Additions...
** autorun (you need to do this every time updates mean a restart is required (or maybe not any more))

!!!Shared Folders
* Create a shared folder in the settings menu while the machine is turned off
** Give it a name
* Create a mount point directory in Linux
* {{{ mount -t vboxsf &lt;folder-name&gt; &lt;mount-point&gt; }}}

</pre>
</div>
<div title="CsscStuff" server.title="CsscStuff" server.page.revision="910262" server.etag="&quot;willrogers_private/CsscStuff/910262:a2fa91f6c43dabea15892b866e4eada13163b625&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20121017200313" created="20121017200313" tags="" _hash="303e77c3fc5e740f65394d1937f4c82e0f4d9e16">
<pre>CSSC Number: 09080381.

!!Sainsbury's card
Card number: 6341751113253644243
Card ref: 69137876

</pre>
</div>
<div title="NikonCamera" server.title="NikonCamera" server.page.revision="364401" server.etag="&quot;willrogers_public/NikonCamera/364401:f54fdbab05eebd04ca0a7369f11ff56e7224a3ff&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110426191217" created="20110425092431" tags="camera" _hash="f25730089f9187c0040c529ce0fa13575d24ec1a">
<pre>* Here's a review: http://www.imaging-resource.com/PRODS/ND60/ND60A.HTM
* Is it worth using the RawFiles yet, or is it unnecessary for the time being?
* ISO used to measure 'film speed', but now it corresponds to 'gain' on the camera's CCD. 
* sRGB is I think a colour range 'RGB colour space' developed by HP and Microsoft for digital devices.  Adobe RGB is another proprietary format.  I seem to have the option, but of course I don't know what the difference really is.</pre>
</div>
<div title="RevisionsCommandPlugin" server.title="RevisionsCommandPlugin" server.page.revision="1521856" server.etag="&quot;system/RevisionsCommandPlugin/1521856:f28a31e49681066d5bffc8ac75e559b638d22282&quot;" modifier="FND" creator="FND" server.workspace="bags/system" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system" server.permissions="read" server.content-type="text/javascript" modified="20130924180405" created="20130924180405" tags="excludeLists excludeSearch systemConfig" _hash="d36d2c8a7f8dd9a59dd54e772114a415b2c22979">
<pre>/***
|''Name''|RevisionsCommandPlugin|
|''Description''|provides access to tiddler revisions|
|''Author''|FND|
|''Contributors''|Martin Budden|
|''Version''|0.3.3|
|''Status''|@@beta@@|
|''Source''|http://svn.tiddlywiki.org/Trunk/association/plugins/RevisionsCommandPlugin.js|
|''CodeRepository''|http://svn.tiddlywiki.org/Trunk/association/plugins/|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''CoreVersion''|2.6.0|
|''Keywords''|serverSide|
!Usage
Extend [[ToolbarCommands]] with {{{revisions}}}.
!Revision History
!!v0.1 (2009-07-23)
* initial release (renamed from experimental ServerCommandsPlugin)
!!v0.2 (2010-03-04)
* suppressed wikification in diff view
!!v0.3 (2010-04-07)
* restored wikification in diff view
* added link to side-by-side diff view
!To Do
* strip server.* fields from revision tiddlers
* resolve naming conflicts
* i18n, l10n
* code sanitizing
* documentation
!Code
***/
//{{{
(function($) {

jQuery.twStylesheet(".diff { white-space: pre, font-family: monospace }",
	{ id: "diff" });

var cmd = config.commands.revisions = {
	type: "popup",
	hideShadow: true,
	text: "revisions",
	tooltip: "display tiddler revisions",
	revTooltip: "", // TODO: populate dynamically?
	loadLabel: "loading...",
	loadTooltip: "loading revision list",
	selectLabel: "select",
	selectTooltip: "select revision for comparison",
	selectedLabel: "selected",
	compareLabel: "compare",
	linkLabel: "side-by-side view",
	revSuffix: " [rev. #%0]",
	diffSuffix: " [diff: #%0 #%1]",
	dateFormat: "YYYY-0MM-0DD 0hh:0mm",
	listError: "revisions could not be retrieved",

	handlePopup: function(popup, title) {
		title = this.stripSuffix("rev", title);
		title = this.stripSuffix("diff", title);
		var tiddler = store.getTiddler(title);
		var type = _getField("server.type", tiddler);
		var adaptor = new config.adaptors[type]();
		var limit = null; // TODO: customizable
		var context = {
			host: _getField("server.host", tiddler),
			workspace: _getField("server.workspace", tiddler)
		};
		var loading = createTiddlyButton(popup, cmd.loadLabel, cmd.loadTooltip);
		var params = { popup: popup, loading: loading, origin: title };
		adaptor.getTiddlerRevisionList(title, limit, context, params, this.displayRevisions);
	},

	displayRevisions: function(context, userParams) {
		removeNode(userParams.loading);
		if(context.status) {
			var callback = function(ev) {
				var e = ev || window.event;
				var revision = resolveTarget(e).getAttribute("revision");
				context.adaptor.getTiddlerRevision(tiddler.title, revision, context,
					userParams, cmd.displayTiddlerRevision);
			};
			var table = createTiddlyElement(userParams.popup, "table");
			for(var i = 0; i &lt; context.revisions.length; i++) {
				var tiddler = context.revisions[i];
				var row = createTiddlyElement(table, "tr");
				var timestamp = tiddler.modified.formatString(cmd.dateFormat);
				var revision = tiddler.fields["server.page.revision"];
				var cell = createTiddlyElement(row, "td");
				createTiddlyButton(cell, timestamp, cmd.revTooltip, callback, null,
					null, null, { revision: revision });
				cell = createTiddlyElement(row, "td", null, null, tiddler.modifier);
				cell = createTiddlyElement(row, "td");
				createTiddlyButton(cell, cmd.selectLabel, cmd.selectTooltip,
					cmd.revisionSelected, null, null, null,
					{ index:i, revision: revision, col: 2 });
				cmd.context = context; // XXX: unsafe (singleton)!?
			}
		} else {
			$("&lt;li /&gt;").text(cmd.listError).appendTo(userParams.popup);
		}
	},

	revisionSelected: function(ev) {
		var e = ev || window.event;
		e.cancelBubble = true;
		if(e.stopPropagation) {
			e.stopPropagation();
		}
		var n = resolveTarget(e);
		var index = n.getAttribute("index");
		var col = n.getAttribute("col");
		while(!index || !col) {
			n = n.parentNode;
			index = n.getAttribute("index");
			col = n.getAttribute("col");
		}
		cmd.revision = n.getAttribute("revision");
		var table = n.parentNode.parentNode.parentNode;
		var rows = table.childNodes;
		for(var i = 0; i &lt; rows.length; i++) {
			var c = rows[i].childNodes[col].firstChild;
			if(i == index) {
				if(c.textContent) {
					c.textContent = cmd.selectedLabel;
				} else {
					c.text = cmd.selectedLabel;
				}
			} else {
				if(c.textContent) {
					c.textContent = cmd.compareLabel;
				} else {
					c.text = cmd.compareLabel;
				}
				c.onclick = cmd.compareSelected;
			}
		}
	},

	compareSelected: function(ev) {
		var e = ev || window.event;
		var n = resolveTarget(e);
		var context = cmd.context;
		context.rev1 = n.getAttribute("revision");
		context.rev2 = cmd.revision;
		context.tiddler = context.revisions[n.getAttribute("index")];
		context.format = "unified";
		context.adaptor.getTiddlerDiff(context.tiddler.title, context,
			context.userParams, cmd.displayTiddlerDiffs);
	},

	displayTiddlerDiffs: function(context, userParams) {
		var tiddler = context.tiddler;
		tiddler.title += cmd.diffSuffix.format([context.rev1, context.rev2]);
		tiddler.text = "{{diff{\n" + context.diff + "\n}}}";
		tiddler.tags = ["diff"];
		tiddler.fields.doNotSave = "true"; // XXX: correct?
		if(!store.getTiddler(tiddler.title)) {
			store.addTiddler(tiddler);
		}
		var src = story.getTiddler(userParams.origin);
		var tiddlerEl = story.displayTiddler(src, tiddler);
		var uri = context.uri.replace("format=unified", "format=horizontal");
		var link = $('&lt;a target="_blank" /&gt;').attr("href", uri).text(cmd.linkLabel);
		$(".viewer", tiddlerEl).prepend(link);
	},

	displayTiddlerRevision: function(context, userParams) {
		var tiddler = context.tiddler;
		tiddler.title += cmd.revSuffix.format([tiddler.fields["server.page.revision"]]);
		tiddler.fields.doNotSave = "true"; // XXX: correct?
		if(!store.getTiddler(tiddler.title)) {
			store.addTiddler(tiddler);
		}
		var src = story.getTiddler(userParams.origin);
		story.displayTiddler(src, tiddler);
	},

	stripSuffix: function(type, title) {
		var str = cmd[type + "Suffix"];
		var i = str.indexOf("%0");
		i = title.indexOf(str.substr(0, i));
		if(i != -1) {
			title = title.substr(0, i);
		}
		return title;
	}
};

var _getField = function(name, tiddler) {
	return tiddler.fields[name] || config.defaultCustomFields[name];
};

})(jQuery);
//}}}</pre>
</div>
<div title=".bashrc" server.title=".bashrc" server.page.revision="363640" server.etag="&quot;willrogers_public/.bashrc/363640:26747c7de14b5fdeaf0d61fe52bc9451e61f579b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120307094707" created="20110505103001" tags="bash linux" _hash="90f0b31421ec5233dc60d928817da5ce35de891f">
<pre>Custom bash profile.

* For ssh-agent, see SshKeyAuthentication
* {{{alias ls='ls --color=tty'}}} - colour highlighting
* {{{alias ll='ls -al'}}}

You can set ~PS1 here, which controls what your prompt looks like.  ~PS2 is the secondary prompt, which shows up when a command isn't completed (mis-matching quotes).  Variables available include:
* {{{\w}}} - current working directory
* {{{\u@\h}}} - username and hostname
* {{{ \d@\t}}} - date and time
* {{{\s-\v}}} - shell and version</pre>
</div>
<div title="BinaryTiddlersPlugin" server.title="BinaryTiddlersPlugin" server.page.revision="1521855" server.etag="&quot;system/BinaryTiddlersPlugin/1521855:92daf432500febd5ae942262a62ec28f523cc754&quot;" modifier="FND" creator="FND" server.workspace="bags/system" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system" server.permissions="read" server.content-type="text/javascript" modified="20130924180405" created="20130924180405" tags="excludeLists excludeSearch systemConfig" _hash="bb40914e9b2e79bd868d4c824ef8e42e617f4309">
<pre>/***
|''Name''|BinaryTiddlersPlugin|
|''Description''|renders base64-encoded binary tiddlers as images or links|
|''Author''|FND|
|''Version''|0.3.2|
|''Status''|@@beta@@|
|''Source''|http://svn.tiddlywiki.org/Trunk/association/plugins/BinaryTiddlersPlugin.js|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''CoreVersion''|2.5|
!Code
***/
//{{{
(function($) {

"use strict";

var ctfield = "server.content-type";

var plugin = config.extensions.BinaryTiddlersPlugin = {
	isWikiText: function(tiddler) {
		var ctype = tiddler.fields[ctfield];
		if(ctype) {
			if (ctype === 'text/x-tiddlywiki') {
				return true;
			}
			return !this.isBinary(tiddler) &amp;&amp; !this.isTextual(ctype);
		} else {
			return true;
		}
	},
	// NB: pseudo-binaries are considered non-binary here
	isBinary: function(tiddler) {
		var ctype = tiddler.fields[ctfield];
		return ctype ? !this.isTextual(ctype) : false;
	},
	isTextual: function(ctype) {
		return ctype.indexOf("text/") === 0
			|| this.endsWith(ctype, "+xml")
			|| ctype === 'application/json'
			|| ctype === 'application/javascript';
	},
	endsWith: function(str, suffix) {
		return str.length &gt;= suffix.length &amp;&amp;
			str.substr(str.length - suffix.length) === suffix;
	},
	isLink: function(tiddler) {
		return this.isBinary(tiddler) &amp;&amp; tiddler.text.indexOf("&lt;html&gt;") !== -1;
	}
};

// Disable edit for linked tiddlers (for now)
// This will be changed to a GET then PUT
config.commands.editTiddler.isEnabled = function(tiddler) {
    var existingTest = config.commands.editTiddler.isEnabled;
    if (existingTest) {
        return existingTest &amp;&amp; !plugin.isLink(tiddler);
    } else {
        return !plugin.isLink(tiddler);
    }
};

// hijack text viewer to add special handling for binary tiddlers
var _view = config.macros.view.views.wikified;
config.macros.view.views.wikified = function(value, place, params, wikifier,
		paramString, tiddler) {
	var ctype = tiddler.fields["server.content-type"];
	if(params[0] === "text" &amp;&amp; ctype &amp;&amp; ctype !== 'text/x-tiddlywiki' &amp;&amp;
			!tiddler.tags.contains("systemConfig") &amp;&amp; !plugin.isLink(tiddler)) {
		var el;
		if(plugin.isBinary(tiddler)) {
			var uri = "data:%0;base64,%1".format([ctype, tiddler.text]); // TODO: fallback for legacy browsers
			if(ctype.indexOf("image/") === 0) {
				el = $("&lt;img /&gt;").attr("alt", tiddler.title).attr("src", uri);
			} else {
				el = $("&lt;a /&gt;").attr("href", uri).text(tiddler.title);
			}
		} else {
			el = $("&lt;pre /&gt;").text(tiddler.text);
		}
		el.appendTo(place);
	} else {
		_view.apply(this, arguments);
	}
};

// hijack edit macro to disable editing of binary tiddlers' body
var _editHandler = config.macros.edit.handler;
config.macros.edit.handler = function(place, macroName, params, wikifier,
		paramString, tiddler) {
	if(params[0] === "text" &amp;&amp; plugin.isBinary(tiddler)) {
		return false;
	} else {
		_editHandler.apply(this, arguments);
	}
};

// hijack autoLinkWikiWords to ignore binary tiddlers
var _autoLink = Tiddler.prototype.autoLinkWikiWords;
Tiddler.prototype.autoLinkWikiWords = function() {
	return plugin.isWikiText(this) ? _autoLink.apply(this, arguments) : false;
};

}(jQuery));
//}}}</pre>
</div>
<div title="NewFlatCosts" server.title="NewFlatCosts" server.page.revision="650415" server.etag="&quot;willrogers_public/NewFlatCosts/650415:38e34a7e3a0c053a72f8f10f1f192366bf5ad8c5&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120324111154" created="20120317220256" tags="" _hash="09babdc1bf5123c6cce6dd4ec7d7cd5a0a951cb1">
<pre>| ''Thing'' | ''Cost'' | ''Paid'' |
| Bathroom bin | £2 | Will |
| Lampshade x4 | £7 | Will |
| Table | £15 | Will |
| TV Table | £15 | Will |
| Chair | £3 | Will |
| Big bin | £2 | Will |
| Cutlery drainer | £5 | Will |
| Coat hook | £4 | Will |
| Hanging coat hooks | £13 | Will |
| Light cord | £2 | Will |
| Ironing board | £15 | Will |
| Knife | £5 | Liz |
| Mirror + bowl | £3 | Liz |
| TV cable adaptors | £3 | Will |

Will: £86
Liz: £8

| ''Service'' | ''Cost'' | ''Paid'' |
| 1st account Iffley Rd | £1277 | Will |
| TV Licence | £145.50 | Will |
| Electricity tokens | £40 | Will |
| Insurance | £70 | Will |

Will: £255</pre>
</div>
<div title="ExternalConnection" server.title="ExternalConnection" server.page.revision="1325041" server.etag="&quot;willrogers_public/ExternalConnection/1325041:1a78cef6ed54783226b4504c0c9d72a32c91c1ea&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130727101859" created="20130727101649" tags="" _hash="6dcf5a6f45cced18e3d00aca6d82d5961afa3264">
<pre>There are several ways to connect to Diamond.

* VPN: this allows you to see the intranet etc.  See StfcVpn

* SSH: I found directions on the controls wiki here: http://www.cs.diamond.ac.uk/cgi-bin/wiki.cgi/External_access_to_DLS_intranet

* SCP: I needed to tunnel via my SSH connection, adapting the instructions here: http://whoochee.blogspot.co.uk/2012/07/scp-via-ssh-tunnel.html.

</pre>
</div>
<div title="JavaClasspath" server.title="JavaClasspath" server.page.revision="364220" server.etag="&quot;willrogers_public/JavaClasspath/364220:7c9cb8028cdc98127a777afdbc5efc946c61bea6&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120112172041" created="20120112142151" tags="" _hash="1bf32e0743db51a4006fab0921c18ec0e10b2307">
<pre>Java, javac and classpaths and stuff remain a bit of a mystery to me, just because they are usually handled by IDEs etc.

!!javac
* Specify the classpath for jar files, and {{{.java}}} files at the end which you want to compile.
{{{
javac -classpath lib/log4j-1.2.16.jar:lib/mysql-connector-java-5.1.6.jar src/topology/*.java
}}}
!!java
* Specify the classpath and the main class you want to start running from
{{{
java -cp lib/mysql-connector-java-5.1.6.jar:lib/log4j-1.2.16.jar:lib/topology.jar -Dapel.properties=config/configuration2.properties topology.Main
}}}
You can pass properties to the VM using -D.
!!Classpath
The classpath is used by both {{{java}}} and {{{javac}}}:
{{{java -cp &lt;locations&gt; &lt;main class&gt;}}}
* Different locations in the classpath are separated by colons (on Linux; they may be semicolons on Windows).
* The classpath can include {{{.class}}} files and {{{.jar}}} files

!!jar
The command {{{jar}}} is used to create jar files, requiring the {{{.class}}} files to have been compiled first.  If you want to run the jar directly, you need to specify the main class while you're building the jar, but see the note below.  So:
{{{
jar cf topology.jar topology/*.class
}}}
or 
{{{
jar cfe topology.jar topology.Main topology/*.class
}}}
where 'e' specifies the entry class.

To run a jar, you can use:
{{{
java -jar topology.jar
}}}
For this to work, you have to have specified a main class.
''Note:'' {{{java -jar -cp ...}}} doesn't work!  It just ignores the classpath.  You can just put the jar file you want to run on the classpath and specify the main class instead.
</pre>
</div>
<div title="PythonMachine" server.title="PythonMachine" server.page.revision="1597255" server.etag="&quot;willrogers_public/PythonMachine/1597255:be738bea18cc666b22edf387d09034b283dadbc0&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131216093406" created="20131216092334" tags="" _hash="6ce0fd9952e8fd2b0ed64c60f405a69bc023eb33">
<pre>This is one of the Python modules - it seems to be a simulator of sorts.

!!Modules
* {{{accelerator.py}}}:  1406 - essentially a list of the 1386 devices in the ring
* {{{addlengths.py}}}:  79 - if you run it, it prints out details of 1000 devices in the ring
* {{{canvas.py}}}:  47 - Qt canvas for some purpose
* {{{device.py}}}:  49 - class {{{Device}}}, functions {{{start}}}, {{{end}}}, {{{device}}}
* {{{devices.py}}}:  1386 - similar to accelerator.py ? 
* {{{geo.py}}}:  113 - apparently some geometry
* {{{__init__.py}}}:  1
* {{{make3d.py}}}:  2898
* {{{vrml.py}}}:  44 - this seems to be displaying something using the Python bindings to Coin3d

</pre>
</div>
<div title="DiamondScripts" server.title="DiamondScripts" server.page.revision="1420738" server.etag="&quot;willrogers_public/DiamondScripts/1420738:b6d628afe4e277ba7e7c1dd07b13a913f34bd64e&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130925122729" created="20130923095930" tags="" _hash="9efaf02e37c3774c1a52a158568e2a9b8e259f3f">
<pre>There are three python packages containing code written to help manage the DiamondAde.  They are:
* DlsEnvironment - tools providing information about the DLS filesystems
* DlsScripts - various scripts for several purposes
* DlsRelease - scripts used to automate releases

!!Location

* In Red Hat 5,  they are in {{{/dls_sw/prod/common/python}}}, with external tools
* In Red Hat 6, they are in the nested directory {{{/dls_sw/prod/common/python/RHEL6-x86_64}}}


</pre>
</div>
<div title="close.svg" server.title="close.svg" server.page.revision="1521888" server.etag="&quot;tiddlyspace/close.svg/1521888:5a53de694532a867c12970ac7b3316c4c925c922&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="image/svg+xml" modified="20131111192334" created="20131111192334" tags="excludeLists excludeSearch" _hash="b21fe0ea0a8dba52788155f5ed2188b45210d076">
<pre>&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;!-- Created with Inkscape (http://www.inkscape.org/) --&gt;

&lt;svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   version="1.1"
   width="14pt"
   height="14pt"
   viewBox="918 510 14 14"
   id="svg3070"&gt;
  &lt;metadata
     id="metadata3089"&gt;
    &lt;rdf:RDF&gt;
      &lt;cc:Work
         rdf:about=""&gt;
        &lt;dc:format&gt;image/svg+xml&lt;/dc:format&gt;
        &lt;dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /&gt;
        &lt;dc:title&gt;&lt;/dc:title&gt;
      &lt;/cc:Work&gt;
    &lt;/rdf:RDF&gt;
  &lt;/metadata&gt;
  &lt;defs
     id="defs3072"&gt;
    &lt;radialGradient
       cx="0"
       cy="0"
       r="1"
       id="Gradient"
       gradientUnits="userSpaceOnUse"&gt;
      &lt;stop
         id="stop3075"
         style="stop-color:#ffffff;stop-opacity:1"
         offset="0" /&gt;
      &lt;stop
         id="stop3077"
         style="stop-color:#2b2b2b;stop-opacity:1"
         offset="1" /&gt;
    &lt;/radialGradient&gt;
    &lt;radialGradient
       id="Obj_Gradient"
       xlink:href="#Gradient"
       gradientTransform="matrix(11.473944,0,0,11.473944,922.3752,513.7837)" /&gt;
  &lt;/defs&gt;
  &lt;g
     id="g3080"
     style="fill:none;stroke:none"&gt;
    &lt;g
       id="g3082"&gt;
      &lt;path
         d="m 929.6952,512.9018 c -2.5384,-2.53843 -6.654,-2.53843 -9.1924,0 -2.5384,2.5384 -2.5384,6.654 0,9.19238 2.5384,2.53839 6.654,2.53839 9.1924,0 2.5384,-2.53838 2.5384,-6.65398 0,-9.19238 m -4.5962,2.8407 2.07733,-2.07734 1.75547,1.75549 -2.0773,2.07735 2.0773,2.07732 -1.75547,1.75548 -2.07733,-2.07732 -2.07733,2.07732 -1.75547,-1.75548 2.0773,-2.07732 -2.0773,-2.07735 1.75547,-1.75549 z"
         id="path3084"
         style="fill:url(#Obj_Gradient)" /&gt;
      &lt;path
         d="m 927.61447,515.38354 a 4.51205,4.2590378 0 1 1 -9.0241,0 4.51205,4.2590378 0 1 1 9.0241,0 z"
         transform="matrix(1.0218069,0,0,1.0462046,-18.063694,-21.648443)"
         id="path2394"
         style="fill:#000000;fill-opacity:0;fill-rule:evenodd;stroke:none;stroke-width:5;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" /&gt;
    &lt;/g&gt;
  &lt;/g&gt;
&lt;/svg&gt;</pre>
</div>
<div title="MessagingPatterns" server.title="MessagingPatterns" server.page.revision="364314" server.etag="&quot;willrogers_public/MessagingPatterns/364314:9754c378fe2b70520e2dd0d44ce89e8c02c51e06&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111123170717" created="20111116085515" tags="" _hash="603dd213b19c46d9e9f8c4aef68508294b4ed6d2">
<pre>'Messaging' is some kind of standard programming / software engineering paradigm.  The EGI and EMI take on messaging is a little different, or it seems to me to be.  That's focused very much around ActiveMQ and a broker network.  What's actually probably happened here is that 'messaging' as a concept has probably been thoroughly researched and the conclusions have led to the broker network.

!!Messaging in general
The idea is that you have some number of applications which need to share data.  They're not the same application, so you need some standard way of doing it rather than just passing the data around arbitrarily.  From the EAI patterns website:
&lt;&lt;&lt;
Use Messaging to transfer packets of data frequently, immediately, reliably, and asynchronously, using customizable formats.  Asynchronous messaging is fundamentally a pragmatic reaction to the problems of distributed systems. Sending a message does not require both systems to be up and ready at the same time. Furthermore, thinking about the communication in an asynchronous manner forces developers to recognize that working with a remote application is slower, which encourages design of components with high cohesion (lots of work locally) and low adhesion (selective work remotely).
&lt;&lt;&lt;
Asynchronicity is a fundamental part of messaging.  

!!Messaging components
* MessageChannel - a sort of pipe between one application and another, through which the messages pass (topics and queues)
** A message is sent to a particular channel
** An application listens to a particular channel
* ''Message'' - a self-contained packet of data.  It will either get to the other end or not
* ''Routing'' - there can be many channels and a message might have to pass through more than one.  A router handles this logic so that the sending application doesn't need to know all the details
** It's a sort of filter which switches the message direction according to some logic.  It does not change the content of the message
* ''Endpoints'' - the messaging shouldn't be built into every application.  They should use endpoints which handle the messaging logic
* ''Pipes and filters'' - quite often, there'll be different steps involved in processing a message and it might have to change its format 
** A filter changes the message somehow, and the pipes connect the filters
** Filters should have a simple and interchangeable interface, so that connecting them in different configurations is simple
* ''Translator'' - in practice, it's quite often necessary to change the format of a message, perhaps to conform to a legacy file format.  A translator does this

Messaging requires some kind of a 'message bus'.  This just seems to be a way of getting messages from one place to another.</pre>
</div>
<div title="AndroidDistribute" server.title="AndroidDistribute" server.page.revision="1519431" server.etag="&quot;willrogers_public/AndroidDistribute/1519431:01c63492f3e51f7c23bc257343a552062d524b7b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131110203736" created="20131110203736" tags="" _hash="6aa6a86836a7c0f540d3228886d8607a1a73300e">
<pre>[[Distribute|http://developer.android.com/distribute/index.html]] is the third part of the Android developer documentation.  It's least likely to be interesting to me for a while.  Its parts are:

* Google Play
* Publishing 
* Promoting
* App Quality 
* Policies 
* Spotlight
* Google Play for Education
* Open Distribution
</pre>
</div>
<div title="AndroidApiGuides" server.title="AndroidApiGuides" server.page.revision="1522067" server.etag="&quot;willrogers_public/AndroidApiGuides/1522067:49ff0c2dde1b1f67a9538ba2ba712ddbb994faeb&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131111195529" created="20131111195529" tags="" _hash="8043dd0205eb0e9ebe5efa7b21189f3d45cd4c7d">
<pre>There are a lot of API guides in the AndroidDocumentation.</pre>
</div>
<div title="How to socialise" server.title="How to socialise" server.page.revision="1521880" server.etag="&quot;system-info_public/How%20to%20socialise/1521880:c72f343cd79e50e987d8923d2b41529fe45978de&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-info_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-info_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeMissing excludeSearch" _hash="e730478f88ff38b560ebde4eaf4267b136bf6584">
<pre>There are a lot of interesting people using ~TiddlySpace that you might like to keep track of and interact with. There are a number of ways of doing this.

If you see a number in the speech bubble in one of your tiddlers, it means that someone is writing about the same thing as you. You can find out what they're saying by clicking on it. Likewise, if you see something interesting in someone else's space, you can respond to it and write up your own thoughts on the subject by clicking "Reply to this tiddler".

Additionally, if you find anyone interesting, or you find an interesting looking space and you'd like to know when it's changed, you can "follow" that space. To do this, simply create a tiddler with the title: {{{@space-name}}} and tag it {{{follow}}}. If you want, you can store some notes about that space in the body of the tiddler.

If you then want to know what happening, simply [[include|How do I include/exclude spaces?]]@docs the @tivity space and then visit your activity stream at [[/activity|/activity]], or just visit the @tapas space directly.

!Not sure who to follow?
Here's a few suggestions:
* @fnd
* @cdent
* @pmario
* @bengillies
* @dickon</pre>
</div>
<div title="MetaLangSyntax" server.title="MetaLangSyntax" server.page.revision="665557" server.etag="&quot;willrogers_public/MetaLangSyntax/665557:102f541919f8cf064620cfe183e16a505b980c21&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120402203320" created="20120331174733" tags="ml" _hash="f776d097fc010fb818b865b89355ac57f0f780f6">
<pre>{{{
val pi = 3.14159;
pi * 1.5 * 1.5;
fun area (r) = pi * r * r;
area 2.0;
fun toSeconds(mins, secs) = 60 * mins + secs;
fun fromSeconds(secs) = (secs div 60, secs mod 60);
}}}
* {{{area 1}}} throws an error
* if we change the value of pi now, its meaning within the function remains
* the interpreter will reply with it's understanding of what you've just said.
** {{{val  fromSeconds = fun : int -&gt; int * int}}}
** you can return tuples as in python

{{{
let val nextx = (a/x + x) / 2.0 in 
... nextx ...
end;
}}}
{{{nextx}}} is only available between {{{in}}} and {{{end}}}.

!!Conditionals
ML has a bool type.
* {{{if b then x else y}}}
* {{{not(b)}}}
* {{{p andalso q}}}
* {{{p orelse q}}}

* {{{x&lt;&gt;y}}}
* {{{x&gt;=y}}}
* {{{x&lt;y}}}
* {{{x=y}}}

{{{
fun even n = (n mod 2 = 0);
&gt; val even n = fun : int -&gt; bool
}}}

!!Lists
{{{
[3, 4, 5]  # int list
it @ [4, 6]
[(3, "hello"), (4, "bye")] # (int * string) list
}}}
* {{{nil}}} or {{{[]}}} is the empty list
* {{{x::l}}} is a list with head {{{x}}} and tail {{{l}}}
* Adding an element to the head with {{{::}}} is an O(1) operation in time and space
* The tail is the list of all elements except the head.</pre>
</div>
<div title="DatabaseTheory" server.title="DatabaseTheory" server.page.revision="660165" server.etag="&quot;willrogers_public/DatabaseTheory/660165:fb46316e929550a7ea287e2fcd7337f9a75bd155&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120330134807" created="20120329124413" tags="database nosql sql theory" _hash="d33e31b147a4216356b1dc572c08e5b33ce5ebd6">
<pre>I've just found what seems to be a good introduction to Berkeley databases, which starts with a good introduction to databases in general: http://www.stanford.edu/class/cs276a/projects/docs/berkeleydb/reftoc.html.

* SqlSyntax
* BerkeleyDB 
* MysqlNotes 

I also found a good paper on ~NoSQL, which seems to me to link in to Berkeley DB, but the lack of mention of it means perhaps it doesn't: http://www.christof-strauch.de/nosqldbs.pdf.

!!Basics
Storing and retrieving data is one of the core computing needs.  It starts simple, with text files, but rapidly grows in complexity such that something more sophisticated is needed.  This leads quickly to databases.  However, there are many different types of database, so you should use one suited to the data storage needs which you have.

DBs provide basically two services: data access and data management.  ''Data access'' is adding, removing, changing and searching the data.  ''Data management'' is the services provided for doing these things, such as concurrency, transactions (ACID: atomic, consistent, isolated, durable) and recovery (checking for data integrity and recovering a consistent system).  Other services, such as data browsing and The article says that data management is more complicated than data access.

!!Database types
!!!!Relational
Relational databases are the best known.  Examples are Oracle and ~MySQL.  They are based on set theory, 'relation' being another term for 'set'.  A relation or table is a set of records.  A record or tuple is just some grouping of data, specified in certain types such as integer, string, datetime.

Practically all relational databases use SQL, and this is their main advantage - it's quite a simple way of picking out the data you need from the database.  It is simpler than writing a program to filter the data you need.

!!!!Object-oriented
Objects stored in such a database map on to objects in programming languages - so-called 'persistence'.  It can allow you to store a large number of objects, and those objects to appear to the language as if they were in memory.

!!!!Network 
This is something to do with storing pointers to objects - I didn't follow this closely.

!!Clients and servers
There are two basic layouts for databases: 
* You can have a server managing the database, and clients connecting to the server in order to do anything
* You can have a self-contained database which does all the management locally to the database.
Commercial products tend towards the client-server paradigm, which keep application logic smaller and ease management, since all the data is in a central location.  Self-contained databases can be useful for programs which need data storage, but don't want to saddle the user with a specific database server.

</pre>
</div>
<div title="StyleSheetTiddlySpace" server.title="StyleSheetTiddlySpace" server.page.revision="1521919" server.etag="&quot;system-theme_public/StyleSheetTiddlySpace/1521919:b544b414d794e2052038cdd67f9bda448b4ab7af&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-theme_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-theme_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="3150bd9a2cb78777f61a7b6f6539c5fa646fd7ac">
<pre>/*{{{*/
body {
	font-size: 1em;
	font-family: helvetica, arial, sans-serif;
	background-color: #fff;
	color: [[ColorPalette::Foreground]];
}

body ul { margin: 0; }

#popup {
	background-color: [[ColorPalette::TertiaryPale]];
}

#popup.confirmationPopup, .followList {
	font-size: 0.8em;
	padding: 1em;
	border: solid 1px [[ColorPalette::SecondaryMid]];
	background-color: [[ColorPalette::SecondaryPale]];
}

.followList .listTitle {
	text-decoration: underline;
}

#popup .followTiddlersList a {
	display: inline;
	padding: 0;
}

#popup li a {
	color: [[ColorPalette::PrimaryMid]];
	font-weight: bold;
}

#popup li a:hover {
	color: [[ColorPalette::PrimaryPale]];
	background: [[ColorPalette::PrimaryMid]];
}

#popup li.listTitle {
	border-bottom: 1px solid #000;
	font-weight: bold;
	margin-bottom: 10px;
}

#popup.followList {
	margin-left: 50px;
	margin-top: -30px;
}

.followTiddlersList .label {
	display: block;
	left: 10px;
	top: 0px;
	line-height: 16px;
	position: relative;
}

#popup .followTiddlersList .siteIcon{
	height: auto;
}

#popup .followTiddlersList li{
	clear: both;
	display: block;
	height: 48px;
	margin-bottom: 8px;
	position: relative;
}

#popup .followTiddlersList a{
	display: inline;
}

#displayArea {
	margin: 0;
	top: 0px;
	left: 0px;
	width: 100%;
	position: relative;
}

.revisionCloak {
	position: absolute;
	position: fixed !important;
	height: 100%;
	width: 100%;
	top: 0;
	left: 0;
	border: 0;
	margin: 0;
	padding: 0;
	opacity: 0.5;
	filter: alpha(opacity=50);
	background-color: #000;
}

/* *** Header *** */
.header {
	position: relative;
	background-color: [[ColorPalette::PrimaryMid]];
	_width: 100%; /* ie 6 demands */
}

.headerForeground {
	background-color: [[ColorPalette::PrimaryMid]];
	float: left;
	margin: 24px 16px 0px 72px;
	padding: 0;
	position: relative;
	top: 0;
	_width: 70%; /*ie6: needed for the background to actually be transparent*/
	_background-color: transparent; /*ie6: needed to show the search box*/
}

.clearFloat {
	clear: both;
}

#contentWrapper {
	position: relative;
	padding-top: 1px;
	top: -1px;
}

#tiddlerDisplay {
	_position: relative; /* ie 6*/
}

.siteTitle {
	clear: both;
	display: block;
	font-size: 32px;
	font-weight: bold;
	line-height: 32px;
}

.siteSubtitle {
	display: block;
	font-size: 14px;
	height: 16px;
	margin-bottom: 8px;
}

#sidebarSearch {
	padding: 0;
	position: absolute;
	right: 80px;
	top: 8px;
	width: 176px;
}

#sidebarSearch .txtOptionInput {
	width: 100%;
	margin-top: 5px;
	_color: #bbb; /* ie6 danger */
}

#sidebarSearch .txtOptionInput:focus {
	color: #000;
}

#sidebarSearch .searchButton {
	display: none;
}

/* *** Menu Bar *** */

#mainMenu {
	position: static;
	text-align: left;
	margin-left: 72px;
	float: left;
	width: auto;
	padding: 0;
	font-size: 1em;
	line-height: normal;
}

#mainMenu a {
	color: #fff;
	padding: 8px;
	font-size: 0.9em;
	margin-right: 16px;
}

#mainMenu a:hover {
	background-color: [[ColorPalette::PrimaryMid]];
	color: [[ColorPalette::Background]]
}

#sidebarOptions {
	margin-right: 72px;
	float: right;
	font-size: 1.1em;
	line-height: 1.6em;
	min-height: 1em;
	padding-top: 0;
}

#sidebarOptions a {
	margin-right: 8px;
}

.confirmationPopup .button,
#sidebarOptions .button {
	cursor: pointer;
	line-height: 1.4em;
	text-align: center;
	margin-right: 8px;
	margin-left:-2px;
}

.confirmationPopup .button {
	font-size: 0.9em;
	padding: 2px;
}

#sidebarOptions .button {
	font-size: 0.7em;
	float: left;
	width: 80px;
	padding: 0px;
        color: #fff;
}

.confirmationPopup a.button,
#sidebarOptions a {
	border: none;
	margin: 0 0.2em;
	padding: 0.6em 0.25em;
	display: inline;
	color: #666;
}

.confirmationPopup a.button:hover,
#sidebarOptions a:hover {
	color: #000;
}

.confirmationPopup a.button:active,
#sidebarOptions a:active {
	border: solid 1px [[ColorPalette::PrimaryMid]];
	background-color: #fff;
	background: -webkit-gradient( linear, left bottom, left top, color-stop(0.1,rgb(200,200,200)), color-stop(1, rgb(100,100,100)));
	background: -moz-linear-gradient(center bottom , rgb(200,200,200) 10%,rgb(100,100,100) 100%) repeat scroll 0 0 transparent;
}
/* *** Sidebar *** */

#sidebar .wizard table {
	margin: 0px;
}

.tabContents .listTitle:first-child {
	margin-top: 0px;
}

#menuBar {
	background: [[ColorPalette::PrimaryLight]];
	left: 0;
	right: 0;
	position: relative;
	margin: 0;
	padding: 0.5em 0 0.5em 0;
	min-height: 1em;
	overflow: hidden;
	_width: 100%; /* for ie 6 */
}

#sidebarOptions a.button:hover {
	color: [[ColorPalette::PrimaryPale]];
    background: [[ColorPalette::PrimaryMid]];
}

#tiddlerDisplay, #searchResults {
	margin: 16px 448px 0 72px;
}

#sidebarTabs {
	position: absolute;
	right: 72px;
	width: 352px;
	top: 0;
}

#sidebarTabs .tabsetWrapper .tabset {
	width: 87px;
	border-top: 1px solid [[ColorPalette::PrimaryPale]];
	border-left: 1px solid [[ColorPalette::PrimaryPale]];
	border-bottom: 1px solid [[ColorPalette::PrimaryPale]];
	height: auto;
	float: left;
	word-wrap: break-word;
	top: 0;
	padding: 0;
}

#sidebarTabs .tabsetWrapper .tabContents {
	background-color: [[ColorPalette::PrimaryPale]];
	border: 3px solid [[ColorPalette::PrimaryMid]];
	width: 242px;
	_width: 238px;
	left: -3px;
	_left: -5px;
	position: relative;
	min-height: 34em;
	padding: 8px;
	font-size: 0.8em;
}

/* ---- Side style --- */

#sidebarTabs .tabsetWrapper .tabset .tab {
	font-size: 0.9em;
	padding: 0.7em 8px 0.5em;
	color: #fff;
	background: [[ColorPalette::PrimaryLight]];
	border: none;
	line-height: 16px;
	position: relative;
	display: block;
	margin: 0;
}

#sidebarTabs .tabsetWrapper .tabset .tabSelected {
	color: [[ColorPalette::PrimaryMid]];
	background: [[ColorPalette::PrimaryPale]];
	border-top: 3px solid [[ColorPalette::PrimaryMid]];
	border-bottom: 3px solid [[ColorPalette::PrimaryMid]];
	border-left: 3px solid [[ColorPalette::PrimaryMid]];
	z-index: 10;
	margin-top: -1px;
	font-weight: bold;
}

#sidebarTabs .tabContents li {
	border: none;
	margin-left: 0;
	word-wrap: break-word;
}

.tabContents .timeline {
	background: [[ColorPalette::PrimaryPale]];
	margin-bottom: 8px;
}

#sidebarTabs .timeline li.listTitle {
	color: #132E43;
	margin-left: 8px 0;
	padding: 0.3em 0.11em;
	font-size: 1em;
	border-bottom: none;
}

#sidebarTabs .tabContents li a {
	display: block;
	text-align: left;
	margin: 0 0 1px 0;
	padding: 0.3em 1em;
	background: [[ColorPalette::PrimaryPale]];
}

#sidebarTabs .tabsetWrapper .tabset a:hover,
#sidebarTabs .tabContents li a:hover {
	color: [[ColorPalette::PrimaryPale]];
	background: [[ColorPalette::PrimaryMid]];
}

/* Activity Stream */
#sidebarTabs .tabContents .activityStream .feedItem a {
	display: inline-block;
	padding: 0;
	background: none;
}

/* ---- Tagging box --- */
.tagInfo {
	border: 1px solid #cccccc;
	padding: 10px 15px;
	-moz-box-shadow: 0 2px 2px rgba(0, 0, 0, 0.2);
	box-shadow: 0 2px 2px rgba(0,0,0,0.2);
	color: [[ColorPalette::TertiaryMid]];
	background: -moz-linear-gradient(100% 100% 90deg, #f4f4f4, #e5e5e5);
	background: -webkit-gradient(linear, left top, right top, from(#e5e5e5), to(#f4f4f4));
	margin-top: 1em;
	font-size: 13px;
	margin: 0 0 0 56px;
}

.tagInfo ul {
	list-style: none;
	padding-left: 2.2em;
}

.tagInfo ul li {
	display: inline;
}

.tagInfo ul li.listTitle,
.tagInfo .tagging ul li.listTitle {
	color: [[ColorPalette::PrimaryMid]];
	font-size: 13px;
}

.tagInfo ul li a {
	border: none;
}

.tagInfo .tagging ul li {
	float: none;
	display: inline-block;
}

.tagInfo .tagging {
	padding: 0;
}

.viewRevision .toolbar {
	right: 48px;
	top: 8px;
}

.viewRevision .modifierIcon img,
.viewRevision .modifierIcon svg {
	margin-right: 8px;
}

.viewRevision .toolbar svg {
	width: 32px;
	height: 32px;
}

/* --- IE hacks from lattice --- */

/* ie hacks */
* html #menuBar {
	margin-bottom: 8px;
}
.toolbar .svgIconText {
	*display: inline;
}

div.tiddler .toolbar a {
	cursor: pointer;
	float: left\9;
	display: inline\9;
}

* html .toolbar {
	right: 8px;
}
* html .followButton a {
	margin-top: 0px;
	margin-right: 8px;
}
* html #tiddlerDisplay {
	margin-top: 0px;
}

/* for printing purposes */
@media print {
	#mainMenu,
	#sidebar,
	#messageArea,
	.toolbar,
	.followPlaceHolder,
	#backstageButton,
	#backstageArea,
	#sidebarTabs,
	#sidebarSearch .txtOptionInput,
	#sidebarOptions {
		display: none !important;
	}
	#displayArea {
		margin: 1em 1em 0em;
	}
	noscript {
		display:none; /* Fixes a feature in Firefox 1.5.0.2 where print preview displays the noscript content */
	}
	#tiddlerDisplay {
		margin: 16px 16px;
	}
}

@media all and (max-width: 960px){
	#tiddlerDisplay,
	#searchResults {
		margin: 16px 366px 0 16px;
	}

	#mainMenu {
		margin-left: 16px;
	}

	.headerForeground {
		margin-left: 16px;
	}

	#sidebarSearch {
		right: 16px;
	}

	#sidebarOptions {
		margin-right: 16px;
	}

	#sidebarTabs {
		right: 16px;
		width: 326px;
	}

	#sidebarTabs .tabsetWrapper .tabset {
		font-size: 0.9em;
		width: 77px;
	}

	#sidebarTabs .tabsetWrapper .tabContents {
		width: 226px;
		_width: 222px;
	}

	#sidebarTabs .tabContents li a {
		font-size: 0.9em;
	}
}
/*}}}*/
[[StyleSheetTiddler]]</pre>
</div>
<div title="SsmException" server.title="SsmException" server.page.revision="364745" server.etag="&quot;willrogers_public/SsmException/364745:089c542079c3aacec2822c65db504a4ccdea845c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111215144556" created="20111215144556" tags="" _hash="6fd88b1e5a080c79297da31957c14faf76ff0710">
<pre>{{{
[apel@raptest ssm]$ bin/run-ssm
Exception in thread Thread-540:
Traceback (most recent call last):
  File "/usr/lib64/python2.4/threading.py", line 442, in __bootstrap
    self.run()
  File "/usr/lib64/python2.4/threading.py", line 607, in run
    self.function(*self.args, **self.kwargs)
  File "/opt/apel/ssm-0.7/src/ssm/SecureStompMessenger.py", line 513, in _send_ping
    self._send_message(self._producer_config.send_to, SSM_PING_MSG, SSM_PING_MSG, '')
  File "/opt/apel/ssm-0.7/src/ssm/SecureStompMessenger.py", line 378, in _send_message
    self._connection.send(msg, headers=hdrs)
  File "/usr/lib/python2.4/site-packages/usr/lib/python2.4/site-packages/stomp/connect.py", line 343, in send
    content_length_headers]), [ 'destination' ])
  File "/usr/lib/python2.4/site-packages/usr/lib/python2.4/site-packages/stomp/connect.py", line 453, in __send_frame_helper
    self.__send_frame(command, headers, payload)
  File "/usr/lib/python2.4/site-packages/usr/lib/python2.4/site-packages/stomp/connect.py", line 489, in __send_frame
    raise exception.NotConnectedException()
NotConnectedException
}}}</pre>
</div>
<div title="willrogersSetupFlag" server.title="willrogersSetupFlag" server.page.revision="364949" server.etag="&quot;willrogers_public/willrogersSetupFlag/364949:cc7866667e128ce18d25d1e10a0cfec04bcd6316&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110421100842" created="20110421100842" tags="excludeLists excludePublisher excludeSearch" _hash="378e7c4224d9b9ed97947eefce1fab45a0a71696" tiddlyspaceinit_version="0.6">
<pre>@@Please do not modify this tiddler; it was created automatically upon space creation.@@</pre>
</div>
<div title="UbuntuThirteenTen" server.title="UbuntuThirteenTen" server.page.revision="1611073" server.etag="&quot;willrogers_public/UbuntuThirteenTen/1611073:12b3f0fde924a50d676becc0ebb9f2cd2c9b280c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131230223255" created="20131221110223" tags="" _hash="e67c8f8a6e09019007d4de7f3a8cf8ad4a742926">
<pre>* Hibernation is disabled by default.  I added it by following the instructions here: http://askubuntu.com/questions/94754/how-to-enable-hibernation
* Firefox started making all searches use the search box.  I followed the instructions here: https://support.mozilla.org/en-US/questions/968367
* You now enable and disable dash lenses like this: http://askubuntu.com/questions/366238/how-do-i-remove-only-shopping-searches
* You can install VirtualBox using the package manager
* {{{Ctrl-Super-Right}}} doesn't work correctly, but you can do tiling with {{{Ctrl-Alt-Numpad}}}
* Cinnamon broke unity in 13.10 to start with, but apparently it is now fixed:
{{{
sudo add-apt-repository ppa:gwendal-lebihan-dev/cinnamon-stable
sudo apt-get update
sudo apt-get install cinnamon
}}}
* The volume function keys don't work, but you can remap them to F6, F7, F8: http://ubuntuforums.org/showthread.php?p=12260056#post12260056
* 4oD no longer works, but you can re-enable it by installing {{{hal}}}, which is no longer available by default:
* install {{{vlc}}} to watch DVDs
** for encrypted DVDs, follow these instructions: http://askubuntu.com/questions/500/how-can-i-play-encrypted-dvd-movies
* ripping DVDs - I ended up using ~HandBrake. </pre>
</div>
<div title="MatlabFunctions" server.title="MatlabFunctions" server.page.revision="1594722" server.etag="&quot;willrogers_public/MatlabFunctions/1594722:4ba7b8e3881c73445287a6d06cde6ae7173daf81&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131213161709" created="20131213161640" tags="" _hash="7d6ea31cb46b309a1ba5be2023807617a360ea9d">
<pre>
!!Functions
Matlab functions are generally defined one per file.  Further functions within that file can only be used inside the file.  The first line in the file is 
{{{
function &lt;return-value&gt; = &lt;function-name&gt;(&lt;arguments&gt;)
% This comment is shown when you run
% help &lt;function-name&gt;
...
function definition, including defining &lt;return-value&gt;
...
}}}
!!!!Builtin functions
* {{{sqrt}}}
* {{{roots(a)}}} - finds the roots of the polynomial with coefficients corresponding to the array {{{a}}}
* {{{size(a)}}} - returns the shape of the array
* {{{clear}}} clears all variables
* {{{ezplot(f)}}} - plot f
* {{{zeros()}}} - with one argument, creates a square matrix, with two a rectangular one
** {{{ones()}}} - as {{{zeros()}}}
* {{{eye(n)}}} - an identity matrix of size n
* {{{load(&lt;path&gt;)}}} - load a matlab data file
* {{{ls}}}, {{{pwd}}}, {{{cd}}}

!!!!Anonymous functions
You can define functions like this:
* {{{f = @(x,y) x*y}}}
** {{{f(3,4)}}} -&gt; 12</pre>
</div>
<div title="GitCommit" server.title="GitCommit" server.page.revision="1560364" server.etag="&quot;willrogers_public/GitCommit/1560364:7e2168eb0f42e14afce698580e69e648ece6270a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131125135551" created="20131125135551" tags="" _hash="05268f910484e45dd93e3ee81c6371213af90719">
<pre>
!!Commits
When you commit, only things that you have added are committed.  You can add a file using {{{git add &lt;file&gt;}}}; you can add parts of a file using {{{git add -p}}}.
A commit is a well-defined unit in git.  Each is unambiguously named by its SHA1 sum.  You can refer to it by the shortest part of the SHA1 sum which is unambiguous.
* {{{HEAD}}} refers to the latest commit on the current branch
* {{{HEAD^}}} and {{{HEAD^^}}} refer to the previous commits
* {{{HEAD~1}}} and {{{HEAD~2}}} refer to the same commits as above 
Because of merges, a commit may have more than one parent.  If this is the case, {{{git show &lt;commit&gt;}}} will show {{{Merge: &lt;p1&gt; &lt;p2&gt;}}}.   In this case,
* {{{HEAD^}}} or {{{HEAD^1}}} refers to the first parent
* {{{HEAD^2}}} refers to the second parent
* {{{HEAD^@}}} refers to all parents, where relevant

!!Undoing commits
You can undo a commit in a few ways:
* {{{git reset HEAD~1}}} removes the last commit, but leaves the files as they were
* {{{git reset --hard HEAD~1}}} removes the last commit and also sets all the files to how they were at the time of that commit
* {{{git commit --amend}}} changes the latest commit so that it now reflects the changes you've made since that commit.  Don't do this if you have pushed the commit somewhere.</pre>
</div>
<div title="SedAndAwk" server.title="SedAndAwk" server.page.revision="1561005" server.etag="&quot;willrogers_public/SedAndAwk/1561005:9242fd608142462b5813f77904dc8b3cad7f060e&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131125170213" created="20111014085038" tags="awk bash linux sed" _hash="f30611447d24a839a0ac3608d26d23a187572366">
<pre>These are the subject of a whole book on Cristina's bookshelf.  I use them rarely enough that I forget how every time I do.

!!Awk

Awk treats files line by line and lines field by field, where fields within a line are separated by some delimiter.  Each line in a file is sometimes known as a record.

This prints the first word of each line of a file.  
{{{
awk '{ print $1 }' file
}}}

Awk sees the nth field as $n - they're not arguments.

This prints the second and third field in the employee file where the line begins 'Training'.
{{{
awk '/^Training/ {print $2,$3}' employee
}}}

The default delimiter is whitespace - you can change this:
{{{
awk -F: '{ print $1, $3 }' /etc/passwd
}}}

Pattern matching:
{{{
awk '$2 ~ /[Ss]mith/ { print }' employee
}}}
{{{~}}} means the lines contain the pattern, {{{!~}}} means they don't contain it.

You can compare values with ==, !=, &gt;= etc and combine operations with ||, &amp;&amp;, !.

Here's an example of an awk script:
{{{
VISA=${1:-Visa}

awk 'BEGIN { OFS="\t\t"
    print "Credit Card Details"
}
NR &gt; 1 &amp;&amp; $1 == "'$VISA'" { 
    print $2, $3 
}
END {
    print "Finished"
}' credit
}}}
* NR is the row number, so this skips the first line.
* The BEGIN line is executed before it starts processing the file
* The END line is executed after it starts processing the file
* The file 'credit' is passed in at the end
* All the logic seems to be on one line...

You can use printf as in C to align your output nicely.  It also uses C-type maths and incrementation of variables etc.  You seem to be able to use your variables wherever you like, and you don't have to declare their type etc.

Awk has a number of functions available, such as {{{substr(str, start, end)}}} and {{{length(str)}}}.

!!Sed

[This seems to be a good introduction: http://www.grymoire.com/Unix/Sed.html].

By default sed doesn't change the input file - you've got to redirect the output or use {{{-i}}} to change in place.

This deletes all the lines beginning with Training:
{{{
sed '/^Training/d' people
}}}
This will print lines 3 - 9; -n prevents sed printing everything by default.
{{{
sed -n 3,9p people
}}}
Use {{{-r}}} to use extended regular expressions.

You can put two commands in the same expression by separating them with semicolons:
{{{
sed -n '1p;/^Training/p' people
}}}
This will print the first line PLUS all the lines beginning 'Training'.  If the first line matches both, it will be printed twice.

This will output "nightday". 
{{{
echo dayday | sed 's/day/night/'
}}}
This will output "nightnight" - g for 'global' means substitute all instances on a line.  i for 'case-insensitive' matches both day and Day.
{{{
echo dayDay | sed s/day/night/gi
}}}
This will output "nightday", because the regexp '^' matches the start of a line.
{{{
echo dayday | sed s/^day/night/g
}}}

You can use the 'q' command to quit rather than printing all of the file.
</pre>
</div>
<div title="NagiosNotes" server.title="NagiosNotes" server.page.revision="705259" server.etag="&quot;willrogers_public/NagiosNotes/705259:192039f2b516108d99949997f70448b5bd0cc58b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120509085159" created="20120509085159" tags="" _hash="9d712b1244319bd2e1503224f33a3b78863bbf8e">
<pre>Nagios is an open-source system, network and infrastructure monitoring system.  Wikipedia reckons it's a de facto industry standard.  It can run on a host system, but can also run using scripts on remote systems as well, using Nagios Remote Plugin Executor (NRPE).

The SCT nagios can be found at https://oberon.esc.rl.ac.uk/nagios/.  There are various standard checks, such as the SSH server working and HTTP, and custom ones, such as the certificate expiry check and apel-consumer-hotcopy and stuff.  The nagios checks live in the directory {{{/usr/local/nagios/libexec/}}} - the standard ones are here already, and we add our custom ones to here.

We seem to be running 3.2.3 of Nagios Core, and the latest version is 3.4.0.

Cristina worked for a while on WLCG Nagios, which seems to be different to the SCT Nagios we run locally.  I should ask her how that works, but I think we end up submitting our test results using messaging.</pre>
</div>
<div title="CarThings" server.title="CarThings" server.page.revision="363864" server.etag="&quot;willrogers_public/CarThings/363864:2cac2e16be10578dde0b09b7a790290826331b7c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111010201440" created="20111010185814" tags="" _hash="b220e83c663efed36bb6afaeb3dd5368cb1a55ca">
<pre>MiniCosts
PoloCosts
PoloForSale

PoloToDo

BuyingACar</pre>
</div>
<div title="Home" server.title="Home" server.page.revision="1484062" server.etag="&quot;willrogers_public/Home/1484062:e440cc026dd9ac335df44cc2015d50b0380d9341&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131026135311" created="20110421101506" tags="" _hash="b4bebe66e15afd6ce091b211e18865b3603a47f8">
<pre>This is a ~TiddlySpace wiki.

* HomeNotes
* ComputingNotes
* DiamondNotes
* RaspberryPi

* MetaTiddly
* MiscLinks

 I probably won't need ApelNotes much any more.

</pre>
</div>
<div title="PythonNone" server.title="PythonNone" server.page.revision="1000364" server.etag="&quot;willrogers_public/PythonNone/1000364:39075739da346482f7526aa7e7f6f6a64b9c82a4&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121223103355" created="20120925201918" tags="none python" _hash="92008419fd49218e1313b8ad129e7d82120b7dd6">
<pre>!!None in python

The None object is a single object - all references to None point to the same thing.  Here's a page I found about it: http://boodebr.org/main/python/tourist/none-empty-nothing

The correct test for None is:
{{{
if obj is None
}}}
not
{{{
if obj == None 
}}}
This is explained well here: http://stackoverflow.com/questions/26595/is-there-any-difference-between-foo-is-none-and-foo-none</pre>
</div>
<div title="ViewTemplate" server.title="ViewTemplate" server.page.revision="1521912" server.etag="&quot;system-theme_public/ViewTemplate/1521912:569f592cc0caf4e8085a058de9541cd006fefa84&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-theme_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-theme_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="77bbe9ac7998547867eb4ef4aca07906fa2323e8">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar'
	macro='toolbar [[ToolbarCommands::ViewToolbar]] icons:yes height:16 width:16 more:popup'&gt;
&lt;/div&gt;
&lt;div class='heading'&gt;
	&lt;span class='spaceSiteIcon'
		macro='tiddlerOrigin label:no spaceLink:yes height:48 width:48 preserveAspectRatio:yes'&gt;
	&lt;/span&gt;
	&lt;span class="titleBar"&gt;
		&lt;div class='title' macro='view title text'&gt;&lt;/div&gt;
		&lt;span class="subtitle" macro='viewRevisions page:5'&gt;
			last modified on
			&lt;span macro="view modified date"&gt;&lt;/span&gt;
		&lt;/span&gt;
		&lt;div macro="view title replyLink"&gt;&lt;/div&gt;
	&lt;/span&gt;
	&lt;span class='followPlaceHolder' macro='followTiddlers'&gt;&lt;/span&gt;
	&lt;span class='modifierIcon'
		macro='view modifier SiteIcon label:no spaceLink:yes height:48 width:48 preserveAspectRatio:yes'&gt;
	&lt;/span&gt;
	&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class='content'&gt;
	&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class='tagInfo'&gt;
	&lt;div class='tidTags' macro='tags'&gt;&lt;/div&gt;
	&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="GotoPlugin" server.title="GotoPlugin" server.page.revision="1491480" server.etag="&quot;system-goto_public/GotoPlugin/1491480:48bb5be94a3a67618f8e20be604677531ac07e9d&quot;" modifier="pmario" creator="pmario" server.workspace="bags/system-goto_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-goto_public" server.permissions="read" server.content-type="" modified="20131030171340" created="20100805092600" tags="excludeLists excludeMissing excludeSearch systemConfig" _hash="04d8b231bf3c6d5b55a81b29d8efe7cbde0922d0">
<pre>/***
|Name|GotoPlugin|
|Source|http://www.TiddlyTools.com/#GotoPlugin|
|Documentation|http://www.TiddlyTools.com/#GotoPluginInfo|
|Version|1.9.? hacked because of: https://groups.google.com/forum/?fromgroups#!topic/tiddlywiki/Pwt4ogJIS-s |
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|view any tiddler by entering it's title - displays list of possible matches|
''View a tiddler by typing its title and pressing //enter//.''  As you type, a list of possible matches is displayed.  You can scroll-and-click (or use arrows+enter) to select/view a tiddler, or press escape to close the listbox to resume typing.  When the listbox is not displayed, pressing //escape// clears the current input.
!!!Documentation
&gt;see [[GotoPluginInfo]]
!!!Configuration
&lt;&lt;&lt;
*Match titles only after {{twochar{&lt;&lt;option txtIncrementalSearchMin&gt;&gt;}}} or more characters are entered.&lt;br&gt;Use down-arrow to start matching with shorter input.  //Note: This option value is also set/used by [[SearchOptionsPlugin]]//.
*To set the maximum height of the listbox, you can create a tiddler tagged with &lt;&lt;tag systemConfig&gt;&gt;, containing:
//{{{
config.macros.gotoTiddler.listMaxSize=10;  // change this number
//}}}
&lt;&lt;&lt;
!!!Revisions
&lt;&lt;&lt;
2009.05.22 [1.9.2] use reverseLookup() for IncludePlugin
|please see [[GotoPluginInfo]] for additional revision details|
2006.05.05 [0.0.0] started
&lt;&lt;&lt;
!!!Code
***/
//{{{
version.extensions.GotoPlugin= {major: 1, minor: 9, revision: 2, date: new Date(2009,5,22)};

// automatically tweak shadow SideBarOptions to add &lt;&lt;gotoTiddler&gt;&gt; macro above &lt;&lt;search&gt;&gt;
config.shadowTiddlers.SideBarOptions=config.shadowTiddlers.SideBarOptions.replace(/&lt;&lt;search&gt;&gt;/,"{{button{goto}}}\n&lt;&lt;gotoTiddler&gt;&gt;&lt;&lt;search&gt;&gt;");

if (config.options.txtIncrementalSearchMin===undefined) config.options.txtIncrementalSearchMin=3;

config.macros.gotoTiddler= { 
	listMaxSize: 10,
	listHeading: 'Found %0 matching title%1...',
	searchItem: "Search for '%0'...",
	handler:
	function(place,macroName,params,wikifier,paramString,tiddler) {
		var quiet	=params.contains("quiet");
		var showlist	=params.contains("showlist");
		var search	=params.contains("search");
		params = paramString.parseParams("anon",null,true,false,false);
		var instyle	=getParam(params,"inputstyle","");
		var liststyle	=getParam(params,"liststyle","");
		var filter	=getParam(params,"filter","");
		var html=this.html;
		var keyevent=window.event?"onkeydown":"onkeydown"; // IE event fixup for ESC handling
		html=html.replace(/%keyevent%/g,keyevent);
		html=html.replace(/%search%/g,search);
		html=html.replace(/%quiet%/g,quiet);
		html=html.replace(/%showlist%/g,showlist);
		html=html.replace(/%display%/g,showlist?'block':'none');
		html=html.replace(/%position%/g,showlist?'static':'absolute');
		html=html.replace(/%instyle%/g,instyle);
		html=html.replace(/%liststyle%/g,liststyle);
		html=html.replace(/%filter%/g,filter);
		if (config.browser.isIE) html=this.IEtableFixup.format([html]);
		var span=createTiddlyElement(place,'span');
		span.innerHTML=html; var form=span.getElementsByTagName("form")[0];
		if (showlist) this.fillList(form.list,'',filter,search,0);
	},
	html:
	'&lt;form onsubmit="return false" style="display:inline;margin:0;padding:0"&gt;\
		&lt;input name=gotoTiddler type=text autocomplete="off" accesskey="G" style="%instyle%"\
			title="Enter title text... ENTER=goto, SHIFT-ENTER=search for text, DOWN=select from list"\
			onfocus="this.select(); this.setAttribute(\'accesskey\',\'G\');"\
			%keyevent%="return config.macros.gotoTiddler.inputEscKeyHandler(event,this,this.form.list,%search%,%showlist%);"\
			onkeyup="return config.macros.gotoTiddler.inputKeyHandler(event,this,%quiet%,%search%,%showlist%);"&gt;\
		&lt;select name=list style="display:%display%;position:%position%;%liststyle%"\
			onchange="if (!this.selectedIndex) this.selectedIndex=1;"\
			onblur="this.style.display=%showlist%?\'block\':\'none\';"\
			%keyevent%="return config.macros.gotoTiddler.selectKeyHandler(event,this,this.form.gotoTiddler,%showlist%);"\
			onclick="return config.macros.gotoTiddler.processItem(this.value,this.form.gotoTiddler,this,%showlist%);"&gt;\
		&lt;/select&gt;&lt;input name="filter" type="hidden" value="%filter%"&gt;\
	&lt;/form&gt;',
	IEtableFixup:
	"&lt;table style='width:100%;display:inline;padding:0;margin:0;border:0;'&gt;\
		&lt;tr style='padding:0;margin:0;border:0;'&gt;&lt;td style='padding:0;margin:0;border:0;'&gt;\
		%0&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;",
	getItems:
	function(list,val,filter) {
		if (!list.cache || !list.cache.length || val.length&lt;=config.options.txtIncrementalSearchMin) {
			// starting new search, fetch and cache list of tiddlers/shadows/tags
			list.cache=new Array();
			if (filter.length) {
				var fn=store.getMatchingTiddlers||store.getTaggedTiddlers;
				var tiddlers=store.sortTiddlers(fn.apply(store,[filter]),'title');
			} else 
				var tiddlers=store.reverseLookup('tags','excludeLists');
			for(var t=0; t&lt;tiddlers.length; t++) list.cache.push(tiddlers[t].title);
			if (!filter.length) {
				for (var t in config.shadowTiddlers) list.cache.pushUnique(t);
				var tags=store.getTags();
				for(var t=0; t&lt;tags.length; t++) list.cache.pushUnique(tags[t][0]);
			}
		}
		var found = [];
		var match=val.toLowerCase();
		for(var i=0; i&lt;list.cache.length; i++)
			if (list.cache[i].toLowerCase().indexOf(match)!=-1) found.push(list.cache[i]);
		return found;
	},
	getItemSuffix:
	function(t) {
		if (store.tiddlerExists(t)) return "";  // tiddler
		if (store.isShadowTiddler(t)) return " (shadow)"; // shadow
		return " (tag)"; // tag 
	},
	fillList:
	function(list,val,filter,search,key) {
		if (list.style.display=="none") return; // not visible... do nothing!
		var indent='\xa0\xa0\xa0';
		var found = this.getItems(list,val,filter); // find matching items...
		found.sort(); // alpha by title
		while (list.length &gt; 0) list.options[0]=null; // clear list
		var hdr=this.listHeading.format([found.length,found.length==1?"":"s"]);
		list.options[0]=new Option(hdr,"",false,false);
		for (var t=0; t&lt;found.length; t++) list.options[list.length]=
			new Option(indent+found[t]+this.getItemSuffix(found[t]),found[t],false,false);
		if (search)
			list.options[list.length]=new Option(this.searchItem.format([val]),"*",false,false);
		list.size=(list.length&lt;this.listMaxSize?list.length:this.listMaxSize); // resize list...
		list.selectedIndex=key==38?list.length-1:key==40?1:0;
	},
	keyProcessed:
	function(ev) { // utility function
		ev.cancelBubble=true; // IE4+
		try{event.keyCode=0;}catch(e){}; // IE5
		if (window.event) ev.returnValue=false; // IE6
		if (ev.preventDefault) ev.preventDefault(); // moz/opera/konqueror
		if (ev.stopPropagation) ev.stopPropagation(); // all
		return false;
	},
	inputEscKeyHandler:
	function(event,here,list,search,showlist) {
		if (event.keyCode==27) {
			if (showlist) { // clear input, reset list
				here.value=here.defaultValue;
				this.fillList(list,'',here.form.filter.value,search,0);
			}
			else if (list.style.display=="none") // clear input
				here.value=here.defaultValue;
			else list.style.display="none"; // hide list
			return this.keyProcessed(event);
		}
		return true; // key bubbles up
	},
	inputKeyHandler:
	function(event,here,quiet,search,showlist) {
		var key=event.keyCode;
		var list=here.form.list;
		var filter=here.form.filter;
		// non-printing chars bubble up, except for a few:
		if (key&lt;48) switch(key) {
			// backspace=8, enter=13, space=32, up=38, down=40, delete=46
			case 8: case 13: case 32: case 38: case 40: case 46: break; default: return true;
		}
		// blank input... if down/enter... fall through (list all)... else, and hide or reset list
		if (!here.value.length &amp;&amp; !(key==40 || key==13)) {
			if (showlist) this.fillList(here.form.list,'',here.form.filter.value,search,0);
			else list.style.display="none";
			return this.keyProcessed(event);
		}
		// hide list if quiet, or below input minimum (and not showlist)
		list.style.display=(!showlist&amp;&amp;(quiet||here.value.length&lt;config.options.txtIncrementalSearchMin))?'none':'block';
		// non-blank input... enter=show/create tiddler, SHIFT-enter=search for text
		if (key==13 &amp;&amp; here.value.length) return this.processItem(event.shiftKey?'*':here.value,here,list,showlist);
		// up or down key, or enter with blank input... shows and moves to list...
		if (key==38 || key==40 || key==13) { list.style.display="block"; list.focus(); }
		this.fillList(list,here.value,filter.value,search,key);
		return true; // key bubbles up
	},
	selectKeyHandler:
	function(event,list,editfield,showlist) {
		if (event.keyCode==27) // escape... hide list, move to edit field
			{ editfield.focus(); list.style.display=showlist?'block':'none'; return this.keyProcessed(event); }
		if (event.keyCode==13 &amp;&amp; list.value.length) // enter... view selected item
			{ this.processItem(list.value,editfield,list,showlist); return this.keyProcessed(event); }
		return true; // key bubbles up
	},
	processItem:
	function(title,here,list,showlist) {
		if (!title.length) return;
		list.style.display=showlist?'block':'none';
		if (title=="*")	{ story.search(here.value); return false; } // do full-text search
		if (!showlist) here.value=title;
		story.displayTiddler(null,title); // show selected tiddler
		return false;
	}
}
//}}}</pre>
</div>
<div title="DvdRipping" server.title="DvdRipping" server.page.revision="1611276" server.etag="&quot;willrogers_public/DvdRipping/1611276:3f571d91f640193ddbe84a49fe031699258114f1&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131231103939" created="20131231103500" tags="" _hash="6b5825d48b876c39465ba8944e5a03e4ab438d1c">
<pre>

!!Aspect ratio
There's a very good page on this on the ~HandBrake wiki: https://trac.handbrake.fr/wiki/AnamorphicGuide
!!Programs
There are a few programs you can use on Linux.  ~HandBrake was the first one I got working successfully.  {{{dvd::rip}}} is another.

!!File formats
It is slightly complicated, because you need to record video and audio streams.

!!!!Containers
The main two used now are mpeg-4 (m4v) and Matrushka (mkv).  Xvid and DivX aren't so useful now.

!!!!Video
{{{H.264}}} seems absolutely fine

!!!!Audio
I've used AAC.



</pre>
</div>
<div title="RawFiles" server.title="RawFiles" server.page.revision="364639" server.etag="&quot;willrogers_public/RawFiles/364639:b8756a5e11708fda528444a179d697d306d4109b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110425154212" created="20110425105616" tags="camera" _hash="f3283835acc551f154948ae8d35d284a2e428a88">
<pre>Here's a brief description: http://www.northlight-images.co.uk/article_pages/why_use_raw.html</pre>
</div>
<div title="MainMenu" server.title="MainMenu" server.page.revision="1484061" server.etag="&quot;willrogers_public/MainMenu/1484061:7af051242b7b63e50c1744218e213ff2c68020ed&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131026135231" created="20110421101734" tags="" _hash="343999101757e9c8cda7b72e4d280557b92e568d">
<pre>DiamondNotes
HomeNotes
ComputingNotes
[[GettingStarted]]</pre>
</div>
<div title="WindowsLicences" server.title="WindowsLicences" server.page.revision="1331888" server.etag="&quot;willrogers_private/WindowsLicences/1331888:7dcc2cd19caf98404d6f010963fbd0238b50742a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20130803141644" created="20130803141644" tags="" _hash="9c2d3792c5e72fead16778598348eba5e3d7c1b9">
<pre>I've got licences for 5 versions of Windows:

* Windows Vista - with Compaq laptop
* Windows 7 - upgrade from Digital River
* Windows 7 - purchased version
* Windows 7 - with SamsungLaptop
* Windows 8 - upgrade</pre>
</div>
<div title="PythonSetupTools" server.title="PythonSetupTools" server.page.revision="1592990" server.etag="&quot;willrogers_public/PythonSetupTools/1592990:58d160f08852a111bd7a3df75bb271d412843088&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131212174826" created="20131212144932" tags="" _hash="a45c4af7a8e182e39bfa6e8a687ba3767de3558e">
<pre>Setuptools is one of the many ways of distributing python packages.  Its documentation is [[here|http://pythonhosted.org/setuptools/]].

There has been much discussion about Python packaging, but Distribute has been merged back into Setuptools, so at least it is still actively maintained.

The basic usage is as follows; in particular, it mirrors distutils to make it fairly easy to convert:

{{{
from setuptools import setup

setup(
    name = 'dls_packages',
    version = '0.1',
    description = 'Module',
    author = 'Will Rogers',
    author_email = 'will.rogers@diamond.ac.uk',
    packages = ['dls_packages']
    )   
}}}</pre>
</div>
<div title="EgiSummary" server.title="EgiSummary" server.page.revision="654449" server.etag="&quot;willrogers_public/EgiSummary/654449:267445c10f7dd34c03bd71865c4cd86ccbb12d24&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120327095320" created="20120327083527" tags="" _hash="df5b404289aa47a13a8504c16ca307c5cebf07ba">
<pre>Steven Newhouse

* Plenty of jobs running, about half of which are HEP
* Still trying to get other communities on board
* UMD takes in both EMI and IGE
* New website, with a focus on people outside of EGI - new users
* More social media, clearer branding
* Focus on EGI in 2020, including interacting with different infrastructures and including more scientists
* Offer our knowhow to other communities who need to do similar things to us.
* A special note on clouds, including a screenshot of our cloud accounting DB.</pre>
</div>
<div title="DpmTalk" server.title="DpmTalk" server.page.revision="879443" server.etag="&quot;willrogers_public/DpmTalk/879443:1d15c2e613f36c5a67845029c1cb999cc588b560&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120918092448" created="20120918091416" tags="" _hash="540975b62a7d02b06f26d62342c8e33382bcc77e">
<pre>Given by Oliver Keeble, on behalf of Ricardo Rocha, at the EgiTfPrague.

DPM is the largest storage element in use
* Total 36PB
** 10 sites using more than one PB
* 300 ~VOs have access
* 200 sites

Prod version 1.8.3, in EPEL, ~EMI1 and ~EMI2 - now all exactly the same
Will still be released in EPEL after EMI.

!!Features 
* HTTP/DAV frontend
* ~NFS4.1 frontend
* Uses DMLITE (see below)
* 32-bit client support, important for HEP
* Release process will become more lightweight.

* Using Puppet for configuration
* Using Nagios for monitoring

!!DMLITE
DMLITE is a big refactoring to make DPM much more modular.  Better separation between front and back ends.  Improved performance, and better integration with standard building blocks.  Allows memcache rather than a disk database for namespace management, which improves performance by a large amount.

It has a plugin-based design, which allows easy support for different technologies.

!!Standards
* HTTP/DAV
* ~NFS4.1/pNFS (readonly)
* Xrootd (HEP specific, rewritten)
* ~GridFTP support on the way
* Old interfaces unchanged

!!Future
* DPM is big enough to be supported independently of project cycles.  Building a DPM collaboration: ~GridPP, WLCG France, Taipei....
* Members of the collaboration get influence in proportion to their contribution.
* CERN projects are finishing now, and developments are ending.  The project is moving into maintenance only.</pre>
</div>
<div title="NewComputer" server.title="NewComputer" server.page.revision="961332" server.etag="&quot;willrogers_public/NewComputer/961332:6bf569c4e64509cb265df827bfa6956628ae7dda&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121123093232" created="20110503135659" tags="cygwin windows" _hash="f4a8e9a5094166a25add73be58c8babc956d10bf">
<pre>When I got a new laptop, these are the steps I followed to set it up.

* Download Google Chrome
* Download IE 8
* Set proxy script to: http://wwwcache.rl.ac.uk/proxy.pac
* Install Tortoise SVN
* Download Process Explorer
* Install ~VirtuaWin
* Install ~FreeSnap
* Install Visual C# Express 2010 (and all the related bits; this takes a long time and a restart)
* Map NetworkDrive
* Download Notepad++
* Install Cygwin:
** Download and run setup.exe
** Use Internet Explorer settings
** Include Mintty, openssh, wget, vim
** Set up SshKeyAuthentication
** Set up [[.bashrc]]
** Set up [[.vimrc]]
* Install VirtualDebian

Still to do:

* Configure trac and Chrome
* AddPrinters
* Google Desktop
</pre>
</div>
<div title="PythonSyntax" server.title="PythonSyntax" server.page.revision="901901" server.etag="&quot;willrogers_public/PythonSyntax/901901:cd53b46b5d10f0548129c1db20d3126e14e8987d&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121007111611" created="20110617084821" tags="" _hash="0560156b39e2ab716887acb0831dd6a723349398">
<pre>I'm not very sure of:
* Closures 
* Generators

* PythonNone
* PythonBoolean
* PythonLists

!!variables
You can assign more than one variable at a time:
{{{
&gt;&gt;&gt; v = ('a', 'b', 'e')
&gt;&gt;&gt; (x, y, z) = v 
}}}

!!dicts
* di.keys() returns a list of the keys
* di.values() returns a list of the values
* di.items() returns a list of tuples: (key, value)

Dicts work using the methods {{{__getitem__}}} and {{{_setitem__}}}, which you can define if you are trying to subclass a dict.

!!tuples 
* tuples are like lists but immutable
* you can slice them like lists
* they are faster than lists
* they can be safer because they're read-only
* {{{x in tu}}} returns True or False
* tuples can be used as dict keys

!!varargs, args and kwargs
This is something that I think is pretty simple, but I've never quite got the hang of.  There's a pretty good explanation here: http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/

So, you can specify a tuple of arguments as follows:
{{{
def many_args(*args):
    for arg in args:
        print "an argument: ", arg
}}}
This gives:
{{{
&gt;&gt;&gt; many_args(1,2,3)
argument:  1
argument:  2
argument:  3
&gt;&gt;&gt; many_args((1,2,3))
argument:  (1, 2, 3)
}}}

So basically, you pass in regular arguments and it treats them as a tuple at the other side. It also works the other way round, turning the tuple into arguments:
{{{
t = (1,2,3)
&gt;&gt;&gt; many_args(*t)
argument:  1
argument:  2
argument:  3
}}}

!!with
The {{{with}}} statement was introduced in Python 2.5, so because we're using 2.4 I haven't really had reason to use it.  However, I found a [[good page|http://effbot.org/zone/python-with-statement.htm]] describing how it works, and it's quite simple.  What it requires is for a class to have defined {{{__enter__()}}} and {{{__exit__()}}} methods.  You can then say
{{{
with &lt;class&gt; as variable:
    do something
}}}
The {{{__enter__()}}} method will be called before, and the {{{__exit__()}}} method after.  From Python 2.5, the file objects define these methods, so there's a shortcut to opening files and closing them:
{{{
with open('file.txt') as f:
    data = f.read()
    do something with data
}}}

!!print
{{{print}}} is a statement in python 2, though I believe it is a function in python 3.  You can print a succession of items by separating with commas:
{{{
&gt;&gt;&gt; print a, b, c  
1 2 4
}}}
You can omit the newline by adding a comma at the end.

You can also use {{{sys.stdout}}} as a file - i.e. {{{sys.stdout.write("hello")}}}.  That doesn't append a newline.

!!Bits and pieces

Use {{{dir(object)}}} to find all the attributes of that object.
Use {{{type(object)}}} to find its type.

If you run {{{dir()}}} inside a script, you find:
{{{
&gt;&gt;&gt; dir()
['__builtins__', '__doc__', '__file__', '__name__', '__package__']
}}}
See PythonDocstrings and PythonPackages for what I know about the last three of those.  {{{__file__}}} just seems to be the name of the file that the script is in.

See PythonBuiltins for more on the built-in methods.


</pre>
</div>
<div title="GitStash" server.title="GitStash" server.page.revision="1577468" server.etag="&quot;willrogers_public/GitStash/1577468:5337b5ae634bdace469f10d91485712e82f9d819&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131205103506" created="20131029163709" tags="" _hash="ea78dcc0c34dc4a136ee523501169af45afea18b">
<pre>!!Stashing
You can save local changes for when you want to save some state but you don't want to commit that state to a repository.  It makes your working copy look clean.
* {{{git stash}}} - stash the current changes 
* {{{git stash list}}} - show all the different stashes that you have stashed
* {{{git stash pop}}} - apply the top stash and remove it from the list
* {{{git stash apply}}} - apply the stash, but do not remove it from the list
* {{{git stash show &lt;stash&gt;}}} - show a summary of the stash
* {{{git stash show -p}}}  - show the actual diff of the stash
There are several other options.
</pre>
</div>
<div title="PythonProfiler" server.title="PythonProfiler" server.page.revision="364608" server.etag="&quot;willrogers_public/PythonProfiler/364608:180cced06ce1b55406a78b689ac0c81106df9bd2&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110927155203" created="20110926111011" tags="" _hash="dcd8892f90ef7a52e802ec59bb34483e13de9c29">
<pre>!!Starting

Profiling in Python is available though the cProfile module (&gt;=2.5).  There's also the profile module, which was available earlier (&gt;=2.4).  As I understand it, the difference between the two is that the profile module is pure Python, making it significantly slower.  In fact, I just ran a little test, and cProfile was about 3 times quicker than profile.

However, on Ubuntu you need an extra package before it will run properly:
{{{
sudo apt-get install python-profiler
}}}

You need to enable the multiverse repository for this to work.

!!Using it
The documentation is here: http://docs.python.org/library/profile.html

From the interpreter, it's easy to call a function, but you can also run it against a whole script like this:
{{{
python -m cProfile -s cumulative gen_records.py jobs
}}}

You probably get more detail from this by writing to a file, then running stats on that file - see the documentation.
</pre>
</div>
<div title="SlowFeedback" server.title="SlowFeedback" server.page.revision="1447559" server.etag="&quot;willrogers_public/SlowFeedback/1447559:ad9f4b57c36e8b7ad00f8b0ef4e2829ba77bbc1f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131008095958" created="20130930094912" tags="" _hash="2990ad96befa25e5a1224872ecf4d4e3d00cd1d3">
<pre>The slow feedback system runs in the FeedbackIoc along with RfFeedback and VeFeedback.  It uses the same response matrix used by FastFeedback, and inverts it in the same way to get the inverse response matrix.  However, it applies the correction only once per second, which means that it is much less effective.

!!Starting
It is run from {{{python/feedback_ioc.py}}} by the following:

{{{
...
import sofb_server
import rffb_server
...
mode = rffb_server.ringmode()
sofb = sofb_server.sofb_server(mode)
sofb.init()
...
}}}

!!Code
There are two python modules: {{{sofb.py}}} and {{{sofb_server.py}}}.

!!!!{{{sofb_server.py}}}
This contains only the class {{{sofb_server}}}, which has eight methods:
* {{{__init__.py}}} - creates a {{{sofb}}} object, and calls {{{self.records()}}}
* {{{set_datadir()}}} - given a directory, loads the file {{{GoldenBPMResp}}}
* {{{set_power()}}}
* {{{set_limit()}}}
* {{{init()}}} calls {{{cothread.Spawn(self.tick)}}} to set things going.
* {{{tick()}}} - every second, calls {{{self.sofb.correction()}}}, subject to some checks
* {{{single()}}} - calls {{{self.sofb.correction()}}} once. 
* {{{records()}}} - sets up PVs in the database

!!!!{{{sofb.py}}}
This contains only the object {{{sofb}}}, which has seven methods.
* {{{__init__()}}} - sets some variables:
* {{{set_step_limit()}}}
** this is permitted to be between 0.001 and 0.5
* {{{set_threshold()}}}
* {{{get_irm()}}}
* {{{tick()}}} - call {{{correction()}}} every second.  I don't believe that this is used.
* {{{correction()}}}:
** caget PVs which tell you about the status of BPMs and correctors
** caget BPM output PVs
** get inverse response matrix from input (loaded at startup) inverted according to which hardware is available
** apply corrections (scale and afrac)
** caput to hcm and vcm, and heartbeat
* {{{scale()}}} - takes an array {{{xs}}} as an argument:
** If any element is greater than EPS, return 1
** If not, return the smaller of {{{step_limit/max(xs)}}} and 1</pre>
</div>
<div title="unsyncedIcon" server.title="unsyncedIcon" server.page.revision="1521924" server.etag="&quot;system-images_public/unsyncedIcon/1521924:1ab3df4b51fc44b941c4bf3a338be1ecdc122440&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-images_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-images_public" server.permissions="read" server.content-type="image/png" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="f130b8a5de4a2cd9ab4d23a6fc3e9a8d83d1b7b3">
<pre>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</pre>
</div>
<div title="EpelPackaging" server.title="EpelPackaging" server.page.revision="364017" server.etag="&quot;willrogers_public/EpelPackaging/364017:60f99a36f1a5896c96429a17129d75f4e1c29e22&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111020125500" created="20111017172110" tags="" _hash="32c838384072fcb1e4429f6ff4fd350efebb77f4">
<pre>!EPEL Tutorial - Mattias Ellert

This a good starting point to know how much work to dedicate to the packaging of your products to make them EPEL-quality.

!!EPEL 
* Extra repository for RedHat, CentOS, SL
* Maintained by the Fedora community
* Usually based on packages in Fedora
* Version for 4, 5 and 6.
* Getting products into EPEL is a good way for people to find it and to encourage maintainability
* A big part of doing this is making the spec files conform
* First, get it into Fedora
** You can then request inclusion in EPEL - more difficult because 'enterprise' packages are supposed to be more stable.
** Usually the same person is in charge of both packages
** Uses Fedora's infrastructure to build maintain and distribute packages
** Package must comply with Fedora's guidelines.
*** Naming A-Z, a-z, 0-9, -, ., _, +
*** Versions x.y.z-n - change only n only if you haven't changed the source code
*** Shared libraries and dynamic linking are preferred
*** You can't include pre-built binaries; all binaries must be built from the included source code
**** Especially Java - you can't include jar files
*** You can't duplicate system libraries; true for Python, Java etc as well as C/C++
*** Problem with openssl and nss in SL6 raised again here.
*** There are additional rules for EPEL.
** rpmlint is a tool for examining packages
*** doesn't find everything
*** some false positives
* Submit a package
** Become a package maintainer
** Submit packager; a sponsor will check your first package
** Package reviewed by others; swap to persuade someone to do it

!!Debian
* Somewhat similar
</pre>
</div>
<div title="CPPSyntax" server.title="CPPSyntax" server.page.revision="1572122" server.etag="&quot;willrogers_public/CPPSyntax/1572122:ba517f9ca0f61b746610713f42ae47e05aeb854d&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131202113452" created="20131202113452" tags="" _hash="08414dd59b36d28e94cde56b4f11b8ed43b4883f">
<pre>

* Call a static method: {{{QString s = QCoreApplication::applicationDirPath();}}}</pre>
</div>
<div title="NewYorkGirls" server.title="NewYorkGirls" server.page.revision="364393" server.etag="&quot;willrogers_public/NewYorkGirls/364393:89a78a432ff1b2d4edf1b9fec7d2d42687e1d528&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110508140515" created="20110508140033" tags="bellowhead tab" _hash="2fb012eee64148e7560c04e1a85c022b31cbd8db">
<pre>by Bellowhead

This seems pretty simple: the chords repeat as D - G - A - D, where the A can be replaced by A7 sometimes.

Then there's a jiggy bit sometimes, which I transcribed as follows:

{{{

e -------------------------------------------------
B -7-10-7-8-7-------7-8-7-----------7-8-7---------- 
G ------------9-7-9-------9-7-9-9-9----------------

e -------------------------------------------------
B -7-10-7-8-7-------7-8-7-----7--------------------
G ------------9-7-9-------9-7---9-7----------------


}}}
</pre>
</div>
<div title="BigONotation" server.title="BigONotation" server.page.revision="671421" server.etag="&quot;willrogers_public/BigONotation/671421:c16d289ecdbed57dc325b9b92a8f8eb2a8e8d007&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120407095223" created="20120402193248" tags="" _hash="b0cddf35a898f8b91615610098d3e1e03bf40432">
<pre>This concept is crucial to understanding efficiency of programs and algorithms.  The O stands for 'order of', which gives a hint as to its emphasis - the order of magnitude, not the details.

It refers to 'asymptotic complexity' - how many operations as n goes to infinity.

You can figure out an algorithm's efficiency in Big O notation using RecurrenceRelations.

!!Basics
* Look at the most significant term:
** 3n^2 + 17n -&gt; n^2
* The constant factors can depend on things like hardware and OS
* Sometimes constant factors or lower factors can be relevant and the extra complication may not be worth it
* Sometimes the theoretically most efficient algorithm is only for enormous n.

!!Maths
* f(n) is O(g(n)) if mod(f(n)) &lt;= c*mod(g(n)) 
** c is a constant, and this is valid for sufficiently large n
So:
* O(2g(n)) is O(g(n))
* O(log10(n)) is O(ln(n)) is O(lg(n))
* O(2n^2 +3n) is O(n^2)
* O(n^2) is contained in O(n^3) - O(n^2) gives a tighter bound
* O(log n) is contained in O(root(n))

* O(1) is constant
* O(log n) is logarithmic
* O(n) is linear
* O(n log n) is quasi-linear
* O(n^2) is quadratic
* O(a^n) is exponential

Matrix addition is quadratic; matrix multiplication is cubic.
Exponential growth limits you to very small inputs; remember that worst-case scenarios don't always happen.</pre>
</div>
<div title="TiddlySpaceRevisionView" server.title="TiddlySpaceRevisionView" server.page.revision="1521859" server.etag="&quot;system-plugins_public/TiddlySpaceRevisionView/1521859:1618e4b09ca5fc3c2de58d4220c9e9e491b25e4a&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeMissing excludeSearch systemConfig" _hash="be83cfafd902bff89908e6f74d71228655be3490">
<pre>/***
|''Name''|TiddlySpaceRevisionView|
|''Description''|Show tiddler revisions in a stack of cards view|
|''Author''|BenGillies|
|''Version''|0.2.0|
|''Status''|beta|
|''Source''|http://github.com/TiddlySpace/tiddlyspace|
|''CodeRepository''|http://github.com/TiddlySpace/tiddlyspace|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''CoreVersion''|2.6.0|
|''Requires''|TiddlyWebAdaptor|
!Usage
The viewRevisions macro can be attached to any element, which should be passed
in as a parameter.

For example:

&amp;lt;&amp;lt;viewRevisions page:10 link:"&lt;&lt;view modified date&gt;&gt;"&amp;gt;&amp;gt;

would show the revisions "stack of cards" view, 10 at a time, when the modified
date is clicked.
!Code
***/
//{{{
(function($) {

var me = config.macros.viewRevisions = {
	revisionTemplate: "RevisionTemplate",
	revSuffix: " [rev. #%0]", // text to append to each tiddler title
	defaultPageSize: 5, // default number of revisions to show
	defaultLinkText: "View Revisions", // when there's nothing else to use
	offsetTop: 30, // in px
	offsetLeft: 10, // in px
	shiftDownDelay: 50, // in ms
	visibleSlideAmount: 20, // amount of revisions to show on left hand edge after sliding
	zIndex: 100, // default z-index
	handler: function(place, macroName, params, wikifier, paramString, tiddler) {
		params = paramString.parseParams(null, null, true)[0];
		var tiddlerElem = story.findContainingTiddler(place);

		var revButton;
		var pageSize = parseInt(params.page[0], 10) || me.defaultPageSize;
		var linkObj = params.link ? params.link[0] || me.defaultLinkText : false;
		if(linkObj) {
			revButton = $('&lt;span class="button openRevisions" /&gt;')
				.appendTo(place);
			wikify(linkObj, revButton[0], null, tiddler);
		} else {
			revButton = place;
		}

		$(revButton).click(function() {
			if (!$(tiddlerElem).hasClass("revisions")) {
				me.showRevisions(tiddlerElem, tiddler, pageSize);
			} else {
				me.closeRevisions(tiddlerElem);
			}
		});
	},

	// initialisation for revision view
	showRevisions: function(tiddlerElem, tiddler, pageSize) {
		var context = {
			host: tiddler.fields["server.host"],
			workspace: tiddler.fields["server.workspace"]
		};
		$(tiddlerElem).addClass("revisions").attr("revName", tiddler.title);
		// ensure toolbar commands deactivate RevisionsView
		$("a", ".toolbar", tiddlerElem).each(function(index, btn) {
			var _onclick = btn.onclick;
			btn.onclick = function(e) {
				me.closeRevisions(tiddlerElem);
				_onclick.apply(this, arguments);
			};
		});
		// ensure default action deactivates RevisionsView
		var _ondblclick = tiddlerElem.ondblclick;
		tiddlerElem.ondblclick = function(e) {
			me.closeRevisions(tiddlerElem);
			_ondblclick.apply(this, arguments);
		};
		var type = tiddler.fields["server.type"];
		var adaptor = new config.adaptors[type]();
		var userParams = {
			tiddlerElem: tiddlerElem,
			pageSize: pageSize,
			title: tiddler.title
		};
		me.createCloak(tiddlerElem);
		adaptor.getTiddlerRevisionList(tiddler.title, null, context, userParams,
				function(context, userParams) {
					// strip the current revision
					context.revisions.shift();
					me.expandStack(context, userParams);
				});
	},

	// fetch the actual revision and put it in the tiddler div
	showRevision: function(place, revision, callback) {
		var context = {
			host: revision.fields["server.host"],
			workspace: revision.fields["server.workspace"]
		};
		var userParams = {
			revElem: place
		};
		var type = revision.fields["server.type"];
		var adaptor = new config.adaptors[type]();
		var revNo = revision.fields["server.page.revision"];
		adaptor.getTiddlerRevision(revision.title, revNo, context, userParams,
			function(context, userParams) {
				var tiddler = context.tiddler;
				tiddler.title += me.revSuffix
					.format([$(place).attr("revision")]);
				tiddler.fields.doNotSave = true;
				if (store.getTiddler(tiddler.title)) {
					store.deleteTiddler(tiddler.title);
				}
				store.addTiddler(tiddler);

				//now, populate the existing div
				var revElem = userParams.revElem;
				$(revElem).attr("id", story.tiddlerId(tiddler.title));
				$(revElem).attr("refresh", "tiddler");
				var getTemplate = function() {
					var themeName = config.options.txtTheme;
					if (themeName) {
						return store.getTiddlerSlice(themeName,
							me.revisionTemplate) || me.revisionTemplate ||
							"ViewTemplate";
					} else {
						return (store.getTiddler(me.revisionTemplate)) ?
							me.revisionTemplate : "ViewTemplate";
					}
				};
				var template = getTemplate();
				story.refreshTiddler(tiddler.title, template, true);
				callback(tiddler);
			});
	},

	createCloak: function(promoteElem) {
		var el = $(promoteElem);
		// cache styles for resetting later
		el.data({
			top: el.css("top"),
			left: el.css("left"),
			zIndex: el.css("z-index")
		});

		$('&lt;div class="revisionCloak" /&gt;').css("z-index", me.zIndex)
			.click(function() {
				me.closeRevisions(promoteElem);
			})
			.appendTo(document.body);

		el.css("z-index", me.zIndex + 1);
	},

	// clean up, removing all evidence of revision view
	closeRevisions: function(promoteElem) {
		var el = $(promoteElem);
		// revert the original tiddler back to its previous state
		el.removeAttr("revName").removeClass("revisions").css({
			top: el.data("top"),
			left: el.data("left"),
			zIndex: el.data("zIndex")
		});

		// remove any revisions still in the store
		var revisions = $(".revisions");
		revisions.each(function(index, revision) {
			var revAttributes = revision.attributes;
			if ((revAttributes.revname) &amp;&amp;
					(revAttributes.revision)) {
				var revName = revAttributes.revname.value;
				var revNo = revAttributes.revision.value;
				var title = revName + me.revSuffix.format([revNo]);

				if (store.getTiddler(title)) {
					store.deleteTiddler(title);
				}
			}
		});

		// delete the previous revisions
		revisions.remove();

		// remove the cloak
		$(".revisionCloak").remove();
	},

	// calback from getting list of revisions
	expandStack: function(context, userParams) {
		var pageSize = userParams.pageSize;

		var from = userParams.from || 0;
		var tiddlerElem = userParams.tiddlerElem;

		userParams.defaultHeight = $(tiddlerElem).height();
		userParams.defaultWidth = $(tiddlerElem).width();
		if (from &lt; context.revisions.length) {
			me.displayNextRevision(tiddlerElem, userParams, context, from,
				from + pageSize - 1);
		}
	},

	// place the next div above and behind the previous one
	displayNextRevision: function(tiddlerElem, userParams, context, from, to) {
		var revision = context.revisions[from];
		var callback = function() {
			var revText = revBtn.getRevisionText(tiddlerElem, revision);
			tiddlerElem = me.createRevisionObject(tiddlerElem, context,
				userParams, revText);
			$(tiddlerElem)
				.attr("revision", (context.revisions.length - from));
			if ((from &lt; to) &amp;&amp; ((from + 1) &lt; context.revisions.length)){
				me.displayNextRevision(tiddlerElem, userParams, context,
					from + 1, to);
			} else if ((context.revisions.length - 1) &gt; to) {
				me.showMoreButton(tiddlerElem, context, userParams, to + 1);
			}
		};
		me.shiftVisibleDown(userParams.title, callback);
	},

	createRevisionObject: function(tiddlerElem, context, userParams, text) {
		var newPosition = me.calculatePosition(tiddlerElem, context);
		return $('&lt;div class="revisions tiddler" /&gt;')
			.css({
				position: "absolute",
				top: newPosition.top,
				left: newPosition.left,
				"z-index": me.zIndex + 1,
				height: userParams.defaultHeight,
				width: userParams.defaultWidth
			})
			.attr("revName", userParams.title)
			.append(text)
			.insertBefore(tiddlerElem);
	},

	// move the already present revisions down by 1 to fit the next one in
	shiftVisibleDown: function(title, callback) {
		var revisions = $("[revName='%0'].revisions".format([title]));
		var revisionCount = revisions.length;

		$(revisions).animate({top: "+=" + me.offsetTop},
				me.shiftDownDelay, function() {
					revisionCount -= 1;
					if ((callback) &amp;&amp; (!revisionCount)) {
						callback();
					}
				});
	},

	// where we put the new revision
	calculatePosition: function(elem, context) {
		var offset = $(elem).offset();
		var currentPosition = $(elem).position();
		var newPosition = {
			top: currentPosition.top - me.offsetTop
		};
		if ((context.restrictLeft) ||
				((offset.left - me.offsetLeft) &lt;
				$("#contentWrapper").offset().left)) {
			newPosition.left = $(elem).position().left;
			context.restrictLeft = true;
		} else {
			newPosition.left = currentPosition.left - me.offsetLeft;
		}
		return newPosition;
	},

	// equivalent of displayNextRevision, but for the more button
	showMoreButton: function(tiddlerElem, context, userParams, moreIndex) {
		userParams.from = moreIndex + 1;
		me.shiftVisibleDown(userParams.title, function() {
			var btn = me.createRevisionObject(tiddlerElem, context, userParams,
				"");

			var more = createTiddlyButton(btn[0], "more...", "show more revisions",
				function() {
					if ($(".viewRevision").length) {
						return;
					}
					userParams.tiddlerElem = btn[0];
					$(btn).text("")
						.append(revBtn
							.getRevisionText(btn[0], context.revisions[moreIndex]))
						.attr("revision", context.revisions.length - moreIndex);
					me.expandStack(context, userParams);
				});
			$(more).css("float", "right");
		});
	},

	stripRevFromTitle: function(revisionTitle) {
		return revisionTitle.split(/ ?\[rev\. #[0-9]+\]$/)[0];
	},

	onClickRevision: function(revElem, revision, callback) {
		// don't do anything if we are still loading
		if ($(".revisions").hasClass("loading")) {
			return null;
		}

		var origTitle = me.stripRevFromTitle(revision.title);
		if ($(revElem).hasClass("viewRevision")) {
			$(".revisions").addClass("loading");
			me.slideIn(revElem, revision, origTitle, function() {
				store.deleteTiddler(revision.title);
				revision.title = origTitle;
				$(revElem).text("").append(revBtn.getRevisionText(revElem,
						revision))
					.removeAttr("tags").removeAttr("tiddler")
					.removeAttr("refresh").removeAttr("template")
					.removeAttr("id");
				$(".revisions").removeClass("loading");
				if (callback) {
					callback();
				}
			});
			$(revElem).removeAttr("prevPos").removeClass("viewRevision");
		} else {
			var viewRevision = function() {
				var prevPos = $(revElem).position().left;
				$(revElem).addClass("viewRevision").attr("prevPos", prevPos);
				$(".revisions").addClass("loading");
				me.showRevision(revElem, revision, function(rev) {
					me.slideOut(revElem, rev, origTitle, function() {
						$(".revisions").removeClass("loading");
					});
				});
			};
			// make sure another revision isn't already out
			if ($(".viewRevision").length) {
				var newRevElem = $(".viewRevision")[0];
				var newRevision = store.getTiddler($(newRevElem)
					.attr("tiddler"));
				me.onClickRevision(newRevElem, newRevision, viewRevision);
			} else {
				viewRevision();
			}
		}
	},

	slideOut: function(revElem, revision, title, callback) {
		var leftMostPos = $("[revName='%0'].revisions".format([title]))
			.offset().left;
		var width = $(revElem).width();
		var originalLeftPos = $(story.getTiddler(title))
			.position().left;

		var slideAmount = leftMostPos + width - me.visibleSlideAmount;
		$("[revName='%0'].revisions:not(.viewRevision)".format([title]))
			.animate({left: "-=" + slideAmount}, 1000);
		$(revElem)
			.attr("baseHeight", $(revElem).css("height"))
			.css("height", "auto")
			.animate({left: originalLeftPos}, 1000, callback);
	},

	slideIn: function(revElem, revision, title, callback) {
		var slideAmount = $(revElem).offset().left -
			$(story.getTiddler(title)).offset().left;
		var origRevPos = $(revElem).attr("prevPos");

		$("[revName='%0'].revisions:not(.viewRevision)".format([title]))
			.animate({left: "+=" + slideAmount}, 1000);
		$(revElem).animate({left: origRevPos}, 1000, function() {
			$(revElem)
				.css("height", $(revElem).attr("baseHeight"))
				.removeAttr("baseHeight");
			callback();
		});
	}
};

var revBtn;
config.macros.slideRevision = revBtn = {
	btnText: "created by %0 at %1 on %2",
	handler: function(place, macroName, params, wikifier, paramString, tiddler) {
		var btn = revBtn.getRevisionText(place, tiddler);
		$(place).append(btn);
	},

	getRevisionText: function(place, revision) {
		var text = revBtn.btnText.format([revision.modifier,
			revision.modified.formatString("0hh:0mm"),
			revision.modified.formatString("0DD MMM YYYY")]);
		var btn = $('&lt;a href="javascript:;" class="button revButton" /&gt;')
			.text(text)
			.click(function() {
				var revElem = story.findContainingTiddler(this);
				me.onClickRevision(revElem, revision);
			});
		return btn;
	}
};

})(jQuery);
//}}}</pre>
</div>
<div title="FranceFlights" server.title="FranceFlights" server.page.revision="364048" server.etag="&quot;willrogers_public/FranceFlights/364048:0a2137f3a8411c3202a6b8826ceef0f97caedbc3&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110828195147" created="20110828153420" tags="" _hash="2cba22268eef9c7ac80474d2ea09485625215a7e">
<pre>We might also want to go to the south of France. We ideally want to fly out on the 3rd and back on the 17th, both Saturdays.  We'd probably want to rent a car once we get to the airport.

Here's the places we might want to fly from:

| '''Airline''' | '''Source''' | '''Destination''' | '''Price''' | '''Comments''' |
| Ryanair | Luton | Beziers | ~£70 | |
| Ryanair | Birmingham | Montpellier | ~£30 | Flights on Fridays |
| Ryanair | East Midlands | Carcassonne | ~£45 | No flights on Saturdays |
| EasyJet  | Luton | Montpellier | ~£80 | |

Possibles (prices as of 19/8, excluding baggage):
* A bag costs £25 on Ryanair and £30 on EasyJet.  We might want to try and share one...
* The Gatwick and Bristol flights seem more expensive
* There aren't flights on the right days for East Midalnds, but eg the Friday flights seem cheaper.

AirportInfo

!!Travel to airports
!!!!Luton
More than 2hrs on the train, but you can drive and park relatively easily.  You would of course have to fly back there as well
!!!!Birmingham
Only about an hour on the train from Oxford
!!!!East Midlands 
Easier via my parents' house?</pre>
</div>
<div title="StyleSheet" server.title="StyleSheet" server.page.revision="1521913" server.etag="&quot;system-theme_public/StyleSheet/1521913:576012ebe495d0b90a73e9f4153a57c886ed23ea&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-theme_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-theme_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="c5c2e73087cfd75aca63dcb28adc965de9a15baa">
<pre>[[StyleSheetTiddlySpace]]</pre>
</div>
<div title="PythonMock" server.title="PythonMock" server.page.revision="1494121" server.etag="&quot;willrogers_public/PythonMock/1494121:c0bacd19348bc542132f4279dfad6c9bad6ec004&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131031174451" created="20131031094305" tags="" _hash="7cdb3c134db613bf747d52a744bb306c0f8328f2">
<pre>Unit testing often needs mock objects.  The Mock library has become the de facto standard for mocking.  It has been included from python 3.3.

http://www.voidspace.org.uk/python/mock/index.html

There are several things you can mock, including methods, classes and attributes.  

!!Mock and ~MagicMock
The library provides objects Mock and ~MagicMock.  You create such an object by passing in the object you want to mock.  From the documentation:
{{{
Note: In most of these examples the Mock and MagicMock classes are interchangeable. As the MagicMock 
is the more capable class it makes a sensible one to use by default.
}}}</pre>
</div>
<div title="StorageAccounting" server.title="StorageAccounting" server.page.revision="364760" server.etag="&quot;willrogers_public/StorageAccounting/364760:c919d84e3846cf278a165f33132f9425c2b4966b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111017082559" created="20111017080753" tags="" _hash="6d271b3c56bffa918309ff554c9a03a4c3515983">
<pre>Talk at EMI AHM - John Kerr Nilsen; kept in charge by Patrick Fuhrmann.

* May - StAR definition agreed
* Storage Elements must have a plan by October
** Doesn't seem like this will happen
*** StoRM on plan
*** dCache - something happening
*** DPM - delayed because someone left
* Released for EMI 3.

!!Questions
How do we get the information to APEL or DGAS?
Should we have a DB like APEL, then have a publisher like APEL's?

Responsibility - Laurence?  Oliver? 
* These people will do what 'infrastructure' asks them for.  They are data people.
* These people are happy to define the record.
** Does that include how the records are presented (i.e. XML?) or just what information is present?
* We need to correlate what we store in our DB with what they've got in their record
** We also need to understand what is relevant to present, and how this might be done.

They're going to try and organise a teleconference every two weeks to speed up discussion.  The next OGF is in March in Oxford and there needs to be some consensus a reasonable time before then.

There should be a 'profile' of the element for EMI, so that we understand within EMI our interpretations and usages of the same fields are the same and useful to the users.
</pre>
</div>
<div title="JavaScript" server.title="JavaScript" server.page.revision="1468463" server.etag="&quot;willrogers_public/JavaScript/1468463:8f2e7ca3e3e4429918900910e8eaeb39e912612c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131018201159" created="20131018195301" tags="" _hash="fff47ff85f026992d4f70cdc9ed0eada704fd035">
<pre>The basic syntax is simple:

* Comments: {{{//}}}
* "string".length
* {{{6 * 3 / 7}}}, {{{3 + (4 - 2)}}}
* {{{var myAge = 23;}}}

!!Interaction
* {{{confirm("message");}}}
* {{{prompt("message");}}}
* {{{console.log("message");}}}

!!Types
* "Strings"
* Numbers: {{{4, 4.3}}}
* Boolean: {{{true}}} and {{{false}}}
** Comparisons: {{{&gt;, &lt;, &gt;=, &lt;=, ===, !==}}}

!!Strings
* {{{"hello".substring(0,2)}}} -&gt; "he"

!!Control flow
{{{
if ( condition ) 
{
   // do this
} 
else 
{
 // do this instead
}
}}}</pre>
</div>
<div title="JobSources" server.title="JobSources" server.page.revision="662801" server.etag="&quot;willrogers_public/JobSources/662801:5807bb4c762cdf7ba36a6fafec22751e957f5250&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120401122329" created="20120401122329" tags="" _hash="31fe236284c59b56060a5ff339f47fa2477f01ce">
<pre>
* jobsite.co.uk
* Gumtree Oxford
* careers.stackoverflow.com</pre>
</div>
<div title="NewLaptop" server.title="NewLaptop" server.page.revision="851475" server.etag="&quot;willrogers_public/NewLaptop/851475:171060b68bc4ad7ac69f100116f616fa68338d44&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120901100529" created="20120825172545" tags="" _hash="f9a0206bed2c0c68cdcbf19633c75d55d236da44">
<pre>PossibleLaptops

!!Processor
There are a bewildering array of processors available, but if you take a bit of time to figure them out, it becomes a bit more manageable.
LaptopProcessors

!!Graphics
Passmark also does a GPU benchmark, listed below.  For reference, the GPU in my current laptop (NVidia Geforce 8200M) gets a score of 78.
!!!!Options
Intel HD 3000: 414
Intel HD 4000: 576
nVidia GeForce GT 630M: 786
AMD Radeon HD 7650M (Vaio): 867

!!!!Capability
Intel's Sandy Bridge processors come with integrated graphics: HD 3000 for the 2nd generation and HD 4000 for the third.  HD 4000 does seem a reasonable step up.  
!!!!Drivers
Linux drivers are traditionally a bit sketchy for graphics cards, but from what I read it has perhaps got a bit better.


!!Hard drive
There don't seem to be too many variables here.  SSDs are much faster, but don't get very big without being very expensive.  You generally get 500GB or more on a regular HDD, which would be fine.  These are also generally at 5400rpm - I haven't seen a 7200rpm HDD in a standard-spec laptop.  A few pseudo-ultrabooks have a 24 or 32GB SSD as well as a 500GB HDD, which seems like a good idea.

!!Size
I'm quite happy with my widescreen 15.6" HP.  The smaller ones don't seem that small to look at though.  I think 17" would be too big.

!!Other
A USB 3.0 port would be nice, but more than one is probably not necessary.  I think an optical drive is a nice thing to have still, but perhaps I could buy an external one.

I think Linux drivers for wifi are now not worth worrying about, and all laptops should now come with wifi 802.11n.
</pre>
</div>
<div title="DlsRelease" server.title="DlsRelease" server.page.revision="1426556" server.etag="&quot;willrogers_public/DlsRelease/1426556:db61531703e5f0035a1c6c043f974b2e99cd911c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130927145806" created="20130926073243" tags="" _hash="441be7f6a5c1d086c012e5b60f072a9f14bdcccd">
<pre>!!Overview
The package contains two python scripts, {{{dlsbuild.py}}} and {{{dls_release.py}}}.  There is also a directory {{{dlsbuild_scripts}}} which has subdirectories {{{Linux}}} and {{{Windows}}}.  These contain only shell scripts and batch scripts respectively.

!!!{{{dlsbuild}}}
Contains the class {{{builder}}} and the subclasses {{{windows_build}}}, {{{redhat_build}}} and {{{archive_build}}}.  The subclasses provide the method {{{build_script()}}}.  The {{{archive_build}}} class overrides the {{{script_file}}} method as well.  There are also a few helper functions.

It submits builds by choosing the appropriate script from the {{{dlsbuild_scripts}}} directory, and prepending necessary variables to the front.  This is written to the build queue for execution by the build server.

!!!{{{dls_release.py}}}
Has only two functions: 

!!!!{{{release()}}} 
The signature is {{{release(module, versions, options)}}}.  It follows this rough pattern:

* determines the appropriate release number
* creates the right type of {{{builder}}} class and sets options 
* check that the chosen source directory exists in SVN
* if chosen and possible, call {{{builder.test()}}} to run a test build
* create the SVN release directory and copy the source there
* call {{{builder.submit()}}} (this could still release to {{{work}}} or {{{prod}}})

!!!!{{{main()}}}
Determines module, versions and options from the {{{OptionParser}}} arguments and calls {{{release(module, versions, options)}}}.</pre>
</div>
<div title="deleteTiddler" server.title="deleteTiddler" server.page.revision="1521929" server.etag="&quot;system-images_public/deleteTiddler/1521929:211a6bb6630ee2e61049f73a6f81238099dd0ac8&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-images_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-images_public" server.permissions="read" server.content-type="image/svg+xml" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="cdf65cc5eb8e6665817a04cc764cd8797947f799">
<pre>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" viewBox="450 366 38 57"
width="30" height="30"&gt;
	&lt;g stroke="none" stroke-opacity="1" stroke-dasharray="none" fill="none" fill-opacity="1"&gt;
		&lt;g&gt;
			&lt;path d="M 452.1094 421.2422 L 450 421.2422 L 450 423 L 487.9688 423 L 487.9688 421.2422 L 485.8595 421.2422 
			L 485.8595 377.29688 L 487.9688 377.29688 L 487.9688 375.53906 L 485.8595 375.53906 
			C 485.8595 375.53906 481.12463 371.59341 473.02023 370.52802 C 472.6824 368.9689 471.72098 366.75 468.9844 366.75 
			C 466.24783 366.75 465.28638 368.9689 464.94864 370.52802 
			C 456.84418 371.59341 452.1094 375.53906 452.1094 375.53906 L 450 375.53906 L 450 377.29688 L 452.1094 377.29688 
			Z M 467.12247 370.32086 L 467.12247 370.32086 C 467.3805 369.42395 467.90762 368.50781 468.9844 368.50781 
			C 470.0612 368.50781 470.5883 369.42395 470.84634 370.32086 
			C 470.24136 370.2848 469.62054 370.26562 468.9844 370.26562 
			C 468.34827 370.26562 467.72748 370.2848 467.12247 370.32086 Z M 454.21875 420.92804 L 454.21875 420.92804 
			C 455.46762 420.42087 456.32816 419.35281 456.32816 418.11716 L 456.32816 377.29688 L 458.4375 377.29688 
			L 458.4375 421.2422 L 454.21875 421.2422 Z M 460.5469 420.92804 L 460.5469 420.92804 
			C 461.79578 420.42087 462.65625 419.35281 462.65625 418.11716 L 462.65625 377.29688 L 464.76566 377.29688 
			L 464.76566 421.2422 L 460.5469 421.2422 Z M 466.87503 420.92804 L 466.87503 420.92804 
			C 468.1239 420.42087 468.9844 419.35281 468.9844 418.11716 L 468.9844 377.29688 L 471.09378 377.29688 
			L 471.09378 421.2422 L 466.87503 421.2422 Z M 473.2032 420.92804 L 473.2032 420.92804 
			C 474.45203 420.42087 475.31256 419.35281 475.31256 418.11716 L 475.31256 377.29688 L 477.4219 377.29688 
			L 477.4219 421.2422 L 473.2032 421.2422 Z M 479.5313 420.92804 L 479.5313 420.92804 
			C 480.78018 420.42087 481.64066 419.35281 481.64066 418.11716 L 481.64066 377.29688 L 483.75006 377.29688 
			L 483.75006 421.2422 L 479.5313 421.2422 Z" fill="black" class="glyph"/&gt;
		&lt;/g&gt;
	&lt;/g&gt;
&lt;/svg&gt;</pre>
</div>
<div title="BashSyntax" server.title="BashSyntax" server.page.revision="1560276" server.etag="&quot;willrogers_public/BashSyntax/1560276:ed4fc31ddc00fc5a71a4dd861421586533ef2b05&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131125122435" created="20111031100417" tags="" _hash="88c767b901f289cadc9f17b2be95f0c14bc68971">
<pre>See also BashSpecialCharacters, BashStrings, BashConditions


You can continue on to a new line  using a {{{\}}} to escape the newline character.

!!!!Variables

To define a variable, just set it (no spaces).  By definition, constants are in all caps.  To dereference it, add a $:
{{{
# cp=/usr/share/java
# echo $cp
/usr/share/java
}}}

You can assign a default value to a variable:
{{{
VISA=${1:-Visa}
}}}
This will set VISA to $1 (the first parameter) or Visa if $1 is not set.

You can separate a variable from surrounding text like this:
{{{
$ thing=bike
$ echo "Three $things."
Three .
$ echo "Three ${thing}s."
Three bikes.
}}}

!!!!Strings
Inside 's, variables aren't expanded.  Inside "s variable are expanded.
{{{
name=Will
echo "My name is $name."
My name is Will.
echo 'My name is $name.'
My name is $name.
}}}

You can avoid problems with variables having spaces by quoting the variable expansion:

{{{
[hgs15624@pc0072 ~]$ q=hello\ world
[hgs15624@pc0072 ~]$ for i in $q; do echo $i; done
hello
world
[hgs15624@pc0072 ~]$ for i in "$q"; do echo $i; done
hello world
}}}

!!Backticks
You can run a command on the output of another command by putting the second command inside backticks, or inside {{{$(...)}}}:
{{{
ls `pwd`
ls $(pwd)
}}}

!!!!Redirection
{{{
ls &gt; lsfile  # stdout to the file
ls 1&gt; lsfile  # stdout to the file
ls 2&gt; lsfile  # stderr to the file
ls &gt;&gt; lsfile  # appends
ls &gt; lsfile 2&gt;&amp;1  # error follows stdout
}}}
</pre>
</div>
<div title="CompilingEdm" server.title="CompilingEdm" server.page.revision="1560802" server.etag="&quot;willrogers_public/CompilingEdm/1560802:a2382a8520b44b977d3bd21364049aa5b5ad871e&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131125155951" created="20130708134118" tags="" _hash="6db2eeaf436d259e6241374207b4731ca5c62137">
<pre>It looks like it is not that difficult to compile EDM.  It doesn't compile by itself - you have to compile it in the correct location for EPICS.

!!Makefile
* The top-level makefile contains more-or-less nothing - just some files to include.  
* {{{src/Makefile}}} shows which extensions will be built

!!Compiling
{{{
svn co $SVN_ROOT/epics/trunk/extensions
}}}
This directory contains the directories {{{config}}}, {{{configure}}} and {{{src}}}, and the makefile.
* Edit {{{src/Makefile}}} and comment out all DIRS except msi and edm.  
** You can make everything except {{{makeDlsApp}}}, but that tries to install in prod
* Correct the {{{EPICS_HOST_ARCH}}} variable if necessary
*  {{{make}}}
To remove the build artefacts, use 
* {{{make clean}}}
To build using debugging symbols (that's generally a {{{-g}}} option to gcc), use:
* {{{make HOST_OPT=NO}}}


After building, we've also got additional directories
* {{{bin}}}, which includes {{{edm}}}, {{{edmMain}}} and {{{msi}}}
** {{{edm}}} is just a shell script which includes the locations of different files
** {{{edmMain}}} is the actual executable
* {{{html}}}, which has some generated documentation
* {{{include}}}, which has a bunch of {{{.h}}} files
* {{{lib}}} includes {{{.a}}} and {{{.so}}} files (with matching names)
* {{{templates}}}, which contains some fairly cryptic text files

!!Errors
* I got a set of errors because it was looking for {{{linux-x86}}} files which it couldn't find. 
{{{
Can't open perl script "/dls_sw/epics/R3.14.12.3/base/bin/linux-x86/convertRelease.pl": No such file or directory
make -C ./configure install 
Can't open perl script "/dls_sw/epics/R3.14.12.3/base/bin/linux-x86/convertRelease.pl": No such file or directory
make[1]: Entering directory `/scratch/will/extensions/configure'
}}}
I fixed this by 
** {{{export EPICS_HOST_ARCH=linux-x86_64}}}</pre>
</div>
<div title="TiddlyWebConfig" server.title="TiddlyWebConfig" server.page.revision="1521857" server.etag="&quot;system/TiddlyWebConfig/1521857:043a05971872b37178c4e90cc1808f09486e65bc&quot;" modifier="FND" creator="FND" server.workspace="bags/system" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system" server.permissions="read" server.content-type="text/javascript" modified="20130924180405" created="20130924180405" tags="excludeLists excludeSearch systemConfig" _hash="29e43eb7496ba0572556029d183cb3f434369f04">
<pre>/***
|''Name''|TiddlyWebConfig|
|''Description''|configuration settings for TiddlyWebWiki|
|''Author''|FND|
|''Version''|1.3.2|
|''Status''|stable|
|''Source''|http://svn.tiddlywiki.org/Trunk/association/plugins/TiddlyWebConfig.js|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''Requires''|TiddlyWebAdaptor ServerSideSavingPlugin|
|''Keywords''|serverSide TiddlyWeb|
!Code
***/
//{{{
(function($) {

if(!config.extensions.ServerSideSavingPlugin) {
	throw "Missing dependency: ServerSideSavingPlugin";
}
if(!config.adaptors.tiddlyweb) {
	throw "Missing dependency: TiddlyWebAdaptor";
}

if(window.location.protocol != "file:") {
	config.options.chkAutoSave = true;
}

var adaptor = tiddler.getAdaptor();
var recipe = tiddler.fields["server.recipe"];
var workspace = recipe ? "recipes/" + recipe : "bags/common";

var plugin = config.extensions.tiddlyweb = {
	host: tiddler.fields["server.host"].replace(/\/$/, ""),
	username: null,
	status: {},

	getStatus: null, // assigned later
	getUserInfo: function(callback) {
		this.getStatus(function(status) {
			callback({
				name: plugin.username,
				anon: plugin.username ? plugin.username == "GUEST" : true
			});
		});
	},
	hasPermission: function(type, tiddler) {
		var perms = tiddler.fields["server.permissions"];
		if(perms) {
			return perms.split(", ").contains(type);
		} else {
			return true;
		}
	}
};

config.defaultCustomFields = {
	"server.type": tiddler.getServerType(),
	"server.host": plugin.host,
	"server.workspace": workspace
};

// modify toolbar commands

config.shadowTiddlers.ToolbarCommands = config.shadowTiddlers.ToolbarCommands.
	replace("syncing ", "revisions syncing ");

config.commands.saveTiddler.isEnabled = function(tiddler) {
	return plugin.hasPermission("write", tiddler) &amp;&amp; !tiddler.isReadOnly();
};

config.commands.deleteTiddler.isEnabled = function(tiddler) {
	return !readOnly &amp;&amp; plugin.hasPermission("delete", tiddler);
};

// hijack option macro to disable username editing
var _optionMacro = config.macros.option.handler;
config.macros.option.handler = function(place, macroName, params, wikifier,
		paramString) {
	if(params[0] == "txtUserName") {
		params[0] = "options." + params[0];
		var self = this;
		var args = arguments;
		args[0] = $("&lt;span /&gt;").appendTo(place)[0];
		plugin.getUserInfo(function(user) {
			config.macros.message.handler.apply(self, args);
		});
	} else {
		_optionMacro.apply(this, arguments);
	}
};

// hijack isReadOnly to take into account permissions and content type
var _isReadOnly = Tiddler.prototype.isReadOnly;
Tiddler.prototype.isReadOnly = function() {
	return _isReadOnly.apply(this, arguments) ||
		!plugin.hasPermission("write", this);
};

var getStatus = function(callback) {
	if(plugin.status.version) {
		callback(plugin.status);
	} else {
		var self = getStatus;
		if(self.pending) {
			if(callback) {
				self.queue.push(callback);
			}
		} else {
			self.pending = true;
			self.queue = callback ? [callback] : [];
			var _callback = function(context, userParams) {
				var status = context.serverStatus || {};
				for(var key in status) {
					if(key == "username") {
						plugin.username = status[key];
						config.macros.option.propagateOption("txtUserName",
							"value", plugin.username, "input");
					} else {
						plugin.status[key] = status[key];
					}
				}
				for(var i = 0; i &lt; self.queue.length; i++) {
					self.queue[i](plugin.status);
				}
				delete self.queue;
				delete self.pending;
			};
			adaptor.getStatus({ host: plugin.host }, null, _callback);
		}
	}
};
(plugin.getStatus = getStatus)(); // XXX: hacky (arcane combo of assignment plus execution)

})(jQuery);
//}}}</pre>
</div>
<div title="PythonSoftIoc" server.title="PythonSoftIoc" server.page.revision="1575655" server.etag="&quot;willrogers_public/PythonSoftIoc/1575655:8cd8fbb8b85137cdd8c7d29cc78f091a4ca7a25e&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131204114340" created="20130718151905" tags="" _hash="55952f42a1ca1262a6046cd82c346f1aec887c90">
<pre>Exactly what is this?

I think the general idea is that it starts a python interpreter, but also loads a soft IOC at the same time.  You can then use the IOC from inside your python program:
* you can load ~PVs into your database, 
* start it up
* use the variables to test your program
* use python versions of the standard database commands to query the database (type {{{dir()}}} for a list)

Nick is using this to test topup.

The production version is at: {{{/dls_sw/work/R3.14.11/support/pythonSoftIoc}}}. Run it using the following:

{{{
/dls_sw/work/R3.14.11/support/pythonSoftIoc/pythonIoc
}}}

!!Files
* The script {{{pythonIoc}}} acts as a Python interpreter. 
** {{{pythonIoc.in}}} is a template from which {{{pythonIoc}}} is built
* There are python libraries in the {{{python}}} directory.
* It uses binary {{{bin/linux-x86/softIoc}}}.  
* {{{softIocApp}}} contains C code used to edit the behaviour of python

When you run the executable, it starts a python prompt.  I don't really know why {{{HERE}}} is so important, but if you run the executable without defining it, it fails.



 
</pre>
</div>
<div title="BashControlFlow" server.title="BashControlFlow" server.page.revision="1560310" server.etag="&quot;willrogers_public/BashControlFlow/1560310:3db2778a1be143c9ebe34b0dc1fdd175ace5e338&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131125131927" created="20120305151411" tags="bash linux" _hash="ba7f376e20d34feafec5dcacd82a2b380e195638">
<pre>I don't find these exactly intuitive.

!!if
The basic form is as follows:
{{{
if [ condition1 ] 
then
    &lt;do something&gt;
elif [ condition2 ]
then
    &lt;do something else&gt;
else
    &lt;do a third thing&gt;
fi
}}}
For the conditions, see BashConditions.

The new lines in this format are compulsory, but you can save space by putting semicolons:
{{{
if [ condition ] ; then &lt;do-something&gt; ; fi
}}}

!!while
Here's a simple example:
{{{
x=0
while [ $x -lt 10 ]
do 
    let x=$x+1
    echo $x
done
}}}

!!for
You can use this for looping through a number of items, such as command line arguments.   You can use the {{{shift}}} command to move all the arguments left by one (losing the first one) or {{{shift n}}} to shift more than one left.  Then you can work with $1 each time.
{{{
for item in 1 2 3 ; do
    echo "This number is $item"
done
}}}
You can use {{{ {1..10} }}} to expand into the relevant numbers.  You can also use {{{seq}}} but I've found the first version fine.

There's also a C-style for loop:
{{{
for ((i=0; i&lt;10; i++)); do 
        printf "%02d " $i; 
done
}}}

!!case
This works similarly to in programming languages, comparing strings:
{{{
case $var in 
...
...
esac
}}}

!!Redirection
You can redirect a file into the loop:
{{{
while read dept name sal
do
    echo “$name $sal”
done &lt; people
}}}
The while loop is terminated by the EOF.</pre>
</div>
<div title="GuitarDrills" server.title="GuitarDrills" server.page.revision="364112" server.etag="&quot;willrogers_public/GuitarDrills/364112:d4facd4094dc0752e77c4dbd12c22014afcb5baf&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110605135944" created="20110515121921" tags="guitar" _hash="512decc1ffab931e575e83c90ec20f10453ff79f">
<pre>* A Toute Le Monde - main rriff
* Powder Blue - Eb(6) -&gt; Ebmaj7(10)
* Hocus Pocus - riff
* Scattered - fast riff
* Dirty Magic - riff w/ power chords and open E
* Lateralus - 987 riff

* Picking across all 6 strings on a chord
* Combining this with 5 strings chords</pre>
</div>
<div title="DiamondAde" server.title="DiamondAde" server.page.revision="1415035" server.etag="&quot;willrogers_public/DiamondAde/1415035:6ee2fb0b4c5b69aefe3df0cbc602c0ad1d05c449&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130923095931" created="20130726100708" tags="" _hash="43ad3d57752be00e7480ea488f15284d8466ff62">
<pre>The 'Application Development Environment' is the way that Controls have agreed to manage software development.  Nominally, it is used for EPICS software, but I think other applications use this system as well.

See also ConfigureScripts

It is described in [[this document|http://diamdocs/sites/default/TECHNICAL%20DIVISION%20(TEC)/Controls%20and%20Interlocks%20CTRL/Reports%20(REP)/CTRL-XX-rpt-032%20Diamond%20EPICS%20Application%20Development%20Environment/TDI-CTRL-REP-032.doc]] hidden deep in sharepoint:  

* On page 14 there is a diagram of the {{{/dls_sw}}} filesystem 
* On page 50 there is a diagram of the subversion repository

!!Types of project
Different types of project are defined for the purposes of Diamond software development:
* IOC application (the definitions for an IOC to run, e.g. ~BL02I-CS-IOC-02)
** this is all the code loaded into an IOC
* support module (fast feedback and topup)
** these use a similar directory structure to the ~IOCs
* python code (matplotlib, cothread and iocbuilder)
* vendor software (apparently, the unchanged EPICS and extensions code)

!!Python tools
On the {{{/dls_sw}}} filesystem there are a bunch of python libraries.  Several are prepended {{{dls_}}} and refer to tools written here; others like {{{matplotlib}}} and {{{numpy}}} are external tools.  Each tool is stored as an egg, which means that it is possible to define dependencies on specific versions of other tools.  More than one version of each tool may be stored.

{{{configure-tool}}} (below) points to specific versions of these tools. 

See DiamondScripts for the internal tools used to manage SVN, building and releasing.


!!!!External tools
These include {{{matplotlib}}} and {{{numpy}}}.  

* In the Red Hat 6 versions, external python tools have been moved to {{{/dls_sw/prod/tools/RHEL6-x86_64/}}}, along with non-python tools.

!!!!Importing
In order to import a library which is in an egg, you have to use the following lines:
{{{
from pkg_resources import require
require('numpy')
import numpy
}}}
Eggs allow you to specify requirements - either for libraries to depend on each other, or for you to specify when requiring.  However, this is a bit of a faff to type when you're just having a go at a terminal.  We'd like a simple import (such as {{{import dlsdefaults}}}) that would make default versions of all these libraries available.

!!Releases
Diamond software is released to the {{{/dls_sw}}} filesystem, which is read-only to everyone except the build servers.  These are dedicated machines used to check out and build code from SVN.  There is one build server per major operating release, and only administrators can log in.

{{{/dls_sw/work}}} is writable by everyone in the {{{dcs}}} group.  In particular, you can write jobs to the build server's queue in {{{/dls_sw/work/etc/build/queue}}}.  It also appears that the build servers will automatically check out and build any software it finds newly added to the {{{prod}}} part of SVN (?).  Finally, you can release and build new versions of code using the {{{dls-release.py}}} script.



</pre>
</div>
<div title="Euro2012Sweepstake" server.title="Euro2012Sweepstake" server.page.revision="751942" server.etag="&quot;willrogers_public/Euro2012Sweepstake/751942:e7c417c001cc40bcdb6805e508ae9601e33bdd0b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120620144433" created="20120608153314" tags="" _hash="6e44254bc94fa0f6823f0786b6444bdd9b6a1326">
<pre>Results of the draw

| ''Reply'' | ''Person'' | ''Team'' | ''Paid'' |
| 1 | Emily | Greece | yes |
| 2 | Ted | --Russia-- | yes |
| 3 | Steve | Spain | yes |
| 4 | Ben | --Croatia-- | yes |
| 5 | Frazer | Portugal | yes |
| 6 | Charles | Italy | yes |
| 7 | James | --Ireland-- | yes |
| 8 | Hayley | --Ukraine-- | yes |
| 9 | Liam | --Poland-- | yes |
| 10 | John | France | yes |
| 11 | Joe | England | yes |
| 12 | Mike | Germany | yes |
| 13 | Will | --Netherlands-- | yes |
| 14 | Geoff | --Denmark-- | yes |
| 15 | Chris | Czech Republic | yes |
| 16 | Ed | --Sweden-- | yes |
</pre>
</div>
<div title="DigitalMusic" server.title="DigitalMusic" server.page.revision="760941" server.etag="&quot;willrogers_public/DigitalMusic/760941:ec08b776baf7035a2e5c43d7dcae5b7548b0dcad&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120625214349" created="20120624115659" tags="" _hash="8e5e603b6e4b1c73c7558c2ba0cda76410c9fd31">
<pre>This is a pretty complex topic, and I keep on picking up bits and pieces, but  would like to know a bit more.

There are a lot of variables which make music recording complex.  The easy one to follow is bitrate: I have mp3s varying to 56kb/s to 320 kb/s.  It is difficult to assess the most valuable rate to use, because if I record my mp3s and dispose of my CDs, it's arguable that later on I may need higher-quality music than I need now.  However, I don't like the tendency to record everything at the highest theoretical quality, because it quite often is entirely pointless.

There is quite a strong case for keeping a lossless version for future reference, even if you're going to encode it at lower quality for actual use.

!!Articles
* http://www.codinghorror.com/blog/2012/06/the-great-mp3-bitrate-experiment.html - from Coding Horror
* http://people.xiph.org/~xiphmont/demo/neil-young.html - about 24/192

!!Variables
* The simplest one to understand is bitrate.  This varies from about 56-320kb/s.
* Format - there are several: mp3, wma, ogg vorbis
* Encoder - more important than the format and the quality, because a poor encoder produces poor quality representations
* Frequency range: it is well established that humans can hear from 20Hz to 20kHz.  Extra range (up to 192kHz) can be provided, but it is of no value
* Constant or variable bit rate (CBR or VBR) - mp3 is the former, and OGG Vorbis the latter

!!Formats
* mp3 - the most widely used
* WMA - Windows format
* AAC - advanced audio coding: is supposed to be better than mp3 for the same bitrate

!!Spotify
Unless something changes unexpectedly, Spotify will be a large source of my music in future.  They have cleverly catered to audiophiles by providing 320kb/s audio if desired, but ''they don't tell you whether each piece of music is available in that quality''.  They've smartly harnessed the fact that those who care should be able to tell!

The new android app gives me three types of audio: Normal, High quality and Extreme.

[[This page|http://www.spotify.com/uk/help/faq/tech/codec-quality/]] says more, and seems to match what I've said.  I measured Normal to be ~82kbps on my mobile, so they probably compress while streaming.

!!Music collection
I checked my mp3s, and the file sizes are pretty close to what you'd expect from the bitrates.  The rate refers to thousands of bits per second, so 320kbps = 320,000 bits / second.

</pre>
</div>
<div title="TStoRM" server.title="TStoRM" server.page.revision="656880" server.etag="&quot;willrogers_public/TStoRM/656880:4b5da8fb4ebd7fc5415ff8e3d068d50cbcc78733&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120328145556" created="20120328144910" tags="emi test" _hash="5e8a81d1d7d4e86ddce33010454b0e9a8c29e7f7">
<pre>StoRM is an implementation of the SRM interface.  Some other examples are dCache, ARC-SE, 
Highlights:
* posix compatible
* different protocols
* supports tapes

!!Testing
Many testing, validation and verification activities:
* Optimize deployment

!!T-~StoRM
* Uses deployment and test engine
* Simplifies integration
* Uses all SRM clients for testing
* Calls all SRM calls atomically, and can arrange them to make arbitrarily complex test
* Logs everything

It will be released in EMI2.

Many test levels:
* Atomic testing: any SRM operation
** These tests are also used in functional, regression and 
* Functional testing: 
** Reproduces specific use cases
* Sanity testing:
** Verifies installation and configuration
* Regression testing
** StoRM-specific
** Verifies bug fixes: shows the problem if lower version, passes if higher version
** Should be executed in a similar environment to that which 
* Integration testing
** New type - outside of the original scope, but fits well in the architecture
** Verifies transfer functionality between different SRM implementations.
* Performance testing:
** Not StoRM-specific
* Load and stress testing:
** To understand the system under specific load
** Provides useful metrics: response time, resource usage
* Conformance testing:
** determines if SRM implementation agrees with the SRM specification and SRM MoU

It's currently used by the ~StoRM team and the IGI-RTC team (the Italian grid)

Moving towards automated testing and better, quicker, web-based reporting.</pre>
</div>
<div title="MiscLinks" server.title="MiscLinks" server.page.revision="1484044" server.etag="&quot;willrogers_public/MiscLinks/1484044:07437cdc6331c997dac16b3a33ed81fae9b7a623&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131026133416" created="20131026133416" tags="" _hash="cf70865e99056321925e63ae656ca9cf47ff7dd6">
<pre>Maybe these should now move to Delicious.

* Documentary about history of computing: http://bengoldacre.posterous.com/the-triumph-of-the-nerds-documentary-series
* Spotify programming challenge: http://www.spotify.com/uk/blog/archives/2012/08/29/can-you-solve-spotifys-tech-puzzles/
* PEM signature example: http://stackoverflow.com/questions/1580012/using-a-pem-x-509-private-key-to-sign-a-message-natively
* Interesting question about efficiency in languages: http://stackoverflow.com/questions/6964392/speed-comparison-with-project-euler-c-vs-python-vs-erlang-vs-haskell
* http://sunnyday.mit.edu/16.355/parnas-criteria.html - modularity in program design.</pre>
</div>
<div title="DifficultSpellings" server.title="DifficultSpellings" server.page.revision="732440" server.etag="&quot;willrogers_public/DifficultSpellings/732440:2a2d750765927a19a49b5c3f0893246d1c9cce6d&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120604093325" created="20120604093325" tags="" _hash="e99f209e224283dea37f90a2e4cb7ed046f3217d">
<pre>* physiognomy
* inoculate
* innocuous
* Messerschmitt
* affidavit
* tonsillitis
* manoeuvre
* palisade
* sorcerer
* harass
* connoisseur
* innuendo
* Teesside
* idiosyncrasy</pre>
</div>
<div title="UnixDos" server.title="UnixDos" server.page.revision="806381" server.etag="&quot;willrogers_public/UnixDos/806381:3b3cb5ec95b3070b32573561e969e787dd906c91&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120726084751" created="20120724143724" tags="" _hash="f7abf9141c966d81275dee448a0ccf484b6692fc">
<pre>Unix text files have different newline characters to Windows and Macintosh:
* Windows: CR LF
* Unix: LF
* Macintosh (OS 9 and below): CR

The CR LF sequence appears as {{{^M}}} on Linux</pre>
</div>
<div title="CyanogenMod" server.title="CyanogenMod" server.page.revision="1040519" server.etag="&quot;willrogers_public/CyanogenMod/1040519:dad7e3aeacf1b371dd82dcab16baaac40832994e&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130127150358" created="20121208160437" tags="" _hash="70c4509d7cc2b8f161f7b5151ffb221f1e4b7e7f">
<pre>* See also FreeXperia

There are few steps to putting a custom ROM on a phone.

!!Backing up
I backed up the data using ~MyBackup - an app which is free for 30 days.  Next time, I bought Titanium Backup, and backed up all my apps and selected system settings.

Restoring was a bit odd, because for a while it didn't seem to be able to find the backup, but after a little while it showed up.

!!adb
ADB is the Android debugger, which is one of the tools provided by the Android Developer Toolkit (ADT).

!!fastboot
Fastboot is another tool provided by ADT.  It is used later on for unlocking the bootloader and flashing an image.  You can either boot from a kernel:
* {{{fastboot -i 0xfce boot &lt;name&gt;.img}}}
or flash a kernel:
* {{{fastboot -i 0xfce flash boot &lt;name&gt;.img}}}

!!SDK manager
This is part of ADT and allows you to install Android SDK components.  You can open it by running the android script in the {{{tools}}} directory.  It is required for installing USB drivers.

!!Flashtool
Flashtool is a Windows program contributed by some XDA members.  It appears to be focused on Sony phones.

Sony are planning to release [[their own flash tool| http://developer.sonymobile.com/2012/12/06/new-flash-tool-from-sony-for-unlocked-xperia-smartphones-video-beta-download/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=new-flash-tool-from-sony-for-unlocked-xperia-smartphones-video-beta-download]].  It doesn't yet support Xperia Ray.

!!Windows 8 Drivers
Here's a suggestion on how to install drivers on Windows 8: http://forum.xda-developers.com/showthread.php?t=1583801

The names were different for my phone, but I chose the Android ADB Interface from the Sony SA0102 device (in the second step) and it appeared to work.

'''Important:''' it only worked using a ~USB2 port rather than ~USB3.

!!Unlocking the bootloader
This is the official way: http://unlockbootloader.sonymobile.com/instructions
* My unlock bootloader key is: 84861A6735422247
* Hopefully done.

!!Installing CyanogenMod
Here's instructions from the CyanogenMod wiki: 
http://wiki.cyanogenmod.org/w/Install_CM_for_urushi

The note at the bottom means that you've got to flash the kernel (see fastboot above) after going through the installation process.  I didn't do this, and ended up with a Lupus kernel because that was the first one I tried with the right method.

!!Rooting
This is only for the stock Android version which I had installed before.  I failed to actually root it, but it wasn't important.
To root the phone: http://winandtips.blogspot.co.uk/2012/09/how-to-root-xperia-ray-st18i-ics-404.html
* Right now I can't download the rooting toolkit.

</pre>
</div>
<div title="ContactLenses" server.title="ContactLenses" server.page.revision="363920" server.etag="&quot;willrogers_public/ContactLenses/363920:c6031735c044a0ad6e5fa50197c8eceebfc8324a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110515121509" created="20110515121234" tags="" _hash="6ce3f55202d930bf4f1f22dc9ac78b555826ecb2">
<pre>| Contact lens history |c
| | Left | Right |h
|D &amp; A | 3.50 | 4.25 |
| | 3.75 | 4.50 |
| Specsavers | 4.50 | 5.25 |
| | 4.25 | 5.00 |

The first (trial) lot I got from Specsavers seemed a bit too strong.

I've got blue and silver tops: £25 for 30 pairs.  Black tops were less high quality.  You can get higher-quality ones at £30 for 30 pairs.</pre>
</div>
<div title="UbuntuGrub" server.title="UbuntuGrub" server.page.revision="840251" server.etag="&quot;willrogers_public/UbuntuGrub/840251:2e95a7d92c9e6744c19f9397d349937d24df176f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120819154211" created="20111113200526" tags="linux mint ubuntu" _hash="de8528fc6725ee156cd979fc770b8ddeab7694dc">
<pre>When I installed UbuntuElevenTen, I ran into problems loading Windows.  About one in two times, in the process of loading, the screen would suddenly flash black and the computer would restart.

This had happened before and the solution was to install grub 1 rather than grub 2.  I couldn't find how I'd done it last time, so I followed the instructions here: https://help.ubuntu.com/community/DualBoot/Grub.  The partition was hd (0,4).

I'm now going to reboot and see what happens... well, this got us somewhere.  I've got the right version of grub installed, but no windows on the grub menu.  What next?

This page seemed to know what was going on: http://askubuntu.com/questions/77439/how-to-add-windows-7-loader-to-grub but I failed at the second part.  I'll restart now and see what happens.

More instructions on the second part are here - http://ubuntuforums.org/archive/index.php/t-1497399.html.

Finally, I edited my {{{/boot/grub/menu.lst}}} file to correspond with one set of instructions rather than another.  This appears to have worked, but I haven't enhanced my understanding particularly...

!!Partitions

To find out about partitions, I installed gparted
* {{{sudo aptitude install gparted}}}

* {{{/dev/sda}}} refers to some disk 
* {{{/dev/sdax}}} I think refers to partitions on that disk
* {{{/dev/sdb}}}

!!Third time

It seems like these instructions would have worked if I'd followed them all first time: http://forums.linuxmint.com/viewtopic.php?f=46&amp;t=50702

* {{{sudo aptitude install grub}}}
** and allow it to remove grub2
** this installed grub-0.97

* {{{sudo grub-install /dev/sda}}} (not sdax)
* {{{sudo update-grub}}}

However, I had buggered Windows up by (I think) running {{{sudo grub-install /dev/sda1}}} or something.

At one point, I got only to a 'grub rescue' prompt, which I rescued using http://askubuntu.com/questions/119597/grub-rescue-error-unknown-filesystem, then once I booted into linux running the above grub commands.

</pre>
</div>
<div title="StickyBit" server.title="StickyBit" server.page.revision="1013878" server.etag="&quot;willrogers_public/StickyBit/1013878:76c12a3fc555e04d9185216851336860bd9f0965&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130104093506" created="20130104093506" tags="" _hash="d9a39b62fbb5d498e594ddd359735ef1cfcd762a">
<pre>The sticky bit is an additional part of permissions on linux.  

!!Directories
You can see it as the last part of a listing:
{{{
d-w----r-T  4 will    will      4096 Jan  4 09:21 mdbmp5h4j/
drwxrwxrwt  2 lightdm lightdm   4096 Jan  2 09:25 at-spi2/
}}}
It means that anyone can write to a directory, but ownership permissions are retained.  The common use is in {{{/tmp}}} - it means that anyone can write there, but users can't remove other users' files.

Because the {{{t}}} covers the final {{{x}}} permission in the listing, a {{{T}}} is used when the file is not executable by everyone.

!!Files
Originally, the sticky bit was set on executable files to tell the OS to keep an executable in memory.  This is basically not useful any more, and is not used in Linux.
</pre>
</div>
<div title="SiteSubtitle [draft]" server.title="SiteSubtitle [draft]" server.page.revision="365029" server.etag="&quot;willrogers_private/SiteSubtitle%20%5Bdraft%5D/365029:5c188fd49015ade8a2a5a1ffcca4b9868c5cb5d0&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20110508140731" created="20110508140731" tags="excludeLists excludeSearch" publish.name="SiteSubtitle" _hash="226d042d922d0fe1a2ce84760d3018fe6a37c528">
<pre>Stuff</pre>
</div>
<div title="BatchSystems" server.title="BatchSystems" server.page.revision="363763" server.etag="&quot;willrogers_public/BatchSystems/363763:c9c369511c4bdecb9dee65651cca81f8eb49e4d0&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110810074036" created="20110712125927" tags="" _hash="e6e2e431802b84425f3a6554d2805cdf40bbaa11">
<pre>I've known practically since I was born that APEL supports four batch systems: 

!!SGE - Sun Grid Engine
This was free and open source, but characteristically since Oracle have taken over, they've stopped contributing to the open source version.  They have released OGE which is a proprietary version.

A company called Univa have created UGE from the source of SGE.

There is also an open source version called Open Grid Scheduler.

!!PBS 
PBS stands for Portable Batch System.  People actually use Torque, which is a newer clone of it.

!!LSF - Load Sharing Facility
This is a proprietary program, with a swish website here: http://www.platform.com/workload-management/high-performance-computing.  The documentation is not freely available online, as far as I can tell.

!!Condor
This is developed by the University of Wisconsin, with a website here: http://www.cs.wisc.edu/condor/.  

As far as we're concerned, it seems to be Cambridge who are our main users of Condor.

!!Others 
Wikipedia's page on batch systems (or job schedulers) lists a few more: 
* SLURM 
* Maui 
* Moab 
I've never heard of these otherwise.</pre>
</div>
<div title="spaceIcon" server.title="spaceIcon" server.page.revision="1521883" server.etag="&quot;system-info_public/spaceIcon/1521883:034c9d2ad4086e381982a457af71ae89a9c0a961&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-info_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-info_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="ef5f983ca36b19ed82d51224aee1c85d8fecb0a5">
<pre>A [[SiteIcon|SiteIcon tiddler]]@glossary helps provide some identity to your space.  Ideally it'd be a square and a minimum of 48*48 pixels size.  You can upload your site icon using the uploader below.

&lt;&lt;binaryUploadPublic title:SiteIcon&gt;&gt;</pre>
</div>
<div title="ABSLight" server.title="ABSLight" server.page.revision="1308838" server.etag="&quot;willrogers_public/ABSLight/1308838:bd95166092bf1eb90f33169b30e0061afdd40922&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130715141813" created="20130112175553" tags="" _hash="fd80c1d9b50032a41bca792aa72365c8cf22d66f">
<pre>I had a search on the internet for ABS warning lights for polo 6n2.  It seems like it's quite a common problem.  The sensors may be faulty, and there are fuses that may go.

It seems like the car does a check each time it gets up to ~15mph, which fits with what I've seen.

Here was the most useful thread:
* http://www.vwaudiforum.co.uk/forum/showthread.php?927-POLO-Abs-Light

I ended up having to replace the ABS pump.</pre>
</div>
<div title="OgfUrTalk" server.title="OgfUrTalk" server.page.revision="364412" server.etag="&quot;willrogers_public/OgfUrTalk/364412:1cf38c5b896ad51425fafabc494b937f0eab20a8&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120314135042" created="20120314135042" tags="" _hash="676549bbd73ac69f9482410741a551686c003e31">
<pre>!!EMI StAR
An implementation of the OGF UR, which is more general
CAR is also an implementation
StAR finished?  Discussion carries on...
DGAS, HLRmon sensor can be adapted to StAR
GStat ... ?

!!UR 2.0
Fortnightly phone meetings
Use cases have been discussed
StAR taken into account

New charter: fairly sensible description of what is required by a usage record.</pre>
</div>
<div title="CDocumentation" server.title="CDocumentation" server.page.revision="1084137" server.etag="&quot;willrogers_public/CDocumentation/1084137:5c3ca43e8a4288166c6ef369f0fc593c2dcebdb6&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130216152935" created="20130216150028" tags="" _hash="38be0b130272bc01db5b350e29ae7d5244a88257">
<pre>The best documentation for the C language is probably the C book, which I have borrowed from Cristina.

The standard library documentation is found at the GNU site: http://www.gnu.org/software/libc/manual/index.html.  The contents are here:
* http://www.gnu.org/software/libc/manual/html_node/index.html

1. Introduction
2. Errors - codes, messages, and how to handle them
3. Memory
4. Characters
5. Strings and arrays
6. Character sets
7. Locales
8. ?
9. Sorting and searching
10. Pattern matching
11. IO - an introduction
12. IO Streams
13. Low-level IO
14. Filesystem
15. Pipes and FIFOs
16. Sockets
17. Terminal Interface
18. Syslog
19. Mathematics
20. Arithmetic
21. Date and time
22. Resource usage
23. Non-local exits
24. Signal handling
25. Program/system interface
26. Processes
27. Job control
28. ?
29. Users and groups
30. System management
31. System configuration
32. Encryption and passwords
33. Debugging

</pre>
</div>
<div title="MpiAccounting" server.title="MpiAccounting" server.page.revision="364331" server.etag="&quot;willrogers_public/MpiAccounting/364331:876efeee97d034bf07afb673e697a1b1f243c976&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111017100402" created="20111017100019" tags="" _hash="5cc04673a7edc8d8c6c5f24b91f79ee3e328fe36">
<pre>Talk at the EMI AHM by Peter Solagna

!!What do we need?
* Number of nodes
** Node type if the environment is not homogeneous
* Number of cores
** Cores vs. CPUs - could that be the same thing?
* Number of processes / threads
* Node reservation?
** Suppose a process reserves a whole node, but doesn't use all its cores
* Network requirements
* Advanced reservation?

John: we've got to do all of this stuff before we can even think about accounting them.
How do we even account most of this?
Can we account the time wasted in waiting for cores to become available?</pre>
</div>
<div title="_account" server.title="_account" server.page.revision="1521899" server.etag="&quot;tiddlyspace/_account/1521899:fbc9d9929da5ff7a2da5b1b4d766763df4e5ce18&quot;" modifier="None" creator="None" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/html" modified="20131111192332" created="20131111192332" tags="excludeLists excludeMissing excludeSearch" _hash="96201fdb51bfa585c117321c84d64d2fb9a3df71">
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta http-equiv="Content-Type" content="text/html;charset=utf-8"&gt;
	&lt;title&gt;Account&lt;/title&gt;
	&lt;link href="/bags/common/tiddlers/profile.css" type='text/css' rel='stylesheet' &gt;
	&lt;link href="/bags/common/tiddlers/admin.css" type='text/css' rel='stylesheet' &gt;
	&lt;link href="/bags/common/tiddlers/jquery-ui.custom.css" type='text/css' rel='stylesheet' &gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div id="container"&gt;
	&lt;div class="main section"&gt;
		&lt;a class="app" href="/"&gt;home&lt;/a&gt;
		&lt;div class="left"&gt;
		&lt;div id="siteiconArea"&gt;
		&lt;h2&gt;User Icon&lt;/h2&gt;
		&lt;div&gt;
			&lt;img id="siteicon" class="siteicon"&gt;
			&lt;form id="upload" method="POST" enctype="multipart/form-data"&gt;
				&lt;input type="hidden" name="title" value="SiteIcon" /&gt;
				&lt;input type="hidden" name="tags" value="excludeLists"&gt;
				&lt;input type="hidden" name="csrf_token" class="csrf" /&gt;
				&lt;input type="file" name="file" accept="image/*" /&gt;
				&lt;input type="submit" value="upload" /&gt;
			&lt;/form&gt;
			&lt;div id="dropzone"&gt;Drop file here
				&lt;img class="notloading" src="/bags/common/tiddlers/ajax-loader.gif" alt="submitting SiteIcon" /&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;/div&gt;
		&lt;h2&gt;Find Space&lt;/h2&gt;
		&lt;form class="spaceSearch"&gt;
			&lt;input class="inputBox" type="text" placeholder="find space" /&gt;
			&lt;a href="http://docs.tiddlyspace.com/What%20is%20a%20Space%3F" class="help"
				title="What is a space?"&gt;What is a space?&lt;/a&gt;
			&lt;button&gt;view all&lt;/button&gt;
		&lt;/form&gt;
		&lt;div class='list-container'&gt;
			You are a member of the following spaces:
			&lt;ul class='ts-space-search'&gt;
			&lt;/ul&gt;
		&lt;/div&gt;
		&lt;h2&gt;Create New Space&lt;/h2&gt;
		&lt;form class="ts-spaces"&gt;
			&lt;input class="inputBox" type="text" name="spacename" placeholder="space name"&gt;&lt;span class="hostSuffix"&gt;.tiddlyspace.com&lt;/span&gt;
			&lt;input type="submit" value="Create Space" /&gt;
		&lt;/form&gt;
		&lt;/div&gt;
		&lt;div class="right"&gt;
		&lt;h2&gt;Change Password&lt;/h2&gt;
		&lt;form class="ts-password"&gt;
			&lt;input class="inputBox" placeholder="existing password" type="password" name="password"&gt;
			&lt;input class="inputBox" placeholder="new password" type="password" name="new_password"&gt;
			&lt;input class="inputBox" placeholder="new password"	type="password" name="new_password_confirm"&gt;
			&lt;input type="submit" value="Change password"&gt;
		&lt;/form&gt;
		&lt;h2&gt;OpenID&lt;/h2&gt;
		&lt;h3&gt;Why OpenID?&lt;/h3&gt;
		&lt;a href="http://openid.net/"&gt;&lt;img src="/bags/common/tiddlers/openid.png" alt="openid" &gt;&lt;/a&gt;&lt;br /&gt;
		Use just one username and password across hundreds of OpenID-enabled sites.&lt;br /&gt;
		It's an open standard.&lt;br /&gt;
		&lt;a href="http://openid.net/what/"&gt;learn more&lt;/a&gt;
		&lt;ul class="ts-identities"&gt;&lt;/ul&gt;
		&lt;form class="ts-openid" target="_top"&gt;
			&lt;div&gt;
				Add an openid:
			&lt;/div&gt;
			&lt;input class="inputBox" type="text" name="openid" placeholder="your openid" /&gt;
			&lt;input type="submit" value="Register" /&gt;
			&lt;a href="http://openid.net/get-an-openid/" class="help"
			title="What is an open id?"&gt;What is an open id?&lt;/a&gt;
		&lt;/form&gt;
		&lt;/div&gt;
		&lt;div class="clear"&gt;&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;
&lt;script src="/bags/common/tiddlers/backstage.js"&gt;&lt;/script&gt;
&lt;script src='/bags/common/tiddlers/jquery.js'&gt;&lt;/script&gt;
&lt;script src='/bags/tiddlyspace/tiddlers/chrjs'&gt;&lt;/script&gt;
&lt;script src='/bags/common/tiddlers/chrjs.space'&gt;&lt;/script&gt;
&lt;script src='/bags/common/tiddlers/chrjs.users'&gt;&lt;/script&gt;
&lt;script src='/bags/common/tiddlers/chrjs.identities'&gt;&lt;/script&gt;
&lt;script src="/bags/common/tiddlers/jquery-ui.custom.js"&gt;&lt;/script&gt;
&lt;script src='/bags/common/tiddlers/jquery-form.js'&gt;&lt;/script&gt;
&lt;script src="/bags/common/tiddlers/siteiconupload.js"&gt;&lt;/script&gt;
&lt;script src='/bags/common/tiddlers/ts.js'&gt;&lt;/script&gt;
&lt;script src="/status.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
/*
 * jQuery UI Autocomplete HTML Extension
 *
 * Copyright 2010, Scott González (http://scottgonzalez.com)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * http://github.com/scottgonzalez/jquery-ui-extensions
 */
(function( $ ) {

var proto = $.ui.autocomplete.prototype,
	initSource = proto._initSource;

function filter( array, term ) {
	var matcher = new RegExp( $.ui.autocomplete.escapeRegex(term), "i" );
	return $.grep( array, function(value) {
		return matcher.test( $( "&lt;div&gt;" ).html( value.label || value.value || value ).text() );
	});
}

$.extend( proto, {
	_initSource: function() {
		if ( this.options.html &amp;&amp; $.isArray(this.options.source) ) {
			this.source = function( request, response ) {
				response( filter( this.options.source, request.term ) );
			};
		} else {
			initSource.call( this );
		}
	},

	_renderItem: function( ul, item) {
		return $( "&lt;li&gt;&lt;/li&gt;" )
			.data( "item.autocomplete", item )
			.append( $( "&lt;a&gt;&lt;/a&gt;" )[ this.options.html ? "html" : "text" ]( item.label ) )
			.appendTo( ul );
	}
});

})( jQuery );

/***
_accounts application specific javascript
***/
var link;
ts.init(function(ts) {
	if(ts.user.anon) { // redirect to homepage when user not logged in
		window.location = ts.getHost();
	} else if(ts.user.name === ts.currentSpace){
		initSiteIconUpload(ts.user.name);
	} else {
		link = $("&lt;a /&gt;").attr("href", ts.getHost(ts.user.name) + "/_account").text("Change User Icon");
		$("#siteiconArea div").empty().append(link);
	}
	$(".hostSuffix").text("." + ts.getHost("").split("//")[1]);
	ts.getSpaces(function(spaces) {
		$("&lt;div class='info' /&gt;").text("You have " + spaces.length + " spaces.").insertBefore($(".spaceSearch")[0]);
		$("form.spaceSearch input").autocomplete({
			html: true,
			source: function(req, response) {
				ts.getSpaces(function(spaces) {
					var selected = [];
					for(var i = 0; i &lt; spaces.length; i++) {
						var space = spaces[i];
						if(space.name.indexOf(req.term) &gt; -1) {
							var host = ts.getHost(space.name) ;
							var img = host + "/SiteIcon";
							selected.push({
								value: space.name,
								label: '&lt;a href="' + host + '" target="_parent" class="autocompleteLink"&gt;&lt;img src="' + img + '" style="height:24px;width:auto;max-height:24px;max-width:24px;"/&gt;' + space.name + '&lt;/a&gt;'
							});
						}
					}
					response(selected);
				});
			},
			select: function(event, ui) {
				window.top.location = ts.getHost(ui.item.value);
			}
		});

		var $ul = $('.ts-space-search');
		$.each(spaces, function(i, space) {
			$ul.append($('&lt;li/&gt;').html($('&lt;a/&gt;').attr('href', space.uri)
				.text(space.name)));
		});

		$('form.spaceSearch button').click(function(ev) {
			$('.list-container').slideToggle('fast');
			ev.preventDefault();
			return false;
		});
	});
});

if(window != window.top) {
	$("html").addClass("iframeMode");
	$("a").live("click",function(ev) {
		$(ev.target).attr("target", "_parent");
	});
}
&lt;/script&gt;
&lt;!--[if lt IE 8]&gt;
&lt;script type="text/javascript" src="/bags/common/tiddlers/json2.js"&gt;&lt;/script&gt;
&lt;![endif]--&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<div title="EmiCanl" server.title="EmiCanl" server.page.revision="705252" server.etag="&quot;willrogers_public/EmiCanl/705252:587345c83ca2a964890bd37ad95b514b65d55ef6&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120509075959" created="20120509075856" tags="" _hash="7046b3d6eec15b19179b2840aca13bbede4b9c29">
<pre>Owen Synge asked very relevant questions about CANL:
* Are there or will there be python bindings?
** No plans - they don't have the effort available
* Do they plan support for encryption, signature etc?
** No plans - you can get the keys using the libraries and then you're by yourself.

Owen also said what I had discovered about python - you can't check CRLs, etc.  m2crypto is the go-to tool, but it's not complete.

</pre>
</div>
<div title="RaspBMC" server.title="RaspBMC" server.page.revision="1329765" server.etag="&quot;willrogers_public/RaspBMC/1329765:dcd33aa594b1787f772d932474f8b7296181b23b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130731204538" created="20130301130347" tags="pi raspberry raspbmc" _hash="1c3f2c7d9e951c95a1f465f1f7d9969450154ffe">
<pre>Back to RaspberryPi

!!~RaspBMC
There is a whole distro called raspbmc, with a wiki here: http://www.raspbmc.com/.  I downloaded the installer onto an SD card using the Windows installer, and booted up with a network cable connected.

The default screen size was bigger than my TV, but you can change it in Appearance -&gt; Skin Size -&gt; -4%.

!!!Configuration
!!!!Static IP
It appears that our plusnet router assigns IP addresses from 64 to 252.  I tried giving RaspBMC 60, but it failed connecting after a while and I didn't know why.  I've now tried 150.

It still doesn't work.  It says: 'Internet: Busy' or 'Internet: Not Connected.  Please check connection settings.'

I checked in the router settings, and I found that it should attempt to give it the same IP address every time.  It's currently on 192.168.1.98.  Its MAC address is 00:87:23:41:26:14.  

I don't know why it seems to change.  Maybe if it updates the MAC address changes and it looks like a different device.

!!!!SSH
I believe that zeroconf is enabled by default, so I can log in with {{{ssh pi@raspbmc.local}}}.

!!!Performance
While RaspBMC is idle, it uses about 20% CPU and 40% memory.  It takes about 90 seconds to start up.

Often when it's doing something like playing music, it won't respond on SSH or the Yatse remote.  Even the keyboard stops responding (caps lock light)

!!!Addons
Useful addons:
* iPlayer - install from zip
* ~ITVPlayer - install from zip
* 4oD - install from zip, then through menus
* TED Talks - install through menus
* ~TVCatchup - install from zip.  You need an account.  The one with EPG was far too slow.
* Network-Manager - install through menus.  It seems to work quite slowly, so you have to be very patient.
* Radio - install through menus, but for BBC better to use iPlayer.
* Spotimc - I downloaded it from here: http://www.camm.id.au/?p=208.  It has been adapted from standard Spotimc to use the hard float binary.

!!!Problems
* It seems to hang after a little while, especially if you leave it overnight.  I'll try to chase down the circumstances if possible.
* My external HD has problems connecting for long periods - often it says 'unsafe device removal'.  It happened when I was playing music from it.</pre>
</div>
<div title="ApelNotes" server.title="ApelNotes" server.page.revision="1437125" server.etag="&quot;willrogers_public/ApelNotes/1437125:e88b6da3b156c3df2b6e1ef578fac364439df1dc&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131003074741" created="20131003074741" tags="" _hash="d7f5c71157a552f27916e54efb49fc10465bb397">
<pre>!!APEL
LdapBdii
BatchSystems
OtherAccountingServices
StomProtocol
EuropeanMiddlewareInitiative
EmiAhmPadova
EgiCfMunich
EmiAhmHamburg
EgiTfPrague
EmiAhmBudapest
OgfUrTalk

SsmException</pre>
</div>
<div title="FollowTiddlersBlackList" server.title="FollowTiddlersBlackList" server.page.revision="1521900" server.etag="&quot;tiddlyspace/FollowTiddlersBlackList/1521900:ce084b6aacefd2d0fa8c1695d42486b9bce73fea&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="" modified="20131111192334" created="20131111192334" tags="excludeLists excludeMissing excludeSearch" _hash="6fc8ab230a904a71d63a42d97dccd8e135c1ed1c">
<pre>ColorPalette
StyleSheet
SiteSubtitle
GettingStarted
SiteTitle
MainMenu
SiteIcon
DefaultTiddlers
ViewTemplate
PageTemplate
SideBarOptions
EditTemplate
SiteInfo
SideBarTabs
ToolbarCommands</pre>
</div>
<div title="ComputeAccounting" server.title="ComputeAccounting" server.page.revision="363910" server.etag="&quot;willrogers_public/ComputeAccounting/363910:1f8d0e77708f7bc0e46d688cb9733c202d0b0282&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111017103609" created="20111017103433" tags="" _hash="431e795446fbd6e2c9011a7055bc63ab76bede7a">
<pre>Talk at EMI AHM by Andrea Guarise

There are four accounting sensors:
* Unicore
* ARC
* DGAS
* and APEL

Different usage records; we could do with these being able to interoperate.

Objective of the working group is define a common compute accounting Usage Record.
* Start from OGF UR 1.0
* Consider existing use cases
* Try to use OGF UR extension framework - not very useful
** Going to propose our extensions to the OGF
* We need our recommendations by the end of this month.

Work: 
* Existing records - done
* Semantic definitions - mostly done
* Syntactic definitions - not 
* 

So far
* 3 of 4 make XML UR documents (not APEL)
* But their interpretations are different, so they can't interoperate
* i.e. it's easy to make a conforming document, but not easy to make sure that the meanings are the same

OGF:
* Base properties - critical information
* Differentiated properties - more detailed but not necessary information
* Not too much difficulty locking down the semantics 
** some new required fields
** sometimes need to 'tightly restrict' the definition in the OGF UR

Aggregation 
* Not covered by OGF
* Plan to use APEL's version - works already
** But convert the format into XML

EMI Twiki: EMI/ComputeAccounting

Question: correlation with StorageAccounting
* The only point where they meet is the user...</pre>
</div>
<div title="SqlNull" server.title="SqlNull" server.page.revision="728869" server.etag="&quot;willrogers_public/SqlNull/728869:356acbb3b9384f8e19a2cd3216b775a4136913fa&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120531084130" created="20120530090857" tags="null sql" _hash="58bb99d36ddef11cdc94811e7924c7b61ced101b">
<pre>In SQL, NULL represents missing or unknown data.  You can't compare NULL to anything else using =, &lt;=, !=, etc.

Instead, use {{{IS NULL}}} or {{{IS NOT NULL}}}.

You can prevent a column having NULL in a column by putting NOT NULL after its definition in the table.  You can put 0 or "" in these fields, as these values are not null.

For calculations in ~MySQL, you can use {{{IFNULL(value,0)}}} to substitute a value.

NULL counts as false, as does 0.  Everything else counts as true.</pre>
</div>
<div title="spaceTitle" server.title="spaceTitle" server.page.revision="1521874" server.etag="&quot;system-info_public/spaceTitle/1521874:3867194888f49cd6f52a4ef4a5c24be504ea0c87&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-info_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-info_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="fc6cbafbbf1009da659a70f1f400ca4db8ebc84d">
<pre>The title and subtitle of your space are visible to visitors and are also displayed in your browser's tabs. Click on the SiteTitle and SiteSubtitle tiddler links below to make changes.
* [[SiteTitle]]
* [[SiteSubtitle]]</pre>
</div>
<div title="GitRemote" server.title="GitRemote" server.page.revision="1560360" server.etag="&quot;willrogers_public/GitRemote/1560360:afb208d22b8ab2078dedeef433c1d35604590e39&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131125135454" created="20131125135454" tags="" _hash="c75919f49223826b61b29da6f4ec6e7709d68ff0">
<pre>
!!Remotes
Remotes are the repos that you are somehow connected to - in particular, 'origin' is the repo you forked from.
* {{{git remote -v}}} shows you the repos and their locations.
* {{{git remote update}}} will fetch the latest updates to the remote branches
* {{{git remote add &lt;name&gt; &lt;path&gt;}}} adds a remote

Type the text for 'GitRemote'</pre>
</div>
<div title="FastFeedbackExcite" server.title="FastFeedbackExcite" server.page.revision="1342109" server.etag="&quot;willrogers_public/FastFeedbackExcite/1342109:a132bec218aee7d004783d3de99571520bc0358d&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130814072438" created="20130812153733" tags="" _hash="4f9f3323fd9154475c32f03fe692492bfceaa45f">
<pre>There a few files which handle signal processing (but I'm not sure if that is the correct term).

* IIR is [[infinite impulse response|http://en.wikipedia.org/wiki/Infinite_impulse_response]]
* FIR is [[finite impulse response|http://en.wikipedia.org/wiki/Finite_impulse_response]]
* taps are the terms in the FIR's response function, where the first term is a constant * the latest reading, and the second is a constant * the reading before
** MAXTAPS = 9 means that there can be a maximum of 9 terms in the FIR

!!!{{{excite.h}}}
This declares the following functions:
* {{{struct EXCITE}}}
** interestingly, IQ_AMP is a PLANES * CORRECTORS 2D array, but IQ_DISTURBANCE is a (PLANES * CORRECTORS) 1D array
* {{{void excite_init()}}}
* {{{void excite_iq()}}} - called every fofb loop
* {{{void excite_open_loop()}}} - called in the fofb loop if some test fails
* {{{void excite_closed_loop()}}} - called in the fofb loop otherwise
* {{{void register_excite()}}} - this is actually implemented in {{{fofb.c}}}.

!!!{{{fofb.c}}}
The {{{register_excite()}}} function is defined here.  It binds the fields in the one instance of EXCITE to the appropriate ~PVs - there's not  a one-to-one mapping, but most of the fields are bound.

!!!{{{excite-inl.h}}}
This appears to be where the {{{excite.h}}} functions are actually implemented.  They are in a header file for performance reasons, I believe, but I don't know why they are not in {{{excite.h}}} itself.

A static {{{struct EXCITE}}} is declared here for use during the program.

* {{{excite_init()}}} just allocates memory for the static struct {{{EXCITE}}}, then registers the EPICS variables
* The other three functions use the {{{MAP_CORRECTORS}}} macro (defined in {{{filter.h}}}):
** {{{excite_iq()}}} calculates and sets {{{IQ_DISTURBANCE}}} from {{{IQ_AMP}}}
** {{{excite_closed_loop()}}} calls {{{write_to_psc()}}} - a synonym for {{{write_fast()}}}, defined in {{{fofb.c}}}.  It uses {{{FEEDBACK-&gt;state-&gt;c.out}}} 
** {{{excite_open_loop()}}} calls {{{write_to_psc()}}}.  It uses {{{FEEDBACK-&gt;cor}}}.

The latter two functions are actually writing to the power supply controllers, possibly including the {{{IQ_DISTURBANCE}}}.


!!!{{{filter.h}}}
Among other things, this file defines the {{{MAP_CORRECTORS}}} macro.  All it does is executes a block of code for p in PLANES (2) and c in CORRECTORS (9).  The block can then know about p and c even though they don't appear to be in scope.

It also defines:
* FIRTYPE is the same as double
* {{{struct fir}}} 
* {{{struct iir}}} which contains two firs
* {{{struct antiwind}}} which contains two iirs
* the functions implemented in {{{filter.c}}}


!!!{{{filter.c}}}
This defines a struct FOFB and a static instance of that struct.  That instance is used only in the {{{load_controller()}}} function, which as far as I can tell is not used.  The behaviour of the class depends on whether {{{DAMP_TO_INITIAL}}} is defined, which it currently is not.

It also defines the functions:
* {{{firstep()}}}
* {{{fir_step_circular()}}}
* {{{fir_reset()}}}
* {{{iir_step()}}}
* {{{iir_reset()}}}
* {{{antiwind_reset()}}}
** this calls {{{iir_reset()}}} which in turn calls {{{fir_reset()}}}
* {{{tracking_step()}}}
* {{{ratelimit_step()}}}
* {{{plant_reset()}}}
* {{{plant_step()}}}


</pre>
</div>
<div title="DefaultTiddlers" server.title="DefaultTiddlers" server.page.revision="363954" server.etag="&quot;willrogers_public/DefaultTiddlers/363954:8ec87049b157fa0e56a982ebe3daeb6f3d36663b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110421102642" created="20110421101541" tags="" _hash="5a4ffff0ef1ae5e273ce80832366e716684e7e70">
<pre>[[Home]]</pre>
</div>
<div title="RevisionTemplate" server.title="RevisionTemplate" server.page.revision="1521915" server.etag="&quot;system-theme_public/RevisionTemplate/1521915:0779b698d9273fb11ac34631f4da0814b9ebf4cb&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-theme_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-theme_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeMissing excludeSearch" _hash="b182c10523c4d9fe3f622b1529b70d43f5150701">
<pre>&lt;!--{{{--&gt;
&lt;div macro='slideRevision'&gt;&lt;/div&gt;
&lt;div class='heading'&gt;
	&lt;span class="titleBar"&gt;
		&lt;div class='title' macro='view title text'&gt;&lt;/div&gt;
	&lt;/span&gt;
	&lt;span class='modifierIcon'
		macro='view modifier SiteIcon label:no height:48 width:48 preserveAspectRatio:yes'&gt;
	&lt;/span&gt;
	&lt;div class='toolbar'
		macro='toolbar [[ToolbarCommands::RevisionToolbar]] icons:yes height:48 width:48 more:popup'&gt;
	&lt;/div&gt;
	&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class='content'&gt;
	&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class='tagInfo'&gt;
	&lt;div class='tidTags' macro='tags'&gt;&lt;/div&gt;
	&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="SlurmTalk" server.title="SlurmTalk" server.page.revision="882826" server.etag="&quot;willrogers_public/SlurmTalk/882826:81ed904b5728fc9028f738866123dd6fc6bb3d4b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120920092636" created="20120920090658" tags="" _hash="75eef368185ec03f4bca0154278754d83449b458">
<pre>By Giacinto Donvito of INFN.

!!Why SLURM
Torque/MAUI seems to struggle with a lot of cores.
INFN-Bari:
* 250 WN
* 4000 cores
* Torque 2.5 + MAUI
** MAUI schedules only ~4000 jobs
** They modified for up to 18k jobs
** But this saturates the MAUI CPU and it becomes unresponsive.
* Torque memory leak:
** ~2GB memory, needs restarting
** Network connectivity  problems

So they want a new open-source batch system.

!!Requirements
* Scalability
* Reliability and fault-tolerance
* Complex scheduling, grid and local users sharing
* Grid enabled

!!SLURM
* Used by many of the TOP500
* Supports up to 65k WNs, 120k jobs/hour
* Accounting in DB
* Lightweight
* MAUI, MOAB, LSF

!!Testing
They tested a good number of the functionalities, and they seem to work fine.  High Availability configuration is a bit tricky.  Accounting information stored in MySQL/PostgreSQL.

Good support for multi-thread, MPI jobs.

Handles high number of jobs with low memory usage.  Performance decrease is graceful.

Handled high number of WNs and high number of clients submitting jobs simultaneously fine.

!!Pros/cons
* RPM not available - need to compile
* can't transfer output from WN to submission host
* Configuration of scheduling is complex
** Documentation is small

!!CREAM CE and SLURM
Main part of CREAM CE to change is BLAH.  Works fine, but needs e.g. APEL sensor.</pre>
</div>
<div title="LizSize" server.title="LizSize" server.page.revision="1615541" server.etag="&quot;willrogers_public/LizSize/1615541:6fc14f120e7bafed6d95467069bd244c1d7d33e7&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20140104113623" created="20140104113618" tags="" _hash="00164e7765f4e5c86e619473b54ac42d36b04bef">
<pre>Waist 33"
Hip 40"
Bust 34"</pre>
</div>
<div title="TiddlySpaceBackstage" server.title="TiddlySpaceBackstage" server.page.revision="1521910" server.etag="&quot;tiddlyspace/TiddlySpaceBackstage/1521910:9b0bb192fcf18595de81a7209f706a9e7cc56646&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch systemConfig" _hash="390091c823ffd5ec5008f2a8174c3caccfa6302b">
<pre>/***
|''Name''|TiddlySpaceBackstage|
|''Version''|0.8.0|
|''Description''|Provides a TiddlySpace version of the backstage and a homeLink macro|
|''Status''|@@beta@@|
|''Contributors''|Jon Lister, Jon Robson, Colm Britton|
|''Source''|http://github.com/TiddlySpace/tiddlyspace/raw/master/src/plugins/TiddlySpaceBackstage.js|
|''Requires''|TiddlySpaceConfig ImageMacroPlugin TiddlySpaceViewTypes|
!StyleSheet
.tiddler .error.annotation .button{
	display: inline-block;
}

#backstageArea {
	z-index: 49;
	color: white;
	background-color: black;
	background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #222),color-stop(0.5, #333),color-stop(1, #555));
	background: -moz-linear-gradient(center bottom,#222 0%, #333 50%, #555 100%);
	filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff555555, endColorstr=#ff222222);
	-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff555555, endColorstr=#ff222222)";
	height: 25px;
	padding: 0;
}

#backstageButton {
	overflow: hidden;
}

#backstageButton #backstageShow,
#backstageButton #backstageHide {
	margin: 0px;
	padding: 0px;
}

#backstageButton #backstageShow:hover,
#backstageButton #backstageHide:hover {
	background: none;
	color: none;
}

#backstageButton img,
#backstageButton svg {
	width: 24px;
	height: 24px;
}

#messageArea {
	top: 50px;
}

#backstageToolbar {
	position: relative;
}

#backstageArea a {
	padding: 0px;
	margin-left: 0px;
	color: white;
	background: none;
}

#backstageArea a:hover {
	background-color: white;
}

#backstage ol,
#backstage ul {
	padding: auto;
}

#backstageButton a {
	margin: 0;
}

.backstagePanelBody ul {
	padding: 5px;
	margin: 5px;
}

#backstage #backstagePanel {
	margin-left: 5%;
	padding: 0em;
	margin-right: 5%;
}

#backstageToolbar a {
	position: relative;
}

#backstageArea a.backstageSelTab,
#backstageToolbar .backstageTask {
	line-height: 25px;
	color: #767676;
}

.backstageTask .externalImage,
.backstageTask .image {
	display: inline;
}

#backstageToolbar a span {
	z-index: 2;
}

a.backstageTask {
	display: inline;
        margin-left: 1em !important;
}

.backstagePanelBody .button {
	display: inline-block;
	margin-right: 10px;
}

.backstagePanelBody {
	margin: 0 0 0 0.6em;
	padding: 0.4em 0.5em 1px 0.5em;
}

#backstage table {
	margin: auto;
}

#backstage .wizard table {
	border: 0px;
	margin: 0;
}

#backstage div  li.listLink {
	border: 0px;
	width: 78%;
	font-size: 0.7em;
}

#backstage div li.listTitle {
	font-weight: bold;
	text-decoration: underline;
	font-size: 1em;
	background: #ccc;
	width: 100%;
}

#backstage fieldset {
	border: solid 1px [[ColorPalette::Background]];
}

#backstage .viewer table,#backstage table.twtable {
	border: 0px;
}

#backstageToolbar img {
	padding: 0;
}

#backstage .wizard,
#backstage .wizardFooter {
	background: none;
}

.viewer td, .viewer tr, .twtable td, .twtable tr {
	border: 1px solid #eee;
}

#backstage .inlineList ul li {
	background-color: [[ColorPalette::Background]];
	border: solid 1px [[ColorPalette::TertiaryMid]];
	display: block;
	float: left;
	list-style: none;
	margin-right: 1em;
	padding: 0.5em;
}

.backstageClear, .inlineList form {
	clear: both;
	display: block;
	margin-top: 3em;
}

.tiddlyspaceMenu {
	text-align: center;
}

span.chunkyButton {
	display: inline-block;
	padding: 0;
	margin: 0;
	border: solid 2px #000;
	background-color: #04b;
}

span.chunkyButton a.button, span.chunkyButton a:active.button {
	white-space: nowrap;
	font-weight: bold;
	font-size: 1.8em;
	color: #fff;
	text-align: center;
	padding: 0.5em 0.5em;
	margin: 0;
	border-style: none;
	display: block;
}

span.chunkyButton:hover {
	background-color: #014;
}

span.chunkyButton a.button:hover {
	border-style: none;
	background: none;
	color: #fff;
}

#backstage .unpluggedSpaceTab .wizard,
.unpluggedSpaceTab .wizard {
	background: white;
	border: 2px solid #CCC;
	padding: 5px;
}

.syncKey .keyItem {
	border: 1px solid black;
	display: inline-block;
	margin: 0.2em;
	padding: 0.1em 0.1em 0.1em 0.1em;
}

.keyHeading {
	font-size: 2em;
	font-weight: bold;
	margin: 0.4em 0em -0.2em;
}

.unpluggedSpaceTab .putToServer,
.unpluggedSpaceTab .notChanged {
	display: none;
}

.tiddlyspaceMenu ul {
	margin: 0;
	padding: 0;
}

.tiddlyspaceMenu ul li {
	list-style: none;
}

.unsyncedChanges .unsyncedList {
	display: block;
}

.unsyncedList {
	display: none;
}
!Code
***/
//{{{
(function ($) {
    var name = "StyleSheet" + tiddler.title;
    config.shadowTiddlers[name] = "/*{{{*/\n%0\n/*}}}*/".
        format(store.getTiddlerText(tiddler.title + "##StyleSheet")); // this accesses the StyleSheet section of the current tiddler (the plugin that contains it)
    store.addNotification(name, refreshStyles);

    if (!config.extensions.tiddlyweb.status.tiddlyspace_version) { // unplugged
        config.extensions.tiddlyweb.status.tiddlyspace_version = "&lt;unknown&gt;";
        config.extensions.tiddlyweb.status.server_host = {
            url:config.extensions.tiddlyweb.host }; // TiddlySpaceLinkPlugin expects this
    }
    var disabled_tasks_for_nonmembers = ["tiddlers", "plugins", "batch", "sync"];

    var tweb = config.extensions.tiddlyweb;
    var tiddlyspace = config.extensions.tiddlyspace;
    var currentSpace = tiddlyspace.currentSpace.name;
    var imageMacro = config.macros.image;

    if (config.options.chkBackstage === undefined) {
        config.options.chkBackstage = false;
    }

// Set up Backstage
    config.tasks = {};
    config.tasks.status = {
        text:"status",
        tooltip:"TiddlySpace Info",
        content:"&lt;&lt;tiddler Backstage##Menu&gt;&gt;"
    };
    config.tasks.tiddlers = {
        text:"tiddlers",
        tooltip:"tiddlers control panel",
        content:"&lt;&lt;tiddler Backstage##BackstageTiddlers&gt;&gt;"
    };
    config.tasks.plugins = {
        text:"plugins",
        tooltip:"Manage installed plugins",
        content:"&lt;&lt;tiddler Backstage##Plugins&gt;&gt;"
    };
    config.tasks.batch = {
        text:"batch",
        tooltip:"Batch manage public/private tiddlers",
        content:"&lt;&lt;tiddler Backstage##BatchOps&gt;&gt;"
    };
    config.tasks.tweaks = {
        text:"tweaks",
        tooltip:"Tweak TiddlyWiki behaviors",
        content:"&lt;&lt;tiddler Backstage##Tweaks&gt;&gt;"
    };
    config.tasks.exportTiddlers = {
        text:"import/export",
        tooltip:"Import/export tiddlers from/to a TiddlyWiki",
        content:"&lt;&lt;tiddler Backstage##ImportExport&gt;&gt;"
    };
    config.tasks.sync = {
        text:"sync",
        tooltip:"Check Sync status",
        content:"&lt;&lt;tiddler Backstage##SpaceUnplugged&gt;&gt;"
    };

    if (window.location.protocol === "file:") {
        config.unplugged = true;
    }

    config.backstageTasks = ["status", "tiddlers", "plugins",
        "batch", "tweaks", "exportTiddlers", "sync"];

    config.messages.backstage.prompt = "";
// initialize state
    var _show = backstage.show;
    backstage.show = function () {
        // selectively hide backstage tasks and tabs based on user status
        var tasks = $("#backstageToolbar .backstageTask").show();
        var bs = backstage.tiddlyspace;
        if (!config.unplugged) {
            tweb.getUserInfo(function (user) {
                if (user.anon) {
                    jQuery.each(disabled_tasks_for_nonmembers, function (i, task) {
                        var taskIndex = config.backstageTasks.indexOf(task);
                        if (taskIndex !== -1) {
                            config.backstageTasks.splice(taskIndex, 1);
                        }
                    });
                    config.messages.memberStatus = bs.locale.loggedout;
                } else {
                    config.messages.memberStatus = readOnly ?
                        bs.locale.nonmember : bs.locale.member;
                }
            });
        } else {
            config.messages.memberStatus = bs.locale.unplugged;
        }

        // display backstage
        return _show.apply(this, arguments);
    };
    if (readOnly) {
        jQuery.each(disabled_tasks_for_nonmembers, function (i, task) {
            var taskIndex = config.backstageTasks.indexOf(task);
            if (taskIndex !== -1) {
                config.backstageTasks.splice(taskIndex, 1);
            }
        });
    }

    var tasks = config.tasks;
    var commonUrl = "/bags/common/tiddlers/%0";

    backstage.tiddlyspace = {
        locale:{
            member:"You are a member of this space.",
            nonmember:"You are not a member of this space.",
            loggedout:"You are currently logged out of TiddlySpace.",
            unplugged:"You are unplugged."
        },
        showButton:function () {
            var showBtn = $("#backstageShow")[0];
            var altText = $(showBtn).text();
            $(showBtn).empty();
            imageMacro.renderImage(showBtn, "backstage.svg",
                { altImage:commonUrl.format("backstage.png"), alt:altText});
        },
        hideButton:function () {
            var hideBtn = $("#backstageHide")[0];
            var altText = $(hideBtn).text();
            $(hideBtn).empty();
            imageMacro.renderImage(hideBtn, "close.svg",
                { altImage:commonUrl.format("close.png"), alt:altText, width:24, height:24 });
        }
    };

    var _init = backstage.init;
    backstage.init = function () {
        _init.apply(this, arguments);
        var init = function (user) {
            var bs = backstage.tiddlyspace;
            bs.showButton();
            bs.hideButton();
        };
        tweb.getUserInfo(init);
    };

    var home = config.macros.homeLink = {
        locale:{
            linkText:"your home space"
        },
        handler:function (place) {
            var container = $("&lt;span /&gt;").appendTo(place)[0];
            tweb.getUserInfo(function (user) {
                if (!user.anon &amp;&amp; user.name !== currentSpace) {
                    createSpaceLink(container, user.name, null, home.locale.linkText);
                }
            });
        }
    };

    config.macros.exportSpace = {
        handler:function (place, macroName, params) {
            var filename = params[0] ||
                "/tiddlers.wiki?download=%0.html".format(currentSpace);
            $('&lt;a class="button"&gt;download&lt;/a&gt;').// XXX: i18n
                attr("href", filename).appendTo(place);
        }
    };

}(jQuery));
//}}}</pre>
</div>
<div title="missingIcon" server.title="missingIcon" server.page.revision="1521928" server.etag="&quot;system-images_public/missingIcon/1521928:b7103166b78f3145a973e9a689652f7129529374&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-images_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-images_public" server.permissions="read" server.content-type="image/png" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="6d8a31e0f98c2550de88c48110ecdceccb686a1e">
<pre>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</pre>
</div>
<div title="PossibleFlats" server.title="PossibleFlats" server.page.revision="1245012" server.etag="&quot;willrogers_public/PossibleFlats/1245012:568e98ec88d6db07bef090238156fd0e79415524&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130602110648" created="20111119185732" tags="" _hash="4e0808d176197ae9cc1a5b733fa96502f99d558b">
<pre>!!Possibles
!!!!Furnished
* [[Old Rd|http://martinco.com/property/central/oxfordshire/oxford/old_road_headington_135686?oid=147]], £1050, Martin &amp; Co
* [[Turner Close|http://www.scottfraser.co.uk/inst-1287/24-turner-close-east-oxford]], Scott Fraser, £975
* [[Ferry Road|http://www.finders.co.uk/property/east-oxford-area/9289/ferry-road-marston/ox3]], Finders Keepers, £1050
* [[Mark Rd|http://www.rightmove.co.uk/property-to-rent/property-26996898.html?backListLink=%2Fproperty-to-rent%2Fmap.html%3FlocationIdentifier%3DREGION%255E1036%26insId%3D1%26minPrice%3D700%26maxPrice%3D1250%26minBedrooms%3D1%23_includeLetAgreed%3Don%26houseFlatShare%3Dfalse%26locationIdentifier%3DREGION%255E1036%26maxPrice%3D1250%26minBedrooms%3D1%26minPrice%3D700%26previousSearchLocation%3DOxford%26propFeature%3DGarden%26radius%3D0.0%26searchLocation%3DOxford%26searchType%3DRENT%26sortByNewestListing%3Dfalse%26useLocationIdentifier%3Dfalse%26box%3D-1.27611%2C-1.16110%2C51.72166%2C51.77012%26popupPropertyId%3D26996898&amp;fromMap=true]], Martin &amp; Co, £895
* [[Oxford Rd|http://www.bluestonelm.co.uk/properties-to-rent/furnished-2-bedroom-cottage-in-old-marston/]], Bluestone, £900

!!!!Unfurnished

* [[St Clement's|http://martinco.com/property/central/oxfordshire/oxford/st_clements_oxford_136340?oid=147]], Martin &amp; Co, £1025
* [[Green Place|http://www.finders.co.uk/property/central-oxford-area/50405/green-place-new-hinksey/ox1]], Finders Keepers, £1095
* [[Wellington St|http://www.breckon.co.uk/site/php/property.php?id=1276322&amp;type=r]], Breckon, £1050

!!!!New
* [[Sandford|http://www.finders.co.uk/property/east-oxford-area/8162/littlemore-sandford-on-thames/ox4]], Finders Keepers, £850
* [[Botley Road|http://www.chancellors.co.uk/properties/east-oxford-property/2-bedroom-house-to-rent/06040842/botley-oxford?payfreq=monthly&amp;filter[priceHigh]=1300&amp;filter[priceLow]=800&amp;filter[minNumberOfBeds]=1+Bedroom(s)&amp;filter[Status][0]=Status%3AExclude+let&amp;filter[Status][1]=Status%3AExclude+let+agreed&amp;radius=5+(MILES)&amp;grid=&amp;area=Oxford+City&amp;longitude=-1.2577263000001&amp;latitude=51.7520209&amp;saleType=Rent]], Chancellors, £1150
* [[Radley|http://www.chancellors.co.uk/properties/abingdon-property/2-bedroom-cottage-to-rent/05160428/lower-radley-nr-abingdon-oxford?payfreq=monthly&amp;filter[priceHigh]=1300&amp;filter[priceLow]=800&amp;filter[minNumberOfBeds]=1+Bedroom%28s%29&amp;filter[Status][0]=Status%3AExclude+let&amp;filter[Status][1]=Status%3AExclude+let+agreed&amp;radius=5+%28MILES%29&amp;grid=&amp;area=Oxford+City&amp;longitude=-1.2577263000001&amp;latitude=51.7520209&amp;saleType=Rent&amp;page=2]], Chancellors, £925, unfurnished
* [[Lovelace Square|http://www.finders.co.uk/property/north-oxford-area/4848/lovelace-square-north-oxford/ox2]], Finders Keepers, £1225
* [[Kennington|http://martinco.com/property/central/oxfordshire/kennington/river_view_kennington_134796?oid=147]], Martin &amp; Co, £925
* [[Beauchamp Lane|http://www.breckon.co.uk/site/php/property.php?id=1275981&amp;type=r]], Breckon &amp; Breckon, £975
* [[Clive Rd|http://martinco.com/property/central/oxfordshire/oxford/clive_road_oxford_138174?oid=147]], Martin &amp; Co, £950
* [[City Centre|http://martinco.com/property/central/oxfordshire/oxford/oxford_city_centre_138610?oid=147]], Martin &amp; Co, £1075
* [[City Centre|http://search.carterjonas.co.uk/properties-for-rent/oxford/oxfordshire/24279629/8505]], Carter Jonas, £1050, parking?
* [[North Oxford|http://www.elwood.co.uk/propertyDetails.php?pid=435283]], Elwood and Co, £1095
* [[Princes St|http://search.carterjonas.co.uk/properties-for-rent/oxford/oxfordshire/24280666/8512]], Carter Jonas, £995

!!Gone
* [[Temple Rd|http://www.finders.co.uk/property/east-oxford-area/8112/temple-road-oxford/ox4]] on Finders Keepers, £950
* [[Catherine St|http://www.breckon.co.uk/site/php/property.php?id=1276112&amp;type=r]], Breckon and Breckon, £975
* [[Charles St|http://www.rightmove.co.uk/property-to-rent/property-17014494.html]], White Walls, £1150
* [[Ablett Close|http://scottfraser.co.uk/inst-1448/ablett-close-east-oxford]], Scott Fraser, £1100

!!Websites
* [[Rightmove| http://www.rightmove.co.uk/property-to-rent/map.html?locationIdentifier=REGION^1036&amp;minPrice=700&amp;maxPrice=1250&amp;minBedrooms=1&amp;propFeature=Garden#_includeLetAgreed%3Don%26houseFlatShare%3Dfalse%26locationIdentifier%3DREGION^1036%26maxPrice%3D1250%26minBedrooms%3D1%26minPrice%3D700%26previousSearchLocation%3DOxford%26propFeature%3DGarden%26radius%3D0.0%26searchLocation%3DOxford%26searchType%3DRENT%26sortByNewestListing%3Dfalse%26useLocationIdentifier%3Dfalse%26box%3D-1.29774%2C-1.18273%2C51.71972%2C51.76819%26popupPropertyId%3D26875548]] - link is a search for 2 bed properties with garden up to £1250 pcm.
* [[Gumtree | http://www.gumtree.com/flats-and-houses-for-rent/oxford?property_type=&amp;seller_type=&amp;min_beds=2&amp;max_beds=2&amp;min_price=&amp;max_price=235&amp;search_scope=all]] - link is a search for 2 bed properties with max £1000 pcm.
* [[Daily Info | http://www.dailyinfo.co.uk/homes-to-let]] - homes to let; the map seems pretty useful
!!Letting agencies
Here are the letting agencies, in approximate order of usefulness.

* [[Premier Letting | http://www.premieroxford.co.uk/]] - [[this|http://www.premieroxford.co.uk/Property-to-rent/price-0-to-1100/with-2-to-2-beds/]] is a link to a search for furnished 2-bed properties up to £1000 pcm
* [[Scott Fraser | http://www.scottfraser.co.uk]]
* [[RMA Properties | http://www.rmaproperties.co.uk/index.html]] - [[link|http://www.rmaproperties.co.uk/search/?ShowSTC=on&amp;extra_1=0&amp;MinPrice=0&amp;MaxPrice=1000&amp;bedrooms=1&amp;x=63&amp;y=14]] to all properties up to £1000
* [[Martin &amp; Co | http://www.martinco.com]]
* [[Chancellors | http://www.chancellors.co.uk]] - [[link|http://www.chancellors.co.uk/properties/search?payfreq=monthly&amp;filter[priceHigh]=1300&amp;filter[priceLow]=800&amp;]=%C2%A3800&amp;]=%C2%A31%2C300&amp;filter[minNumberOfBeds]=1+Bedroom%28s%29&amp;radius=5+%28MILES%29&amp;filter[Status][]=Status%3AExclude+let&amp;filter[Status][]=Status%3AExclude+let+agreed&amp;grid=&amp;area=Oxford+City&amp;longitude=-1.2577263000001&amp;latitude=51.7520209&amp;saleType=Rent&amp;maxPrice=1430]] to 1-2 bed properties within 5 miles of Oxford, £800-£1250

* [[Finders Keepers | http://www.finders.co.uk]]
* [[Hamptons | http://www.hamptons.co.uk]]
* [[Breckon &amp; Breckon | http://www.breckon.co.uk]]
* [[Hutton Parker | http://www.hutton-parker.co.uk/]]
* [[Spire Properties | http://www.spireproperties.co.uk]]
* [[White Walls | http://www.wwagency.com/]] - [[link|http://www.wwagency.com/properties.php?sale_type_id=2&amp;prop_type_id=0&amp;postcode_area_id=4&amp;beds=1&amp;min=0&amp;max=1000&amp;search=Search]] to all properties in ~OX4 up to £1000 pcm
* [[Real Letting | http://realletting.co.uk/]]
* [[Taylors | http://www.taylorsestateagents.co.uk/]] - [[this|http://www.taylorsestateagents.co.uk/Rent/Search/oxford#/rent/search/oxford/within-5-miles/price-to-1000/to-2-bedrooms/furnishings-furnished/order-pricedescending/]] is a link to 2-bed flats within 5 miles of Oxford for less than £1000 pcm

* [[Beehive Property | http://www.beehiveproperty.co.uk/]] - [[link|http://www.beehiveproperty.co.uk/propertyList.aspx?&amp;st=-1&amp;sb=2&amp;sp=1000&amp;sa=East%20Oxford]] to 2-bed, up-to-£1000 properties in East Oxford
* [[College &amp; County | http://www.collegeandcounty.biz/]]
* [[Enfields | http://enfields-lettings.co.uk]] - [[link|http://enfields-lettings.co.uk/site/index.php?beds-min=2&amp;beds-max=2&amp;price-min=000&amp;price-max=1000&amp;Area=&amp;action=searchresults&amp;pclass%5B%5D=]] to all 2-bed flats up to £1000 pcm
* [[QB Management | http://www.qbman.co.uk/property-to-rent-oxfordshire/lettings-map/]] - link to all properties on a map

* [[Belvoir|http://www.belvoirlettings.com/]]
* [[NOPS|http://www.nops.co.uk]]
</pre>
</div>
<div title="privateAndPublicIcon" server.title="privateAndPublicIcon" server.page.revision="1521887" server.etag="&quot;tiddlyspace/privateAndPublicIcon/1521887:2e723473cb1a0e450fbf2bd699a1800a5785520b&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="image/png" modified="20131111192334" created="20131111192334" tags="excludeLists excludeSearch" _cache-max-age="43200" _hash="5ae36775b0926a779ae5f5ec4f20d07cd3609b39">
<pre>iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAABGdBTUEAALGPC/xhBQAACkNpQ0NQSUNDIFByb2ZpbGUAAHgBnZZ3VFNZE8Dvey+90BJCkRJ6DU1KAJESepFeRSUkAUIJGBKwV0QFVxQVaYoiiyIuuLoUWSuiWFgUFLAvyCKgrIuriIplX/QcZf/Y/b6z88ec35s7c+/cmbnnPAAovoFCUSasAECGSCIO8/FgxsTGMfHdAAZEgAPWAHB52VlB4d4RABU/Lw4zG3WSsUygz/p1/xe4xfINYTI/m/5/pcjLEkvQnULQkLl8QTYP5TyU03MlWTL7JMr0xDQZwxgZi9EEUVaVcfIXNv/s84XdZMzPEPFRH1nOWfwMvow7UN6SIxWgjASinJ8jFOSifBtl/XRphhDlNyjTMwTcbAAwFJldIuCloGyFMkUcEcZBeR4ABEryLE6cxRLBMjRPADiZWcvFwuQUCdOYZ8K0dnRkM30FuekCiYQVwuWlccV8JiczI4srWg7AlzvLooCSrLZMtMj21o729iwbC7T8X+VfF796/TvIevvF42Xo555BjK5vtm+x32yZ1QCwp9Da7PhmSywDoGUTAKr3vtn0DwAgnwdA841Z92HI5iVFIslysrTMzc21EAp4FrKCfpX/6fDV859h1nkWsvO+1o7pKUjiStMlTFlReZnpmVIxMzuLyxMwWX8bYnTr/xw4K61ZeZiHCZIEYoEIPSoKnTKhKBltt4gvlAgzRUyh6J86/B/DZuUgwy9zjQKt5iOgL7EACjfoAPm9C2BoZIDE70dXoK99CyRGAdnLi9Ye/TL3KKPrn/XfFFyEfsLZwmSmzMwJi2DypOIcGaNvQqawgATkAR2oAS2gB4wBC9gAB+AM3IAX8AfBIALEgsWAB1JABhCDXLAKrAf5oBDsAHtAOagCNaAONIAToAWcBhfAZXAd3AR94D4YBCPgGZgEr8EMBEF4iArRIDVIGzKAzCAbiA3Nh7ygQCgMioUSoGRIBEmhVdBGqBAqhsqhg1Ad9CN0CroAXYV6oLvQEDQO/Qm9gxGYAtNhTdgQtoTZsDscAEfAi+BkeCm8As6Dt8OlcDV8DG6GL8DX4T54EH4GTyEAISMMRAdhIWyEgwQjcUgSIkbWIAVICVKNNCBtSCdyCxlEJpC3GByGhmFiWBhnjC8mEsPDLMWswWzDlGOOYJoxHZhbmCHMJOYjlorVwJphnbB+2BhsMjYXm48twdZim7CXsH3YEexrHA7HwBnhHHC+uFhcKm4lbhtuH64Rdx7XgxvGTeHxeDW8Gd4FH4zn4iX4fHwZ/hj+HL4XP4J/QyATtAk2BG9CHEFE2EAoIRwlnCX0EkYJM0QFogHRiRhM5BOXE4uINcQ24g3iCHGGpEgyIrmQIkippPWkUlID6RLpAeklmUzWJTuSQ8lC8jpyKfk4+Qp5iPyWokQxpXAo8RQpZTvlMOU85S7lJZVKNaS6UeOoEup2ah31IvUR9Y0cTc5Czk+OL7dWrkKuWa5X7rk8Ud5A3l1+sfwK+RL5k/I35CcUiAqGChwFrsIahQqFUwoDClOKNEVrxWDFDMVtikcVryqOKeGVDJW8lPhKeUqHlC4qDdMQmh6NQ+PRNtJqaJdoI3Qc3YjuR0+lF9J/oHfTJ5WVlG2Vo5SXKVcon1EeZCAMQ4YfI51RxDjB6Ge8U9FUcVcRqGxVaVDpVZlWnaPqpipQLVBtVO1TfafGVPNSS1Pbqdai9lAdo26qHqqeq75f/ZL6xBz6HOc5vDkFc07MuacBa5hqhGms1Dik0aUxpaml6aOZpVmmeVFzQouh5aaVqrVb66zWuDZNe762UHu39jntp0xlpjsznVnK7GBO6mjo+OpIdQ7qdOvM6BrpRupu0G3UfahH0mPrJent1mvXm9TX1g/SX6Vfr3/PgGjANkgx2GvQaTBtaGQYbbjZsMVwzEjVyM9ohVG90QNjqrGr8VLjauPbJjgTtkmayT6Tm6awqZ1pimmF6Q0z2MzeTGi2z6zHHGvuaC4yrzYfYFFY7qwcVj1ryIJhEWixwaLF4rmlvmWc5U7LTsuPVnZW6VY1Vvetlaz9rTdYt1n/aWNqw7OpsLk9lzrXe+7aua1zX9ia2Qps99vesaPZBdlttmu3+2DvYC+2b7Afd9B3SHCodBhg09kh7G3sK45YRw/HtY6nHd862TtJnE44/eHMck5zPuo8Ns9onmBezbxhF10XrstBl8H5zPkJ8w/MH3TVceW6Vrs+dtNz47vVuo26m7inuh9zf+5h5SH2aPKY5jhxVnPOeyKePp4Fnt1eSl6RXuVej7x1vZO9670nfex8Vvqc98X6Bvju9B3w0/Tj+dX5Tfo7+K/27wigBIQHlAc8DjQNFAe2BcFB/kG7gh4sMFggWtASDIL9gncFPwwxClka8nMoLjQktCL0SZh12KqwznBa+JLwo+GvIzwiiiLuRxpHSiPbo+Sj4qPqoqajPaOLowdjLGNWx1yPVY8VxrbG4eOi4mrjphZ6LdyzcCTeLj4/vn+R0aJli64uVl+cvvjMEvkl3CUnE7AJ0QlHE95zg7nV3KlEv8TKxEkeh7eX94zvxt/NHxe4CIoFo0kuScVJY8kuybuSx1NcU0pSJoQcYbnwRapvalXqdFpw2uG0T+nR6Y0ZhIyEjFMiJVGaqCNTK3NZZk+WWVZ+1uBSp6V7lk6KA8S12VD2ouxWCR39meqSGks3SYdy5udU5LzJjco9uUxxmWhZ13LT5VuXj67wXvH9SsxK3sr2VTqr1q8aWu2++uAaaE3imva1emvz1o6s81l3ZD1pfdr6XzZYbSje8Gpj9Ma2PM28dXnDm3w21efL5YvzBzY7b67agtki3NK9de7Wsq0fC/gF1wqtCksK32/jbbv2nfV3pd992p60vbvIvmj/DtwO0Y7+na47jxQrFq8oHt4VtKt5N3N3we5Xe5bsuVpiW1K1l7RXunewNLC0tUy/bEfZ+/KU8r4Kj4rGSo3KrZXT+/j7eve77W+o0qwqrHp3QHjgzkGfg83VhtUlh3CHcg49qYmq6fye/X1drXptYe2Hw6LDg0fCjnTUOdTVHdU4WlQP10vrx4/FH7v5g+cPrQ2shoONjMbC4+C49PjTHxN+7D8RcKL9JPtkw08GP1U20ZoKmqHm5c2TLSktg62xrT2n/E+1tzm3Nf1s8fPh0zqnK84onyk6Szqbd/bTuRXnps5nnZ+4kHxhuH1J+/2LMRdvd4R2dF8KuHTlsvfli53uneeuuFw5fdXp6qlr7Gst1+2vN3fZdTX9YvdLU7d9d/MNhxutNx1vtvXM6znb69p74Zbnrcu3/W5f71vQ19Mf2X9nIH5g8A7/ztjd9Lsv7uXcm7m/7gH2QcFDhYcljzQeVf9q8mvjoP3gmSHPoa7H4Y/vD/OGn/2W/dv7kbwn1Cclo9qjdWM2Y6fHvcdvPl34dORZ1rOZifzfFX+vfG78/Kc/3P7omoyZHHkhfvHpz20v1V4efmX7qn0qZOrR64zXM9MFb9TeHHnLftv5Lvrd6Ezue/z70g8mH9o+Bnx88Cnj06e/AAOb8/zszueKAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAIeUlEQVRYCe1Zb2xb1RU/9/k9O26TJqVpSByn+UNC3JZuQMukaWirBR9BGtJAIAqlEkgg+ABCsLVFWhAU0DRp8IlNYkIskSYhPvKBDxRvKIwVSin9Q9MmTRziJG7aQtrYcWw/v7tzrn1v3nOe/eIC+cKOZN97zz3n3J/vO+/cc48B/k9rswPs+y5z8B+xXZxZd6GdfuDsZmDQhf06m91L2E9wYMMA1iQ3tfde2xeN2+Zr7l4T6IG3Y01Z3XqUAduLK0bwo9e48jD+wL/7O2BoIBo1a9TFfamBBt6N1edz8HvO+dOoVu9QZYw3bWiAYF2A+f0B0A0f5HJ5sKwCLKQWIZ1ehEKh4FQBSALnLxod2lu1gF816BcGY7stxt8GLh6/WFzXdau1pVlrb2uFhoZ68Pl8DlD2Af5QmJ+/ComZGZi9cBGxcjWNID7IM/bYn/ZEE4pZpbMq0PuHDv+BcfYS2hFuQGB7ezq1jvYQaJpWxbz7VDabg6npGRiPf6PAI5Aks9hDL++Nfuiutcz1BH1gKPYmWn5cqoTbQ1akr0ertqtS1qtdSKXg5Omz6D4pJcoZu/fVPdH3FMOlUxW0HTDTNL5jW4S1Xb/Zxcy1s8hNRs9PwMTklDRiIvB7EPj7klHeVgR9YPDwAAD7IymQO+z8+U1aU1Njuf4PNp6cSsDIufPSXgqjyy9feTh6SjLsrSvoYuzln6Kg7tN81q5bdvyogCWgsfE4nJ+YLA45jPjr2G0D90WXfackuOItorDGgQ8SYJLZvq1/TQDTWr09XaDcj0Ekm4VXiV9OK0Bnc9ZTGL3pwICOcGjZSLnmjzTe2t8HgYBfWGfAn6KnXr6U4ySjXc5l+ZMk5DN03t/b4+o+5UbEuGCBPpkEfWoOtMtXgeHBAj4NrOs2gBneDGZPCLjhWM7VjGEYELmxD746ebo0b9F7dbdd2AHq4NDhpzlnfyGBvt5u6OncYpet2DfOTELgszNFoBWkuN+A7G0RyG/rqiDhZB/54jgeRleIidvBIq89FB2TEg73QMAP0gQGYd4ZbpcylVuLQ/DwF1A3fMIBWNN9YAT9QK0k2vm6T06i/FEBQ/IrtX3dXXLKpzF4Vg6oVTv9/FAsrHM+gTw9HGqF7Vv77XKufQKsj8+IOcYYNIY2QRO6grG+DmhMlF/Mwvz0JZhHt5FHt9nTBpnoTtwdtbyQLf/65MhRSKXSxL7sD7AuGUnUThvc+i1OCqcLtbaW668Yk0vYAYdv6YWWyBbw1wcVYFIy1gVgc187hHfeCKyUm+jjs2CMTK6wWc5obVEH2SY8+XfLeQXa4toNxKTjubGxQc67t+hl5MNEtKPhW/sguLG6TrBxPdAP00q7G/h8xOFSbguFWq9XbI3Db+RAgcbM8nZirgsGPZMgfWJGLdjY3gzBJmeWKo2XtwS8Mdwi2OTj+sRsuYhjHAzW0WkseBZwFfoUaJzpotmG+nXUVCUdfVRSE4KuhezyeuKip2pDw3ohg94flsJ20GL1QCAg5yq2FIeJRJTAl64WIh+XUUX7tminmv463O0SdciOHbTgaXggeJE4OFDIh7cTGSW8dOzzpCcI3w0v8hvF0xHl1G6uQGitwhAdFESFfEGFMcFY5RfpCVrFBrltoh30EhnKYpbiRdamDULEMguQTws1LxU1T3Gb9IjoiPcit01cBs0hTgbSGW8Qpu3lo4OjFrLLU07iRTm8SZdoXnYUaAy3cWIuLKTwBl3d18xuTH5KLnIFQWfmU9Je1TZzJQ1XEnNChvTN7raq8jRJN/kSxWVHgcY3CpMCfGQIOL2oBKWcs0VfzP5iq+DR0Zw4NuoJnAAnvhxD+1zoUfIkf7jT+PKIbFPpgahY7CnOKdCsAP8usgAuzHk/8vzWTpFuCoMl4HNnpyCXdr4T+UwOLo5Ow/Sxc8BLdQ/KPfKRTrlcxfbq1QVbrcRS575KcHULhvMaJHEfWmeTc+IWUdFaaSITvRWCuAeUS9CuzONhQR+KwxTWKErIl07aIsBLv77ZM1ki+SmskUjCi7UqLaidHtgXXeKMf0BCi5kMXLr8nZSv3GIekbljFyz9aofjUYuogjtsB0yuQHKU3a3mMmCaJj7xy3Lt4688GD0uB2qnBYNpb+CWPUL9sYk4NG/aKNheX5TY5/u3YC4xA8bURWDfLRRzE3lzCTWDecPyy+tlj+anZ5NAwIkwL3pHdEpfeKQ7af/gRzFk7ibuz27atuZ3RFqXwH78n88gn8crG8C832Td6AkrQx7NEmmcPYeN+Ilnzo7iYaPipJhfi6/R83EJGLAc91c7YFpf+bQEc+jh6FEs4b5OY/qlI+dG5dSatHOXvhV1vtJiY0YdHCpfeAVoEjDCsB+bU9RPYvijIspaENX0Tpz6WuUzuMv75BXLvr4raFEr5uwBFBQBm6o+tlqbXf8H69PN+/NjJ1RcxuzxZXzqw24LuIImQaqjaZYALs7oc2PjQB95OXUzdq08qlcfPX5S+TGef0NGO7xYyd6K6FEuuH8o9jvG+T+RL8JjQ3097Njejzec+nLRmsf0z8DpM2dFkX1Zmb/lD2tPVPtnwBM0GXvhndidlob/ApSuPJT4d20JAxXV6R5XK9HTmp69gO/KhCM6YTx+5tCeO0QQqGZzVaDJANVFDMt6E2vHdymDuEpbSzMLtbXBdRsbPS/EVMNIzCTx5Z5zghX/vbB7K/mwWq/UWTVoqXhgMPYoBs+D9v9eaI6qUuuDQUYXY7pn0o2DEnjKh9OLS0DJj0vKa2KE+DOFNbcoIdcsb2sGTQYGYjE9Nw33Y0l4L+NwZ7lRrzEumsTDeQjvL3+z1+i89OT8NYGWytQKt8HqFBV70FtuR1YXfsTNHluiJXwqcbpk4I88ooH2L92E/1KCVpz+iXz/D36BLy8VVzwEAAAAAElFTkSuQmCC</pre>
</div>
<div title="ImageMacroPlugin" server.title="ImageMacroPlugin" server.page.revision="1521897" server.etag="&quot;tiddlyspace/ImageMacroPlugin/1521897:0b1570360ca1e8624f2353692d0bbcf2c7c2efa4&quot;" modifier="jon" creator="jon" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" modified="20131111192334" created="20131111192334" tags="excludeLists excludeSearch systemConfig" _hash="3f1696962a1dff3028ea1a4307d8b95c3b3ceb65">
<pre>/***
|''Name''|ImageMacroPlugin|
|''Version''|0.9.4|
|''Description''|Allows the rendering of svg images in a TiddlyWiki|
|''Author''|Osmosoft|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''Notes''|Currently only works in modern browsers (not IE)|
|''Requires''|BinaryTiddlersPlugin|
!Usage
{{{&lt;&lt;image SVG&gt;&gt;}}} will render the text of the tiddler with title SVG as an SVG image (but not in ie where it will fail silently)
!!Parameters
width/height: specify width/height parameters
link: make the image link to a given location
tiddlyLink: link to a tiddler

!Notes
Binary tiddlers in TiddlyWeb when passed through the wikifier will be shown as images.
eg. {{{&lt;&lt;view text wikified&gt;&gt;}}} on a binary tiddler will show the image.
{{{&lt;&lt;view fieldname image&gt;&gt;}}}
will render the value of the tiddler field 'fieldname' as an image. This field can contain a tid
{{{&lt;&lt;image SiteIcon&gt;&gt;}}}
will create an image tag where the tiddler has content type beginning image and not ending +xml
will attempt to create svg object in other scenarios
{{{&lt;&lt;image /photos/x.jpg&gt;&gt;}}}
will create an image tag with src /photos/x.jpg as long as there is not a tiddler called /photos/x.jpg in 
which case it will render that tiddler as an image. Note for the case of svg files it will attempt to render as an svg if possible via the image
tag. It doesn't embed the svg in the dom for security reasons as svg code can contain javascript.
!Code
***/
//{{{
(function($) {

var macro = config.macros.image = {
	shim: "/bags/common/tiddlers/shim",
	ieVersion: config.browser.isIE ? parseInt(config.browser.ieVersion[1], 10) : false,
	svgns: "http://www.w3.org/2000/svg",
	xlinkns: "http://www.w3.org/1999/xlink", 
	svgAvailable: document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1"),
	_fixPrefix: 1,
	_external_cache: {},
	_image_tag_cache: {},
	_image_dimensions: {},
	locale: {
		badImage: "This image cannot be displayed."
	},
	handler: function(place, macroName, params, wikifier, paramString, tiddler){
		var imageSource = params[0];
		// collect named arguments
		var args = macro.getArguments(paramString, params);
		this.renderImage(place, imageSource, args);
	},
	init: function() {
		var startupImages = store.getTaggedTiddlers("systemImage");
		var place = $("&lt;div /&gt;").attr("id", "systemImageArea").appendTo("body").hide()[0];
		for(var i = 0; i &lt; startupImages.length; i++) {
			var image = startupImages[i];
			macro.renderImage(place, image.title, { idPrefix: "" });
		}
		var data = new Image();
		data.onload = function() {
			// note ie 8 only supports data uris up to 32k so cannot be relied on
			macro.supportsDataUris = this.width != 1 || this.height != 1 ? false : true;
			macro.supportsDataUris = macro.ieVersion &amp;&amp; macro.ieVersion &lt; 9 ? false : macro.supportsDataUris;
		};
		data.onerror = data.onload;
		data.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
	},
	refreshImage: function(src) {
		var elements = macro._image_tag_cache[src] ? macro._image_tag_cache[src] : [];
		if(macro._image_dimensions[src]) {
			macro._image_dimensions[src] = false;
		}
		for(var i = 0; i &lt; elements.length; i++) {
			var el = $(elements[i]);
			var newSrc = "%0?nocache=%1".format(src, Math.random());
			el.attr("src", newSrc); // force reload
		}
	},
	isBinaryImageType: function(contentType) {
		return (contentType &amp;&amp; contentType.indexOf("image") === 0 &amp;&amp;
			contentType.indexOf("+xml") != contentType.length - 4) ? true : false;
	},
	isImageTiddler: function(tiddler) {
		return macro.isSVGTiddler(tiddler) || macro.isBinaryImageTiddler(tiddler);
	},
	isSVGTiddler: function(tiddler) {
		var type = tiddler ? tiddler.fields['server.content-type'] : false;
		return type == "image/svg+xml";
	},
	isBinaryImageTiddler: function(tiddler) {
		return macro.isBinaryImageType(tiddler.fields['server.content-type']);
	},
	renderImage: function(place, imageSource, options) {
		var imageTiddler = store.getTiddler(imageSource);
		var container;
		var classes = ["image"];
		if(options.link) {
			classes = classes.concat(["imageLink", "externalLink"]);
			container = $("&lt;a /&gt;").attr("href", options.link).appendTo(place)[0];
		} else if(options.tiddlyLink) {
			classes.push("imageLink");
			container = createTiddlyLink(place, options.tiddlyLink, false);
		} else {
			container = $("&lt;span /&gt;").appendTo(place)[0];
		}
		$(container).addClass(classes.join(" "));

		options = options ? options : {};
		if(imageTiddler &amp;&amp; macro.isBinaryImageTiddler(imageTiddler)) { // handle the case where we have an image url
			return macro._renderBinaryImageTiddler(container, imageTiddler, options);
		} else if(imageTiddler){ // handle the case where we have a tiddler
			return macro._renderSVGTiddler(container, imageTiddler, options);
		} else { // we have a string representing a url
			return macro._renderBinaryImageUrl(container, imageSource, options);
		}
	},
	_renderAlternateText: function(container, options) {
		var img;
		var src = options.src || "";
		if(options.width &amp;&amp; options.height) {
			img = $("&lt;img /&gt;").attr("src", src).addClass("svgImageText").attr("width", options.width).
				attr("height", options.height).appendTo(container);
		}
		var alt = options.alt;
		if(img &amp;&amp; alt) {
			img.attr("alt", alt).attr("title", alt);
		} else if(alt) {
			$(container).addClass("svgImageText").text(alt);
		}
		macro._image_tag_cache[src] = img;
	},
	_renderSVGTiddler: function(place, tiddler, options) {
		if(!options) {
			options = {};
		}
		merge(options, { tiddler: tiddler, fix: true});

		if(macro.svgAvailable) {
			this._importSVG(place, options); // display the svg
		} else if(options.altImage) {
			var image = options.altImage;
			delete options.altImage;
			this._renderBinaryImageUrl(place, image, options);
		} else {
			this._renderAlternateText(place, options); // instead of showing the image show the alternate text.
		}
	},
	_renderBinaryImageTiddler: function(place, tiddler, options) {
		var resourceURI;
		var fields = tiddler.fields;
		if(fields["server.type"] == "tiddlyweb") { // construct an accurate url for the resource
			resourceURI = "%0/%1/tiddlers/%2".format(config.defaultCustomFields["server.host"],
				fields["server.workspace"], encodeURI(fields["server.title"]));
		} else { // guess the url for the resource
			resourceURI = tiddler.title;
		}
		var ctype = fields["server.content-type"] || tiddler.type;
		var text = tiddler.text;
		if(macro.supportsDataUris &amp;&amp; ctype &amp;&amp; text.indexOf("&lt;html") == -1) {
			var uri = "data:%0;base64,%1".format(ctype, text);
			options.src = resourceURI;
			return macro._renderBinaryImageUrl(place, uri, options);
		} else if(options.src) {
			return macro._renderBinaryImageUrl(place, options.src, options);
		} else {
			return macro._renderBinaryImageUrl(place, resourceURI, options);
		}
	},
	_renderImageTag: function(container, src, width, height, options) {
		var img;
		img = $("&lt;img /&gt;").appendTo(container);
		if(height) {
			img.attr("height", height);
		}
		if(width) {
			img.attr("width", width);
		}
		if(macro.ieVersion &amp;&amp; macro.ieVersion &lt; 7 &amp;&amp; macro.shim &amp;&amp; options.ie6png) {
			$(img).css({width: userW, height: userH,
					filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='%0', sizingMethod='scale')".format(src)
				}).attr("src", macro.shim);
		} else {
			img.attr("src", src);
		}
		if(!macro._image_tag_cache[options.srcUrl]) {
			macro._image_tag_cache[options.srcUrl] = [];
		}
		img = $(img).addClass(options.imageClass)[0];
		macro._image_tag_cache[options.srcUrl].push(img);
		return img;
	},
	_getDimensions: function(realDimensions, reqDimensions, preserve) {
		var w = realDimensions.width;
		var h = realDimensions.height;
		var reqh = reqDimensions.height;
		var reqw = reqDimensions.width;
		var finalw = w, finalh = h;
		var ratiow = reqw / w, ratioh = reqh / h;
		var scaledw = ratioh * w;
		var scaledh = ratiow * h;
		if(!reqw &amp;&amp; reqh) {
			finalw = scaledw;
			finalh = reqh;
		} else if(reqw &amp;&amp; !reqh) {
			finalw = reqw;
			finalh = scaledh;
		} else if(reqh &amp;&amp; reqw) {
			var preserveWidth = w &gt; h ? true : false;
			if(preserve) {
				if(preserveWidth &amp;&amp; scaledh &lt; reqh) {
					finalh = scaledh;
					finalw = reqw;
				} else {
					finalh = reqh;
					finalw = scaledw;
				}
			} else {
				finalw = reqw;
				finalh = reqh;
			}
		}
		return { width: parseInt(finalw, 10), height: parseInt(finalh, 10) };
	},
	_renderBinaryImageUrl: function(container, src, options) {
		var srcUrl = options.src ? options.src : src;
		srcUrl = srcUrl.indexOf("/") === -1 ? "/%0".format(srcUrl) : srcUrl; // for IE. 
		var image_dimensions = macro._image_dimensions[srcUrl];
		var image = new Image(); // due to weird scaling issues where you use just a width or just a height
		var createImageTag = function(dimensions, error) {
			if(error) {
				var altImage = options.altImage;
				if(altImage) {
					delete options.altImage;
					macro._renderBinaryImageUrl(container, altImage, options);
				} else {
					options.src = src;
					macro._renderAlternateText(container, options);
				}
			} else {
				var dim = macro._getDimensions(dimensions, { 
					width: options.width, height: options.height }, options.preserveAspectRatio);
				options.srcUrl = srcUrl;
				macro._renderImageTag(container, src, dim.width, dim.height, options);
			}
		};

		if(!image_dimensions) {
			image.onload = function() {
				var dimensions = { width: image.width, height: image.height};
				macro._image_dimensions[srcUrl] = dimensions;
				createImageTag(dimensions);
			};
			image.onerror = function() {
				createImageTag(null, true);
			};
			image.src = src;
		} else {
			createImageTag(image_dimensions);
		}
	},
	_generateIdPrefix: function(){
		return "twsvgfix_" + (this._fixPrefix++).toString() + "_";
	},
	_fixSVG: function(childNodes, idPrefix) {
		var urlPattern = /url\(\#([^\)]*)\)*/ig;
		var fixes = [
		{ attr: "id", pattern: /^(.*)$/ig },
		{ attr: "href", namespace: macro.xlinkns, pattern: /^#(.*)$/ig }
		];
		var url_fixes = ["filter", "fill", "mask", "stroke", "style"];
		for(var i = 0; i &lt; url_fixes.length; i++) {
			fixes.push({ attr: url_fixes[i], pattern: urlPattern });
		}
		for(var t = 0; t &lt; childNodes.length; t++) {
			var node = childNodes[t];
			for(var a = 0; a &lt; fixes.length; a++) {
				var fix = fixes[a];
				var attr = fix.attr;
				var ns = fix.namespace || "";
				if(node.hasAttributeNS &amp;&amp; node.hasAttributeNS(ns, attr)) {
					var v = node.getAttributeNS(ns, attr);
					fix.pattern.lastIndex = 0;
					var match = fix.pattern.exec(v);
					if(match) {
						// Make sure replacement string doesn't contain any single dollar signs
						var toReplace = match[1];
						if(toReplace.indexOf(idPrefix) !== 0 &amp;&amp; toReplace.indexOf("twglobal_") !== 0) {
							var replacement = (idPrefix + toReplace).replace("$", "$$$$"); 
							v = v.replace(match[1], replacement);
						}
						node.setAttributeNS(ns, attr,v);
					}
				}
			}
			var children = node.childNodes;
			if(children.length &gt; 0) {
				this._fixSVG(children, idPrefix);
			}
		}
	},
	_importSVG: function(place, options){
		options = options ? options : {};
		var svgDoc, tiddlerText = options.tiddler.text;
		if (window.DOMParser) {
			svgDoc = new DOMParser().parseFromString(tiddlerText, "application/xml").documentElement;
			var idPrefix = options.idPrefix || this._generateIdPrefix();
			this._fixSVG([svgDoc], idPrefix);
			var el = document.importNode(svgDoc, true);
			var svgHolder = document.createElementNS(macro.svgns,"svg");
			var width = options.width;
			var height = options.height;
			if(width || height) {
				if(width &amp;&amp; height) { // set view box of containing svg element based on the svg viewbox and width and height.
					var viewBox = el.getAttribute("viewBox");
					var topLeft = "0 0";
					if(viewBox) {
						topLeft = viewBox.replace(/([0-9]*) +([0-9]*) +([0-9]*) +([0-9]*) */gi,"$1 $2");
					}
					svgHolder.setAttributeNS(macro.svgns, "viewBox", "0 0 %0 %1".format(width, height));
				} else {
					if(!width) {
						width = el.getAttribute("width");
					}
					if(!height) {
						height = el.getAttribute("height");
					}
				}
				svgHolder.setAttribute("width", width);
				svgHolder.setAttribute("height", height);

				el.setAttribute("width", "100%");
				el.setAttribute("height", "100%");
				svgHolder.setAttribute("class", "svgImage svgIcon %0".format(options.imageClass || ""));
				svgHolder.appendChild(el);
				place.appendChild(svgHolder);
			}
			else {
				var existing = el.className ? el.className.baseVal : "";
				el.setAttribute("class","svgImage %0".format(existing));
				place.appendChild(el);
			}
			// if a tiddler attribute is set this is read as a link
			$("[tiddler], [tiddlyLink]", place).attr("refresh", "link").click(function(ev) {
				var tiddler = $(ev.target).attr("tiddlyLink");
				if(tiddler) {
					story.displayTiddler(ev.target, tiddler);
				}
			});
		}
	},
	getArguments: function(paramString, params) {
		var args = paramString.parseParams("name", null, true, false, true)[0];
		var options = {};
		for(var id in args) {
			if(true) {
				var p = args[id];
				if(id == "def") {
					options[id] = p;
				} else {
					options[id] = p[0];
				}
			}
		}
		var width = isNaN(params[1]) ? false : parseInt(params[1], 10);
		var height = isNaN(params[2]) ? false : parseInt(params[2], 10);

		options.width = macro.lookupArgument(options, "width", width);
		options.height = macro.lookupArgument(options, "height", height);
		options.preserveAspectRatio = args.preserveAspectRatio &amp;&amp; 
			args.preserveAspectRatio[0] == "yes" ? true : false;
		options.tiddlyLink = macro.lookupArgument(options, "tiddlyLink", false);
		options.link = macro.lookupArgument(options, "link", false);
		return options;
	},
	lookupArgument: function(args, id, ifEmpty) {
		return args[id] ? args[id] : ifEmpty;
	}
};

// update views
var _oldwikifiedview = config.macros.view.views.wikified;
// update wikifier to check tiddler type before rendering
merge(config.macros.view.views, {
	wikified: function(value, place, params, wikifier, paramString, tiddler) {
		if(macro.isImageTiddler(tiddler) &amp;&amp; params[0] == "text") {
			var newplace = $("&lt;div /&gt;").addClass("wikifiedImage").appendTo(place)[0];
			macro.renderImage(newplace, tiddler.title, { alt: macro.locale.badImage });
		} else {
			_oldwikifiedview.apply(this, arguments);
		}
	},
	image: function(value, place, params, wikifier, paramString, tiddler) {
		// a field can point to another tiddler whereas text is the current tiddler.
		var title = params[0] == "text" ? tiddler.title : value;
		var args = macro.getArguments(paramString, params);
		macro.renderImage(place, title, args);
	}
});
config.shadowTiddlers.StyleSheetImageMacro = [".wikifiedImage svg, .wikifiedImage .image { width: 80%; }",
	".svgImageText { background-color:[[ColorPalette::Error]]; color:#ddd; display: inline-block; }",
	"span.svgImageText { display: inline-block; overflow: hidden; }"
].join("");
store.addNotification("StyleSheetImageMacro", refreshStyles);

})(jQuery);
//}}}</pre>
</div>
<div title="FastFeedback" server.title="FastFeedback" server.page.revision="1545186" server.etag="&quot;willrogers_public/FastFeedback/1545186:23e53c794f1a563f58db4f94d846504716cc9b18&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131120114431" created="20130708154238" tags="" _hash="381575b3e71aab49f0d6c8157569f64021733f96">
<pre>See also SlowFeedback.

Fast orbit feedback, or FOFB, is the program used to keep the storage ring beam in the position we want it.  The requirements are that the beam is kept stable to within 10% of the beam size, in both x and y dimensions and in both displacement and angle.  For example, the horizontal beam size is 123 micrometres, so the beam should be kept stable within 10% of that value: 12.3 micrometres.

There are several parts to the entire process:

* ~EBPMs (7 per cell; 9 in cells 9 and 13), which broadcast their readings at 10kHz on the...
* distribution network, which connects all nodes and transfers the data.
* The receiver node (an FPGA, one per cell) which collects the packets sent out by the ~EBPMs
* The C code, running in an IOC, one per cell.  It reads data from its FPGA, once it has all the data from the EBPMs, and applies a transformation to it.  It then communicates the results to the...
* Power supplies, which control the...
* Corrector magnets (7 per cell; 9 in cells 9 and 13)

The EBPMs and the corrector magnets work at 10kHz (100μs per cycle).  However, the whole feedback cycle takes about 800μs to complete.  This means that there is a lag of about 7 cycles between the readings being taken and the correction being applied.  

It takes of the order of 800μs (that is 400 laps of the ring) to complete the cycle from reading the ~EBPMs to applying the correction.  This comprises:
* ~150 for the EBPMs to read and put out some data
* ~50 for the data packets to traverse the network
* ~50 for the receiver to accept the data into memory
* &lt; 100 for the processing to be applied.  Sandira told us that this allows calculation of one 172 * 172 matrix (spatial response matrix) but not a second (the dynamic response matrix).
** since this needs to happen for every reading, it must fit within one 100 microsecond cycle
* An unknown length of time for the ~PSUs to apply the necessary current to the corrector magnets.

An important part of the process is the conversion between the EBPM readings and the necessary corrections for the magnets to apply.  The machine physics team can provide the forward transformation (the effect on the position as a result of changes to the magnets).  The inverse transformation is statically calculated then applied to the beam readings in order to calculate what the corrector magnets need to do.

The transformation is held in two ~PVs (~SR01A-CS-FOFB-01:IRM[X,Y]), which are calculated and set from the client side before FOFB starts.

!!Some links
This page on the wiki is full of broken links: http://www.cs.diamond.ac.uk/cgi-bin/wiki.cgi/FeedbackMaths
An introduction to IQ: http://www.tek.com/blog/what%E2%80%99s-your-iq-%E2%80%93-about-quadrature-signals%E2%80%A6
Quadrature on Wikipedia: http://en.wikipedia.org/wiki/Quadrature_phase

!!The GUI
The gui is found in the launcher under 'scripts'.  It doesn't seem to do much except for starting and stopping FOFB.  However, on starting it reads the transformation matrix from a file, inverts it and sets the necessary PVs for the IOCs to use.

!!The code
There are two parts to the code: {{{src}}}, the machine-side code, and {{{opi}}}, the client-side code.  The client side code reads the response matrix, inverts it and sets it as two EPICS variables.  When fastfeedback starts, it reads those EPICS variables to use it.
* FastFeedbackOpi
* FastFeedbackSrc
* FastFeedbackVariables

!!Jargon
* IQ - current quadrature
* PMC - PCI mezzanine card
* PSC - power supply controller
* IRQ - interrupt request?
* FIR - finite impulse response
* IIR - infinite impulse response
* taps - coefficients for finite impulse response filters
* antiwind - an anti-windup controller, which prevents erratic behaviour from the filters
* notch - a type of filter to remove specific frequencies
* Variant
* Closure

</pre>
</div>
<div title="CPrintf" server.title="CPrintf" server.page.revision="1310879" server.etag="&quot;willrogers_public/CPrintf/1310879:527d36ce0ae2f7d0e2b608d5edf85b7d26081ddf&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130717092116" created="20110805143509" tags="c format programming" _hash="b68b4b4d6268fd520d2fe7ff54a9ebda6f501cee">
<pre>It's always useful to get an idea of how the print formatting works.  Note here that you don't use the '%' sign like in python, you use a comma.  This actually means that it is a special function which can take a variable number of parameters.

Substitute an integer with %d (%ld for a long) and a float (or double) with %f:

{{{
printf("This is an int: %d\n", an_int);
printf("This is a float: %f\n", a_float);
}}}

Tab is \t and new line is \n:
{{{
printf("Here's a tab:\t&lt;-there.  Now a newline:\n");
}}}

You can specify characters allocated (notice all parameters are passed comma-separated):
{{{
printf("%4.1d "6.1d\n, fahr, celcius);
}}}
That's four for the first and 6 for the second, to 1d.p. each.

{{{%s}}} refers to a string, {{{%c}}} a character, and {{{%%}}} is % itself.

You can print a pointer with {{{%p}}}.</pre>
</div>
<div title="ColorPalette" server.title="ColorPalette" server.page.revision="363908" server.etag="&quot;willrogers_public/ColorPalette/363908:521b9eb247507cadc47d6b8f6f4326908d4b47ea&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110423101451" created="20110421100842" tags="excludeLists excludeSearch" _hash="5102119bbe9f2f3f3e75e4dd195e96f2607acb78">
<pre>/*{{{*/
Background: #e3e4f2
Foreground: #0c0e1b
PrimaryPale: #edeef6
PrimaryLight: #888ec8
PrimaryMid: #3b4281
PrimaryDark: #0d0e1c
SecondaryPale: #f0f6ed
SecondaryLight: #9cc888
SecondaryMid: #51813b
SecondaryDark: #121c0d
TertiaryPale: #f6eeed
TertiaryLight: #c88f88
TertiaryMid: #81433b
TertiaryDark: #1c0f0d
Error: #f88
ColorPaletteParameters: HSL([234|47], [0.36949054803699255],[0.08225952461361885|0.3712792849012961|0.6602990451889733|0.9493188054766506])
/*}}}*/</pre>
</div>
<div title="AndroidAppFiles" server.title="AndroidAppFiles" server.page.revision="1484110" server.etag="&quot;willrogers_public/AndroidAppFiles/1484110:5f7b4dc69ec9dd07644156b3bdf8388c609cb145&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131026150358" created="20131026144409" tags="" _hash="6d53610f241892ce96037f790c1850c5bef2cd92">
<pre>An Android project in eclipse has the following files:
* {{{src/}}} - Java code
* {{{gen/}}} - generated Java code
* {{{Android 4.3}}} - jar file
* {{{Android Private Libraries}}} - jar file
* {{{assets/}}}
* {{{bin/}}}
* {{{libs/}}}
* {{{res/}}} - resources, including images and layout XML
* AndroidManifest
* {{{ic_launcher-web.png}}}
* {{{proguard-project.txt}}}
* {{{project.properties}}}Type the text for 'AndroidAppFiles'</pre>
</div>
<div title="PossibleLaptops" server.title="PossibleLaptops" server.page.revision="920134" server.etag="&quot;willrogers_public/PossibleLaptops/920134:f8f2d432414b51920c379e0f9b1547ad686559fd&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121027200502" created="20120901093915" tags="" _hash="99cb43eecf969dd16097cf31858e8f5fb8644c50">
<pre>I'll mention if they don't have: a USB 3.0 port, a 15.6" screen, 1366x768, DVD RW, HDMI

!!Toshiba Satellite P850-12X
* [[£800, PC World|http://www.pcworld.co.uk/gbuk/toshiba-satellite-p850-12x-15-6-laptop-silver-12520766-pdt.html]]
* Core i7-3610
* 8GB RAM, 1TB HDD
* NVidia GT 630M
* 4 x USB 3.0

!!Lenovo Z580
* [[£550, PC World|http://www.pcworld.co.uk/gbuk/lenovo-z580-15-6-laptop-grey-14553734-pdt.html]]
* Core i7-3612
* 6GB RAM, 750GB HDD
* USB: 2x3, 2x2
* Integrated HD 4000 graphics

!!Samsung Series 5

All have:
* Core i5-3210M
* 6GB RAM
* Integrated HD 4000 graphics
* USB: 2x2, 2x3

!!!!~NP550P5C-A02UK
* [[£600, PC World|http://www.pcworld.co.uk/gbuk/samsung-series-5-550p5c-15-6-laptop-silver-17056548-pdt.html]]
* [[£600, Comet|http://www.comet.co.uk/p/Laptops/buy-SAMSUNG-NP550P5C-A02UK-Laptop/669058]]
* 1TB HDD
* Windows 8

!!!!~NP350V5C
* [[£500, Amazon|http://www.amazon.co.uk/Samsung-350V5C-15-6-inch-Laptop-Silver/dp/B009SJCX5Y/ref=dp_ob_title_ce]]
* Windows 8
* 6GB RAM, 750GB HDD

!!!!~NP350V5C-A02UK
* [[£430, Comet|http://www.comet.co.uk/p/Laptops/buy-SAMSUNG-NP350V5C-A02UK-Laptop/669757]]
* [[£400, Amazon|http://www.amazon.co.uk/Samsung-NP350V5C-Integrated-Graphics-Windows/dp/B008EJGJKO/ref=sr_1_1?s=computers&amp;ie=UTF8&amp;qid=1351367552&amp;sr=1-1]]
* Windows 7
* 500GB HDD

!!HP Pavilion g6-2197sa
* [[£450, PC World|http://www.pcworld.co.uk/gbuk/hp-pavilion-g6-2197sa-15-6-laptop-14893788-pdt.html]]
* Core i5-3210M
* 4GB RAM, 500GB HDD
* 2xUSB3, 1xUSB2
* Integrated HD 4000 graphics

!!Dell Inspiron 15R
* [[£710, Dell|http://configure.euro.dell.com/dellstore/config.aspx?oc=n0015r42&amp;model_id=inspiron-15r-5520&amp;c=uk&amp;l=en&amp;s=dhs&amp;cs=ukdhs1]]
* Core i7-3612QM
* 8GB RAM, 1TB HDD
* AMD Radeon HD 7670M, 1GB



</pre>
</div>
<div title="CPointersAndArrays" server.title="CPointersAndArrays" server.page.revision="1311840" server.etag="&quot;willrogers_public/CPointersAndArrays/1311840:145d50fa88dc69aa533a9b947f9bd49f746894a4&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130718095112" created="20110806150307" tags="arrays c pointers programming" _hash="4830f461fc2af67b724eca5e1d69284dfc2c2aca">
<pre>First, see CPointers

!!Pointers and arrays

The C book reckons these should be treated together, and who am I to argue?

So, if you declare an array {{{ int a[10]; }}} this works like in Java, but the array parts work as any int in C.  So you can do {{{ int* pa = &amp;a[0]; }}} so that the pa points at the first item in the array.

!!!Pointer arithmetic
Here's a new bit: if you now add one to pa: {{{ pa += 1; }}}, pa points to the next element in the array, a[1].  This is by definition; because a[] is an int array and pa is an int pointer, it'll move on the correct number of cells.  In this way you can move on the number of cells you want.

For technical reasons, the value of a itself is the address of the first item in the array, so {{{ pa = a; }}} is the same as {{{ pa = &amp;a[0]; }}}.  Similarly, {{{ a[i] }}} is the same as {{{ *(a + i) }}} and {{{ &amp;a[i] }}} is the same as {{{ a + i }}}.

If p and q point to members of the same array, then they can be compared using ==, !=, &lt;, &gt;= etc.

!!Multidimensional arrays and arrays of pointers

{{{
int a[10][20]; // 10 * 20 array
int *b[10]; // array containing 10 pointers to ints
}}}

In practice, these can seem like similar things.  An example of the array of pointers is in the main() method:

{{{
main(int argc, char *argv[]) { ... }
}}}

* argc is the number of items in argv
* argv[0] is the name of the program
* argv[i] is the ith argument

So the array of pointers means the array of pointers to the first part of each string, and we can get the first argument by either: {{{ argv[1] }}}  or {{{ *(argv + 1) }}} 


</pre>
</div>
<div title="editTiddler" server.title="editTiddler" server.page.revision="1521932" server.etag="&quot;system-images_public/editTiddler/1521932:293e50ccdbca5d78696ddb122612170eef570d3d&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-images_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-images_public" server.permissions="read" server.content-type="image/svg+xml" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="3083cb53eb17cc9c4f3863af070aac156272cef1">
<pre>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" viewBox="301 225 48 52"
width="30" height="30"&gt;
&lt;g stroke="none" stroke-opacity="1" stroke-dasharray="none" fill="none" fill-opacity="1"&gt;
	&lt;g&gt;
		&lt;path d="M 333.00003 234 L 306 258.75003 L 301.5 270 L 312.75 265.50003 L 339.75 240.74998 Z M 337.5 229.50002 
		L 335.24988 231.75008 L 341.99997 238.50003 L 344.24997 236.24995 Z M 342 225.00003 L 339.74988 227.25009 
		L 346.5 234.00005 L 348.75 231.75003 Z M 301.5 273.9719 C 301.5 273.9719 309.59888 277.99927 317.70013 273.97183 
		C 325.80066 269.94437 341.99997 276.65686 341.99997 276.65686 L 341.99997 273.97195 
		C 341.99997 273.97195 325.80014 267.2594 317.70013 271.28687 C 309.6 275.31451 301.5 271.28683 301.5 271.28683 Z" 
		fill="#101010" class="glyph"/&gt;
	&lt;/g&gt;
&lt;/g&gt;
&lt;/svg&gt;</pre>
</div>
<div title="ApelWarnings" server.title="ApelWarnings" server.page.revision="363656" server.etag="&quot;willrogers_public/ApelWarnings/363656:c065a9f8a301bed1c8df42f9297249bb6a8e34e2&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111019094546" created="20111018122017" tags="" _hash="0c8c43c08329abbe94e2afe05e4b6d0edafdd8d6">
<pre>There were several things which popped up at the EMI AHM which are relevant to APEL.

* Code freeze: 14th December - 'very serious deadline'
** The next version of APEL will need to be ready by then, if it's going to be ready.
** This is not in practice very long.
** All tasks for EMI 2 must be in the dev tracker!
* One talk mentioned that we should have a build of APEL on SL6 ready and working by November 7th.
** We didn't really know about this before!  We don't even have any VMs operational yet!
** The Debian process is moving slower, but will need to be borne in mind.
* Messaging
** Messaging guidelines online, live, but will be considered final at month 22 (Laurence Field - where are they?)
** Consumer connecting to more than one broker - the SSM doesn't do this
** The messaging team are talking about a library which sounds ''extremely'' similar to the SSM.  Who's going to write this?  Could it be the SSM?
** How do we test against multiple brokers?  As far as we know only the prod broker network has more than one broker at the moment.
* We are getting talked into accepting XML - this must be planned for if we're going to do it.
* OpenSSL
** Some libraries in SL6 are apparently linked against NSS instead of OpenSSL - some people are getting a bit stressed about this
** SL6 ships with (I believe) OpenSSL 1.0, so we need to make sure we can work with that too.
** David Groep: "Try to precent spreading of Network Security Services (NSS) library use in m/w."
* What is Nagios?  I don't understand why it keeps getting mentioned in terms of EMI development or product teams.
** Here's the EMI twiki page: https://twiki.cern.ch/twiki/bin/view/EMI/NagiosProbes.  It looks like Cristina's ones count, and they don't need to be released... ... ...?</pre>
</div>
<div title="MessagingQuestions" server.title="MessagingQuestions" server.page.revision="364318" server.etag="&quot;willrogers_public/MessagingQuestions/364318:ffa8664acf701bd4288ecf18b6999fdf61bd24f9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111017084853" created="20111017084152" tags="" _hash="5510a4da1c1008e725b336a1cf91850b81a7588b">
<pre>Laurence Field got on to messaging somehow.

Messaging team exists.  There are utilities etc.  They're waiting for the questions - they'll give recommendations.

EGI production broker network is separate.

John: what's the distinction between EMI and EGI here?  Aren't we going to be running on EGI.

The advice that EMI gives should be compatible with the broker network provided by EGI.  The people in the two groups are closely related.  

There will be a messaging library of some sort.  It's not ready yet...  We need to provide feedback on messaging to the mailing list so that everyone knows what is going on.</pre>
</div>
<div title="EpicsPython" server.title="EpicsPython" server.page.revision="1299199" server.etag="&quot;willrogers_public/EpicsPython/1299199:88f47cbcacd4c7c05542894285a5845a61a4244e&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130708105514" created="20130514152448" tags="cothread epics python" _hash="f55cdd19182e9ff0d28d0d7e1d468f56835b8fb1">
<pre>The python EPICS interface is built on top of something called 'cothread'.  It was apparently originally conceived by James Rowland and is now developed and maintained by Michael Abbott.

Cothread defines a 'lightweight' threading implemetation for python.  Part of the way it does this is by reimplementing the python 'select' and 'socket' modules.  It also includes the EPICS interface, known as catools.

Its page is here: http://controls.diamond.ac.uk/downloads/python/cothread/.   The latest documentation is here: http://controls.diamond.ac.uk/downloads/python/cothread/2-8/docs/html/index.html

!!Python package
!!!{{{cothread.py}}}
* See CoThread

!!!{{{coselect.py}}}
This is a new implementation of the python {{{select}}} module, compatible with {{{cothread}}}.

!!!{{{cosocket.py}}}
This is a new implementation of the python {{{socket}}} module, compatible with {{{cothread}}}.

!!!{{{dbr.py}}}
Defines datatypes from EPICS in terms of python and/or numpy datatypes, and provides ways of converting between the two.  It uses ctypes to do so.

The python datatypes used (e.g. returned from {{{caget}}}) subclass the regular python datatypes, and add certain attributes.  You can specify how much extra information you'd like in the function calls.  {{{.ok}}} and {{{.name}}} are always present.

!!!{{{cadef.py}}}
From the documentation:  'This module is a thin wrapper over the cadef.h file to be found in {{{$EPICS_BASE/include/cadef.h}}}.'

The {{{catools}}} module uses these functions to provide the python interface.

!!!{{{catools.py}}}
* See CaTools

!!!{{{load_ca.py}}}
This just finds the location of the libca file, which is the EPICS binary.

!!!{{{input_hook.py}}}
I'm not yet sure what this is doing.

!!Other files
!!!{{{context}}}
This directory contains the C code used for context switching, not possible from pure Python.  It also includes assembler for different architectures!  It builds a shared object {{{_coroutine.so}}} which is referenced in the Python code.

!!!{{{build}}}
Only a temporary directory used for build artefacts.

!!!{{{docs}}}
The source for the Python documentation.

!!!{{{examples}}}
Just some examples of how to use the libraries, including EPICS commands, cothreads and Qt interfaces.

!!!{{{tests}}}
.... tests.
</pre>
</div>
<div title="TopupUnitTests" server.title="TopupUnitTests" server.page.revision="1358621" server.etag="&quot;willrogers_public/TopupUnitTests/1358621:226b49eb472de9a9079e0b980e31eb147f51e39c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130823082445" created="20130823082445" tags="" _hash="5d48e2071bdb22774f7f7ec0ad22913ae076bb74">
<pre>I had a hell of a time making the topup unit tests run.  Nick's instructions are here:

http://confluence.diamond.ac.uk/display/CHLP/Testing

I added my own version of cothread, and mock as specified in the instructions.  I seem to have problems changing the interpreter per run in eclipse, but if I made the pythonIoc the default one it does seem to work for the unit testing.</pre>
</div>
<div title="GoogleContacts" server.title="GoogleContacts" server.page.revision="364110" server.etag="&quot;willrogers_public/GoogleContacts/364110:3cf083a283ed812c96c231222236dd0defabf564&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120113211006" created="20120113193233" tags="" _hash="2bd3f870bfd3f49620f674fdaa7fea7495d170da">
<pre>I wanted to rationalise the phone numbers in my Google Contacts.  To do this, I can use the Google Contacts API, which works with Python among other things.

The python distribution comes as a .tar.gz file, which you can download, untar, build and install as usual using {{{setup.py}}}.

To authenticate to Google, you need to use OAuth2.0, for which I installed google-api-python-client-1.0beta7, by a similar method.  Actually, it doesn't seem like you do need to use it - I copied an authentication method from an example in the google contacts python package.</pre>
</div>
<div title="TiddlySpaceCSRF" server.title="TiddlySpaceCSRF" server.page.revision="1521904" server.etag="&quot;tiddlyspace/TiddlySpaceCSRF/1521904:38c911967d3acbc1e252fcef36306065d2fce8e1&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch systemConfig" _hash="10b0276ddc805a9489b6449c972bb1dc00fb9cf0">
<pre>(function() {
var getCSRFToken = function(window) {
	// XXX: should not use RegEx - cf.
	// http://www.quirksmode.org/js/cookies.html
	// https://github.com/TiddlySpace/tiddlyspace/commit/5f4adbe009ed4bda3ce39058a3fb07de1420358d
	var regex = /^(?:.*; )?csrf_token=([^(;|$)]*)(?:;|$)/;
	var match = regex.exec(document.cookie);
	var csrf_token = null;
	if (match &amp;&amp; (match.length === 2)) {
		csrf_token = match[1];
	}

	return csrf_token;
};

if (typeof config !== 'undefined' &amp;&amp; config.extensions &amp;&amp;
		config.extensions.tiddlyspace &amp;&amp;
		config.extensions.tiddlyspace.getCSRFToken === null) {
	config.extensions.tiddlyspace.getCSRFToken = getCSRFToken;
} else {
	window.getCSRFToken = getCSRFToken;
}
})(window);</pre>
</div>
<div title="BashStrings" server.title="BashStrings" server.page.revision="1213995" server.etag="&quot;willrogers_public/BashStrings/1213995:0c2ae382f5c6a20c00f46279d5f01b322c86e33f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130514101818" created="20111101095157" tags="" _hash="f7c1b98e19bc0b88432a41f839311c3dc8b8eade">
<pre>!Strings in bash

Bash treats pretty much everything as a string, which means that e.g. arithmetic is a little complicated.

To concatenate strings, just put them next to each other:
{{{
# $cp$cp
-bash: /usr/share/java/usr/share/java: No such file or directory
}}}

Use echo to print to the display.

You can use both single and double quotes to denote strings, but only inside double quotes are variables substituted.

!!!Substrings
* {{{${item:5} }}} will remove the first five characters from the string
* {{{${item:5:10} }}} will provide the ten characters after the first five</pre>
</div>
<div title="CPointers" server.title="CPointers" server.page.revision="1318172" server.etag="&quot;willrogers_public/CPointers/1318172:d06d927bb6004b4c5a6f03d0cbc1dce4acb402ed&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130722162134" created="20110805154629" tags="c pointers programming" _hash="dc7585745b191a03886e0b5e42a1f329dc18735a">
<pre>See also CPointersAndArrays
See also CMemory
See also CFunctionPointers

!!Pointers etc.
By default, all functions call by value - a parameter passed to a function is not changed by anything the function does.

Pointers are essential if you allocate something on the heap, because they are the only way of retaining a reference to whatever it is.

It is good practice to initialise a pointer to 0 or {{{NULL}}} if you're not setting it immediately.  {{{NULL}}} is a null pointer constant.

!!!Pointers

Pointers are typed in the same way as basic types.  So {{{ int *ip }}} means a pointer to an int.

The command &amp; gives the address of an object, so:
{{{
int* ip = &amp;i;
}}}
would give p the address of the int i.  The * means that it is a pointer.  Now p points to i, so if you change p ({{{ *ip = 3; }}}) note the * to acknowledge that it's a pointer) then i would change.

!!!!The 'swap' function
It doesn't make any sense to try and write a function {{{ void swap(int i, int j); }}} with the idea that i and j will change, because only the values of i and j are passed to the function.  Instead, what you can do is write a function {{{ void swap(int* ip, int* jp); }}}.  This could have the effect that afterwards, ip points to what jp was pointing at, and vice versa.  Here it is:

{{{
void swap(int* ip, int* jp) {
    int temp = *ip;
    *ip = *jp;
    *jp = temp;
}
}}}

Now, sneakily, we can run {{{ swap(&amp;a, &amp;b); }}}.  This means that a and b will have changed their values.

!!!!Mistakes with pointers
If you try {{{ *ip = &amp;f; }}} where ip is an int pointer but f is a float, it will compile, but you get a warning that you're doing something risky, and in practice you'll get garbage.

If you try {{{ ip = 1; }}}, it will again compile with a warning, and then I got a Segmentation fault when trying to run it.

!!!Memory addresses
If you print a pointer (you can do it with CPrintf and %p) it will produce a hex number referring to the location in memory to which it is pointing.  Each memory location is a byte, so a char would occupy one, an int four.  Incrementing the pointer moves it on in memory by the appropriate number to find the next item of that type.

This is a very good explanation: http://denniskubes.com/2012/08/17/basics-of-memory-addresses-in-c/
</pre>
</div>
<div title="CEscapeChars" server.title="CEscapeChars" server.page.revision="964504" server.etag="&quot;willrogers_public/CEscapeChars/964504:4c5feb35a2cf38cc2c779158656fe2ebebdeeb42&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121124154116" created="20121124154116" tags="" _hash="b5bc640956aabb3f86ab6696e3511bd957f868cb">
<pre>For completeness:

* {{{\a}}} - alert (bell)
* {{{\b}}} - backspace
* {{{\f}}} - formfeed
* {{{\n}}} - newline
* {{{\r}}} - carriage return
* {{{\t}}} - horizontal tab
* {{{\v}}} - vertical tab
* {{{\\}}} - backslash
* {{{\?}}} - question mark
* {{{\'}}} - single quote
* {{{\"}}} - double quote 
* {{{\onn}}} - octal number
* {{{\xnn}}} - hexadecimal number

</pre>
</div>
<div title="EgiTfPrague" server.title="EgiTfPrague" server.page.revision="882818" server.etag="&quot;willrogers_public/EgiTfPrague/882818:2bcc409be812af785ac8ba721eb649893d218e6e&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120920090436" created="20120918090559" tags="" _hash="111d118612ea7efa345caf1d67411445872cde34">
<pre>DpmTalk
EmiStandards
SlurmTalk</pre>
</div>
<div title="EuropeanFunding" server.title="EuropeanFunding" server.page.revision="655063" server.etag="&quot;willrogers_public/EuropeanFunding/655063:795bea498029ebe26eeba829cb7453a43a9650ba&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120327142121" created="20120327073235" tags="ec egi eu" _hash="1617a22acf4d3aca3a84186f846f9b8a2c3ae96b">
<pre>
!The EU and the EC
The EU has a budget of ~2% of those of the member states, or equivalently 1% of the EU's total GDP.  The budget of the EU in 2011 was €140bn.  (By comparison, the UK's budget in 2011 was ~£600bn raised, £700bn spent.)  All of this is spent in investment, so the idea is that far-reaching and progressive plans can be carried out, which have a large effect and which may be beyond the capabilities of the member states.  The budget is by subscription by country, not direct taxation of the population.

About 6% of the EU's budget is spent on administration, about half of which is salaries.  Farming has traditionally taken up a large amount of the money, but it has reduced significantly to around 30%.  Policy reform has largely got rid of the famous food mountains and wine lakes.

Horizon 2020 is an EU funding framework for 'research and innovation'.  It has a number of aims including trying to simplify the funding process.  It is funded by the European Commission (EC), which is the 'executive body' of the EU.  [The European Council, by comparison, is the group of heads of states, President of the European Commission, and its own president.]

!!~FP7
Until Horizon 2020 begins, there is a process called Framework Program 7, ~FP7.  It runs from 2007 to 2013 and funds research and technological development.  Most of its money is spent on grants supporting scientific research, but its grants require 'European added value', which often means international collaborations.

Its budget over the 7 years is ~€50bn.  This constitutes about two thirds of 'Competitiveness for growth and employment', itself maybe ~9% of the EU's total budget.

It's difficult to find exact figures, but EGI might have received about €50m of funding from the EC, which would be 0.1% of the total science budget.

!!Horizon 2020

The project itself begins in 2014, so at the moment we're going through preparatory stages.  A key part is the negotiation of all EU funding for the period 2014-2020, which will include the amount of money provided for Horizon 2020.  The amount of research money in total is around €90bn (I make that between 5% and 10% of the EU's budget), of which about a third is directly for science.  About 3bn is available for European research infrastructure, into which EGI (or its successors) will fall.</pre>
</div>
<div title="CBasics" server.title="CBasics" server.page.revision="1603956" server.etag="&quot;willrogers_public/CBasics/1603956:5245eea509095e79a1773cf61e8222d5088b35c9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131223114530" created="20110805140218" tags="c programming" _hash="0d34bdcd9c6b9cb5b73bb2508739ed9dc994fa8e">
<pre>The very first bits of C.  In general, things I learn about C will be transferable to C++, but not vice versa.  I'll prefix all C pages with 'C', and all C++ ones with CPP.

* CPPBasics

* CDocumentation

* CPrimitiveTypes
* CNumbers
* CPointers
* CMemory
* CEnums
* CStructs
* CStrings
* CBasicIO
* CPrintf
* CLinking
* CEscapeChars
* CFunctions
* CKeywords
* CTypedef
* PThreads

See also GnuMake

!!Hello World
This is quite simple: 
{{{
#include &lt;stdio.h&gt;

main()
{
   printf("Hello World!\n");
}
}}}
Then, with gcc:
{{{
will@will-VirtualBox:~/ccode$ gcc -o hello hello.c
will@will-VirtualBox:~/ccode$ ./hello 
Hello World!
}}}
It's probably a good idea  to compile with {{{-Wall}}} so that you see all the warnings that the compiler has to offer.

!!Syntax
Java was of course based somewhat on C in the first place, so a lot of the control flow works in the same way.
* Comments are the same.
** This isn't strictly true; the {{{//}}} comment was added in C99, so some C compilers won't recognise it.
* {{{ for (i = 2; i &lt; 10; i++) }}} is the same, but you can't declare {{{ int i }}} inside the brackets.
* "a string" for strings and 'c' for characters.
** a string constant is just an array of chars, and is always finished by '\0' so it's one cell in memory longer than it looks.
** that's not true of other arrays
* arrays: {{{ int intarray[10]; }}}
** {{{ char[] message = "now is the time"; }}}
** {{{int myArray[10] = { 5, 5, 5, 5, 5, 5, 5, 5, 5, 5 };}}}
** {{{int myArray[10] = {0};}}} - initialise to 0 (strictly, if you specify one item the rest will be zeros).
* if, else if, else
* functions: {{{ return-type function(type parameter1, type parameter2) { ... } }}}
** you need to declare any variables in a function at the top of the function
* return &lt;something&gt;;
* {{{++i}}} and {{{i++}}} and {{{--i}}} and {{{i--}}}
* ternary operator
* switch (c)

* There's no public or private in C.
* There's no boolean defined by default in C; 0 is false, and anything else is true.
** Here's an example: {{{ while ((*s++ = *t++) != '\0') }}} can be written as {{{ while (*s++ = *t++) }}}
* Any variable declared outside a function is global; it can then be referenced using {{{ extern &lt;variable&gt; }}}, but if it's in the same file and declared earlier it can be used without this.
** You have to declare these variables as others used in the function
** {{{extern int x;}}} 

* C always passes by value.  This means that if you are passing something large like a struct into a function, it is generally a good idea to use a pointer rather than passing the struct itself; passing the struct would imply making a copy of it, which takes time but also uses up the stack.

!!!Constants
There are two ways to create a constant.  You can define a constant as follows:
{{{
#define PI 3.14159
}}}
There's no type-checking here - the 'preprocessor' just substitutes this string throughout the program.  When I tried to substitute a number which was too long for an int, a compiler warning was generated and I had to change to use a {{{long long}}} instead.  Using {{{#define NOTHING}}} (i.e. no value provided) simply replaces an empty string.  I believe that this can be useful for managing the {{{ifndef}}} preprocessor directives.

The other way is to use the {{{const}}} keyword - see CKeywords. 

!!!Bitwise manipulation
* {{{&amp;}}}
* {{{|}}} 
* {{{^}}}
* {{{&lt;&lt;}}}
* {{{&gt;&gt;}}}
* {{{~}}}
</pre>
</div>
<div title="AndroidDevelopment" server.title="AndroidDevelopment" server.page.revision="1519407" server.etag="&quot;willrogers_public/AndroidDevelopment/1519407:eb2c9de0d0e165b18a135d5df63be447828deffb&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131110203111" created="20130728104044" tags="" _hash="b23f8337e9d8108282bffcd74bf524468ad191e6">
<pre>!!Android apps
There is a well-defined framework for building Android apps.  Probably the most difficult part of it is supporting the wide range of Android phones.

* AndroidDocumentation
* AndroidAppBasics
* AndroidUIs
* AndroidAppFiles
* AndroidManifest

!!Android itself
See CyanogenMod.
BuildingAndroid</pre>
</div>
<div title="EmiAhmPadova" server.title="EmiAhmPadova" server.page.revision="710494" server.etag="&quot;willrogers_public/EmiAhmPadova/710494:9694b55d5dd530516decfe1de8bf8741b635f633&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120515083959" created="20111017090254" tags="" _hash="cbd15f80defe5c658eae93dfb5cdc4bc9ae87d2c">
<pre>* StorageAccounting
* MessagingQuestions
* AccountingConsolidation
* MpiAccounting
* ComputeAccounting
* EpelPackaging
* EmiConsolidation
* EmiReleases

* ComputeSummary
* DataSummary
* InfrastructureSummary
* ConcludingRemarks
* CollaborationBoard

* JGApelTalk
* ApelWarnings
* EmiMessaging
* PortingToSL6

Note the emi-dashboard QA thing from ETICS is now available for checking the packages' status.

Boarding pass: elena.pavan@pd.infn.it by 10am tomorrow.</pre>
</div>
<div title="StomProtocol" server.title="StomProtocol" server.page.revision="364754" server.etag="&quot;willrogers_public/StomProtocol/364754:a8eb442e460948a0aca24465f162d83bd44b0878&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120214160829" created="20111003085103" tags="python stomp" _hash="77fc143809527c709eba18e21c880b8f4643d422">
<pre>!STOMP

STOMP (Streaming Text Oriented Message Protocol) is a protocol designed for working with message-oriented middleware.  It is somewhat similar to HTTP, working over TCP.  ~OpenWire is a similar but binary protocol supported only by ActiveMQ.

!!stomppy

stomp.py is a python wrapper around STOMP.  It's home page is here: http://code.google.com/p/stomppy/.  There really isn't much documentation there.  We've had various problems with different versions.  To find out the version you're actually using, try {{{stomp.__version__}}}.

!!!CLI
There is a command-line interface to stomppy, which allows you to interact with the broker directly.  I think this is likely to be useful for learning about STOMP in particular.  Here's an example:
{{{
will@will-VirtualBox:/var/log/apel$ python /home/will/apel/lib/stomp.py-3.0.3/stomp/cli.py -H dev.msg.cern.ch -P 6163
CONNECTED
session: ID:gridmsg005.cern.ch-61430-1316499127659-2:1135245


&gt; help
Usage: help &lt;command&gt;, where command is one of the following:
    
abort ack begin commit disconnect exit help man quit run send sendfile sendreply stats subscribe unsubscribe ver version 
&gt; disconnect
will@will-VirtualBox:/var/log/apel$ 
}}}</pre>
</div>
<div title="LauncherScripts" server.title="LauncherScripts" server.page.revision="1594436" server.etag="&quot;willrogers_public/LauncherScripts/1594436:d6feed5f92144e3ce0498632fe4f01a597d4e28a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131213075121" created="20131211111941" tags="" _hash="036b0b77b5433ccde252be17b9ec53d30eff58e8">
<pre>Inside the launcher module, there are many scripts used for custom launching of programs.

!!Unused
* {{{feGui}}} - Ian Gillingham
* {{{feqt4gui.sh}}} - Ian Gillingham
* {{{edmserver.sh}}} - Tom Cobb
* {{{FrontEnd.sh}}} - Tom Cobb (?)
* {{{gatewaystat.sh}}} - Tom Cobb (?)
* {{{runportnopthread.sh}}} - James Rowland
* {{{srCellVacuum}}} - Ian Gillingham
* {{{storePanel.sh}}} - Tom Cobb (?)
* {{{striparchive.sh}}} - James Rowland

!!Scripts that don't end in {{{.sh}}}
* {{{feGui}}}
* {{{waveRunner6050A}}} - data?
* {{{launch_synoptic.py}}}


| ''Name'' | ''Last updater'' | ''Date'' | ''Refs in apps.xml'' | ''Comments'' |
| applications.xml | Vince Winter | Wed Nov 27 12:39:17 2013 +0000 | 1 | |
| archiveview2.sh | James Rowland | Wed Oct 5 10:05:35 2011 +0000 | 1 | |
| archiveview.sh | James Rowland | Wed Oct 5 10:05:35 2011 +0000 | 6 | |
| blank.gif | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| BR-RF-IOC-01.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| bsVacuum.sh | Ian Gillingham | Mon Nov 12 11:43:11 2012 +0000 | 1 | |
| burtinter.sh | Steve Singleton | Tue Aug 21 14:53:07 2012 +0000 | 1 | |
| caen.sh | Steve Kinder | Fri Aug 31 13:12:02 2012 +0000 | 1 | |
| CIAtemps.sh | Paul Hamadyk | Wed Nov 21 08:19:40 2012 +0000 | 1 | |
| CryoPLC.sh | Paul Hamadyk | Thu Nov 22 14:15:50 2012 +0000 | 1 | |
| diamond.css | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| DriveAmps.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 4 | |
| edmserver.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| feGui | Ian Gillingham | Fri Aug 30 10:46:20 2013 +0000 | 0 | |
| feqt4gui.py | Ian Gillingham | Tue Aug 20 10:01:29 2013 +0000 | 26 | |
| feqt4gui.sh | Ian Gillingham | Thu Jan 3 15:34:56 2013 +0000 | 0 | |
| findIcons.py | Tom Cobb | Wed Aug 31 11:05:26 2011 +0000 | 0 | |
| from_configure_ioc.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 54 | |
| FrontEnd_QT.sh | Ian Gillingham | Wed Nov 7 11:54:52 2012 +0000 | 25 | |
| FrontEnd.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| FrontEnd_summary.sh | Ian Gillingham | Mon Mar 19 14:06:35 2012 +0000 | 25 | |
| gatewaystat.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| hc1.sh | Ronaldo Mercado | Tue Oct 8 16:16:50 2013 +0000 | 10 | |
| icons | Tom Cobb | Fri Nov 25 14:49:30 2011 +0000 | 0 | |
| idedm.sh | Austen Rose | Thu Nov 21 16:01:08 2013 +0000 | 1 | |
| installLauncher.sh | Tom Cobb | Thu Nov 22 11:14:45 2012 +0000 | 1 | |
| latest-edm-path-3.14.11.sh | Ian Gillingham | Fri Nov 15 11:07:56 2013 +0000 | 0 | used in other scripts |
| latest-edm-path.sh | Ian Gillingham | Fri Feb 18 08:16:00 2011 +0000 | 0 | used only in {{{feGui}}} |
| launcherApplication.py | Nick Rees | Thu Jul 11 08:48:34 2013 +0000 | 0 | |
| launcherCommon.py | Tom Cobb | Wed Oct 24 14:55:24 2012 +0000 | 0 | |
| launcherStatus.py | Tom Cobb | Mon Apr 15 08:22:00 2013 +0000 | 0 | |
| launch_synoptic.py | Tom Cobb | Thu Jun 14 15:52:29 2012 +0000 | 0 | used in {{{password_synoptic.sh}}} |
| lbVacuum.sh | Ian Gillingham | Mon Nov 12 11:43:11 2012 +0000 | 1 | |
| LI-ACCEL.sh | Keith Baker | Fri Oct 12 10:44:00 2012 +0000 | 2 | |
| limitedAccess.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 1 | |
| linacVacuum.sh | Ian Gillingham | Mon Nov 12 11:43:11 2012 +0000 | 1 | |
| LI-TI-IOC-01.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| log.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 3 | |
| makeAutostartLauncher.sh | Tom Cobb | Mon Apr 15 08:08:17 2013 +0000 | 0 | |
| Makefile | Tom Cobb | Tue Oct 16 12:40:28 2012 +0000 | 0 | |
| MasterOsc.sh | Paul Hamadyk | Fri Jul 5 08:03:03 2013 +0000 | 1 | |
| minus.gif | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| MPS.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| nested.xsl | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| NewDiamondLogo.gif | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| nothing.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | utility script |
| openedmport.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 29 | |
| openedm.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 1 | |
| password_synoptic.sh | Emma Shepherd | Wed Apr 13 11:43:17 2011 +0000 | 5 | |
| plus.gif | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| psc.sh | Steve Kinder | Thu Nov 14 10:52:52 2013 +0000 | 1 | |
| pss.sh | Keith Baker | Tue Jun 7 15:13:32 2011 +0000 | 591 | |
| readme.txt | Tom Cobb | Wed Oct 24 14:55:24 2012 +0000 | 0 | |
| RFoverview.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| RFvacuum.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| RFwindowBake.sh | Paul Hamadyk | Wed Nov 6 14:06:50 2013 +0000 | 2 | |
| RT-RF-IOC-01.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| RT-RF-LLRF-01.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| RTVacuum.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| runarchiver.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 1 | |
| runcss.sh | James Rowland | Mon May 21 16:31:18 2012 +0000 | 1 | |
| runDiEdm.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 7 | |
| runportnopthread.sh | James Rowland | Mon Jun 11 13:07:34 2012 +0000 | 0 | |
| runport.sh | James Rowland | Mon Jun 11 13:07:34 2012 +0000 | 11 | |
| SCMPW.sh | Keith Baker | Tue Jul 23 09:45:29 2013 +0000 | 3 | |
| screenrc | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| septumTemperatures.sh | Steve Kinder | Wed Nov 13 17:42:48 2013 +0000 | 1 | |
| show-spectrum | Michael Abbott | Thu Mar 22 15:41:43 2012 +0000 | 1 | could convert to f-c-i.sh? |
| spawn.js | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| spawn.sh | Tom Cobb | Thu Nov 22 11:14:45 2012 +0000 | 0 | utility script |
| SR-cavity.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| srCellVacuum | Ian Gillingham | Mon Aug 19 09:07:09 2013 +0000 | 24 | unused - false matches |
| srCellVacuum.sh | Ian Gillingham | Tue Mar 8 09:00:49 2011 +0000 | 24 | |
| SR-LN2.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| SR-RF-LLRF-01.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| SR-RF-LLRF-02.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| SR-RF-LLRF-03.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 1 | |
| SR-RF-PSU-01.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 2 | |
| SR-RF-PSU-02.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 2 | |
| SR-RF-PSU-03.sh | Paul Hamadyk | Thu Nov 22 12:53:38 2012 +0000 | 2 | |
| startgdaclient.sh | Tom Cobb | Fri Nov 25 14:49:30 2011 +0000 | 1 | |
| startgdalog.sh | Tom Cobb | Fri Nov 25 14:49:30 2011 +0000 | 1 | |
| startgdaservers.sh | Tom Cobb | Fri Nov 25 14:49:30 2011 +0000 | 1 | |
| storePanel.sh | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 0 | |
| striparchive.sh | James Rowland | Mon Jun 11 13:07:34 2012 +0000 | 0 | |
| striptool.sh | James Rowland | Mon Jun 11 13:07:34 2012 +0000 | 1 | |
| tdms.sh | Paul Hamadyk | Fri Aug 27 07:52:13 2010 +0000 | 1 | |
| vacuumAlh.sh | Ian Gillingham | Mon Nov 12 11:43:11 2012 +0000 | 1 | |
| vacuum.sh | Ian Gillingham | Tue Mar 8 09:00:49 2011 +0000 | 14 | |
| waveRunner6050A | Tom Cobb | Fri Aug 13 15:45:38 2010 +0000 | 10 | |
</pre>
</div>
<div title="GnuMake" server.title="GnuMake" server.page.revision="1600646" server.etag="&quot;willrogers_public/GnuMake/1600646:5262df6e4f965d27069090457208127eb912e5d5&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131219165734" created="20130703164334" tags="c linux make" _hash="8fef0ef789df405437b55267622301e685902d42">
<pre>{{{make}}} is like {{{ant}}} for C (but of course it is the other way round).

This is the first introduction I found: http://capone.mtsu.edu/csdept/FacilitiesAndResources/make.htm

!!Basics
You'll probably use {{{make}}} to build C and C++ programs.  You can run {{{gcc}}} from the command line, but if you have a complicated project, with different dependencies, you'll quickly get bored.  {{{make}}} allows you to script the processes involved in the compilation so that simply running the command {{{make}}} will recompile the project.

Make works in terms of 'targets', which can each have dependencies.  It goes through the list of targets assembling the dependency chain, then builds those dependencies in reverse order.  You can instead choose a particular target or targets if you prefer.  Most targets are the name of an executable file, which is built by the subsequent commands.  A 'phony target' doesn't create any such file; 'clean' is often an example of this.

* {{{make ex1}}} will look for {{{ex1.c}}} and compile it to {{{ex1}}}.
* {{{make -d}}} gives a LOT of debugging

!!Macros
You can save repetition by using 'macros': 
{{{
OBJS = file1.o file2.o file3.o

prog1 : $(OBJS)
   CC -o prog1 $(OBJS)
}}}
Macros are by convention uppercase and underscores.  They can be referenced either as {{{${MACRO}}}} or {{{$(MACRO)}}}.

Make has internal macros that you can use to save typing compared to the explicit commands that you would otherwise have to type.

!!Rules
A rule has the form:
{{{
targets : prerequisites
    recipe
    ...
}}}
In the above example, the bit starting {{{prog1}}} is a rule.  {{{prog1}}} is the target, {{{$(OBJS)}}} is the prerequisites, and the indented block is the 'recipe', which is just a sequence of commands.  The recipe commands are generally executed by a shell.  Prepending {{{@}}} to a command just means that the command won't be printed to the output when it's executed; the output of the command is still printed.

Make understands that {{{prog1}}} is out of date if {{{prog1}}} doesn't exist or if any of the prerequsites are newer than prog1.

!!Command
* {{{make}}} will make using the default 'descriptor' ({{{makefile}}} or {{{Makefile}}})
* {{{make -f mymakefile}}} will use the specified descriptor
* {{{make target}}} will build the specified target 
* {{{make -C dir}}} will change to the directory {{{dir}}} before running make.

!!Makefiles
You can use the macro {{{SHELL}}} to specify the shell to be used.
The {{{include}}} directives tells make to pause the current makefile and read other makefiles before continuing this one.  {{{-include}}} does the same thing, except that if the specified makefiles don't exist no warning or error is generated.</pre>
</div>
<div title="PythonThreading" server.title="PythonThreading" server.page.revision="364637" server.etag="&quot;willrogers_public/PythonThreading/364637:14ef34af6eb18f4627904bd5d8b717fc1bad3ea3&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110718132843" created="20110715152034" tags="" _hash="8c3cf536066a5c61426059b4a370d38be0d1abb1">
<pre>Python threading is included in the low-level thread package and the higher-level threading package.  So, for the time being we'll import threading.

A warning I've come across several times already: this threading package won't use any multiple cores you have lying around - use multiprocess or something for that.  It will let you get on with two things at the same time, though.

!!Examples
{{{
import threading 
l = threading.Lock()
l.acquire()
l.acquire()
}}}
This blocks indefinitely - the second acquire() waits for the first to release before it can get the lock - but the first will never release.

{{{
import threading
import time

class ThreadTwo(threading.Thread):

    def run(self):
        print "Hello for the first time."
        time.sleep(3)
        print "Hello again."


if __name__ == '__main__':
    t = ThreadTwo()
    t.start()

    time.sleep(1)
    print "Hello in the middle."
}}}

This prints:
{{{
Hello for the first time.
Hello in the middle.
Hello again.
}}}

!!Locks
Locks are fairly simple, and you have to use them manually to look after your affairs.

The way I did it in the SSM was to associate a lock with a resource:
{{{
    # A list of the valid DNs we have available.
    self._valid_DNs = []
    # A Lock object so that the _valid_DNs List is never 
    self._valid_DN_lock = Lock()
}}}
Anything that wants to use {{{ self._valid_DNs }}} should acquire the lock first:
{{{
    self._valid_DN_lock.acquire()
}}}
and always release it afterwards.</pre>
</div>
<div title="NetworkDrive" server.title="NetworkDrive" server.page.revision="364354" server.etag="&quot;willrogers_public/NetworkDrive/364354:a153fa95b00dcdcacb60d3e68dc2270346e93a72&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110504085446" created="20110504085446" tags="" _hash="e2140ec2736de4aeee0b49955c1c614c2f0796fd">
<pre>In My Computer:

* Tools -&gt; Map Network Drive...
* Browse...
* Escdc\Escfiles01\Users\hgs15624</pre>
</div>
<div title="EmiReleases" server.title="EmiReleases" server.page.revision="363996" server.etag="&quot;willrogers_public/EmiReleases/363996:c7da31c1e60c81fff2d91de35688b497b4137f72&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111018112648" created="20111018092511" tags="" _hash="84f9750efe597d4e23b2b63c5944ec41e2eb783a">
<pre>!!New way of doing things

* When a product is released, it should be released for all supported platforms.
** EMI1: SL5
** EMI2: SL5, SL6, Debian 6
* Changing to use a single release task for all platforms
** Single certification report
** Single test report
** RfCs target all platforms by default
* Extend the release cycle to four weeks (from three)
** Allows more time for multiple platform deployment (and Nagios integration?  What does this mean?)

!!SL6 Porting
Nov 7th - APEL.  What do we have to do for this?  The build on SL6 must be available by then - of our current version.
What about our reliance on openssl for the SSM?
Can we get the new client out?  Do we have time?
There are no hard and fast plans for Debian, because the infrastructure is not yet ready.</pre>
</div>
<div title="PortingToSL6" server.title="PortingToSL6" server.page.revision="364482" server.etag="&quot;willrogers_public/PortingToSL6/364482:f643ed9c50b509c625b470d4490767af3030054a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111018125834" created="20111018125722" tags="" _hash="05ecae759b066db109d5e676b748ad34d7667117">
<pre>Talk at EMI AHM by Cristina Aiftimiei

!!Why and How
* The mandatory platforms for EMI2 are SL6, Debian 6, 64bit.  
* The infrastructure is more or less there to start the work.  
* We should start work supporting SL6 within EMI1 as far as possible.  
** One question - if we release in EMI2, do we have to support SL5?
* Reiteration - APEL needs to be building on SL6 and succeeding by 7th Nov.
** NOT released!
* Most packages should build out of the box.
** There are some differences in packaging and naming between SL5 and SL6.
** You can change platform-dependent properties to get around this

!!Open sourcing
The basic idea is that our packages are mature enough and well-maintained enough to release in official repositories such as EPEL, Debian, Fedora, Maven Central.  The target is that by some time in EMI2 we'd have EPEL-compliant packages, and some time in EMI3 we'd get packages actually into some repos.

!!!EMI 2
* 100% src rpms managed by PTs
** I guess (but I'm not really sure) that we don't release a source RPM
* 100% rpmlint success
* We can do this either inside or outside of ETICS 
* I think the idea is that we have a standard configuration, then have another one to which we add  EPEL-compliant RPMs as they become available.

</pre>
</div>
<div title="CollaborationBoard" server.title="CollaborationBoard" server.page.revision="363893" server.etag="&quot;willrogers_public/CollaborationBoard/363893:219dde83db56d13d81dee29b9cba23fc516dad1f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111021131305" created="20111019115651" tags="" _hash="a2d872e6289efdb86938e67ef77a077c49e4ece8">
<pre>Collaboration Board meeting at the EMI AHM in Padova, led by Alberto di Meglio.

!!!Main consequence for us (as far as I can tell):
* We've got to re-estimate our usage of money, explain why we used too little and make sure that if we want to spend the rest we declare it explicitly.

!!!Everything else

''1. Attendance''
''2. Discussion over who should be chairman''
* Perhaps the host country's representative until the next meeting
''3. Project Status''
* EMI 1 released, mostly in UMD
* EMI 2 - innovation
** Development tracker
** QA process well established
** User support in place w/ SLA
** Dissemination and relationships - under way
* Now half-way through the project

''4. Recommendations from Review''
* New Strategy Director - Morris Riedel
* Improve cost forecasting, reporting and management
** Link costs with work carried out (for individual partners)
** PPTs just don't give useful detail in practice.  Plus not much use for forecasting.
* Improve resource reporting, particularly time and money
** e.g. some partners report travel, some don't
** Perhaps some people use money for effort which is meant for travel
* Reduce the number of deliverables and improve their coherence.  Reduce the size of all the reports.
* Improve sustainability plans and commit to longer support than 3 months after the end of the project
* Improve outreach, promotion, and website
** The website might be nice, but it's not relevant.  People go to the twiki instead.  They don't find what they need on the website.
* Increase the level of technical detail in ... ?
* Establish a formal relationship with PRACE.  What's PRACE?
** A high-level European research computing project
* Improve industrial engagement
** Google no longer replies
** Red Hat - 'how many licences do you want to buy?'
** We shouldn't beg that people like EMI...?
* Clouds: 
** Establish a market position
** Leverage strengths of grids over clouds
* Increase visibility of EMI, in particular in relation to standards bodies

''5. Structure of PTB (not scheduled)''
Long discussion of the structure of the PTB, which I didn't follow very well.  I think the problem is raised by the lack of a Unicore person on the PTB.  Some people say that other groups explicitly include members of all middlewares, whereas the PTB is supposed to be a purely technical group.  Including all midd

The issue is:
* Should there be a representative of all 4 middlewares on the PTB?  The 4 are: ARC, gLite, Unicore, dCache.
* Should the PTB be trusted to include Unicore in the PTB meetings whenever it is relevant.  If this causes a problem over the next 6 months, it should be raised and the topic raised again.

An alternative formulation is:
* Should we leave the PTB formulation as it is?

This was voted on.  I abstained, but leant towards agreeing and voting yes.  The motion was passed.

After coffee, this left about 40 minutes for the rest of the meeting.

''5. Budget''
** Project average is fine
** There is still discussion about each partner's usage - whether they are under- or over-spent.
** Proposal: project future spend on the basis of current spending rates.
** I think it's a case of best using the money available to the project
** But does it mean that those people underspending so far get penalised and those who are over-spending get the benefit?  This does seem to be the case.
** We've been asked to evaluate the costs for the rest of the project to complete the tasks assigned to us.  We didn't provide forecasts until today.  If we want the money, we'd better think about this...  It seems that the institutions in yellow have usually underestimated, so the money as it stands may not be available.
** Alberto di Meglio: they want to ensure that all the money available is used for the project.  The project is already half-way through - is it optimistic to assume that people will correct their budgets to the original values.  It is important to spend the money we are allocated, and the risk of a partner coming to the end of the project and saying then that they underspent.
*** We have achieved most of our aims with a significant underspend.  Why is this?
** All they want to do is to realign the spending so that it is realistic.
** There should be explanations both for underspending and overspending partners, and what the consequence is for the project and their tasks.

One thing people seem to forget is that just because we get a certain amount of money to do a certain task does not mean that that is how much money the task requires.  Actually Alberto mentioned this at a later point.</pre>
</div>
<div title="ConfigureScripts" server.title="ConfigureScripts" server.page.revision="1336697" server.etag="&quot;willrogers_public/ConfigureScripts/1336697:32577752f2e187886307f331f6f546297d949647&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130808085706" created="20130808085242" tags="" _hash="28e4c8b73e9e4a757661fb36b87884c1abb7e754">
<pre>!!Configure scripts
There are two scripts called {{{configure-ioc}}} and {{{configure-tool}}}.  They are very similar in purpose.

!!!!Overview
Options:
* {{{h}}} - show usage
* {{{l}}} - list all the iocs
* {{{s &lt;name&gt;}}} - show the specified IOC
* {{{d &lt;name&gt;}}} - delete the specified IOC
* {{{b}}} - edit in batch mode
* {{{e}}} - edit in single mode

!!!!{{{configure-ioc}}}
This works using the file {{{/dls_sw/prod/etc/redirector/redirect_table}}}, which is simply a mapping from an IOC name to a boot script for that IOC.

!!!!{{{configure-tool}}}
The mapping file for this is {{{/dls_sw/prod/etc/build/tools_build/RELEASE.&lt;os-version&gt;}}}.  It appears to provide the correct directory if you provide the tool name.</pre>
</div>
<div title="SamsungLaptop" server.title="SamsungLaptop" server.page.revision="1470211" server.etag="&quot;willrogers_public/SamsungLaptop/1470211:a46855927158704a1b2553e7eb72f1b7bcc09c35&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131020115414" created="20121103100113" tags="" _hash="d678b77f7b20d3a27e780b85f9a3e0f3e35db4c2">
<pre>!!Windows 8

My product key is in an email.

!!VMs
VirtualMachines

!!Hardware
I replaced the hard drive with an SSD.  I installed 64-bit Windows and 64-bit Ubuntu.  This piece of advice was vital: http://www.webupd8.org/2013/01/ubuntu-lightdm-black-screen-when-using.html

!!Drivers
Samsung page: http://www.samsung.com/uk/support/model/NP350V5C-A02UK-downloads

I've got a Synaptics Touchpad V7.5

* Synaptics Gesture Suite Version: SGS 12.2
* ~TouchPad Series 2.0 - Profile Sensor
* Driver Version: 16.1.1 05Apr12
* FW Version: 7.5

http://superuser.com/questions/310681/inverting-direction-of-mouse-scroll-wheel

!!Samsung software
Installing Easy Settings: http://forum.notebookreview.com/samsung/681763-easy-settings-windows-8-a-2.html

!!Uninstalled
* Atheros Bluetooth suite
* Samsung Easy Settings
* Easy Software Manager
* Intel(R) USB 3.0 eXtensible Host Controller Driver
* Samsung Recovery Solution 5</pre>
</div>
<div title="colorScheme" server.title="colorScheme" server.page.revision="1521879" server.etag="&quot;system-info_public/colorScheme/1521879:945c691218a6d1bd26555a521e275f3d176f24fb&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-info_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-info_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="bfe2408ed9b5cebf918768cae9c9e15bdb8f3309">
<pre>Unless you're delighted with the default theme you can make some quick changes by generating a new random color palette, hit this button to cycle through some alternatives.

&lt;&lt;RandomColorPaletteButton saturation_pale:0.67 saturation_light:0.53
saturation_mid:0.43 saturation_dark:0.06 pale:0.99 light:0.85 mid:0.5 dark:0.31&gt;&gt;

You can also change the look and feel completely by installing a new theme. To do this, find one you like in the @themes space, note down the name, and include it in this space by going to the space menu. You can reach the space menu by clicking on the blue and pink circle at the top-right of the page and chooshing "THIS SPACE". Here are a few to check out:
* @pip
* @caspian-ii
* @basalt
* @simplicity
* @cheesecake
* @jelly-doughnut

(//Note that if you are using a custom TiddlySpace install, these themes may not be present.//)</pre>
</div>
<div title="PlusNet" server.title="PlusNet" server.page.revision="647472" server.etag="&quot;willrogers_public/PlusNet/647472:3ee8dc016d56df0a2a265adaca9aa39e992a40ee&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120322195655" created="20120315211921" tags="" _hash="8bb07936c94df363910d54bd541801c3861af842">
<pre>!!PlusNet

Connection charge was £25, one-off.

Line rental is £12.99 a month.  10GB internet is £6.49 a month, because we are in a  'low cost' area.

We get free phone calls from 7pm to 7am, if we hang up and reconnect every hour.  This includes:
* 01, 02, 03 landlines
* 0845
* 0870
* 0800 and 0300?
It ''doesn't'' include mobiles.

!!BT Home Hub
I also got a BT Home Hub (v1.5) router from RAL on the same day for £5.  This includes a phone which works fine.  The only problem might be if the router is locked to BT.  I've read that it works if it has the correct firmware - the details are I believe still open at work.  The firmware we've got is 6.2.6 E, I think. [[This page|http://community.plus.net/forum/index.php?topic=60561.0]] suggests it should work.

Here's a page about the BT Home Hub: http://www.filesaveas.com/bthomehub.html.
And hacking it: http://www.gnucitizen.org/blog/bt-home-flub-pwnin-the-bt-home-hub/
Here's another page: http://bt-home-hub.software.informer.com/wiki/#BT_Hub_Phone.  There's also some stuff on wikipedia.
Here's a page on the lights on the home hub: http://bt.custhelp.com/app/answers/detail/a_id/10469/~/what-do-the-lights-on-my-bt-home-hub-1.5-mean%3F

I've set the password so it's the same as my plusnet one.  The username is 'admin'.  You can reset this if you reset the router.  

The plusnet username is wahrogers.  To log in, it should be wahrogers@plusdsl.net, I think.  You can find the details in the welcome pack.</pre>
</div>
<div title="EmiSummary" server.title="EmiSummary" server.page.revision="922210" server.etag="&quot;willrogers_public/EmiSummary/922210:91564f65d38d8430ecd5a2a0c3af4c840fac08cc&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121029125225" created="20121029121736" tags="ahm emi" _hash="2ba7af18db71f5378c5f5413f00172ce5c09e95d">
<pre>By Alberto di Meglio, EmiAhmBudapest

!!Status

* EMI 2 released and in progress
* EMI 1 still supported
* EMI 3 dev tasks being monitored

* QA process well established
* User support running smoothly
* Dissemination, training, relationships going ...ok... (my interpretation)

* Sustainability plans defined, and work in progress.

Claimed 83% of original project aims completed.

!!Reviewers' Recommendations
The project was rated as 'good' (not 'acceptable' or 'excellent').
1. Long-term sustainability - this is definitely the most important
* more business focus in the strategy
* engage new communities
* engage industry
* strengthen ~ScienceSoft
* produce an architectural and development plan
* focus on security - perhaps good, but should be better explained
* sustainability plan is good, but must be implemented
** need to leave a technical legacy and vision
2. Refine outreach, promotion and marketing of the project
* use the generic IT press?
* this is definitely challenging
3. Improve online promotion, marketing
* increase traffic to website, beyond HEP community
* try and use ~ScienceSoft for this
* arguing that they have saturated the market (? really?)
4. Refine website navigation for different users
5. Increase articles and publications
* Popular press
* Scientific journals, conferences
6. Deliverables - more focused

!!This meeting
* Prepare the work for the next 6 months
* Take practical decisions on maintaining collaborations after EMI
* Prepare to implement the post-EMI plans and transitions.
* Technical area sessions should be focused more on future plans than current tasks.
* EMI 3 preparation
</pre>
</div>
<div title="CStrings" server.title="CStrings" server.page.revision="1311144" server.etag="&quot;willrogers_public/CStrings/1311144:81725a022793c386da63166b732e157b0045b08c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130717141135" created="20130710134421" tags="" _hash="8067e3e332a77bfb9dae83bf1444b12417d61f14">
<pre>In C, a string is just an array of characters.  This means that there are two ways of looking at a string:

{{{
char my_string[] = "this is a string";
char * your_string = "this is a string";
}}}

These are not exactly the same, but they are similar enough for now (for example, you can print them in the same way).  See http://www.lysator.liu.se/c/c-faq/c-2.html for more.  You can also define a string manually:
{{{
char str[] = {'a', ' ', 's', 't', 'r', '\0'};
}}}
A string is terminated with a null character; other arrays are not. </pre>
</div>
<div title="CssBasics" server.title="CssBasics" server.page.revision="1469710" server.etag="&quot;willrogers_public/CssBasics/1469710:2df720eee454f12705abfdd66acf919380484be8&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131019192909" created="20131019154211" tags="" _hash="e080cd0bb8ef3b8a7a27aa2370abed24920b456f">
<pre>See also HtmlBasics.
See also CssClassesIds, CssPositioning

!!Basic syntax
* You need to add the following to your HTML header.
{{{
&lt;link type="text/css" rel="stylesheet" href="stylesheet.css"/&gt;
}}}
* You can also add CSS code inside a &lt;style&gt; tag inside the HTML header.

{{{
p {
	color: red;
        /* tries fonts in order until it finds one which is available */
        font-family: Verdana, Times, cursive;
}
span {
	/*Write your CSS here!*/
	color: blue;
        font-family: cursive;
}
div {
        height: 100px;
        width: 100px;
        border: 2px solid red;
}
/* only links inside two divs */
div div a {
        color: #cc0000;
        text-decoration: none;
}
/* only links directly inside divs */
div &gt; a {
        color: red;
}

  
}}}
More generally:
{{{
selector {
    property: value;
}
}}}
* {{{*}}} matches any element
* The most specific selector wins




!!Units
* pixels are dangerous; ems refer to the standard font size on whatever device.</pre>
</div>
<div title="ToolbarCommands" server.title="ToolbarCommands" server.page.revision="1521884" server.etag="&quot;tiddlyspace/ToolbarCommands/1521884:da95fa59f34e9555e6761cf6f16035d710182d95&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="" modified="20131111192334" created="20131111192334" tags="excludeLists excludeSearch" _hash="b4c48a116434073fe3dd125db8ac7616ac920c98">
<pre>|~ViewToolbar|+editTiddler +cloneTiddler &gt; fields refreshTiddler changeToPublic changeToPrivate revisions syncing permalink references jump closeOthers &lt; closeTiddler|
|~EditToolbar|+saveTiddler saveDraft -cancelTiddler deleteTiddler|
|~RevisionToolbar|&gt; fields revert|</pre>
</div>
<div title="PoloToDo" server.title="PoloToDo" server.page.revision="1602722" server.etag="&quot;willrogers_public/PoloToDo/1602722:2843c6b527d973fb7858db0e419e76485271a19f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131222194622" created="20111010190050" tags="polo" _hash="2de3259603d1d9bf2ab97f40bb68bf6ef361b081">
<pre>When I bought the Polo, I didn't realise that there would be so many things to do on it.
Here's a VW parts specialist: www.vws.me.uk.

The car is a VW Polo.  The type is from 00-02, and I've seen it called a 6N2, but I don't know what that refers to.  It does help when searching on ebay though.

Nice illustration of how to take the door panel off: http://www.tigerstyle.co.uk/phpBB3

Here's a link to software to use with the cable I have ordered: http://www.ross-tech.com/vcds-lite/download/index.html

Here's how to reset the service indicator: http://www.tigerstyle.co.uk/phpBB3/viewtopic.php?f=13&amp;t=21512#p163649

* Window electrics: http://www.clubpolo.co.uk/forum/index.php?showtopic=324914
* Lock instructions: http://www.clubpolo.co.uk/forum/index.php?showtopic=167689

!!To do
* Plug spoiler holes
* Cam belt
* Windscreen washer
* Clean headlights
* Air con service
* Fix passenger window
** Here's a thread: http://www.clubpolo.co.uk/forum/lofiversion/index.php/t231825.html
* Windscreen chip
* Damaged wing mirror (driver's side)
* Damaged wing mirror mount (passenger's side)
* Bodywork?
* The back cover behind the left headlight - not really sure how to find one of these.

!!Done
* Insure
* Tax
* Reset service indicator
* Replace gear knob
* Top up oil
* New stereo fitted
* Replace right-hand speaker
* Airbag warning light
* Replace left-hand speaker
* Replace rear wiper blade
* ABSLight
* Parcel shelf hanger
* Replace aerial
* Bumper grille
* Left headlight bulb
* Replace front wiper blades
* Remove spoiler</pre>
</div>
<div title="StfcVpn" server.title="StfcVpn" server.page.revision="1325043" server.etag="&quot;willrogers_public/StfcVpn/1325043:e1f59ad7db6952d00f8e51d6740ed3d8408621fa&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130727102146" created="20130727102146" tags="" _hash="bcdcacbe6da933deebcdb33a31bae841d93a731c">
<pre>It took a bit of fiddling to make the STFC VPN work from Ubuntu.

The settings I ended up with are:
* Gateway : pptp.stfc.ac.uk
* NT Domain: CLRC
* Advanced...
** MSCHAP
** MSCHAPv2
** Use point to point encryption (MPPE)
*** Allow stateful encryption
** Allow BSD data compression
** Allow Deflate data compression</pre>
</div>
<div title="MySQLFiles" server.title="MySQLFiles" server.page.revision="854251" server.etag="&quot;willrogers_public/MySQLFiles/854251:581f0c6daf717e2e3be32abae8270b8692b19f05&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120905090150" created="20120905090150" tags="" _hash="39896202f5bb8a9f02328e768575465d0a06a223">
<pre>~MySQL uses a number of different files to store its data, generally stored in {{{/var/lib/mysql/data}}}.

!!~MyISAM
~MyISAM has three types of file:
* .frm - this stores the table definition
* .myi - the table index
* .myd - the table data

!!~InnoDB
In raptest, we have 
* ibdata1
* ib_logfile0
* ib_logfile1
* &lt;dbname&gt;/&lt;table&gt;.frm - the table definition, which is small
* &lt;dbname&gt;/&lt;table&gt;.ibd - this presumably stores the table data, because some of these files are big</pre>
</div>
<div title="EmiJRA1" server.title="EmiJRA1" server.page.revision="710519" server.etag="&quot;willrogers_public/EmiJRA1/710519:5c0b508aca7a2abed56c36c8ac9bfffbce888f5c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120515091012" created="20111018153903" tags="" _hash="a41064428ca881a2e2e7b6c186718e007e3397d1">
<pre>!!JRA1 - Middleware Development, Evolution and Integration 
''Leaders: Jon Kerr Nilsen  and Balazs Konya''
https://twiki.cern.ch/twiki/bin/view/EMI/JRA1 - but this seems to be a bit emptier than the other packages' pages (which is a bit funny, because it seemed to me to be fuller of content).

There are: 
* Mailing lists: emi-jra1
** emi-jra1-[compute, data, security, messaging]?
* several product teams
* 15 task forces with a specific task and a deadline
* 8 external task forces which EMI has a hand in
* Year 1 planning
* Year 2 development
* Year 3?
* If you do development in EMI, it must be part of the dev tracker.
** Objectives, tasks, subtasks.
** Look at the presentation for instructions on how to manage the dev tracker entries.
** Some cross-area tasks have not yet been assigned to product teams.
** If APEL plans to change its packages, we should probably let them know.
** This would mean the changes to the APEL publisher.
** Publish version information - what does this mean? glite-info-provider...
* By February, all products need to support SL6 and Debian 6.
* There are too many tasks in JRA1 - if more come in, existing ones may have to be dropped
** It should be the one place for all the development tasks for EMI
** They are tracking all development, so if we want to fix bugs etc it's got to go in the plan
** Some product teams appear to be overloaded</pre>
</div>
<div title="HaskellLists" server.title="HaskellLists" server.page.revision="679487" server.etag="&quot;willrogers_public/HaskellLists/679487:e47d8ec235507e49a327adf18c24f9d5ec0c3290&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120415180105" created="20120415180053" tags="haskell" _hash="4bbdcae50bcdb400c029bd6fe382caa4296331f7">
<pre>* Lists are pretty fundamental
* ++ will concatenate two lists
** appending an item to a list is O(n)
* {{{1:[2, 3, 4, 5] -&gt; [1, 2, 3, 4, 5]}}}
** this is cons and is O(1)
* Lists have to contain the same type
* [] is the empty list and is silently included at the end of all lists
* The nth item of a list is &lt;list&gt; !! n (starting at 0!)
* strings are just lists of characters
* you can compare lists with &lt;, &gt;, ==, &gt;= etc.  They are compared starting at the first item and moving along
** They can only be compared if the items in the list can be compared
!!!!List functions
* {{{head}}} gets the first item
* {{{tail}}} gets all items ''except'' the first
* {{{last}}} gets the last item
* {{{init}}} gets all items ''except'' the last
* {{{length}}} gets the number of items in a list
* {{{null}}} returns true if the list is empty
* {{{reverse}}} reverses the order of items
* {{{take n &lt;list&gt;}}} gets the first n items
** if you ask for more items than there are, you just get the whole list
* {{{maximum}}}, {{{minimum}}}, {{{sum}}} and {{{product}}} are obvious
* {{{elem &lt;item&gt; &lt;list&gt;}}} checks if the item is in the list
* {{{cycle}}} takes a list and turns it into an infinite list
* {{{repeat &lt;item&gt;}}} makes an infinite list containing only that item
* {{{replicate n &lt;item&gt;}}} returns n items as a list

!!!!Ranges
You can use [1..20] and ['a'..'z'] and ['K'..'Z'] as shorthand to get the logical lists.  [2, 2..20] gets the list in steps of 2.

!!!!List comprehensions
The syntax is:
{{{
[&lt;function&gt; | &lt;value&gt; &lt;- &lt;list&gt;, condition1, condition2]
[ x * 2 | x &lt;- [1..100], x &gt; 7]
[ x*y | x &lt;- [2,5,10], y &lt;- [8,10,11], x*y &gt; 50] 
}}}
If you put more than one list in, you will get the multiple of their lengths as the possible number of combinations.</pre>
</div>
<div title="EmiUserSupport" server.title="EmiUserSupport" server.page.revision="705293" server.etag="&quot;willrogers_public/EmiUserSupport/705293:6e2a158fe518bd2dd783709c11ed16c65b3b9da6&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120509103633" created="20120509103559" tags="" _hash="116924761d54e36586fd9153470d1000de9d69f3">
<pre>Mathilde Romberg at the EMI AHM, Hamburg

The APEL GGUS SU is part of the EMI group.  

There are some new ones this year: CANL, WNodes, EMIR etc.

There is now a field in GGUS tickets for ETA - the date when the fix will be available, which I think means an EMI update release date - the default is roughly 45 days later for urgent bugs.  There are also 'Affected component' fields.

If you are 'waiting for reply' and you need information, after two weeks escalate, then after another two weeks you can close the ticket if you've got no information.

What is this DMSU?  

Still some old tickets open - some may be ours.  Greater than 1 year?  We have one which is nearly a year old.

Should we open APEL-EMI tickets for bug-fixes referenced in APEL tickets?</pre>
</div>
<div title="PyQt" server.title="PyQt" server.page.revision="1282911" server.etag="&quot;willrogers_public/PyQt/1282911:ace0ee0ae50a59491f5942542aac23176424d9c9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130626124336" created="20130605132815" tags="" _hash="856c604c15a75e4776496374e502fea09da027ca">
<pre>The introduction to PyQt Model/View programming is here: http://qt-project.org/doc/qt-4.8/model-view-programming.html

Here's a discussion of the difference between Qt Events and Qt Signals: http://stackoverflow.com/questions/3794649/qt-events-and-signal-slots</pre>
</div>
<div title="MiddleLayer" server.title="MiddleLayer" server.page.revision="1468278" server.etag="&quot;willrogers_public/MiddleLayer/1468278:69023f5f19d440a838b931cc6ed646572dea9e7b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131018155513" created="20131001113225" tags="" _hash="2079884d3931e120e758b456abaf7614a905bb08">
<pre>See also MatlabBasics, MatlabLoco.

Matlab Middle Layer is a Matlab library designed for accelerators.   

It is installed in a couple of places:
* version 1-0 
* version 2-0 is in work, and also linked from {{{/home/diamond}}}
** {{{/dls_sw/work/common/matlab/mml}}}
** {{{/home/diamond/common/matlab/middlelayer/2-0}}}</pre>
</div>
<div title="ForwardingAddress" server.title="ForwardingAddress" server.page.revision="851899" server.etag="&quot;willrogers_public/ForwardingAddress/851899:bf200c42320db7a1929a0cb842afdc59fd847028&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120902105708" created="20120902105702" tags="" _hash="656caa61bda501fb216a02057157a6c8d38a8a84">
<pre>Mrs (?) J Rowbotham
11 Glencoe Drive
Sale
M33 4WL
</pre>
</div>
<div title="EclipseNotes" server.title="EclipseNotes" server.page.revision="1012615" server.etag="&quot;willrogers_public/EclipseNotes/1012615:5e1a553751be6865fc2cc7d5f976f48041a5972c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130103133717" created="20110603124321" tags="eclipse java python" _hash="6e1cd592a25bb6681bbed03b0e687b236c083239">
<pre>Random notes about Eclipse, which will be sorted at a later point if necessary.

!!Keyboard Shortcuts
| Run the current file | Ctrl + F11 |
| Tab between files | Ctrl+ ~PgUp/~PgDn |
| Tab through file history | Alt + Left / Right |

!!Linux installation
* On Ubuntu, I have to open Eclipse as root to install new software (via Help -&gt; Install New Software...)

!!~PyDev
* Pydev: do this through eclipse: 
** At least once I had to set up the network proxy within eclipse:
*** Window -&gt; Preferences -&gt; General -&gt; Network Connections
*** Active Provider -&gt; Manual and enter the proxy details
** Help -&gt; Install New Software... then follow the instructions here:
** http://pydev.org/manual_101_install.html

I often have problems trying to resolve imports using ~PyDev and Eclipse.  Things you can try:
* Add all library folders including parents to the PYTHONPATH window
* Remove and re-add the python interpreter 
* Restart Eclipse using the File menu option

I had a problem where Eclipse froze while it was starting up, I think after my computer crashed.  I removed the file {{{/home/will/apel/.metadata/.lock}}} and it seemed to fix it.

!!subclipse
* do this through eclipse
** apt-get install libsvn-java
** http://subclipse.tigris.org/servlets/ProjectProcess?pageID=p4wYuA
** On Debian, Eclipse wouldn't let me 'Finish' unless I'd installed all dependencies (some kind of bug).  These included GEF (for the revision graphs); instructions [[here|https://aptanastudio.tenderapp.com/discussions/problems/3279-subclipse-installation-problem]]; and Mylyn stuff from the main Eclipse repository.
** It then wanted me to install a 'connector' for Subversive.  I didn't really know what was going on at this point, but I chose the JavaHL which corresponded to my version of SVN, which was 1.6.

I had problems getting the subversion plugin subclipse to work properly on Debian, and I managed this with the instructions here:
http://blog.ethomasjoseph.com/2010/07/solving-eclipse-errors-with-svn-1-6.html

!!!python-coverage
* {{{sudo apt-get install python-coverage}}}
* Window -&gt; Show View -&gt; Code Coverage

!!!Vrapper:
** http://vrapper.sourceforge.net/home/

!!!pep8 
pep8 is an alternative to ~PyLint.
* {{{sudo apt-get install pep8}}}
* I used http://stackoverflow.com/questions/399956/how-to-integrate-pep8-py-in-eclipse to get it integrated as well.

!!!~PyLint
See PylintProfile
* {{{apt-get install pylint}}}
** Window -&gt; Preferences -&gt; ~PyDev -&gt; ~PyLint -&gt; use pylint (and find lint.py to point to)
Sometimes the ~PyLint output stops going to the console...
* You can fix this by looking in the top right corner of the console area for a drop-down menu to choose which console you see.

!!Java
To add a jar, one easy way:
* Add the jar to lib/ inside the project folder
* Refresh so that you can see the jar
* Right click on the jar and select Build Path -&gt; Add to Build Path

To change the source folders:
* Right click on the project and select Properties...
* Select Java Build Path and the Source tab</pre>
</div>
<div title="AddPrinters" server.title="AddPrinters" server.page.revision="363647" server.etag="&quot;willrogers_public/AddPrinters/363647:fdf62450a7232905513b9df21e26777eac720f0b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110508143147" created="20110508143147" tags="" _hash="e5ef75d48f411987d271deaeb9e5811654aa0bfb">
<pre>Type the text for 'AddPrinters'</pre>
</div>
<div title="HomeComputer" server.title="HomeComputer" server.page.revision="1602624" server.etag="&quot;willrogers_public/HomeComputer/1602624:cb8f8617cec44ade6a8524bb323b57f855b13c5f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131222133312" created="20131222133307" tags="" _hash="f1cb69b46be855f232dcf50bd283e40d767d17b5">
<pre>
SamsungLaptop
WindowsPrograms
WindowsLicences
NewLaptop
UbuntuElevenFour
UbuntuElevenTen
UbuntuTwelveTen
UbuntuThirteenTen
UbuntuGrub</pre>
</div>
<div title="FastFeedbackVariables" server.title="FastFeedbackVariables" server.page.revision="1545780" server.etag="&quot;willrogers_public/FastFeedbackVariables/1545780:c6b2d1388805c1203061fe168de3aa56287b66a5&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131120141817" created="20131120114820" tags="" _hash="57f06bd3a63ea0e5ae89326871dfe9104880a622">
<pre>There are a number of variables which affect how fastfeedback works.  They tend to follow a path from the FastFeedbackOpi code to the FastFeedbackSrc code via  EPICS, but there are differences too.

| !PV | !variable | !{{{fofb.config}}} | !description |
| {{{FASTART}}} | {{{memory_map.enable}}} | - | start/stop trigger |
| {{{DISA[H,V]}}} | {{{disablePlane}}} | - | disable x or y plane |
| {{{AWR}}} | {{{feedback.awr}}} | 1 | whether antiwind is enabled |
| {{{MABSB}}} | {{{feedback.mabsb}}} | 0.5*10^6nm = half a millimetre | 'orbit limit', passed into {{{Saturate()}}} |
| {{{MABSC}}} | {{{feedback.mabsc}}} | 1A | 'corrector limit' |
| {{{ATAPS[X,Y]}}} | {{{feedback.ataps}}} | calculated from parameters... | |
| {{{BTAPS[X,Y]}}} | {{{feedback.btaps}}} | ...eta, cutoff, delay, epsilon |  |
| {{{TRACK}}} | {{{feedback.track}}} | 4π |  |
| {{{BPMEN}}} | {{{feedback.enabled}}} | - |  which BPMs are working |
| {{{FMASK}}} | {{{feedback.fmask}}} | 0 * 24 |  ? |
| {{{APPLY}}} | {{{feedback.apply}}} | | |


</pre>
</div>
<div title="MobileProblems" server.title="MobileProblems" server.page.revision="364326" server.etag="&quot;willrogers_public/MobileProblems/364326:cacb4b9456d58544a502e252853e6d9326fd4b76&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110830091644" created="20110830090055" tags="" _hash="311da8d509b557a50e5bdf4eb3f6a4f7c3b6ebb3">
<pre>Details:
* Order number: 3057382
* Old number: 07905 237327
* New / cancelled number: 07552791077
* Talkmobile account number: D564169
* Exchange number: 239580477


These are the problems I've had since ordering the phone from mobiles.co.uk

* The PAC code transfer didn't work
* I cancelled the contract
* They didn't get back to me on how to get the phone back
* I didn't receive acknowledgment of return
* I've been billed £100 up front for the phone (1st Aug)
* I've now been billed £13 as a first payment (18th Aug)
** I got a bill through the post, but it said £36, not £13...</pre>
</div>
<div title="Start writing" server.title="Start writing" server.page.revision="1521876" server.etag="&quot;system-info_public/Start%20writing/1521876:319a3eb03620da9377a7988dccecb2f23c596dbb&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-info_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-info_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeMissing excludeSearch" _hash="7d1a54121ab3a090a54dd263b3e45c3f7699f8ed">
<pre>Click the "new tiddler" button towards the top right of the screen to write something in your space. You'll need to give it a title, some content and, optionally, some tags that will help you identify it later.

!Stuck for ideas?
Not sure what to write about? Not sure what to keep in your space? Other people use ~TiddlySpace for almost anything. How about some of the following:

* [[Save interesting sites|http://bookmarks.tiddlyspace.com]], images or articles from around the web so that you can refer back to them.
* [[Record your family tree|http://familytree.tiddlyspace.com]], store notes on long lost relatives or ancestors and map their relationship to you.
* [[Make up a pocketbook|http://pocketbook.tiddlyspace.com]] to store some useful information in, then print it out, [[fold it up|http://www.pocketmod.com/]], and take it with you.
* [[Plan your holiday|http://the-web-is-your-oyster.tiddlyspace.com/]], record where you're planning to go, note down places of interest and refer back to it later.
* [[Create a mindmap|http://mindmaps.tiddlyspace.com/]] to visualise your inner thoughts and see how they relate to each other.
* [[Set up a questionnaire|http://questionnaire.tiddlyspace.com/]] and get all your friends to answer it.

If you don't like any of those ideas, you can still use this space directly to keep notes and link them together, make a todo list and keep track of everything you're doing, or any one of a hundred million other things.

Still stuck? Check out the @featured space for more suggestions.

You can also [[socialise with others|How to socialise]].</pre>
</div>
<div title="SshKeyAuthentication" server.title="SshKeyAuthentication" server.page.revision="364744" server.etag="&quot;willrogers_public/SshKeyAuthentication/364744:722825f550d93b382087f3f5263a24f8796104d3&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111219110623" created="20110505102457" tags="bash cygwin linux openssh ssh" _hash="a4c88236467c232b278b03108439eb4940671ff7">
<pre>!! Shortcut
This process confused me enough that it took me a while to figure out the actual important bits.  To enable SSH authentication:
* Copy your SSH key to {{{~/.ssh/id_rsa}}}
* Run {{{ssh-add}}}

I suspect (but I'm not sure) that using {{{ssh-agent}}} means that the key is available for the lifetime of the uptime of the computer, but using {{{ssh-add}}} means it's only there for the session or life of the terminal.

!! .bashrc snippet
This allows you to log on to remote computers without a password.  It uses a program called ssh-agent, which I don't fully understand.  However:

* Copy your private key in openssh format (not ~PuTTY .ppk) to ~/.ssh/id_rsa
* Copy this snippet to the end of ~/.bashc:
{{{
SSH_ENV="$HOME/.ssh/environment"

function start_agent {
     echo "Initialising new SSH agent..."
     /usr/bin/ssh-agent | sed 's/^echo/#echo/' &gt; "${SSH_ENV}"
     echo succeeded
     chmod 600 "${SSH_ENV}"
    . "${SSH_ENV}" &gt; /dev/null
     /usr/bin/ssh-add;
}

# Source SSH settings, if applicable

if [ -f "${SSH_ENV}" ]; then
    . "${SSH_ENV}" &gt; /dev/null
     #ps ${SSH_AGENT_PID} doesn't work under cywgin
     ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ &gt; /dev/null || {
         start_agent;
     }
else
     start_agent;
fi
}}}

!!!Explanation
This script makes things appear a fair amount more complicated than it need be.  What happens is:
* If the {{{~/.ssh/environment}}} file exists, source the variables
* Run the start_agent function
In the start_agent function:
* The substitution seems to comment any lines beginning 'echo' in the environment file, then pass it into ssh-agent.
* It changes the permissions of the environment file, then sources it
* It runs ssh-add.
</pre>
</div>
<div title="MessageHashes" server.title="MessageHashes" server.page.revision="811021" server.etag="&quot;willrogers_public/MessageHashes/811021:2ad22bf23b8c45cd156d8e53c7ac55891c3dc7dd&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120730091505" created="20111005153715" tags="crypto openssl" _hash="4f64d879f5116ab27ccab1d3535c44794bf23965">
<pre>Message hashes are simple enough, once you've got the idea.  

!!The idea
You have a file, and you want to make sure that when you give it to someone that they can tell it's the exact same file.  The way to do this is to use a "hash function".  It's a function which you can give arbitrary data, and then it returns to you a short string.  If you change the data you give it at all, the short string is completely changed.  It's impossible to engineer a file to give a desired hash.

There are two requirements for a good hash:
* it is impossible to recreate the message from the hash
* it is impossible to find two files with the same hash value (a collision)

Since there are unlimited inputs and a limited number of hash values, there are actually infinite collisions for any algorithm.  However, it should be impossible to find one.

So if you're downloading a file, they'll often give you a hash in some format so that you can check you've got it fine.  Two common formats are MD5 and SHA1.

!!Types of hash
!!!!~MD5
This was invented by Rivest, and built on MD4.  It produces a 128-bit output.  It is now considered broken.

!!!!~SHA1
The original SHA (SHA0) was flawed.  SHA1 is widely-used, but has now theoretically shown some signs of weakness, so it is being replaced by SHA2.

!!!!~SHA2
SHA2 is actually a set of four different hashes, all based on the SHA1 algorithm.  They are SHA-224, SHA-256, SHA-386, SHA-512.  These have not been compromised.

!!~OpenSSL

{{{
will@will-VirtualBox:~/tmp$ openssl dgst -md5 openssl-0.9.8r.tar.gz 
MD5(openssl-0.9.8r.tar.gz)= 0352932ea863bc02b056cda7c9ac5b79
}}}
{{{
will@will-VirtualBox:~/tmp$ openssl dgst -sha1 openssl-0.9.8r.tar.gz 
SHA1(openssl-0.9.8r.tar.gz)= a02411e5f4d463cac4a2a4a357a4a0b93bf65e72
}}}</pre>
</div>
<div title="GitNotes" server.title="GitNotes" server.page.revision="1560373" server.etag="&quot;willrogers_public/GitNotes/1560373:11497aa188f05817c9e06e33f0a213231f712006&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131125135753" created="20121129111245" tags="" _hash="d55a7ce0270b3c7b476b6bfcb90f596bbf0cb411">
<pre>
* GitCommit
* GitBranch
* GitSvn
* GitShow
* GitRemote
* GitStash

Git seems pretty easy to set up.  I followed the instructions on this page: https://help.github.com/articles/create-a-repo

In order to connect from behind a proxy, I had to set: {{{export https_proxy=wwwcache.rl.ac.uk:8080}}}.  

{{{gitk}}} is useful to visualise the progress of a repo; in particular {{{gitk --all}}}

Here's a good style guide for using git: https://wiki.openstack.org/wiki/GitCommitMessages#Information_in_commit_messages


!!General idea
You get a local repository, to which you need to commit before you can 'push' any changes.

To commit anything, you need to add your changes with {{{git add}}}.  You can then commit to the local repositry with {{{git commit -m "message"}}}.  You can't use 'ci' as an abbreviation.

You can revert changes to a file with {{{git checkout -- &lt;file&gt;}}}.  This just checks out whatever was last checked out on top of the changes you've made.  To selectively undo within a file, use {{{git checkout -p}}}.

To push changes to a remote repository, use {{{git push &lt;remote&gt; &lt;branch&gt;}}} - often {{{git push origin master}}}.

To pull changes from a remote repository, use {{{git pull &lt;remote&gt; &lt;branch&gt;}}}.

{{{git log}}} shows all the commits in a repository.  {{{git log &lt;file&gt;}}} shows the commits which affect that file.


!!Merging and rebasing
There are two ways to combine two branches which have diverged.
!!!!Merging 
This takes the two (or more) commits which will become the parents of the new commit, combines them and creates a new commit.  Since git happily handles the history, this works well
!!!!Rebasing
This rewinds the repo to the point of divergence, applies one set of changes then applies the next set.  The advantage of this is that it creates a simple linear history, which is easily understood by (for example) {{{git svn}}}.

!!Tags
To create an annotated tag:
* {{{git tag -a &lt;name&gt; -m "Commit message."}}}
* {{{git push --tags origin}}}
To delete a remote tag, see: http://nathanhoad.net/how-to-delete-a-remote-git-tag

!!Ignoring files
I wanted to ignore all {{{.pyc}}} files.  I added a file called {{{.gitignore}}} to the root of the repo, and added one line: {{{*.pyc}}}.
You can also ignore files local to one repository - I used it for eclipse {{{.project}}} files which won't necessarily be in other people's copies of the repo.  To do this, edit the {{{.git/info/exclude}}} file.


!!Other commands
* {{{git cherry}}} - show commits ahead of or behind between two branches
* {{{git cherry-pick}}} - choose a specific commit to pull from another branch
* {{{git request-pull}}} - provide some text to email to another person to allow them to pull your changes

!!Cygwin
You need to install {{{git}}} and dependencies, but also {{{ca-certificates}}} if you're using https.

!!Windows client
I needed to follow these instructions to get through the proxy: http://manku.thimma.org/2012/09/github-for-windows-through-proxies/

</pre>
</div>
<div title="closeTiddler" server.title="closeTiddler" server.page.revision="1521934" server.etag="&quot;system-images_public/closeTiddler/1521934:3533c4f2bb3ea6d91be01e77d0ec411b77f7722b&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-images_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-images_public" server.permissions="read" server.content-type="image/svg+xml" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="1ddacf68b541cb91b7b896c9c2934ec79e8997a0">
<pre>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" viewBox="78 222 60 60" 
width="30" height="30"&gt;
&lt;g stroke="none" stroke-opacity="1" stroke-dasharray="none" fill="none" fill-opacity="1"&gt;
	&lt;g&gt;
		&lt;path d="M 107.92718 244.14815 L 86.651474 222.89253 L 78.85206 230.69925 L 100.120415 251.9476 L 78.774 273.27396 
		L 86.57342 281.08075 L 107.927216 259.74707 L 129.39981 281.19946 L 137.19922 273.39267 L 115.73397 251.94763 
		L 137.121155 230.58054 L 129.32175 222.77374 Z" fill="black" class="glyph"/&gt;
	&lt;/g&gt;
&lt;/g&gt;
&lt;/svg&gt;</pre>
</div>
<div title="EmiSoftwareTools" server.title="EmiSoftwareTools" server.page.revision="922350" server.etag="&quot;willrogers_public/EmiSoftwareTools/922350:f9b8abcb6f4748b641834113ca11d78af6a45b44&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121029144518" created="20121029144518" tags="" _hash="c5a93cff782100d1fe0cc7f494afcf77c01b67bf">
<pre>By Andrea Ceccanti, at EmiAhmBudapest

!!Current status
* Platforms
* Release definitions (major, minor, revision)
* EMI Repositories - devel, testing, deployment, production
* Third-party repo - packages not available in the standard repos (EPEL, Debian)
* ETICS - moving from packaging tool to a packaging 'verifier'
** gives quality metrics
** provides nightly builds and creates repositories.
* EMI testbed - deployment checks for all EMI releases
** provides resources for integration testing and training
* release acceptance criteria

!!What happens next?
* Will there be a distribution?
** Or will you have to get software directly from PTs?
* Will there be a PT coordination function?  (~ EMT)
** If so, who will take over?
* Will there be a common release and quality process?
* Which tools will be used?

!!Hypotheses
* We need well-defined platforms to develop against
* Coordination cannot be provided by PTs - they are already too stretched
* A central repository will be needed - not everything can be in EPEL/Debian/Maven central
* Good integration tools will be needed
* EMI good practices should be preserved</pre>
</div>
<div title="MessageChannel" server.title="MessageChannel" server.page.revision="364296" server.etag="&quot;willrogers_public/MessageChannel/364296:eda7d9d4cdc429b1070615263eedc6386475fdd2&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111123171611" created="20111123170955" tags="" _hash="f04cb249393127fb8e182864fde569ab5b7c8619">
<pre>There are lots of different sorts of channels.  In general channels are one-way, because of the way topics and queues work - a two-way channel would mean that the sender would pick up his own messages, which isn't relevant.

* Point-to-point channel - designed that only one receiver gets a message, no matter how many are listening
** This means that receivers won't necessarily get all the sent messages
** This is a queue in ActiveMQ terms
* Publish-subscribe channel - designed so that everyone who's listening gets all the messages
** In ActiveMQ land, this is a topic
* Datatype channel - where each message in a channel has the same format
** This allows the receiver to know what type of message it's getting
** The channels may have the same directions
* Invalid message channel - used for any messages that can't be understood by the receiver
** The receiver posts the message back to the channel
** Then the rejected messages are there for someone to try and handle
* Dead-letter channel - used if the message system can't deliver the message
* Guaranteed delivery - used to ensure that messages are delivered
** Otherwise known as persistent

</pre>
</div>
<div title="SkiingCosts" server.title="SkiingCosts" server.page.revision="1574163" server.etag="&quot;willrogers_public/SkiingCosts/1574163:0d9894138de14cd0955e70beccd6d7613e9cfd1c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131203184719" created="20111206202913" tags="" _hash="5f12693d4a7d73dc959220723f06b6e3f71fb375">
<pre>!!2012

|''Stage''|''Description''|''Cost''|''Date''|
|Stage 1|25% accommodation, flights, transfers|£157|6/12/11|
|Stage 2|Rest of accommodation, ski pass|£274|1/2/12|
|Stage 3|Snowboard hire|£88|1/2/12|
|Stage 4|Lessons, parking, insurance|£150|15/2/12|
|Stage 5|Euros spent (€109@1.11)|£98|Skiing|
|Stage 6|Settling up|£55|8/3/12|
|Stage 7|Petrol|£10|8/3/12|
|''Total''| | ''£832'' | |
Total before going: £669

I owe Ben £10 for petrol.

I bought €120 from the post office for £108.11, at a rate of 1.11.
I found €74 at home.
I came back with €85.
I then owed £55 when I got back for the flat kitty where I hadn't been pulling my weight.
I paid Ben £10 for petrol.

!!2014

|''Stage''|''Description''|''Cost''|''Date''|
|Stage 1|25% accommodation, flights, transfers|£206|3/12/13|
</pre>
</div>
<div title="ErrorHandler" server.title="ErrorHandler" server.page.revision="1521896" server.etag="&quot;tiddlyspace/ErrorHandler/1521896:a7c5a5acad7686dfe5be390c2d237a31595cdb82&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch systemConfig" _hash="ffff853197a5561dfaef34fd40efbb0c738fbc79">
<pre>/***
|''Name''|ErrorHandlerPlugin|
|''Version''|0.4.3|
|''Author''|Jon Robson|
|''Description''|Localised tiddler save errors including edit conflict resolution.|
|''CoreVersion''|2.6.1|
|''Requires''|TiddlySpaceConfig|
***/
//{{{
(function($) {

var tiddlyspace = config.extensions.tiddlyspace;
var currentSpace = tiddlyspace.currentSpace.name;
tiddlyspace.getLocalTitle = function(title, workspace, suffix) {
	var endsWith = config.extensions.BinaryTiddlersPlugin.endsWith;
	if(!suffix) {
		var isPublic = endsWith(workspace, "_public");
		suffix = tiddlyspace.resolveSpaceName(workspace);
		if(currentSpace == suffix) {
			suffix = isPublic ? "public" : "private";
		} else {
			suffix = "@%0".format(suffix);
		}
	}
	return "%0 *(%1)*".format(title, suffix);
};

var sssp = config.extensions.ServerSideSavingPlugin;

var msgs = config.messages.editConflict = {
	loading: "Loading..",
	resolve: "[[Edit Conflict]]@glossary: this tiddler may have been changed by someone else.",
	reviewDiff: "review (recommended)",
	reviewDiffTooltip: "review changes made to this tiddler",
	reviewDiffError: "error retrieving revision.",
	save: "overwrite",
	saveTooltip: "make this revision the top revision of this tiddler",
	discard: "cancel",
	discardTooltip: "undo changes to this tiddler and get most recent version",
	diffTitle: "%0",
	diffFieldTitle: "%0 - fields",
	diffTextTitle: "%0 - text",
	updating: "updating your version...",
	diffHeader: ["Review the changes that have been made whilst you were editing this tiddler. ",
		"Fold relevant changes back into your version.\n",
		"{{removed{Red}}} highlight shows content removed. ",
		"{{added{Green}}} highlight shows content added.\n"].join(""),
	diffTextHeader: "View changes in text",
	diffFieldsHeader: "View changes in fields"
};

var plugin = config.extensions.errorHandler = {
	diffTags: ["excludeLists", "excludeMissing", "excludeSearch"],
	displayMessage: function(message, tiddler, context) {
		var desc = context &amp;&amp; context.httpStatus ? context.statusText :
			sssp.locale.connectionError;
		var reportArea = plugin.reportError(tiddler.title);
		var msg = $("&lt;div /&gt;").appendTo(reportArea);
		if(message == "saveConflict") {
			wikify(msgs.resolve, msg[0]);
			var choiceArea = $("&lt;div /&gt;").appendTo(reportArea)[0];
			plugin.editConflictHandler(choiceArea, tiddler);
		} else {
			msg.text(sssp.locale[message].format(tiddler.title, desc));
		}
	},
	editConflictHandler: function(container, tiddler) {
		var title = tiddler.title;
		var myrev = tiddler.fields["server.page.revision"];
		// note user now needs to edit, fix problem and save. 
		// TODO: make sure this gets reset in save callback
		store.getTiddler(title).fields["server.page.revision"] = "false";

		var diffBtn = createTiddlyButton(container, msgs.reviewDiff, msgs.reviewDiffTooltip, function(ev) {
			var title = $(ev.target).data("title");
			plugin.displayDiff(ev.target, store.getTiddler(title), myrev);
		});
		var saveBtn = createTiddlyButton(container, msgs.save, msgs.saveTooltip, function(ev) {
				var title = $(ev.target).data("title");
				var tid = store.saveTiddler(store.getTiddler(title));
				autoSaveChanges(null, [tid]);
			});
		var ignoreBtn = createTiddlyButton(container, msgs.discard, msgs.discardTooltip, function(ev) {
			var title = $(ev.target).text(msgs.updating).data("title");
			plugin.resetToServerVersion(store.getTiddler(title));
		});
		$([diffBtn, ignoreBtn, saveBtn]).data("title", title);
	},
	getDiffTiddlerTexts: function(diffText) {
		var chunks = diffText.split("\n  \n");
		if(chunks.length &lt; 2) {
			return [chunks[0], ""];
		} else {
			var diffFieldsText = "{{diff{\n%0\n}}}".format(chunks[0]);
			diffText = '{{diff{\n%0\n}}}'.format(chunks.splice(1, chunks.length).join("\n"));
			return [diffText, diffFieldsText];
		}
	},
	makeDiffTiddler: function(title, diff) {
		var newTiddler = new Tiddler(title);
		var tags = plugin.diffTags;
		newTiddler.text = msgs.loading;
		newTiddler.fields.doNotSave = true;
		newTiddler.tags = diff ? tags.concat(["diff"]) : tags;
		newTiddler = store.saveTiddler(newTiddler);
		$.extend(store.getTiddler(title).fields,
			config.defaultCustomFields); // allow option to save it
		return newTiddler;
	},
	displayDiff: function(src, tiddler, latestRevision) {
		var adaptor = tiddler.getAdaptor();
		var title = tiddler.title;
		var ts = new Date().formatString("0hh:0mm:0ss");
		var suffix = "edit conflict %0".format(ts);
		var diffTitle = tiddlyspace.getLocalTitle(msgs.diffTitle.format(title), "", suffix);
		var diffTextTitle = tiddlyspace.getLocalTitle(msgs.diffTextTitle.format(title), "", suffix);
		var diffFieldsTitle = tiddlyspace.getLocalTitle(msgs.diffFieldTitle.format(title), "", suffix);
		plugin.makeDiffTiddler(diffTextTitle, true);
		plugin.makeDiffTiddler(diffFieldsTitle, true);
		var newTiddler = plugin.makeDiffTiddler(diffTitle, false);
		newTiddler.text = ['%0\n&lt;&lt;slider chkViewDiffText "%1" "%2"&gt;&gt;\n',
			'&lt;&lt;slider chkViewDiffField "%3" "%4"&gt;&gt;'].join("").
			format(msgs.diffHeader, diffTextTitle, msgs.diffTextHeader,
				diffFieldsTitle, msgs.diffFieldsHeader);
		store.saveTiddler(newTiddler);

		var callback = function(r) {
			var text = plugin.getDiffTiddlerTexts(r);
			store.getTiddler(diffTextTitle).text = text[0];
			store.getTiddler(diffFieldsTitle).text = text[1];
			story.refreshTiddler(diffTitle, null, true);
		};
		var workspace = "bags/%0".format(tiddler.fields["server.bag"]);
		ajaxReq({
			type: "get",
			dataType: "text",
			url: "/diff?format=unified&amp;rev1=%0/%1/%2&amp;rev2=%0/%1".format(workspace, title, latestRevision),
			success: callback,
			error: function() {
				displayMessage(msgs.reviewDiffError);
			}
		});
		story.displayTiddler(src, diffTitle);
	},
	resetToServerVersion: function(tiddler) {
		var adaptor = tiddler.getAdaptor();
		var ctx = { 
			host: tiddler.fields["server.host"],
			workspace: "bags/" + tiddler.fields["server.bag"]
		};
		adaptor.getTiddler(tiddler.title, ctx, null, function(context) {
			store.saveTiddler(context.tiddler);
			story.refreshTiddler(tiddler.title);
			store.setDirty(false);
		});
	},
	reportError: function(title) {
		var el = story.getTiddler(title);
		if(!el) {
			el = story.displayTiddler(null, title);
		}
		return $("&lt;div /&gt;").addClass("error annotation").prependTo(el)[0];
	}
};

sssp.reportFailure = function(message, tiddler, context) {
	config.options.chkViewDiffText = config.options.chkViewDiffText === undefined ?
		true : config.options.chkViewDiffText;
	config.options.chkViewDiffFields = config.options.chkViewDiffFields || false;
	plugin.displayMessage(message, tiddler, context);
};

})(jQuery);
//}}}</pre>
</div>
<div title="PythonFunctions" server.title="PythonFunctions" server.page.revision="1217398" server.etag="&quot;willrogers_public/PythonFunctions/1217398:28714df764138ff6a0e9f96da9848011677ac007&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130516135310" created="20120925201455" tags="function lambda python syntax" _hash="5ff8d72b45d61f71a90a29dd84211107d2bef23d">
<pre>Python functions return None if there is no explicit return statement.

!!Builtin functions
Python's builtins are in a special module called {{{__builtin__}}}.
* type() works on anything.  You can compare results with constants in the types module
* every datatype can be coerced into a string with {{{str()}}}
* {{{callable()}}} returns True if the object is callable - that is, it defines a {{{__call__}}} method
* {{{help()}}} often returns useful information about a module, object or function.  Intended for interactive use.
* {{{locals()}}} shows all local variables; at the top level this appears to equal the global variables.  Parameters to functions are in local variables within the function.
* {{{globals()}}} shows all global variables

!!!!{{{getattr()}}}
{{{getattr(object, "function")}}} allows you to reference an attribute of an object using its name.  You can then call the function using the reference.  You can use it on modules, too.

You can use it to create a 'dispatcher' - some module defines different methods, and the dispatcher uses some text to define a function name to call.  You define new a new function in the module for every new possible piece of text.

!!Lambda functions
You can create anonymous functions.  Here we assign the function to 'g', but Konrad used lambda functions as values in a dict, for example.
{{{
&gt;&gt;&gt; def f(x):
...     return x*2
...     
&gt;&gt;&gt; f(3)
6
&gt;&gt;&gt; g = lambda x: x*2 
&gt;&gt;&gt; g(3)
6
}}}
This changes all whitespace in a string to spaces:
{{{
lambda s: " ".join(s.split())
}}}

!!Nested functions
You can define a function inside another function.  Logically, this can only be called from within that function.</pre>
</div>
<div title="BerkeleyDB" server.title="BerkeleyDB" server.page.revision="658254" server.etag="&quot;willrogers_public/BerkeleyDB/658254:62c7dbf6057f25f7ecbfc66a17b439f2d8be5af5&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120329135458" created="20120329130137" tags="berkeley database sql" _hash="ad5e543022765b17493d32e020039eaa39a0e2f1">
<pre>* See DatabaseTheory for my introduction to types of database

!!Intro
Berkeley DB is an open source embedded database system, with licencing from Sleepycat Software which was subsequently bought by Oracle.

'Embedded' means that it runs inside the same process as the application which is using it - there is no inter-process communication required.  Access is via a simple API, with bindings for many languages.  It is ported to most operating systems.  A user probably doesn't know that a database is running at all.

The binaries are small (300kB) but it provides many services such as concurrency, transactions and memory management.  It can handle large databases and utilise large amounts of memory.

It can also out-perform relational and object-oriented databases because there is no interprocess communication, and it uses function calls rather than parsing SQL.

!!Storage structures
BDB has four possible structures, which you should choose according to the nature of the data you wish to store:
* hash-table - good for large databases which need quick access for a random item
* Btree - good if you're likely to need items which are close together at similar times
* record-number-based storage - for if you don't have natural keys
* queue - for when you want to use items in the order they arrived.
BDB doesn't support SQL.

!!Services
BDB supports important data management services on all of its storage structures:
* concurrency
* ACID transactions
* recovery to consistent states
These services can be specified on startup.

!!Limitations
* BDB stores only key-value pairs.  You cannot select on any part of the value - they are just 'payload'
** You can put any byte string in the value
** Any application must know the structure of the key and value in advance</pre>
</div>
<div title="VirtualMachines" server.title="VirtualMachines" server.page.revision="937588" server.etag="&quot;willrogers_public/VirtualMachines/937588:5bd33384d9bd39538aa24aac6af50e77a56a2d4f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121110122427" created="20121110110236" tags="" _hash="9a0d2053f8d46a08025b1a0f1ed4d1be0201806b">
<pre>Because it seemed to be a bit tricky to dual-boot with Windows 8, I decided to run a VM.  The obvious way seemed to be the built in Hyper-V.

I found that the linux integration worked best with EL, so I installed CentOS

!!~CentOS
* Start a VM
* Download the minimal ~CentOS ISO
* Create an external virtual switch
* '''Important''' (I think): use a legacy network adapter while installing.
* Start the machine and install it
* Set up networking (see below)
* {{{yum groupinstall "X Window System"}}}
* {{{yum groupinstall Desktop}}}
* {{{yum groupinstall Fonts}}}
* Install Linux Integration Services - you can download the ISO and mount it, or use the menu
* Install the EPEL rpm

!!!!Networking
I have only made a static IP work so far.
* Attach a legacy network adapter before you install
* Do some configuration!
* {{{/etc/sysconfig/network-scripts/ifcfg-eth0}}}
** IfcfgEth0
* See http://www.pwrusr.com/system-administration/solved-centos-6-networking-and-hyper-v
* See http://www.convirture.com/ee_wiki/index.php?title=RedHat_6_Networking
!!!!Using
The connector provided by Hyper-V didn't seem that good, so I used nomachine:
* http://wiki.centos.org/HowTos/FreeNX
Download the Windows nomachine client from the website.
Here's a recipe to fix a key problem which I don't understand:
* http://codingrecipes.com/the-nx-service-is-not-available-or-the-nx-access-was-disabled-centos




!!Ubuntu
* I installed Ubuntu12.04 LTS


!!!!Networking
I haven't got networking to work:
* http://ubuntuforums.org/showthread.php?t=2011987
* http://social.technet.microsoft.com/Forums/en-US/winserverhyperv/thread/61eb5bd8-3e2f-4cb7-b5bb-006a68f7f7a2/
* http://blogs.msdn.com/b/virtual_pc_guy/archive/2012/05/02/ubuntu-12-04-under-hyper-v-on-windows-8.aspx
* http://c-nergy.be/blog/?p=2830

!!Connecting
* The default connection seems to be ok but no better.  I use it for a root console
* I installed an NX server and NX client to use the desktop


* Set up networking</pre>
</div>
<div title="LocalInstallations" server.title="LocalInstallations" server.page.revision="1255944" server.etag="&quot;willrogers_public/LocalInstallations/1255944:922d1531983965432c966de908f98d5f4594c5f5&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130611150357" created="20130611150351" tags="" _hash="183974088e77d26e471fc7f1f7a7fcaaf7d3a9d9">
<pre>EclipseDiamond</pre>
</div>
<div title="HomeNotes" server.title="HomeNotes" server.page.revision="1615539" server.etag="&quot;willrogers_public/HomeNotes/1615539:5629f2c99edc4d57b900636612b92063c50697e8&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20140104113557" created="20110423095532" tags="" _hash="72825468bf88e6c5ce2eac65a9f7933a9bb74764">
<pre>!!Costs
CarThings
AllCosts
NewFlatCosts
CsscStuff

!!Music
AlbumsWanted
GuitarTabs
GuitarDrills
DigitalMusic
DvdRipping

!!Flats
ReadingFlats
PossibleFlats
PlusNet

PastAddresses
AddressChanges
ForwardingAddress

!!Puzzles
ProjectEuler
GchqPuzzles

!!Holidays
TenerifeFlights
FranceFlights
NorthernLights
SkiingCosts

!!Other
LizPresents
LizSize
ThingsIdLike
ContactLenses
BankAccounts
NikonCamera
MobileProblems
ToothIssue
ChristmasPresents
DifficultSpellings
Euro2012Sweepstake




</pre>
</div>
<div title="TiddlySpaceTiddlerIconsPlugin" server.title="TiddlySpaceTiddlerIconsPlugin" server.page.revision="1521862" server.etag="&quot;system-plugins_public/TiddlySpaceTiddlerIconsPlugin/1521862:457226527d9fcfb65c02f71d0779bceba9adbe8e&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="5c6cfebcd3cc3fd2df109c0d59735aaae48850b4">
<pre>/***
|''Name''|TiddlySpaceTiddlerIconsPlugin|
|''Version''|0.8.10|
|''Status''|@@beta@@|
|''Author''|Jon Robson|
|''Description''|Provides ability to render SiteIcons and icons that correspond to the home location of given tiddlers|
|''Source''|http://github.com/TiddlySpace/tiddlyspace/raw/master/src/plugins/TiddlySpaceTiddlerIconsPlugin.js|
|''Requires''|TiddlySpaceConfig BinaryTiddlersPlugin ImageMacroPlugin TiddlySpacePublishingCommands|
!Notes
{{{&lt;&lt;tiddlerOrigin&gt;&gt;}}} shows the origin of the tiddler it is being run on.
In TiddlySpace terms this means it will determine whether the tiddler is external, public or private.
Where private it will analyse whether a public version exists and distinguish between the different scenarios.
If a tiddler is external, the SiteIcon of that external space will be shown

!Parameters
width / height : define a width or height of the outputted icon
label: if label parameter is set to yes, a label will accompany the icon.
!Code
***/
//{{{
(function($) {

if(!config.macros.image) {
	throw "Missing dependency: ImageMacroPlugin";
}

var imageMacro = config.macros.image;
var tiddlyspace = config.extensions.tiddlyspace;
var tweb = config.extensions.tiddlyweb;
var cmds = config.commands;
var cmd = cmds.publishTiddler;
tiddlyspace.resolveSpaceName = function(value) {
	var endsWith = config.extensions.BinaryTiddlersPlugin.endsWith;
	if(value) {
		value = value.indexOf("bags/") === 0 ? value.substr(5) : value;
		value = value.indexOf("recipes/") === 0 ? value.substr(8) : value;
		if(value.indexOf("@") === 0) {
			value = value.substr(1);
		}
		if(endsWith(value, "_public")) {
			value = value.substr(0, value.length - 7);
		} else if(endsWith(value, "_private")) {
			value = value.substr(0, value.length - 8);
		}
		value = value.toLowerCase();
	}
	return value;
};

tiddlyspace.renderAvatar = function(place, value, options) {
	options = options ? options : {};
	options.labelOptions = options.labelOptions ? options.labelOptions : { include: false, height: 48, width: 48 };
	options.imageOptions = options.imageOptions ? options.imageOptions : {};
	options.imageOptions.altImage = "/bags/common/tiddlers/defaultUserIcon";
	var container = $('&lt;div class="siteIcon" /&gt;').appendTo(place);
	value = tiddlyspace.resolveSpaceName(value);

	tweb.getStatus(function(status) {
		var link, noLabel;
		if(!value || value == config.views.wikified.defaultModifier ||
			value == config.views.wikified.shadowModifier) {
			var icon = config.views.wikified.shadowModifier == value ? "shadowIcon" : "missingIcon";
			if(store.tiddlerExists(icon)) {
				imageMacro.renderImage(container, icon, options.imageOptions);
			} else {
				noLabel = true;
			}
		} else {
			var spaceURI;
			if(value != tiddlyspace.currentSpace.name) {
				spaceURI = options.notSpace ? tiddlyspace.getHost(status.server_host) :
					tiddlyspace.getHost(status.server_host, value);
			}
			link = spaceURI ? $("&lt;a /&gt;").attr("href", spaceURI) : $("&lt;span /&gt;");
			link.text(value);

			var imageOptions = options.imageOptions;
			if(options.spaceLink &amp;&amp; !imageOptions.link) {
				imageOptions.link = spaceURI;
			}
			var avatar = options.notSpace ? false : value;
			var uri = tiddlyspace.getAvatar(status.server_host, avatar);
			imageMacro.renderImage(container, uri, options.imageOptions);
			if(!value) {
				value = "tiddlyspace";
			}
		}
		if(!noLabel &amp;&amp; options.labelOptions.include) {
			var prefix = $("&lt;span /&gt;").text(options.labelOptions.prefix || "")[0];
			var suffix = $("&lt;span /&gt;").text(options.labelOptions.suffix || "")[0];
			$('&lt;div class="label" /&gt;').append(prefix).append(link).
				append(suffix).appendTo(container);
		}
	});
	if(value) {
		var prefix = options.labelOptions.prefix || "";
		var suffix = options.labelOptions.suffix || "";
		var label = "%0%1%2".format(prefix, value, suffix);
		$(container).attr("title", label);
	}
};

var originMacro = config.macros.tiddlerOrigin = {
	locale: {
		"shadow": "shadow tiddler",
		"missing": "missing tiddler",
		"private": "private",
		"unknown": "unknown state",
		"public": "public",
		"unsyncedPrivate": "unsynced and private",
		"unsyncedPublic": "unsynced and public",
		externalPrefix: "from ",
		externalBagSuffix: " bag",
		externalSuffix: " space",
		publishPrivateDeletePrivate: "Are you sure you want to make this tiddler public?",
		moveToPrivate: "Are you sure you want to make this tiddler private? Only members will be able to see it.",
		pleaseWait: "please wait..",
		keepPublic: "keep public",
		cannotPublishDirtyTiddler: "The current tiddler is unsaved so cannot be published. Please save the tiddler first.",
		keepPrivate: "keep private",
		makePublic: "make public",
		makePrivate: "make private"
	},
	handler: function(place, macroName, params,wikifier, paramString, tiddler){
		var adaptor = tiddler.getAdaptor();
		var btn = $("&lt;div /&gt;").addClass("originButton").attr("params", paramString).
			attr("refresh", "macro").attr("macroName", macroName).appendTo(place)[0];
		$(btn).data("tiddler", tiddler);
		originMacro.refresh(btn);
	},
	refresh: function(btn) {
		$(btn).empty();
		var paramString = $(btn).attr("params");
		var tiddler = $(btn).data("tiddler");
		var options = originMacro.getOptions(paramString);
		var type = tiddlyspace.getTiddlerStatusType(tiddler);
		originMacro.renderIcon(tiddler, type, btn, options);
	},
	getOptions: function(paramString) {
		paramString = "%0 label:no width:48 height:48 spaceLink:yes preserveAspectRatio:yes".format(paramString);
		var parsedParams = paramString.parseParams("name");
		var params = parsedParams[0].name;
		var options = {
			labelOptions: originMacro._getLabelOptions(parsedParams),
			imageOptions: imageMacro.getArguments(paramString, []),
			noclick: parsedParams[0].interactive &amp;&amp;
				parsedParams[0].interactive[0] == "no" ? true : false
		};
		if(!options.noclick) {
			var spaceLink = parsedParams[0].spaceLink;
			options.spaceLink = spaceLink &amp;&amp; spaceLink[0] == "no" ? false : true;
		} else {
			options.spaceLink = false;
		}
		return options;
	},
	_getLabelOptions: function(parsedParams) {
		parsedParams = parsedParams[0];
		var includeLabel = !parsedParams.label || ( parsedParams.label &amp;&amp; parsedParams.label[0] == "yes" );
		var prefix = parsedParams.labelPrefix ? parsedParams.labelPrefix[0] : false;
		var suffix = parsedParams.labelSuffix ? parsedParams.labelSuffix[0] : false;
		return { include: includeLabel, suffix: suffix, prefix: prefix };
	},
	_isSpace: function(value) {
		value = value ? value : "";
		var endsWith = config.extensions.BinaryTiddlersPlugin.endsWith;
		if(endsWith(value, "_private") || endsWith(value, "_public")) {
			return true;
		} else {
			return false;
		}
	},
	renderIcon: function(tiddler, type, button, options) {
		var locale = originMacro.locale;
		originMacro.annotateTiddler(button, type);
		if(type != "external") {
			originMacro.showPrivacyRoundel(tiddler, type, button,
				options);
		} else {
			var prefix = options.labelOptions.prefix, suffix = options.labelOptions.suffix;
			var space = tiddler.fields["server.bag"];
			options.notSpace = !originMacro._isSpace(space);
			options.labelOptions.prefix = prefix ? prefix : locale.externalPrefix;
			options.labelOptions.suffix = suffix ? suffix : (options.notSpace ? locale.externalBagSuffix : locale.externalSuffix);

			tiddlyspace.renderAvatar(button, space, options);
		}
	},
	showPrivacyRoundel: function(thisTiddler, privacyType, button, options) {
		// there is a public tiddler as well as the current tiddler!
		// TODO: not this is not enough.. we also need to check if the public tiddler is the same as..
		// .. the private tiddler to determine whether this is a draft
		// use of hashes would be useful here.
		$(button).empty();
		var icon = "%0Icon".format(privacyType);
		if(privacyType.indexOf("unsynced") === 0 &amp;&amp; !store.tiddlerExists(icon)) {
			icon = "unsyncedIcon";
		}
		if(privacyType == "shadow") {
			if(!store.tiddlerExists(icon)) {
				icon = "bags/tiddlyspace/tiddlers/SiteIcon";
			}
		}
		if(privacyType == "missing" &amp;&amp; !store.tiddlerExists(icon)) {
			return; // the user is not making use of the missingIcon
		} else {
			imageMacro.renderImage(button, icon, options.imageOptions);
			originMacro.showLabel(button, privacyType, options.labelOptions);
			var cmd = originMacro.iconCommands[privacyType];
			if(cmd &amp;&amp; thisTiddler &amp;&amp; !options.noclick) {
				$(button).click(function(ev) {
					cmd(ev, thisTiddler);
				});
			}
		}
	},
	annotateTiddler: function(place, type) {
		var tidEl = $(story.findContainingTiddler(place));
		tidEl.
			removeClass("private public external privateAndPublic privateNotPublic shadow").
			addClass(type);
	},
	showLabel: function(button, type, options) {
		var locale = originMacro.locale;
		var label = options.label ? options.label : locale[type];
		label = label ? label : locale.unknown;
		if(options &amp;&amp; options.include) {
			$('&lt;div class="roundelLabel" /&gt;').html(label).appendTo(button);
		}
		$(button).attr("title", label);
	},
	confirm: function(ev, msg, onYes, options) {
		options = options ? options : {};
		onYes = onYes ? onYes : function(ev) {};
		var btn = $(".originButton", $(ev.target).parents())[0];
		var popup = Popup.create(btn);
		$(popup).addClass("confirmationPopup");
		$("&lt;div /&gt;").addClass("message").text(msg).appendTo(popup);
		$("&lt;button /&gt;").addClass("button").text(options.yesLabel || "yes").appendTo(popup).click(onYes);
		$("&lt;button /&gt;").addClass("button").text(options.noLabel || "no").click(function(ev) {
			Popup.remove();
		}).appendTo(popup);
		Popup.show();
		ev.stopPropagation();
		return false;
	},
	alert: function(ev, msg) {
		var popup = Popup.create(ev.target);
		$(popup).addClass("confirmationPopup alert");
		$("&lt;div /&gt;").addClass("message").text(msg).appendTo(popup);
		Popup.show();
		ev.stopPropagation();
	},
	reportDirty: function(el) {
		originMacro.alert(el, originMacro.locale.cannotPublishDirtyTiddler);
	},
	iconCommands: {
		"public": function(ev, tiddler) {
			if(!readOnly) {
				var locale = originMacro.locale;
				var msg = locale.moveToPrivate;
				if(story.isDirty(tiddler.title)) {
					originMacro.reportDirty(ev);
				} else {
					originMacro.confirm(ev, msg, function(ev) {
						var target = $(ev.target);
						var onComplete = function(info) {};
						var privateBag = cmd.toggleBag(tiddler, "private");
						cmd.moveTiddler(tiddler, {
							title: tiddler.title,
							fields: { "server.bag": privateBag }
						}, onComplete);
					}, { yesLabel: locale.makePrivate, noLabel: locale.keepPublic });
				}
			}
		},
		"private": function(ev, tiddler) {
			if(!readOnly) {
				var locale = originMacro.locale;
				var adaptor = tiddler.getAdaptor();
				var publishTo = tiddler.fields["publish.name"] || tiddler.title;
				var workspace = "bags/%0".format(tiddler.fields["server.bag"]);
				tiddler.fields["server.workspace"] = workspace;
				var publicBag = cmd.toggleBag(tiddler, "public");
				var msg;
				msg = locale.publishPrivateDeletePrivate;
				var title = tiddler.title;
				var newTitle = publishTo || tiddler.title;
				tiddler.fields["server.page.revision"] = "false";
				store.addTiddler(tiddler);
				if(story.isDirty(tiddler.title)) {
					originMacro.reportDirty(ev);
				} else {
					originMacro.confirm(ev, msg, function(ev) {
						var onComplete = function(info) {};
						cmd.moveTiddler(tiddler, {
							title: newTitle,
							fields: { "server.bag": publicBag }
						}, onComplete);
					}, { yesLabel: locale.makePublic, noLabel: locale.keepPrivate });
				}
			}
		}
	}
};

})(jQuery);
//}}}</pre>
</div>
<div title="ServerSideSavingPlugin" server.title="ServerSideSavingPlugin" server.page.revision="1521853" server.etag="&quot;system/ServerSideSavingPlugin/1521853:5c17e231ca105084c424ea586f590e2a65cf2c8a&quot;" modifier="FND" creator="FND" server.workspace="bags/system" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system" server.permissions="read" server.content-type="text/javascript" modified="20130924180405" created="20130924180405" tags="excludeLists excludeSearch systemConfig" _hash="d72cde071d926d9c66939444817d7e8621d24d9c">
<pre>/***
|''Name''|ServerSideSavingPlugin|
|''Description''|server-side saving|
|''Author''|FND|
|''Version''|0.6.5|
|''Status''|stable|
|''Source''|http://svn.tiddlywiki.org/Trunk/association/plugins/ServerSideSavingPlugin.js|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''CoreVersion''|2.5.3|
|''Keywords''|serverSide|
!Notes
This plugin relies on a dedicated adaptor to be present.
The specific nature of this plugin depends on the respective server.
!Revision History
!!v0.1 (2008-11-24)
* initial release
!!v0.2 (2008-12-01)
* added support for local saving
!!v0.3 (2008-12-03)
* added Save to Web macro for manual synchronization
!!v0.4 (2009-01-15)
* removed ServerConfig dependency by detecting server type from the respective tiddlers
!!v0.5 (2009-08-25)
* raised CoreVersion to 2.5.3 to take advantage of core fixes
!!v0.6 (2010-04-21)
* added notification about cross-domain restrictions to ImportTiddlers
!To Do
* conflict detection/resolution
* rename to ServerLinkPlugin?
* document deletion/renaming convention
!Code
***/
//{{{
(function($) {

readOnly = false; //# enable editing over HTTP

var plugin = config.extensions.ServerSideSavingPlugin = {};

plugin.locale = {
	saved: "%0 saved successfully",
	saveError: "Error saving %0: %1",
	saveConflict: "Error saving %0: edit conflict",
	deleted: "Removed %0",
	deleteError: "Error removing %0: %1",
	deleteLocalError: "Error removing %0 locally",
	removedNotice: "This tiddler has been deleted.",
	connectionError: "connection could not be established",
	hostError: "Unable to import from this location due to cross-domain restrictions."
};

plugin.sync = function(tiddlers) {
	tiddlers = tiddlers &amp;&amp; tiddlers[0] ? tiddlers : store.getTiddlers();
	$.each(tiddlers, function(i, tiddler) {
		var changecount = parseInt(tiddler.fields.changecount, 10);
		if(tiddler.fields.deleted === "true" &amp;&amp; changecount === 1) {
			plugin.removeTiddler(tiddler);
		} else if(tiddler.isTouched() &amp;&amp; !tiddler.doNotSave() &amp;&amp;
				tiddler.getServerType() &amp;&amp; tiddler.fields["server.host"]) { // XXX: server.host could be empty string
			delete tiddler.fields.deleted;
			plugin.saveTiddler(tiddler);
		}
	});
};

plugin.saveTiddler = function(tiddler) {
	try {
		var adaptor = this.getTiddlerServerAdaptor(tiddler);
	} catch(ex) {
		return false;
	}
	var context = {
		tiddler: tiddler,
		changecount: tiddler.fields.changecount,
		workspace: tiddler.fields["server.workspace"]
	};
	var serverTitle = tiddler.fields["server.title"]; // indicates renames
	if(!serverTitle) {
		tiddler.fields["server.title"] = tiddler.title;
	} else if(tiddler.title != serverTitle) {
		return adaptor.moveTiddler({ title: serverTitle },
			{ title: tiddler.title }, context, null, this.saveTiddlerCallback);
	}
	var req = adaptor.putTiddler(tiddler, context, {}, this.saveTiddlerCallback);
	return req ? tiddler : false;
};

plugin.saveTiddlerCallback = function(context, userParams) {
	var tiddler = context.tiddler;
	if(context.status) {
		if(tiddler.fields.changecount == context.changecount) { //# check for changes since save was triggered
			tiddler.clearChangeCount();
		} else if(tiddler.fields.changecount &gt; 0) {
			tiddler.fields.changecount -= context.changecount;
		}
		plugin.reportSuccess("saved", tiddler);
		store.setDirty(false);
	} else {
		if(context.httpStatus == 412) {
			plugin.reportFailure("saveConflict", tiddler);
		} else {
			plugin.reportFailure("saveError", tiddler, context);
		}
	}
};

plugin.removeTiddler = function(tiddler) {
	try {
		var adaptor = this.getTiddlerServerAdaptor(tiddler);
	} catch(ex) {
		return false;
	}
	var context = {
		host: tiddler.fields["server.host"],
		workspace: tiddler.fields["server.workspace"],
		tiddler: tiddler
	};
	var req = adaptor.deleteTiddler(tiddler, context, {}, this.removeTiddlerCallback);
	return req ? tiddler : false;
};

plugin.removeTiddlerCallback = function(context, userParams) {
	var tiddler = context.tiddler;
	if(context.status) {
		if(tiddler.fields.deleted === "true") {
			store.deleteTiddler(tiddler.title);
		} else {
			plugin.reportFailure("deleteLocalError", tiddler);
		}
		plugin.reportSuccess("deleted", tiddler);
		store.setDirty(false);
	} else {
		plugin.reportFailure("deleteError", tiddler, context);
	}
};

plugin.getTiddlerServerAdaptor = function(tiddler) { // XXX: rename?
	var type = tiddler.fields["server.type"] || config.defaultCustomFields["server.type"];
	return new config.adaptors[type]();
};

plugin.reportSuccess = function(msg, tiddler) {
	displayMessage(plugin.locale[msg].format([tiddler.title]));
};

plugin.reportFailure = function(msg, tiddler, context) {
	var desc = (context &amp;&amp; context.httpStatus) ? context.statusText :
		plugin.locale.connectionError;
	displayMessage(plugin.locale[msg].format([tiddler.title, desc]));
};

config.macros.saveToWeb = { // XXX: hijack existing sync macro?
	locale: { // TODO: merge with plugin.locale?
		btnLabel: "save to web",
		btnTooltip: "synchronize changes",
		btnAccessKey: null
	},

	handler: function(place, macroName, params, wikifier, paramString, tiddler) {
		createTiddlyButton(place, this.locale.btnLabel, this.locale.btnTooltip,
			plugin.sync, null, null, this.locale.btnAccessKey);
	}
};

// hijack saveChanges to trigger remote saving
var _saveChanges = saveChanges;
saveChanges = function(onlyIfDirty, tiddlers) {
	if(window.location.protocol == "file:") {
		_saveChanges.apply(this, arguments);
	} else {
		plugin.sync(tiddlers);
	}
};

// override removeTiddler to flag tiddler as deleted -- XXX: use hijack to preserve compatibility?
TiddlyWiki.prototype.removeTiddler = function(title) { // XXX: should override deleteTiddler instance method?
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		tiddler.tags = ["excludeLists", "excludeSearch", "excludeMissing"];
		tiddler.text = plugin.locale.removedNotice;
		tiddler.fields.deleted = "true"; // XXX: rename to removed/tiddlerRemoved?
		tiddler.fields.changecount = "1";
		this.notify(title, true);
		this.setDirty(true);
	}
};

// hijack ImportTiddlers wizard to handle cross-domain restrictions
var _onOpen = config.macros.importTiddlers.onOpen;
config.macros.importTiddlers.onOpen = function(ev) {
	var btn = $(resolveTarget(ev));
	var url = btn.closest(".wizard").find("input[name=txtPath]").val();
	if(window.location.protocol != "file:" &amp;&amp; url.indexOf("://") != -1) {
		var host = url.split("/")[2];
		var macro = config.macros.importTiddlers;
		if(host != window.location.host) {
			btn.text(macro.cancelLabel).attr("title", macro.cancelPrompt);
			btn[0].onclick = macro.onCancel;
			$('&lt;span class="status" /&gt;').text(plugin.locale.hostError).insertAfter(btn);
			return false;
		}
	}
	return _onOpen.apply(this, arguments);
};

})(jQuery);
//}}}</pre>
</div>
<div title="GroupByPlugin" server.title="GroupByPlugin" server.page.revision="1521873" server.etag="&quot;system-plugins_public/GroupByPlugin/1521873:f6292cf2d346a38e69b387c3471266a8d6df16a9&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="d4f41fa53916a920347fbe97303966ebeed68945">
<pre>/***
|''Name''|GroupByPlugin|
|''Description''|Mimics allTags macro to provide ways of creating lists grouping tiddlers by any field|
|''Version''|0.6.1|
|''Author''|Jon Robson|
|''Status''|beta|
!Usage
{{{&lt;&lt;groupBy tags&gt;&gt;}}}
mimics allTags macro

{{{&lt;&lt;groupBy server.bag&gt;&gt;}}}
groups by the server.bag field (this version contains TiddlySpace specific code for turning a bag into a space name)

{{{groupBy modified dateFormat:"YYYY"}}}
group tiddlers by year.

{{{&lt;&lt;groupBy tags exclude:excludeLists exclude:systemConfig&gt;&gt;}}}
group tiddlers by tag but exclude the tags with values excludeLists and systemConfig

Within that group you can also exclude things by filter
{{{groupBy modifier filter:[tag[film]]}}}
will group tiddlers tagged with film by modifier.
***/
//{{{
(function($) {
var taglocale = config.views.wikified.tag;
var macro = config.macros.groupBy = {
	locale: {
		tooltip: "all tiddlers in group %0",
		noTiddlers: "no tiddlers",
		openAllText: taglocale.openAllText,
		openAllTooltip: taglocale.openAllTooltip,
		openTiddler: "open tiddler with title %0"
	},
	morpher: {
		// TODO: note currently the following 2 morphers are TiddlySpace specific and probably should be in separate plugin
		"server.workspace": function(value, options) {
			return macro.morpher["server.bag"](value.replace("bags/", "").replace("recipes/", ""));
		},
		"server.bag": function(value, options) {
			if(typeof(value) !== "string") {
				return false;
			} else if(value.indexOf("_public") === -1 &amp;&amp; value.indexOf("_private") === -1) {
				value = "*%0".format(value); // add star for non-space bags.
			}
			return value.replace("_public", "").replace("_private", "");
		},
		created: function(value, options) {
			return value.formatString(options.dateFormat || "DD MMM YYYY");
		},
		modified: function(value, options) {
			return macro.morpher.created(value, options);
		}
	},

	handler: function(place, macroName, params, wikifier, paramString) {
		var field = params[0] || "server.workspace";
		var dateFormat = params[1] || "DD MMM YYYY";
		var container = $("&lt;div /&gt;").attr("macroName", macroName).addClass("groupBy").
			attr("refresh", "macro").attr("fieldName", field).
			attr("paramString", paramString).
			attr("dateFormat", dateFormat).appendTo(place)[0];
		macro.refresh(container);
	},
	isTypeArray: function(value) {
		var valueType = typeof value;
		if(valueType === "object" &amp;&amp; typeof value.length === "number" &amp;&amp;
			!(value.propertyIsEnumerable("length")) &amp;&amp;
			typeof value.splice === "function") { //is Array
			return true;
		} else {
			return false;
		}
	},
	_onClickGroup: function(ev, options) {
		var i, target = ev.target, locale = macro.locale;
		var tiddlers = $(target).closest(".templateContainer").data("tiddlers");
		var popup = $(Popup.create(target)).addClass("taggedTiddlerList")[0];
		var value = $(target).attr("value");
		var openAll = createTiddlyButton($("&lt;li /&gt;").appendTo(popup)[0],
			locale.openAllText.format(value), locale.openAllTooltip);
		$(openAll).click(function(ev) {
			story.displayTiddlers(ev.target, tiddlers);
			return false;
		});
		var listBreak = $("&lt;li /&gt;").addClass("listBreak").html("&lt;div /&gt;").appendTo(popup);
		for(i = 0; i &lt; tiddlers.length; i++) {
			var item = $("&lt;li /&gt;").appendTo(popup)[0];
			var template = store.getTiddlerText(options.template) || macro.template;
			wikify(template, item, null, tiddlers[i]);
		}
		listBreak.clone().appendTo(popup);
		$(createTiddlyLink($("&lt;li /&gt;").appendTo(popup)[0], value, false)).
			text(locale.openTiddler.format(value));
		Popup.show();
		ev.stopPropagation();
		return false;
	},
	_refresh: function(container, tiddlers, options) {
		var totalGroups = 0, locale = macro.locale, i, j;
		var excludeValues = options.exclude;
		var values = {}, value_ids = [];
		var field = options.field;
		var morpher = macro.morpher[field] || function(value) {
			return value;
		};
		for(i = 0; i &lt; tiddlers.length; i++) {
			var tiddler = tiddlers[i];
			var value = tiddler[field] || tiddler.fields[field];
			value = macro.isTypeArray(value) ? value : [ value ];
			for(j = 0; j &lt; value.length; j++) {
				var v = morpher(value[j], options);
				if(v &amp;&amp; $.inArray(v, excludeValues) === -1) {
					totalGroups += 1;
					if(!values[v]) {
						values[v] = [];
					}
					values[v].push(tiddler);
					value_ids.pushUnique(v);
				}
			}
		}
		var ul = $("&lt;ul /&gt;").appendTo(container)[0];
		if(totalGroups === 0) {
			$("&lt;li /&gt;").addClass("listTitle").text(locale.noTiddlers);
		}
		value_ids = value_ids.sort();
		var groupTemplate = store.getTiddlerText(options.groupTemplate);
		var onClick = function(ev) {
			macro._onClickGroup(ev, options);
		};
		for(i = 0; i &lt; value_ids.length; i++) {
			var title = value_ids[i];
			var info = getTiddlyLinkInfo(title);
			tiddlers = values[title];
			var btn = createTiddlyButton($("&lt;li /&gt;").appendTo(ul)[0],
				"%0 (%1)".format(title, tiddlers.length), locale.tooltip.format(title), null, info.classes);
			if(groupTemplate) {
				$(btn).empty();
				wikify(groupTemplate, btn, null, tiddlers[0]);
			}
			$(btn).click(onClick).attr("value", title).attr("refresh", "link").attr("tiddlyLink", title);
			$(btn).addClass("templateContainer").data("tiddlers", tiddlers);
		}
	},
	refresh: function(container) {
		container = $(container).empty();
		var paramString = container.attr("paramString");
		var args = paramString.parseParams("name", null, true, false, true)[0];
		var options = { field: container.attr("fieldName"), dateFormat: container.attr("dateFormat"), exclude: args.exclude || [],
			template: args.template ? args.template[0] : false, groupTemplate: args.groupTemplate ? args.groupTemplate[0] : "" };
		var tiddlers = args.filter ? store.filterTiddlers(args.filter[0]) : store.getTiddlers("title");
		macro._refresh(container, tiddlers, options);
	},
	template: "&lt;&lt;view title link&gt;&gt;"
};

}(jQuery));
//}}}</pre>
</div>
<div title="TiddlySpaceFilters" server.title="TiddlySpaceFilters" server.page.revision="1521906" server.etag="&quot;tiddlyspace/TiddlySpaceFilters/1521906:71f9c5f4efdb44ca00fabba3f7c49ab33712d251&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" modified="20131111192334" created="20131111192334" tags="excludeLists excludeSearch systemConfig" _hash="3b6e75a776f9a07498220fe23b305bc97b531afc">
<pre>/***
|''Name''|TiddlySpaceFilters|
|''Description''|provide TiddlySpace-specific filter extensions|
|''Author''|Jon Robson|
|''Version''|0.6.1|
|''Status''|@@beta@@|
|''CoreVersion''|2.6.2|
|''Requires''|TiddlySpaceConfig|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
!Usage
{{{
&lt;&lt;tsList Private&gt;&gt;
&lt;&lt;tsList Public&gt;&gt;
&lt;&lt;tsList Draft&gt;&gt;
}}}
!Code
***/
//{{{
(function($) {

var tiddlyspace = config.extensions.tiddlyspace;
var privateBag = tiddlyspace.getCurrentBag("private");
var publicBag = tiddlyspace.getCurrentBag("public");

config.filterHelpers = {
	is: {
		"private": function(tiddler) {
			var bag = tiddler.fields["server.bag"];
			return bag == privateBag;
		},
		"public": function(tiddler) {
			var bag = tiddler.fields["server.bag"];
			return bag == publicBag;
		},
		draft: function(tiddler) {
			var fields = tiddler.fields;
			var bag = fields["server.bag"];
			return (privateBag == bag &amp;&amp; fields["publish.name"]) ? true : false;
		},
		local: function(tiddler) {
			return config.filterHelpers.is["public"](tiddler) ||
				config.filterHelpers.is["private"](tiddler);
		},
		unsynced: function(tiddler) {
			return tiddler ? tiddler.isTouched() : false;
		}
	}
};

config.filters.is = function(results, match) {
	var candidates = store.getTiddlers("title");
	var type = match[3];
	for (var i = 0; i &lt; candidates.length; i++) {
		var tiddler = candidates[i];
		var helper = config.filterHelpers.is[type];
		if(helper &amp;&amp; helper(tiddler)) {
			results.pushUnique(tiddler);
		}
	}
	return results;
};

})(jQuery);
//}}}</pre>
</div>
<div title="DiffFormatter" server.title="DiffFormatter" server.page.revision="1521854" server.etag="&quot;system/DiffFormatter/1521854:1379bc1d996f10f417ef3840a2ac8b08aa85e71e&quot;" modifier="FND" creator="FND" server.workspace="bags/system" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system" server.permissions="read" server.content-type="text/javascript" modified="20130924180405" created="20130924180405" tags="excludeLists excludeSearch systemConfig" _hash="2232cd0549946d29c475cec846de3378177301ae">
<pre>/***
|''Name''|DiffFormatter|
|''Description''|highlighting of text comparisons|
|''Author''|FND|
|''Version''|0.9.0|
|''Status''|beta|
|''Source''|http://svn.tiddlywiki.org/Trunk/contributors/FND/formatters/DiffFormatter.js|
|''CodeRepository''|http://svn.tiddlywiki.org/Trunk/contributors/FND/|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''Keywords''|formatting|
!Description
Highlights changes in a unified [[diff|http://en.wikipedia.org/wiki/Diff#Unified_format]].
!Notes
Based on Martin Budden's [[DiffFormatterPlugin|http://svn.tiddlywiki.org/Trunk/contributors/MartinBudden/formatters/DiffFormatterPlugin.js]].
!Usage
The formatter is applied to blocks wrapped in &lt;html&gt;&lt;code&gt;{{{diff{..}}}&lt;/code&gt;&lt;/html&gt; within tiddlers tagged with "diff".
!Revision History
!!v0.9 (2010-04-07)
* initial release; fork of DiffFormatterPlugin
!StyleSheet
.diff { white-space: pre; font-family: monospace; }
.diff ins, .diff del { display: block; text-decoration: none; }
.diff ins { background-color: #dfd; }
.diff del { background-color: #fdd; }
.diff .highlight { background-color: [[ColorPalette::SecondaryPale]]; }
!Code
***/
//{{{
(function() {

config.shadowTiddlers.StyleSheetDiffFormatter = store.getTiddlerText(tiddler.title + "##StyleSheet");
store.addNotification("StyleSheetDiffFormatter", refreshStyles);

var formatters = [{
		name: "diffWrapper",
		match: "^\\{\\{diff\\{\n", // XXX: suboptimal
		termRegExp: /(.*\}\}\})$/mg,
		handler: function(w) {
			var el = createTiddlyElement(w.output, "div", null, "diff");
			w.subWikifyTerm(el, this.termRegExp);
		}
	}, {
		name: "diffRange",
		match: "^(?:@@|[+\\-]{3}) ",
		lookaheadRegExp: /^(?:@@|[+\-]{3}) .*\n/mg,
		handler: function(w) {
			createTiddlyElement(w.output, "div", null, "highlight").
				innerHTML = "&amp;#8230;";
			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
				w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
		}
	}, {
		name: "diffAdded",
		match: "^\\+",
		termRegExp: /(\n)/mg,
		handler: function(w) {
			var el = createTiddlyElement(w.output, "ins", null, "added");
			w.subWikifyTerm(el, this.termRegExp);
		}
	}, {
		name: "diffRemoved",
		match: "^-",
		termRegExp: /(\n)/mg,
		handler: function(w) {
			var el = createTiddlyElement(w.output, "del", null, "removed");
			w.subWikifyTerm(el, this.termRegExp);
		}
	}
];

config.parsers.diffFormatter = new Formatter(formatters);
config.parsers.diffFormatter.format = "diff";
config.parsers.diffFormatter.formatTag = "diff";

})();
//}}}</pre>
</div>
<div title="TabletComputer" server.title="TabletComputer" server.page.revision="364796" server.etag="&quot;willrogers_public/TabletComputer/364796:c3f6a065defd22109febff2ae37a29b174e6614e&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111205192923" created="20111120150603" tags="" _hash="ddf1e7354a27e504c607cf6028af72ef756ed6e5">
<pre>Ed and I were given the task of researching an appropriate tablet computer for Mum for Christmas.

!!Requirements:
!!!!Required
* &lt;= £300
* Not be obsolete next year
* Easy to use.
* Uses:
** mainly browsing
** music?
** iPlayer?
!!!!Not required
* 3G
* GPS?
* Large capacity

!!The market
The market is mainly iPad vs. Android.  The fairly common consensus is that the iPad is the best tablet, but it also costs £400+.  There also seems to be a widely-held opinion that Android tablets which compete with the iPad are a similar price.

!!iPad 2
The basic version, 16GB and Wi-Fi only, costs £400 from Apple, though it's possible we could get a discount through academia.  

It turned out that Liz could borrow one from the library at the university, so I'm writing this on it.  I've got it for a couple of days to play with.

It is as you'd expect very nice to use.  The keyboard is a little cramped to use with two hands, but the thing is very nice and there's a nice feeling when you type.
!!!!Pros
It works and it's going to be easy to use.  Web browsing is simple and smooth. 
!!!!Cons
You may have to install iTunes on some computer and do some messing around before you can get any music on it.

!!~BlackBerry Playbook
John got one of these, so I've had a go.  
!!!!Pros
It's pretty slick - no lag like I think a lot of the Android tablets would have.  The web browser's pretty good.
!!!!Cons
7" screen is the main problem, so a bit small.  It's on ~BlackBerry, so you get neither the Android Market nor the App Store.

!!Kindle Fire
This isn't really an option, because there isn't a UK release date yet and it doesn't seem like it's going to be soon.</pre>
</div>
<div title="LinuxCommands" server.title="LinuxCommands" server.page.revision="1615546" server.etag="&quot;willrogers_public/LinuxCommands/1615546:ba0a0fc0fdb543f41844dd1df078a2675c6ab471&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20140104115146" created="20110901091052" tags="bash linux" _hash="f38474d645602f3743b67c2ee62f9e0034dd9536">
<pre>See http://www.greenend.org.uk/rjk/tech/shellmistakes.html

* {{{which &lt;command&gt;}}} - shows which executable is run for a command
* {{{whatis &lt;command&gt;}}} - shows some information about a command
* {{{file &lt;file&gt;}}} - shows some information about a file
* {{{type -a &lt;command&gt;}}} - like which, but more information on aliases, functions etc.
* {{{man -k &lt;word&gt;}}} - shows man pages which include &lt;word&gt;
* {{{history}}} - shows the available command history - you can rerun a command from the history using {{{!&lt;number&gt;}}}
* {{{bash -x &lt;file&gt;}}} or {{{ set -x }}} in a script - show commands run and their arguments
* SedAndAwk
* {{{uniq}}} - remove adjacent lines which are duplicates.  To get only unique lines, try {{{sort | uniq}}}
* {{{users}}} - list logged in users; {{{who}}} is more informative.  To see all possible users, look at {{{/etc/passwd}}}.
* {{{lsof}}} - a useful command saying which files are open, with many many options.  This post is good: http://www.catonmat.net/blog/unix-utilities-lsof/
* {{{read}}} - pauses to let a user type in a variable.  You can read more than one variable, separated by spaces: {{{read v1 v2}}}
* {{{stty -echo}}} - turns off output to the console.  {{{stty echo}}} turns it back on.
* {{{cut}}} - used to divide columns by delimiters or number of chars: {{{cut -d " " -f 1,3}}}
* {{{tee &lt;filename&gt;}}} - redirect to a file and also print to terminal
* {{{hash}}} - show commands run in the current session - the hash table is a quicker way of getting that command than searching the path
* {{{ls}}} - {{{-R}}} for recursive, {{{-h}}} human-readable, {{{-r}}} reverse order, {{{-t}}} time order, {{{-F}}} to show an extra character for directories (/), executables (*), links (@)
* {{{mkdir -p}}} - make any necessary subdirectories
* {{{chown -R &lt;user&gt;:&lt;group&gt; &lt;files&gt;}}} - {{{-R}}} is recursive
* {{{tr}}} - you can use this for substituting different characters in strings or files in a sed-like fashion
* {{{patch -p0 &lt; &lt;patchfile&gt;}}} - apply the patch (e.g. what's produced by {{{diff}}} or {{{svn diff}}}) to the specified file.
* {{{dmesg}}} - show logging from startup of system
* LinuxLinks
* FindLocate

!!!!Jobs
When you run a command from the terminal, you only get control back when the command terminates.  You can set the command running in the background by appending {{{&amp;}}} to the command.
* {{{Ctrl-Z}}} pauses the job and returns control to you.
* {{{jobs}}} lists all the jobs known in that session
** {{{+}}} signifies the 'current' job, used as the default if not supplied
** {{{-}}} signifies the next job in the queue
* {{{bg &lt;job&gt;}}} will start a job running in the background, useful if you've paused it with {{{Ctrl-Z}}}
* {{{fg &lt;job&gt;}}} will start the job running in the foreground
* {{{disown %&lt;job&gt;}}} - remove the job from the list of jobs


!!!!Processes
* {{{ps}}} - list processes, with a million options
* {{{pgrep}}} - list pids of the listed program
** {{{pgrep -f}}} - searches the whole command rather than just the program
* {{{pkill}}} - kills all the programs listed by pgrep (you can specify the signal to be sent e.g. -9)

!!!!Networking
* {{{nslookup}}} - query internet nameservers:
** {{{nslookup apel-dev}}} will give you the IP address of apel-dev.esc.rl.ac.uk
* {{{traceroute &lt;address&gt;}}} will give you a list of the places visited on the way to that address
** things in .esc.rl.ac.uk go direct
** things in gridpp take an extra step
* host &lt;address&gt; will give you any IP addresses used by that address

!!!!su and sudo
{{{su - &lt;user&gt;}}} allows you to change users including that user's environment.  Omitting the dash means you keep the environment of the current user.
{{{sudo &lt;command&gt;}}} allows you to run a command as root.  To do this, you must have appropriate permissions in the {{{/etc/sudoers}}} file, and provide a password.
By default, the user's password is required.

!!!!alias
You can use this to remap commands:
{{{
alias ll='ls -l'
alias elist='ll /etc | less'
}}}
!!!!trap
* {{{trap &lt;cmd&gt; &lt;signals&gt;}}} - allows you to catch kill, ^C etc and handle them:
{{{
# trap echo "You pressed control-C" 2
# ^CYou pressed control-C
}}}


!!!!{{{echo}}}
Echo prints something to output.  You can use a number of special characters using {{{-e}}}:
{{{
# echo -e "\n\tThis is a sentence.\n"

    This is a sentence.

#
}}}
You can also use {{{\c}}} to not print a newline at the end of the line, and {{{\b}}} to go back a space.

!!!!Grep
* {{{ grep &lt;string&gt; &lt;file&gt; }}} - looks for a string within the specified file
* {{{ grep -r &lt;string&gt; . }}} - looks in all files recursively below the current directory
* {{{ grep -v &lt;string&gt; &lt;file&gt; }}} - looks for all lines ''not'' containing the string
* {{{egrep &lt;string&gt; &lt;file&gt;}}} - as {{{grep -E}}}, uses extended-regexp
* {{{fgrep &lt;string&gt; &lt;file&gt;}}} - as {{{grep -F}}}, searches for a fixed string, so doesn't use special characters 

!!!!Umask
By default, directories on Linux are created with permissions 755.  Files are created with permissions 644.   The command {{{umask}}} controls this.  These are the default umask settings:
{{{
[root@novales ~]# umask
0022
[root@novales ~]# umask -S
u=rwx,g=rx,o=rx
}}}
To figure out the effect of the umask value, subtract from 777 for directories and from 666 for files.  As expected, we get 755 and 644.  A typical use of umask would be to restrict permissions so that only the root user has access to files:
{{{
[root@novales ~]# umask 77
[root@novales ~]# umask
0077
[root@novales ~]# touch test-file
[root@novales ~]# ll test-file
-rw------- 1 root root 0 Nov  8 14:51 test-file
}}}
Umask only restricts permissions - it doesn't allow you to make files more open than they otherwise would have been.  The first bit, usually 0, has a more complicated effect which I don't yet know about.</pre>
</div>
<div title="DiamondSetup" server.title="DiamondSetup" server.page.revision="1360646" server.etag="&quot;willrogers_public/DiamondSetup/1360646:3e1993e1acfe3a5aa7a5279e5286008f89971a41&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130823144617" created="20130611145037" tags="" _hash="6318a4d637c9b500e0e8d35af6435b8b0bb998f9">
<pre>The Diamond PCs run Red Hat, and users do not have root.  Some software is installed, but I am having to figure out my own ways of setting up the machine.

LocalInstallations

!!Filesystem
* {{{/home/hgs15624}}}  is a network filesystem and is backed up
* {{{/scratch}}} is the local disk.  There's a lot of stuff on there, so I use {{{/scratch/will}}}
* Everyone's home directory is visible by default, but I can't list them all
* {{{/dls_sw}}} contains all the Diamond software

!!Installing software
I have installed software on {{{/scratch/will}}}.  I will put links to executables in {{{/scratch/will/bin}}}.  I added that directory to my path in {{{~/.bashrc_local}}}.

!!!!Python
You can use {{{easy_install}}} to install python packages locally:
{{{
easy_install --prefix=/scratch/will/install/python pylint
}}}
This puts:
* the scripts in {{{/scratch/will/install/python/bin}}} (add this to the PATH)
* the libraries in {{{/scratch/will/install/python/lib/python2.7/site-packages}}} (add this to the PYTHONPATH)

I used easy_install-2.6 to install pylint for use with version 2.6 of python.  I also messed around a bit trying to get it to work from inside my local installation of eclipse.

!!Shortcuts
Mike Leech gave me the following command for a Windows session:
{{{
rdesktop -5 -a 16 -u hgs15624 -k en-gb -g 1920x1152 -D -K -d CLRC diamts02.diamond.ac.uk
}}}

!!!Icons
I put icons for the shortcuts in {{{/scratch/will/icons}}}

!!SSH Key
Interestingly, since my home directory is mounted on all the machines to which I want access, I can put my public key in {{{~/.ssh/authorized_keys}}}, and this allows me to SSH there.  I used the default settings on {{{ssh-keygen}}}, which worked fine.</pre>
</div>
<div title="FutureWork" server.title="FutureWork" server.page.revision="662800" server.etag="&quot;willrogers_private/FutureWork/662800:c84dcf055b44449f01b3578d20efbc3e21009437&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20120401122251" created="20111114174142" tags="careers" _hash="e5ab983446753a0c6dc1c62975fb643a428fff8b">
<pre>This is a place to put notes about what I might want to do and how I might develop.

I need to find a goal to work on with my mentor.  The immediate things that spring to mind are:
* Jobs in this area that I would like to do
* ~PhDs in this area that would give me useful skills
* Jobs at RAL that would allow me to progress
* Plan of action for progressing in my job

!!Possible routes
* ~PhD
* Programming
** JobSources
** PossibleJobs
** PossibleRequirements

!!~PhD
Some notes:
http://www2.physics.ox.ac.uk/study-here/postgraduates/particle-physics/uk-graduate-places
http://www.stfc.ac.uk/PPD/23325.aspx

I did some canvassing of people who have done ~PhDs, and I got by no means a positive response.  The message is that I need to have a clear idea of what I want to achieve with a ~PhD, and how to go about it,  I doubt I can get this by diving for an off-the-shelf one without serious consideration.

!!Possible training
* Linux admin
* DB theory
* More python
* More Java
* New languages
* More CS theory

!!Project management
* YII project

!!Career development
* Writing papers
* Projects / bids
* Analysis of bands D and E</pre>
</div>
<div title="OtherAccountingServices" server.title="OtherAccountingServices" server.page.revision="364433" server.etag="&quot;willrogers_public/OtherAccountingServices/364433:ed1d1dd7b03c8389d3cb6d5573f2336d94530721&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111125143218" created="20110712084214" tags="" _hash="d99b0894e9f78207cd2e2f10de4c4c17001a2805">
<pre>If you've got a grid, it's pretty natural to want to know what's going on on it.  So there are a number of different grid accounting systems around, APEL being one of them.  For historical reasons, APEL is the biggest one in EGI and the WLCG.

This page is an attempt to collate the ones we know about and what they do.  It very much seems like an area where many people have made a decent start, but there's no stand-out best thing.  There are a number of different formats of record and ways of transmitting information.

Andrea's page about creating an accounting record has some useful links: https://twiki.cern.ch/twiki/bin/view/EMI/ComputeAccounting.

!!DGAS

http://www.to.infn.it/dgas/index.html

I found most of the information in the documentation page.  DGAS seems to work in a similar-ish way to APEL, supporting only LSF and PBS.  It runs on the CE collecting data from the log files, then pushes this information to a 'HLR', which corresponds to the glite-APEL node.  It has a DB structure which is fairly similar to APEL's.  It's written in C++.

It seems that Sascha Fahl and the D-Grid in Germany use DGAS, but they have enquired about the new APEL to see if it would do a good job for them.  Is it the same DGAS or not?  It mentions Java EE, but is that just a different version of the same thing?  I'm still not sure.  John Gordon reckons they're building a new thing, but I don't know if that thing is called DGAS or they used to use DGAS.

!!GRATIA

Philippe Canal is in charge(?).  Our contacts are John Weigand and Tanya Levshina.

https://twiki.grid.iu.edu/bin/view/Accounting/WebHome

I had a quick look through the source, and there's C++ and Java, and also some Perl.  I just found some python too.  There's a mention of web services, presumably the way they use to get the information across the internet.

However, it's difficult from the documentation I've found to get a quick overview of how it works.  I imagine it would be the same for APEL.

!!SGAS
I now think this is the accounting system used by ARC, in Scandinavia.  This is the site for SGAS: http://www.sgas.se/index.php?title=Main_Page.  We've talked to Gabor Szigeti, and briefly to Ulf Tigerstedt about this.  Neither of these are listed in the 'People' page on their site though.

SGAS ~~is~~ claims to be written fully in Java, but in practice I found python and C++ in their repository.  It has recent releases.  It appears that their most recent documentation is from 2006, though.  The site is nice and the code is easy to browse and understand on their Trac.  

!!!SGAS Code
In browsing through their source code, I found that their parsers (known as BaRT) are actually written in python.  Their torque version is here: http://svn.cs.umu.se:8765/sgas/browser/bart/trunk/bart/torque.py.  It's a pretty small package, and the code seems very clear - we could take a lot from this if we were writing parsers in python.

They support Torque, maui, and SLURM - it seems like the same package would be used whichever.

!!~GridSAFE

Here's the homepage: http://gridsafe.sourceforge.net/index.html

I got a potted history from Cristina.  The project was designed with APEL in mind (really?) but the APEL bid was too late and it was won by Edinburgh.  It became a bit of a white elephant, because it was developed without actual users, and was very ambitious but didn't necessarily ever get working fully.

Despite this, it sounds like Globus are planning to use GridSAFE for something or other.

!!NGS UAS
I still can't quite figure out what the UAS and RUS are exactly.  I think the UAS has been given to Alison to look after, because it is in the general 'accounting' theme.  We may want to integrate it with APEL at some point in the future.

The NGS definitely does some active stuff with the data, banning people from resources when they have exceeded their quota, and things like that.  APEL doesn't really get involved with that kind of thing at the moment.

!!NSCCS
Alison has also got this to work on, I think.  It appears to have a reasonable accounting system, but different again.
</pre>
</div>
<div title="SpotifyProxy" server.title="SpotifyProxy" server.page.revision="364734" server.etag="&quot;willrogers_public/SpotifyProxy/364734:034ba943ed88a16e23a5973b87c452bcd81375fd&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110505110821" created="20110504122736" tags="spotify" _hash="3e602a8707aaf69fafa66c7ad1b90aa0f89418ad">
<pre>It can be a bit tricky to make Spotify scrobble using a proxy.  I can't remember the exact settings I used.

Ah, got it.

* Edit -&gt; Preferences ...
* Enable Scrobbling and enter username and password.
* Set the proxy as HTTPS and enter wwwcache.rl.ac.uk and 8080
* ''Restart Spotify''</pre>
</div>
<div title="EmiDevelopment" server.title="EmiDevelopment" server.page.revision="922398" server.etag="&quot;willrogers_public/EmiDevelopment/922398:af19ac858246bd3ce84ac87d3cd82dfd19daaca9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121029152240" created="20121029151255" tags="" _hash="27c5489cd1d33ddfc2b3fd84b8924db0a2bf98a5">
<pre>By Balazs Konya, at the EmiAhmBudapest

!!Status
Dev tasks:
* 7 cancelled
* 82 done
* 23 no response
* 42 not started
* 26 problematic:
** CAR / ~StAR record generation some of these

!!Future of EMI standards/agreements
* ~EMI-ES: progress, but work to do, including after EMI
* ~CAR/~StAR - Balazs thinks it will survive, because APEL will serve as a coordinator
* Information systems: post-EMI coordination may be difficult (BDII, EMIR)

!!Future of EMI common products
* EMIR: question marks, not deployed, GOCDB competition
* CANL: products migrating only now; need coordination post-EMI
* ~EMI_datalib: already used, coordination OK, could do with third-party take-up

!!Future of coordination
Currently, PTB manages the technical plan, makes decisions and monitors the tasks.  The ~PTs are autonomous units.
* What actually needs to be coordinated?
* What are the logical groups?
* Find the best way to do the coordination
* Find the people who can do it

!!Future of software integration
* This was never easy, even within EMI
* Not a positive outlook, without serious efforts from EGI</pre>
</div>
<div title="TiddlyFileImporter" server.title="TiddlyFileImporter" server.page.revision="1521907" server.etag="&quot;tiddlyspace/TiddlyFileImporter/1521907:4d2171bf610ea945c94e219f7cd60b7decbd120e&quot;" modifier="None" creator="None" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch systemConfig" _hash="948bb64604a46205267e446af0f638c4e8fc3c8e">
<pre>/***
|''Name''|TiddlyFileImporter|
|''Version''|0.3.8|
|''Author''|Ben Gillies|
|''Type''|plugin|
|''Description''|Upload a TiddlyWiki file to TiddlyWeb, and import the tiddlers.|
!Usage
Upload a TiddlyWiki file to TiddlyWeb, and import the tiddlers.
!Requires
tiddlyweb
tiddlywebplugins.reflector
!Code
***/
//{{{
(function($){
if(!version.extensions.TiddlyFileImporter)
{ //# ensure that the plugin is only installed once
	version.extensions.TiddlyFileImporter = { installed: true };
}

config.macros.fileImport = {
	reflectorURI: '/reflector?csrf_token=%0',
	incorrectTypeError: 'Incorrect File Type. You must upload a TiddlyWiki',
	uploadLabel: 'Upload',
	uploadLabelPrompt: 'Import tiddlers from this TiddlyWiki',
	step1FileText: 'File:',
	step1PostText: 'In the next screen you will select the tiddlers to import.',
	step1Title: 'Step 1: Pick a TiddlyWiki to import',
	step1TypeChooser: 'Import From:',
	step3Html: ['&lt;input type="hidden" name="markList" /&gt;',
		'&lt;input type="hidden" checked="true" name="chkSync" /&gt;',
		'&lt;input type="hidden" name="chkSave" /&gt;',
		'&lt;input type="hidden" name="txtSaveTiddler" /&gt;'].join(),

	handler: function(place, macroName, params, wikifier, paramString) {
		var wizard = new Wizard();
		wizard.createWizard(place, 'Import a TiddlyWiki');
		this.restart(wizard);
	},

	restart: function(wizard) {
		var me = config.macros.fileImport;
		wizard.addStep(me.step1Title, ['&lt;input type="hidden" ',
			'name="markList" /&gt;'].join(""));
		var markList = wizard.getElement('markList');
		var uploadWrapper = document.createElement('div');
		markList.parentNode.insertBefore(uploadWrapper, markList);
		uploadWrapper.setAttribute('refresh', 'macro');
		uploadWrapper.getAttribute('macroName', 'fileImport');
		var iframeName = 'reflectorImporter' + Math.random().toString();
		me.createForm(uploadWrapper, wizard, iframeName);
		$(uploadWrapper).append('&lt;p&gt;' + me.step1PostText + '&lt;/p&gt;');
		wizard.setValue('serverType', 'tiddlyweb');
		wizard.setValue('adaptor', new config.adaptors.file());
		wizard.setValue('host', config.defaultCustomFields['server.host']);
		wizard.setValue('context', {});
		var iframe = $(['&lt;iframe name="' + iframeName + '" ',
			'style="display: none" /&gt;'].join("")).appendTo(uploadWrapper);
		var onSubmit = function(ev) {
			var uploadType = $('select[name=uploadtype]', wizard.formElem).val();
			if (uploadType == "file") {
				// set an onload ready to hijack the form
				me.setOnLoad(uploadWrapper, wizard, iframe[0]);
				wizard.importType = 'file';
				wizard.formElem.submit();
			} else {
				var csrf_token = config.extensions.tiddlyspace.getCSRFToken();
				$.ajax({
					url: "%0/reflector?csrf_token=%1".format(
						config.defaultCustomFields["server.host"], csrf_token),
					type: "POST",
					dataType: "text",
					data: {
						uri: $("input", ".importFrom", wizard.formElem).val()
					},
					success: function(data, txtStatus, xhr) {
						wizard.POSTResponse = data;
						me.importTiddlers(uploadWrapper, wizard);
					},
					error: function(xhr, txtStatus, error) {
						displayMessage(["There was an error fetching the ",
							'url: ', txtStatus].join(""));
						me.restart(wizard);
					}
				});
				return false;
			}
		};
		wizard.setButtons([{
			caption: me.uploadLabel,
			tooltip: me.uploadLabelPrompt,
			onClick: onSubmit
		}]);
		$(wizard.formElem).submit(function(ev) {
			onSubmit(ev);
			ev.preventDefault();
		});
	},

	createForm: function(place, wizard, iframeName) {
		var form = wizard.formElem;
		var me = config.macros.fileImport;
		form.action = me.reflectorURI.format(
			config.extensions.tiddlyspace.getCSRFToken());
		form.enctype = 'multipart/form-data';
		form.encoding = 'multipart/form-data';
		form.method = 'POST';
		form.target = iframeName;
		onSelectChange = function(e) {
			var changeTo = $(this).val();
			if (changeTo == "file") {
				$(".importFrom").html('%0 &lt;input type="file" name="file" /&gt;'.
					format(me.step1FileText));
			} else {
				$(".importFrom").html('URL: &lt;input type="text" name="uri" /&gt;'
					+ ' Do you want &lt;a target="_blank" href="http://faq.tiddlyspace.com/How%20do%20I%20include%2Fexclude%20spaces%3F"&gt;inclusion&lt;/a&gt; instead?');
			}
		};
		$(place).append('&lt;span&gt;%0&lt;/span&gt;'.format(me.step1TypeChooser)).
			append($(['&lt;select name="uploadtype"&gt;&lt;option value="file" selected="selected"&gt;file',
				'&lt;option value="uri"&gt;url&lt;/select&gt;'].join("")).change(onSelectChange)).
			append('&lt;div class="importFrom"&gt;%0&lt;input type="file" name="file" /&gt;&lt;/div&gt;'.
					format(me.step1FileText));
	},

	setOnLoad: function(place, wizard, iframe) {
		var me = config.macros.fileImport;
		var loadHandler = function() {
			me.importTiddlers.apply(this, [place, wizard, iframe]);
		};
		iframe.onload = loadHandler;
		completeReadyStateChanges = 0;
		iframe.onreadystatechange = function() {
			if (++(completeReadyStateChanges) == 5) {
				loadHandler();
			}
		};
	},

	importTiddlers: function(place, wizard, iframe) {
		var tmpStore = new TiddlyWiki();
		var POSTedWiki = "";
		if (wizard.importType == "file") {
			try {
				POSTedWiki= iframe.contentWindow
					.document.documentElement.innerHTML;
			} catch(e) {
				displayMessage(config.macros.fileImport.incorrectTypeError);
				config.macros.fileImport.restart(wizard);
				return;
			}
			// now we are done, so remove the iframe
			$(iframe).remove();
		} else {
			POSTedWiki = wizard.POSTResponse;
		}

		tmpStore.importTiddlyWiki(POSTedWiki);
		var newTiddlers = tmpStore.getTiddlers();
		var workspace = config.defaultCustomFields['server.workspace'];
		var context = {
			status: true,
			statusText: 'OK',
			httpStatus: 200,
			adaptor: wizard.getValue('adaptor'),
			tiddlers: newTiddlers
		};
		context.adaptor.store = tmpStore;
		wizard.setValue('context', context);
		wizard.setValue('workspace', workspace);
		wizard.setValue('inFileImport', true);
		config.macros.importTiddlers.onGetTiddlerList(context, wizard);
	}
};

var _onGetTiddler = config.macros.importTiddlers.onGetTiddler;
config.macros.importTiddlers.onGetTiddler = function(context, wizard) {
	if (wizard.getValue('inFileImport')) {
		var me = config.macros.importTiddlers;
		if(!context.status)
			displayMessage("Error in importTiddlers.onGetTiddler: " + context.statusText);
		var tiddler = context.tiddler;
		var fields = tiddler.fields;
		merge(fields, config.defaultCustomFields);
		fields["server.workspace"] = wizard.getValue('workspace');
		delete fields['server.permissions'];
		delete fields['server.bag'];
		fields['server.page.revision'] = 'false';
		delete fields['server.recipe'];
		fields.changecount = 1;
		store.suspendNotifications();
		store.saveTiddler(tiddler.title, tiddler.title, tiddler.text,
			tiddler.modifier, tiddler.modified, tiddler.tags, tiddler.fields,
			false, tiddler.created);
		store.resumeNotifications();
		var remainingImports = wizard.getValue("remainingImports")-1;
		wizard.setValue("remainingImports",remainingImports);
		if(remainingImports === 0) {
			if(context.isSynchronous) {
				store.notifyAll();
				refreshDisplay();
			}
			wizard.setButtons([
					{caption: me.doneLabel, tooltip: me.donePrompt, onClick: me.onClose}
				],me.statusDoneImport);
			autoSaveChanges();
		}
	} else {
		_onGetTiddler.apply(this, arguments);
	}
};

var _onCancel = config.macros.importTiddlers.onCancel;
config.macros.importTiddlers.onCancel = function(e)
{
	var wizard = new Wizard(this);
	if (!wizard.getValue('inFileImport')) {
		return _onCancel.apply(this, arguments);
	}
	var place = wizard.clear();
	config.macros.fileImport.restart(wizard);
	return false;
};

var _step3Html = config.macros.importTiddlers.step3Html;
var _onGetTiddlerList = config.macros.importTiddlers.onGetTiddlerList;
config.macros.importTiddlers.onGetTiddlerList = function(context, wizard) {
	var fileImport = config.macros.fileImport;
	var importTiddlers = config.macros.importTiddlers;
	if (wizard.getValue('inFileImport')) {
		importTiddlers.step3Html = fileImport.step3Html;
	} else {
		importTiddlers.step3Html = _step3Html;
	}
	_onGetTiddlerList.apply(this, arguments);
};
})(jQuery);
//}}}</pre>
</div>
<div title="PythonDecorators" server.title="PythonDecorators" server.page.revision="1219048" server.etag="&quot;willrogers_public/PythonDecorators/1219048:3f733ac39ec1b9e7b9b0b4e2efd6c200d30b69f9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130517130632" created="20130502090126" tags="decorator python" _hash="0fdbbe74b0696f5a87b5e3b191c511ab7c02407b">
<pre>Decorators in Python allow you to modify other code.  They are somewhat equivalent to macros in other languages.  They resemble annotations in Java, but are more flexible.

A decorator may be a function or a class; the only constraint is that it must return an object which is callable.  So if it is a class, it must define the {{{__call__}}} method.  Calling the constructor of that class would then return an object which is callable.  You can return a function which is completely different to the function with the decorator, but this is generally not useful.

The '@' syntax is just a replacement for:
{{{
foo = decorator(foo)
}}}

!!Examples
* {{{@staticmethod}}} means the same as in Java, but many people think they're not often needed since you can just declare top-level function instead
* {{{@classmethod}}} is similar to a regular method, but instead of the object ({{{self}}}) being passed as the first method, the class is instead
* {{{@property}}}  - ...

Here is a list of decorators: http://wiki.python.org/moin/PythonDecoratorLibrary.  

!!Syntax

!!!!Decorators without arguments
To apply a decorator to a function, simply put the decorator on the line before the function definition:
{{{
@entryExit
def func1():
    print "inside func1()"
}}}

To define a class as a decorator, include a function in the constructor:
{{{
class entryExit(object):

    def __init__(self, f):
        self.f = f

    def __call__(self):
        print "Entering", self.f.__name__
        self.f()
        print "Exited", self.f.__name__
}}}

To define a function as a decorator, ensure that it itself returns a function:
{{{
def entryExit(f):
    def new_f():
        print "Entering", f.__name__
        f()
        print "Exited", f.__name__
    return new_f
}}}
Often this means that the decorated function has different properties, so you may want to change e.g. the name or docstring of new_f so that the decorated function behaves more like itself than the one defined in the decorator.  The first example in the decorator library (above) defines behaviour that does this for you, so that you don't have to do this for each decorator you define.

!!!!Decorators with arguments
Decorators with arguments are different.</pre>
</div>
<div title="SqlFunctions" server.title="SqlFunctions" server.page.revision="727597" server.etag="&quot;willrogers_public/SqlFunctions/727597:2745617bb3b193dbdee30b3e81a41bfb4f0f8861&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120530091731" created="20120530091611" tags="" _hash="215df745c9be691f623c4112f800972aad640057">
<pre>Most of these are self-evident:
* AVG()
* COUNT()
* FIRST()
* LAST()
* MAX()
* MIN()
* SUM()
You can't use WHERE on the results of these aggregate functions, so instead you can use HAVING:
{{{
SELECT Customer,SUM(OrderPrice) FROM Orders
GROUP BY Customer
HAVING SUM(OrderPrice)&lt;2000
}}}

* UCASE()
* LCASE()
* MID() - not sure what this does
* LEN()
* ROUND() - round to the number of specified decimals
* NOW() - current date and time
* FORMAT()</pre>
</div>
<div title="EmiOutlook" server.title="EmiOutlook" server.page.revision="654424" server.etag="&quot;willrogers_public/EmiOutlook/654424:ab30ce12da0acf9f369d001647053aabd8c450ea&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120327081917" created="20120327080845" tags="egi emi" _hash="49a14f9732237d2a88603173b0199d02aff02191">
<pre>Alberto di Meglio

!!Basics
* 4 groups of software: gLite, ARC, UNICORE, dCache 
* 3 branches: 
!!!Maintenance and support
* ~30% of effort
* 120 components in 42 services
* 1200 bug fixes last year
* 500 tickets last year
!!!Innovation and development
* ~40% of effort
* Matterhorn to be released
* Focus of Matterhorn is newer functionality and services, compared to the consolidation aims of EMI1.
** Extended support for EMI CEs and different batch systems (SLURM, not Condor)
** Use of ARGUS for authentication
** SL6 and Debian 6 support
** Incorporating EDGI and WNoDeS
!!!QA and software processes
* Build and test infrastructure (ETICS) 
** &gt; 200 nodes
!!Dissemination and outreach
* Improving website and content
* Improving channels of communication
!!Strategic Activities
* Strategic director
* Promote EMI within open standard bodies
* Exploitation and sustainibility
* Engage with industry - always a difficult task
** Some success with SMEs using the EMI services.

!!~ScienceSoft
This is an attempt to work with other open source scientific software can work together to figure out how to sustain scientific software.  There are a lot of possible requirements, such as hosting, enabling collaboration, infrastructures...
* http://sciencesoft.org

!!Future plans
There is no plan for a direct successor to EMI, so there is a strong emphasis on figuring out how to continue the </pre>
</div>
<div title="TiddlySpaceConfig" server.title="TiddlySpaceConfig" server.page.revision="1521905" server.etag="&quot;tiddlyspace/TiddlySpaceConfig/1521905:dbb427b402453b0884fbd4988fd33dd390936172&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch systemConfig" _hash="e74aa09eb3a15ff6e90b7de81e4d23168f8a51db">
<pre>/***
|''Name''|TiddlySpaceConfig|
|''Version''|0.7.7|
|''Description''|TiddlySpace configuration|
|''Status''|stable|
|''Source''|http://github.com/TiddlySpace/tiddlyspace/raw/master/src/plugins/TiddlySpaceConfig.js|
|''CoreVersion''|2.6.1|
|''Requires''|TiddlyWebConfig ServerSideSavingPlugin TiddlyFileImporter|
!Code
***/
//{{{
(function($) {

var tweb = config.extensions.tiddlyweb;

var recipe = config.defaultCustomFields["server.workspace"].split("recipes/")[1];
var currentSpace; // assigned later

var disabledTabs = [];

var coreBags = ["system", "tiddlyspace"];
var systemSpaces = ["plugins", "info", "images", "theme"];
systemSpaces = $.map(systemSpaces, function(item, i) {
	return "system-%0_public".format(item);
});

// hijack search macro to add custom attributes for mobile devices
var _search = config.macros.search.handler;
config.macros.search.handler = function(place, macroName, params) {
	_search.apply(this, arguments);
	$(".searchField:input", place).
		attr({ autocapitalize: "off", autocorrect: "off" });
};

// arg is either a container name or a tiddler object
// if fuzzy is truthy, space may be inferred from workspace (for new tiddlers)
// returns space object or false
var determineSpace = function(arg, fuzzy) {
	if(typeof arg == "string") { // container name
		var space = split(arg, "_", "r");
		return ["public", "private"].contains(space.type) ? space : false;
	} else if(arg) { // tiddler
		var container = determineContainer(arg, fuzzy);
		return container ? determineSpace(container.name, fuzzy) : false;
	} else {
		return false;
	}
};

// if fuzzy is truthy, container may be inferred from workspace for new tiddlers
// returns container object or false
var determineContainer = function(tiddler, fuzzy) { // TODO: expose?
	var bag = tiddler.fields["server.bag"];
	var recipe = tiddler.fields["server.recipe"]; // XXX: unused/irrelevant/redundant!?
	if(bag) {
		return { type: "bag", name: bag };
	} else if(recipe) {
		return { type: "recipe", name: recipe };
	} else if(fuzzy) { // new tiddler
		var workspace = tiddler.fields["server.workspace"];
		if(workspace) {
			var container = split(workspace, "/", "l");
			return ["bags", "recipes"].contains(container.type) ? container : false;
		} else {
			return false;
		}
	} else {
		return false;
	}
};

// hijack removeTiddlerCallback to restore tiddler from recipe cascade -- TODO: move into TiddlyWebWiki?
var sssp = config.extensions.ServerSideSavingPlugin;
var _removeTiddlerCallback = sssp.removeTiddlerCallback;
sssp.removeTiddlerCallback = function(context, userParams) {
	var title = context.tiddler.title;
	var recipe = context.tiddler.fields["server.recipe"];
	_removeTiddlerCallback.apply(this, arguments);
	if(recipe) {
		context.workspace = "recipes/" + recipe;
		var callback = function(context, userParams) {
			if(context.status) {
				var dirty = store.isDirty();
				store.saveTiddler(context.tiddler).clearChangeCount();
				store.setDirty(dirty);
			} else {
				store.notify(title, true);
			}
		};
		context.adaptor.getTiddler(title, context, null, callback);
	}
};

// splits a string once using delimiter
// mode "l" splits at the first, "r" at the last occurrence
// returns an object with members type and name
var split = function(str, sep, mode) {
	mode = mode == "r" ? "pop" : "shift"; // TODO: use +/-1 instead of "l"/"r"?
	var arr = str.split(sep);
	var type = arr.length &gt; 1 ? arr[mode]() : null;
	return { type: type, name: arr.join(sep) };
};

var plugin = config.extensions.tiddlyspace = {
	currentSpace: determineSpace(recipe),
	coreBags: coreBags.concat(systemSpaces),

	determineSpace: determineSpace,
	isValidSpaceName: function(name) {
		return name.match(/^[a-z][0-9a-z\-]*[0-9a-z]$/) ? true : false;
	},
	getCurrentBag: function(type) {
		return "%0_%1".format(currentSpace, type);
	},
	getCurrentWorkspace: function(type) {
		return "bags/" + this.getCurrentBag(type);
	},
	// returns the URL for a space's avatar (SiteIcon) based on a server_host
	// object and an optional space name
	// optional nocors argument prevents cross-domain URLs from being generated
	getAvatar: function(host, space, nocors) {
		if(space &amp;&amp; typeof space != "string") { // backwards compatibility -- XXX: deprecated
			space = space.name;
		}
		var subdomain = nocors ? currentSpace : space;
		host = host ? this.getHost(host, subdomain) : "";
		var bag = space ? "%0_public".format(space) : "tiddlyspace";
		return "%0/bags/%1/tiddlers/SiteIcon".format(host, bag);
	},
	// returns the URL based on a server_host object (scheme, host, port) and an
	// optional subdomain
	getHost: function(host, subdomain) {
		if(host === undefined) { // offline
			tweb.status.server_host = {}; // prevents exceptions further down the stack -- XXX: hacky workaround, breaks encapsulation
			return null;
		}
		subdomain = subdomain ? subdomain + "." : "";
		var url = "%0://%1%2".format(host.scheme, subdomain, host.host);
		var port = host.port;
		if(port &amp;&amp; !["80", "443"].contains(port)) {
			url += ":" + port;
		}
		return url;
	},
	disableTab: function(tabTiddler) {
		if(typeof(tabTiddler) == "string") {
			disabledTabs.push(tabTiddler);
		} else {
			for(var i = 0; i &lt; tabTiddler.length; i++) {
				plugin.disableTab(tabTiddler[i]);
			}
		}
	},
    checkSyncStatus: function(tiddler) {
		if(tiddler) {
			var title = typeof(tiddler) === "string" ? tiddler : tiddler.title;
			var el = story.getTiddler(title) || false;
			if(el) {
				refreshElements(el);
			}
		}
	},
	isDisabledTab: function(tabTitle) {
		var match = new RegExp("(?:\\[\\[([^\\]]+)\\]\\])", "mg").exec(tabTitle);
		var tabIdentifier = match ? match[1] : tabTitle;
		return disabledTabs.contains(tabIdentifier);
	},
	getCSRFToken: window.getCSRFToken || null // this may not have been processed yet
};

currentSpace = plugin.currentSpace.name;

tweb.serverPrefix = tweb.host.split("/")[3] || ""; // XXX: assumes root handler
tweb.getStatus(function(status) {
	var url = plugin.getHost(status.server_host);
	tweb.status.server_host.url = url;
	config.messages.tsVersion = status.version;
});

if(window.location.protocol == "file:") {
	// enable AutoSave by default
	config.options.chkAutoSave = config.options.chkAutoSave === undefined ?
		true : config.options.chkAutoSave;
} else {
	// set global read-only mode based on membership heuristics
	var indicator = store.getTiddler("SiteTitle") || tiddler;
	readOnly = !(recipe.split("_").pop() == "private" ||
		tweb.hasPermission("write", indicator));
	// replace TiddlyWiki's ImportTiddlers due to cross-domain restrictions
	if(config.macros.fileImport) {
		$.extend(config.macros.importTiddlers, config.macros.fileImport);
	}
}

// hijack saveChanges to ensure SystemSettings is private by default
var _saveChanges = saveChanges;
saveChanges = function(onlyIfDirty, tiddlers) {
	if(tiddlers &amp;&amp; tiddlers.length == 1 &amp;&amp;
			tiddlers[0] &amp;&amp; tiddlers[0].title == "SystemSettings") {
		var fields = tiddlers[0].fields;
		delete fields["server.recipe"];
		fields["server.bag"] = plugin.getCurrentBag("private");
		fields["server.workspace"] = plugin.getCurrentWorkspace("private");
	}
	return _saveChanges.apply(this, arguments);
};

// ensure backstage is always initialized
// required to circumvent TiddlyWiki's read-only based handling
config.macros.backstageInit = {
	init: function() {
		showBackstage = true;
	}
};

// disable evaluated macro parameters for security reasons
config.evaluateMacroParameters = "none";
var _parseParams = String.prototype.parseParams;
String.prototype.parseParams = function(defaultName, defaultValue, allowEval,
		noNames, cascadeDefaults) {
	if(config.evaluateMacroParameters == "none") {
		arguments[2] = false;
	}
	return _parseParams.apply(this, arguments);
};

var _tabsMacro = config.macros.tabs.handler;
config.macros.tabs.handler = function(place, macroName, params) {
	var newParams = [params[0]]; // keep cookie name
	for(var i = 1; i &lt; params.length; i += 3) {
		var tabTitle = params[i + 2];
		if(!plugin.isDisabledTab(tabTitle)){
			newParams = newParams.concat(params[i], params[i + 1], tabTitle);
		}
	}
	_tabsMacro.apply(this, [place, macroName, newParams]);
};

// disable ControlView for XHRs by default
$.ajaxSetup({
	beforeSend: function(xhr) {
		xhr.setRequestHeader("X-ControlView", "false");
	}
});
// TiddlyWeb adaptor currently still uses httpReq, which needs extra magic -- XXX: obsolete this!
var _httpReq = httpReq;
httpReq = function(type, url, callback, params, headers, data, contentType,
		username, password, allowCache) {
	headers = headers || {};
	headers["X-ControlView"] = "false";
	_httpReq.apply(this, arguments);
};

// register style sheet for backstage separately (important)
store.addNotification("StyleSheetBackstage", refreshStyles);

// option for default privacy setting
config.optionsDesc.chkPrivateMode = "Set your default privacy mode to private";
config.optionsSource.chkPrivateMode = "setting";
config.options.chkPrivateMode = config.options.chkPrivateMode || false;
saveSystemSetting("chkPrivateMode", true);
config.defaultCustomFields["server.workspace"] = plugin.
	getCurrentWorkspace(config.options.chkPrivateMode ? "private" : "public");

config.paramifiers.follow = {
	onstart: function(v) {
		if(!readOnly) {
			var bag = "%0_public".format(currentSpace);
			story.displayTiddler(null, v, DEFAULT_EDIT_TEMPLATE, null, null,
				"server.bag:%0 server.workspace:bags/%0".format(bag));
			story.setTiddlerTag(v, "follow", 1);
			story.focusTiddler(v, "text");
		}
	}
};

var fImport = config.macros.fileImport;
if(fImport) {
	fImport.uploadTo = "Upload to: ";
	var _createForm = config.macros.fileImport.createForm;
	config.macros.fileImport.createForm = function(place, wizard, iframeName) {
		var container = $("&lt;div /&gt;").text(fImport.uploadTo).appendTo(place);
		var select = $('&lt;select name="mode" /&gt;').appendTo(container)[0];
		$('&lt;option value="private" selected&gt;private&lt;/a&gt;').appendTo(select);
		$('&lt;option value="public"&gt;public&lt;/a&gt;').appendTo(select);
		wizard.setValue("importmode", select);
		_createForm.apply(this, [place, wizard, iframeName]);
	};

	var _onGet = config.macros.importTiddlers.onGetTiddler;
	config.macros.importTiddlers.onGetTiddler = function(context, wizard) {
		var type = $(wizard.getValue("importmode")).val();
		var ws =  plugin.getCurrentWorkspace(type);
		wizard.setValue("workspace", ws);
		_onGet.apply(this, [context, wizard]);
	};
}

config.extensions.ServerSideSavingPlugin.reportSuccess = function(msg, tiddler) {
	plugin.checkSyncStatus(tiddler);
	msg = config.extensions.ServerSideSavingPlugin.locale[msg];
	var link = "/" + encodeURIComponent(tiddler.title);
	displayMessage(msg.format([tiddler.title]), link);
};


})(jQuery);
//}}}</pre>
</div>
<div title="HaskellBasics" server.title="HaskellBasics" server.page.revision="1083846" server.etag="&quot;willrogers_public/HaskellBasics/1083846:ebe0f0255309ddcb27cc6bfaf9f66ac606295c9a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130216133101" created="20120415165909" tags="haskell" _hash="1aaf233d3d3bdb67ce5eeefdc94f1b852e2df4f1">
<pre>A good intro is learnyouahaskell.com.  I'll record anything here that seems useful.

!!Arithmetic and boolean
* +, -, *, / work as you would expect.  They are ''infix'' functions.
* {{{5 * (-3)}}}, not {{{5 * -3}}}
* {{{True}}}, {{{False}}}, {{{||}}}, {{{&amp;&amp;}}}, {{{not}}}
* {{{==}}} for equality, {{{/=}}} for not equals

!!Types

!!!!The types
* Int is similar to python and mysql
* Integer is like Int but unbounded and so less efficient
* Float and Double are single and double-precision floating point
* Bool: True or False
* Char:  a character, denoted in single quotes: 'a'

!!!!Deducing types
You can use {{{:t}}} in ghci to determine the type of an expression:
{{{
    ghci&gt; :t 'a'  
    'a' :: Char  
    ghci&gt; :t True  
    True :: Bool  
    ghci&gt; :t "HELLO!"  
    "HELLO!" :: [Char]  
    ghci&gt; :t (True, 'a')  
    (True, 'a') :: (Bool, Char)  
    ghci&gt; :t 4 == 5  
    4 == 5 :: Bool  
}}}
* String is synonymous with [Char]

{{{
    ghci&gt; :t head  
    head :: [a] -&gt; a  
}}}


!!Functions
* Most functions are ''prefix'' functions
* function name then arguments separated by spaces (no brackets)
* {{{succ 8 -&gt; 9}}}: anything with a 'successor'
* {{{min 3.4 3.2 -&gt; 3.2}}} - compare two things
* calling functions has highest precedence - they will be evaluated first
* {{{doubleMe x = x + x}}} - define a function
** in the interactive prompt, {{{let doubleMe x = x + x}}}
* {{{doubleUs x y = doubleMe x + doubleMe y}}} - use a function inside a function
* you don't have to define doubleMe first here (unless it's interactive)
* {{{doubleSmallNumber x = if x &lt; 100 then x * 2 else x}}}
** else is mandatory with an if statement
** an if statement is an expression - it always returns a value
* you can't change what functions mean once they've defined them
** a function with no arguments is the same as a name
* you can turn any two-argument function into an infix function with backticks:
** {{{7 `div` 3}}}
* Haskell does type inference, but it is good practice to make type declarations:
{{{
    removeNonUppercase :: [Char] -&gt; [Char]  
    removeNonUppercase st = [ c | c &lt;- st, c `elem` ['A'..'Z']]   
}}}
* You can use :t to deduce the signature of a function
!!HaskellLists

!!Tuples
Tuples have a fixed length and can contain different types.  There's no such thing as a singleton tuple.  You can compare tuples like lists, except that they must have the same length.  Funnily, you can have an empty tuple ().
!!!!Pairs
* Pairs are tuples of length two
* {{{fst &lt;pair&gt;}}} gives you the first item
* {{{snd &lt;pair&gt;}}} gives you the second item
* {{{zip &lt;list1&gt; &lt;list2&gt;}}} gives you a list of pairs from the two lists
** if one list is longer, it gives up when the shorter one runs out
** as Haskell evaluates lazily, it can pair infinite lists
</pre>
</div>
<div title="EmiConsolidation" server.title="EmiConsolidation" server.page.revision="363993" server.etag="&quot;willrogers_public/EmiConsolidation/363993:772e0415480f79867bd6fd69ef4bd66ce263e78c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111018075126" created="20111018064701" tags="" _hash="2b6b62d8bbffc24f89e04573e60c329d21bcf686">
<pre>!!Introduction  - Balasz Konya

At the end of the first year of EMI, one of the main criticisms was that it was too big, too confusing and not interoperable.  Libraries tended to be difficult.  There is more than one product to do a given thing.

The aim is to reduce the number of lines of code by 1/3 by the end of EMI.

* Remove duplications
** Keep only one
** There's never 100% duplicates, so we need to adjust other products
** OR develop a common product
* Streamlining
** Do we need all these products?
* Reduce maintenance
** How - do we know?
* Replace an EMI product with an external product

!!!EMI Update 8
* 2.9m lines of code - still increasing
* 53 products
* It's difficult to compare with EMI 0
* There's no visible consolidation effect yet
* New products still being added
* Products still growing.

!!Compute consolidation - Marco Cecchi
They've surveyed the current code, but now they need a plan.

Phasing out products - this is difficult of course.  Users know products already, and are they actually going to stop using them?  Developing a unified client may not reduce amount of work.  Could we instead make all the clients talk the same language?  EMI-ES - EMI execution service.

We could develop a single API, with support for C/C++, Java and Python via SWIG.  It would be clean, but a big task, particularly for a single team.  Who would maintain it?

EMI-ES could provide a common interface for submitting jobs.  The plan is created by the MPI task force.

!!Data Consolidation - Jon Kerr Nilsen
What there is already:
* lcg_util/GFAL
* ARC data tools/libarcdata
These basically do the same thing, and the plan is to consolidate these into EMI_datalib.  This plan seems to be more-or-less accepted.  The plan is on the appropriate wiki page.   The plan looks rather neat to me.

!!Security Consolidation - John White
They all sat down / had a phone conference and discussed everything.  They 'own' a certain amount of stuff, some of which can go, some of which can not.  Some must remain for technical reasons, some must remain for political reasons, and some are being used so we don't know if the users want them to go.

!!Information System Consolidation - Laurence Field
This is the same stuff about amalgamating BDII, GOCDB and Unicore and ARC's registries into one common model.  In particular, this involves the new EMIR.

GLUE 2.0 - a success in forming a schema which is useful to people.  It has been part of EMI from the beginning.  It needs to be used across the software stack, and really is getting there.

What was the end point?  Did it include GOCDB?</pre>
</div>
<div title="CBasicIO" server.title="CBasicIO" server.page.revision="1310853" server.etag="&quot;willrogers_public/CBasicIO/1310853:f5c0c2550b5061781b395e096e7ff3f5b544cdff&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130717085850" created="20120609205659" tags="" _hash="0248adf49ade764f5bc5ec80d7a79cb729e76ece">
<pre>This demonstrates {{{getchar()}}}, {{{putchar()}}} and the constant {{{EOF}}} (defined in {{{&lt;stdio.h&gt;}}}.  We use int because char and int are interchangeable, and EOF is defined as an int, which is not the same as any other char.
* In Linux, EOF is ^D
* In Windows, EOF is ^Z
{{{
#include &lt;stdio.h&gt;

main() {
    int c;

    c = getchar();
    while (c != EOF) {
        putchar(c);
        c = getchar();
    }
}
}}}

For files, you need to open a file pointer:
{{{
FILE *fp = fopen("file", "r");
char c = fgetc(fp);
}}}
You can use these convenience functions:
{{{
isspace(char);
ispunct(char);
isalpha(char);
}}}</pre>
</div>
<div title="PythonDaemon" server.title="PythonDaemon" server.page.revision="364557" server.etag="&quot;willrogers_public/PythonDaemon/364557:6a8bae53ccfcd84d70f0fabcf6d3f734afcdd6f8&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111201095412" created="20111201092155" tags="" _hash="693f2ed287ea0d0798c4b15bab4f0aefb1da326f">
<pre>There's more to making a daemon in Linux than I realised.  There is however a fairly standard process for doing it, and there's a [[python library|http://pypi.python.org/pypi/python-daemon/]] implementing the [[recommended procedures|http://www.python.org/dev/peps/pep-3143/]].  Use the latter page for documentation on the former library.

The library is mainly designed for python 2.5+, but it does appear to work with 2.4 if you call the {{{__enter__()}}} and {{{__exit__()}}} methods appropriately instead of using the with statement.

!!Behaviour
* The library uses the standard double-fork procedure to detach the process from any terminal and prevent it reattaching to anything
** This means that the process goes into the background immediately, and you can only see it via its pid
* You need to specify any files that you still want to use when it goes into a daemon process - all open file descriptors are closed by default
** This includes log files, which are important - otherwise you really can't see what it's doing after it's disappeared
* You  can specify what it does on different kill signals, but I haven't gone into this yet
* I haven't got the pid file working as I would expect yet.</pre>
</div>
<div title="VimNotes" server.title="VimNotes" server.page.revision="1415150" server.etag="&quot;willrogers_public/VimNotes/1415150:f7d97825d014799b2efc5307dca513373227aff0&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130923105423" created="20111209141800" tags="vim" _hash="842d5e92fcd8adff8db42788d3f28b41d25892a2">
<pre>Here's my standard vim configuration file: [[.vimrc]].
This page is by Bram Moolenaar, creator of Vim.  It's got useful tips on how to save time editing: http://www.moolenaar.net/habits.html.

!!Tricks
* Ctrl-G shows you the current line number, if it's not shown at the bottom already
* To comment part of a script, you can use {{{:s,e s/^/#/}}} where s and e are start and end line numbers
* &lt;n&gt;f&lt;char&gt; will search for the nth version of that char in the line you are in (from where you are)
* {{{gd}}} will go to the first instance of the word the cursor is on

!!Insert mode
You can use a few commands using Ctrl while you are still in insert mode:
* Ctrl-O puts you into normal mode for one command
* Ctrl-W deletes the previous word
* Ctrl-U deletes the current line up to the cursor
* Ctrl-R &lt;reg&gt; will insert a register
* Ctrl-T and Ctrl-D shifts by a tab right or left
* Ctrl-N / Ctrl-P autocompletes using words already in the file you're in

!!Colon commands
* {{{:ls}}} - show the files open in vim
** {{{:b &lt;number&gt;}}} to go the one you want
* {{{:f}}} - show details about the open file
* {{{:e &lt;filename&gt;}}} - edit another file
* {{{q:}}} goes to the command line menu, which you can navigate and edit.  Ctrl-C or {{{:q}}} will exit this menu.

!!Windows
* to open a second window, use {{{:split &lt;file&gt;}}} or {{{:hsplit &lt;file&gt;}}}
* to move between windows, use {{{Ctrl-W}}} then hjkl
* to rotate the windows around, {{{Ctrl-W}}} then r
See http://stackoverflow.com/questions/2228353/how-to-swap-files-between-windows-in-vim

!!Tools
{{{ctags}}} is useful for navigating source code with vim.  See http://blog.stwrt.ca/2012/10/31/vim-ctags

!!Bugbears
This is a useful point he makes.  When you're editing, try to notice the things you're taking longer than you want to over.  Then figure out if there is a faster way to do it than the one you are using.  This is more efficient than just learning some rules which may or may not apply to your use of vim.

* Deleting some text, then not being able to delete something else before putting that text back somewhere.
* Deleting up until an underscore in a variable name.
</pre>
</div>
<div title="SiteInfo" server.title="SiteInfo" server.page.revision="208745" server.etag="&quot;system-goto_public/SiteInfo/208745:83b3df867b88833380ab9558e028a1d38db9c996&quot;" modifier="pmario" creator="pmario" server.workspace="bags/system-goto_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-goto_public" server.permissions="read" server.content-type="" modified="20101029150450" created="20101029150450" tags="plugin" _hash="318a9c41ea68d101a4aebb81d0ef4a362eb32d77">
<pre>This space contains: [[GotoPlugin]] and [[SearchOptionsPlugin]]</pre>
</div>
<div title="EpicsArchiver" server.title="EpicsArchiver" server.page.revision="1600644" server.etag="&quot;willrogers_public/EpicsArchiver/1600644:921de987d115fafd7770860b3b4331e67fde8d6c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131219163332" created="20131203113258" tags="" _hash="c5e15abde9a1183afd6631e36e2396d109f61ac4">
<pre>The archiver was originally looked after by James, Vijayan and Mike Leech.  Now only Vijayan really knows how it works.

The archiver lives on CS03R-CS-SERV-27.pri.diamond.ac.uk.  The username is archiver.

!!Components
* Archive processes
* Data storage
* Interfaces 

!!Archive viewer
{{{archiveviewer}}} is a Java program which talks to the archiver's interface.  It is available on the command line and from the launcher.

!!Channel Archiver
{{{ChannelArchiver}}} was originally an EPICS extension.  James made significant changes to it, including updating it to 64-bit.  He moved it to a support module in SVN.

The original ~ChannelArchiver is no longer actively developed, but it has a page here: http://sourceforge.net/apps/trac/epicschanarch/wiki

* Wiki page: http://www.cs.diamond.ac.uk/cgi-bin/wiki.cgi/ChannelArchiver
* Manual (for the original EPICS version): http://www.cs.diamond.ac.uk/cgi-bin/wiki.cgi/Archiver_Manual
* Update page: http://archiver.pri.diamond.ac.uk/archiver.html
* Info about archiving: http://www.cs.diamond.ac.uk/cgi-bin/wiki.cgi/Controlling_Archiving_Rates_in_Channel_Archiver
* Code: {{{$SVN_ROOT/diamond/trunk/support/ChannelArchiver}}}

I can't simply build the source.</pre>
</div>
<div title="EmiQualityControl" server.title="EmiQualityControl" server.page.revision="705297" server.etag="&quot;willrogers_public/EmiQualityControl/705297:538ec5cd8e3e6e3360d9d23ab8df9ba6b9c9f6ca&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120509110422" created="20120509110029" tags="emi" _hash="0d6b380f0b199b253cce6781174404901f4eb676">
<pre>QC part of SA2, along with ETICS etc.

QC things included:
* Verification of released products
* Static Analysis
**EPEL Compliance
** RPMLint errors reported back to me...?
** Most products not showing improvement, including apel
** Will we have problems reaching 0?
* Availability of tests
** This has improved a lot over the period of EMI 1.
** Unit tests the weakest point - not just APEL

Why did APEL not show tests associated with the bugs fixed?  They check the reports, and also use tools to figure it out.  They don't check them all manually.

As Andrea says, all bugs must be tested, so exactly what creates the graph.  It seems like the reason for the red bars is that we need to fill in the Savannah bugs and tasks properly.

Andrea: there should be different thresholds for 'legacy' code and new code.  So the APEL client would need fewer unit tests than a new EMI SSM.</pre>
</div>
<div title="TtyWtf" server.title="TtyWtf" server.page.revision="364819" server.etag="&quot;willrogers_public/TtyWtf/364819:d3a2ebb0e0185c867b015683152d99088a09db1f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111109171346" created="20110704075520" tags="" _hash="4ee2488962dd4f614772d28866f12b9feee6f1d5">
<pre>What's a TTY?  It's pretty unclear.

Wikipedia reckons the abbreviation is from TeleTYpewriter, which is a pretty unclear origin.  That's something like the teleprinter from the football scores, and might have actually produced paper once upon a time.  These evolved through terminal displays to terminal emulators, which is what we use today.

In Ubuntu, the 'who' command gives both any running terminals on 'pts/x' and (I guess) the X server on 'tty7'.  You can switch terminals using Alt+Fx, but I'm not really sure why you'd want to.  Perhaps if the X server crashed it might be useful.

Here's a page about it which I haven't yet read: http://www.linusakesson.net/programming/tty/index.php</pre>
</div>
<div title="PoloCosts" server.title="PoloCosts" server.page.revision="1059864" server.etag="&quot;willrogers_public/PoloCosts/1059864:a1619a3eb9a0890b2b58a90766fd72bba908de7a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130204192923" created="20111005190936" tags="polo" _hash="2211df9c060f8caf55773c5136ea052f14e3f7f9">
<pre>I got the Polo on October 1st 2011.  This has now moved to Google Docs.

| ''Date'' | ''Description'' | ''Cost'' |
| Oct 11 | tax | £130 |
| Oct 11 | insurance increase | £123 |
| Oct 11 | extra insurance on Mini | £56 |
| Oct 11 | extra insurance due to alloys and spoiler | £34 |
| Oct 11 | replacement gear knob | £28 |
| Nov 11 | new headlight | £17 |
| Dec 11 | stereo (inc adapter, fitting) | (£180) |
| Jan 12 | Groupon service | £50 |
| Apr 12 | Speakers (ral.forsale) | £10 |
| Apr 12 | Rear wiper blade | £10 |
| Apr 12 | Door panel fittings | £5 |
| May 12 | MOT (inc nplate bulb) | £56 |
| May 12 | Insurance (Liz, extras, breakdown) | £631 |
| Sep 12 | Extra insurance for moving | £77 |
| Sep 12 | Tax disc | £135 |
| Dec 12 | Groupon service | £50 |

</pre>
</div>
<div title="AndroidDocumentation" server.title="AndroidDocumentation" server.page.revision="1519408" server.etag="&quot;willrogers_public/AndroidDocumentation/1519408:092e607e9c8717ce8043080a6351056e9bd30faf&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131110203138" created="20131110203106" tags="" _hash="64e97727b7d0db0a3136ee7f01851dee7c35c35e">
<pre>There is good documentation for writing Android apps at http://developer.android.com/index.html.  It is split into three sections:
* AndroidDesign
* AndroidDevelop
* AndroidDistribute</pre>
</div>
<div title="MoreOnPorting" server.title="MoreOnPorting" server.page.revision="705287" server.etag="&quot;willrogers_public/MoreOnPorting/705287:d0cc11425b5f19dc73633de4096d1108f7d0bd31&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120509101858" created="20120509101202" tags="" _hash="7fcde6286683fc534fba037709c4e096ad316cb1">
<pre>Cristina at EMI AHM, Hamburg.

!!What we need
* know about packaging policies (online training procedures)
* clear procedures (documentation)
* stable tools (work done on ETICS)
* progress monitoring (nightly builds etc)

!!Progress
A bit optimistic on how quickly they'd get products to build; by release rather than December.

Changes from SL5 to 6:
* libcurl/nss
* Bouncycastle 1.46 a big release
* yum packaging changes

Debian 6:
* little knowledge - main problem
* completely different to SL
** packaging of dependencies completely different
** some dependencies not available
* no clear requirements - less priority than SL6
** PTs use porting as an excuse for not delivering features

!!Plans
* Tools now stable - no major functionality to be added
** Easier to try porting now
* Try to get clients ported by October
* Get stuff into EPEL and Debian
** Assess current status
** Work towards EPEL/Debian compliance: rpmlint, lintian
* Get Java products into Maven Central
** cf. CANL

Binary packages good enough for the repos
* Who's still using the ETICS packager (i.e. US)
* We need to move...

YAIM
* Only bugfixes for EMI
* Porting to Deb6 is only partial
* Could we use debconf?
* What else should we use?</pre>
</div>
<div title="UbuntuElevenTen" server.title="UbuntuElevenTen" server.page.revision="671576" server.etag="&quot;willrogers_public/UbuntuElevenTen/671576:c92ce6e072677369760a4599b0a0486cd0b65881&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120407150315" created="20111029143624" tags="linux ubuntu" _hash="50664845b773b321c9daafb28ee986aa4db37555">
<pre>Having given up on UbuntuElevenFour, I upgraded 10.10 via 11.04 to 11.10 in quick succession.  When I actually got to 11.04, the graphics thing didn't seem actually to be a problem.  The Unity desktop seems a bit slow sometimes, but it's difficult for me to determine what's actually causing the slowness.

Some programs required reinstallation:
* gnome-gmail
* spotify
* ubuntu-restricted-extras - this seems to contain flash, codecs etc.
* nautilus-dropbox

* gtk2-engines-pixbuf - this prevents warnings when you run ~GUIs from the terminal.

!!Configuration
To stop the screen locking, go to  System Settings -&gt; Screen

!!Slow switcher
I found the Unity switcher was too slow.  It's possible to disable the Unity switcher (just disable all the keys in the switcher tab) and use the CCSM version - static application switcher.  That's plenty fast enough.

!!Flash video 
I find flash video, such as iPlayer, takes a lot of CPU and becomes jerky.  I haven't figured this out yet.</pre>
</div>
<div title="DiamondPython" server.title="DiamondPython" server.page.revision="1284054" server.etag="&quot;willrogers_public/DiamondPython/1284054:24c7be7caf4db8f8b5c86a2fa0ce8348c9dbc891&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130627081447" created="20130626142719" tags="diamond python" _hash="b077152c0d46502aa8331e7d14f386c7a096557a">
<pre>Links from the wiki:
* http://www.cs.diamond.ac.uk/cgi-bin/wiki.cgi/Updating_python_modules_to_RHEL6_and_python2.7

Diamond has a pretty complex setup for its Python installations.  One of the DiamondModules is ~RHEL6-RHEL5, which simply puts the ~RHEL5 path before others.  This is the reason why the Python eggs in the ~RHEL5 locations are found before those in ~RHEL6 ones.

There is a program called python-config, which seems to tell you something about the python program used.  It uses the {{{distutils.sysconfig}}} module to query python itself.

!!Eggs
Diamond libraries are generally provided as Python eggs.  This allows management of versions.  Only if no egg is found are the regular python libraries used.

!!Questions
* Where are the default eggs available?
* In order to use a python egg, do you have to use {{{require}}}?
* Where is the default PYTHONPATH defined?
* What is the difference between {{{python}}} and {{{dls-python}}}?</pre>
</div>
<div title="CloudUbuntu" server.title="CloudUbuntu" server.page.revision="763747" server.etag="&quot;willrogers_public/CloudUbuntu/763747:1410206e9286868731f3fb1e522445903f574c65&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120628104755" created="20120628104755" tags="" _hash="28822e6171fc4233364a669df20ef1156742a4a6">
<pre>Frazer has put an Ubuntu image on the !StratusLab marketplace.

The best way I've found to connect to it is to ssh in (username will, password wp) install freenx and gnome-shell, then use NX client for Windows to connect.

* FreeNX Ubuntu instructions are here: https://help.ubuntu.com/community/FreeNX
* {{{sudo apt-get install gnome-shell}}}
* Specify GNOME in the NX client configuration</pre>
</div>
<div title="MatlabLoco" server.title="MatlabLoco" server.page.revision="1471432" server.etag="&quot;willrogers_public/MatlabLoco/1471432:fc68b720510f36740127662555fda4b989bd155d&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131021133122" created="20131018132933" tags="" _hash="adb6bacd2da4d0a3c975392865b4c84d8d5ececc">
<pre>See MatlabBasics and http://confluence.diamond.ac.uk/display/CHLP/Loco

Loco is a set of functions for Matlab used by accelerator physics.  It doesn't seem to be well-managed.  The version in SVN claims to be version 1-2, released May 2006.

The latest version I can find online is here: http://als.lbl.gov/als_physics/portmann/MiddleLayer/Release/applications/loco/.  It claims version 2-1, released 2008, but with files updated more recently than that.  It appears that Greg Portmann maintains at least MiddleLayer and Loco, whereas there is an SVN repository on Sourceforge for AcceleratorToolbox.

!!Code
There are only 19 files in the loco directory.  Three of these are less than 10 lines, 14 have between 100 and 1000, {{{loco.m}}} has 1500 and {{{locogui.m}}} 2500.  

It definitely uses several functions from AcceleratorToolbox, but I can't yet determine if it depends on MiddleLayer code as well.</pre>
</div>
<div title="NorthernLights" server.title="NorthernLights" server.page.revision="364411" server.etag="&quot;willrogers_public/NorthernLights/364411:d5f18fceaa5ce7718fed0e4a480004b1e2d643a2&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111125180309" created="20111030201612" tags="" _hash="4e78b3bd38495483588440fe401894a820804617">
<pre>Liz would like to see some northern lights.  Here are some notes on how to do it.

!!Articles
* This one from the Independent isn't very inspired: http://www.independent.co.uk/travel/europe/the-complete-guide-to-the-northern-lights-557301.html
* This one from the Guardian is a bit better: http://www.guardian.co.uk/travel/2010/nov/13/aurora-borealis-northern-lights-travel

!!Dates
Liz is free from Saturday January 28th to Sunday February 5th.  This corresponds with the Tromso Northern Lights Festival: http://www.nordlysfestivalen.no/en/forside.html.

I might be going skiing from 18th - 25th February.

!!Tromso
Near Tromso in Norway seems to be the natural place to go.  Flights are reasonable, and there is accommodation.

!!!!Flights
These are a little awkward.  SAS seems to be the only airline regularly flying to Tromso, but going from London you can't get there inside one day.  On certain days, we might be able to fly to Oslo cheaply on Ryanair (but of course suffer baggage charges) then stay in Oslo and fly to Tromso the next day for ~£90 with SAS.

The return flights are much more convenient, but still via Oslo - you can typically get back in 6 or so hours for about £140.

!!Abisko National Park
Cate mentioned Abisko, and it does look promising.  Here are some links:
* http://www.abisko.nu/vinter/englishpages/index.asp
* http://www.svenskaturistforeningen.se/en/Discover-Sweden/Facilities-and-activities/Lappland/Fjallstationer/STF-Mountain-station-Abisko/See-and-do/Trips-on-your-own-Winter-/


!!Daylight
The impression I'm getting is that we'd get about 5 hours of daylight a day, although we wouldn't see the sun for all of that.
</pre>
</div>
<div title="JGApelTalk" server.title="JGApelTalk" server.page.revision="364206" server.etag="&quot;willrogers_public/JGApelTalk/364206:34ec0df2a9018f4ca4e8787e624d72607c8bd730&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111018121936" created="20111018121936" tags="" _hash="7342d1b2227a92fac32a0491c381d5d87ab61071">
<pre>!!APEL, EMI, etc

!!!What we've got
* CE -&gt; Local DB -&gt; Publisher via messaging -&gt; Central DB -&gt; Portal
* DGAS -&gt; DGAS repositories -&gt; APEL via DB insert -&gt; Portal with APEL stuff
* ARC CE -&gt; SGAS -&gt; APEL via DB insert -&gt; Portal
* OSG -&gt; GRATIA -&gt; APEL via DB insert -&gt; Portal
* Some sites -&gt; APEL 
* All EGI VOs
* LHC VOs
* Other partner VOs
* All to the portal.
* 10^9 jobs

!!!Version 2 messaging -&gt; SSM
* Skipped over a few slides of mine.
* Other systems are moving to using the SSM
* Unicore accounting system - does it publish to us?
* IGE - Globus - GridSAFE - should it publish to us?  Does it? Are we working with them?
* Germany - will they publish to us?
* ARC but not DGAS -&gt; APEL?

!!!Other accounting
* Accept XML?
* New types of record with new DB table
* Storage accounting to come?
* How do they publish?
* Clouds, Virtualisation, Applications, Data Centre Use, MPI, Services ... ?
* What do you need to account something?
** UR, with agreement
** Gather data
** Publish data to an accounting infrastructure
** Decide on workflow
** Decide on what you want to see...</pre>
</div>
<div title="backstage.svg" server.title="backstage.svg" server.page.revision="1521885" server.etag="&quot;tiddlyspace/backstage.svg/1521885:0f08ef45bb4779e703be75b72e9f1776ff6b1a9d&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="image/svg+xml" modified="20131111192334" created="20131111192334" tags="excludeLists excludeSearch" _hash="c1cd42462c1b10a4e77a891408b9c2a24da3b2e6">
<pre>&lt;svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="100%" width="100%" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 40 40"&gt;&lt;metadata&gt;&lt;rdf:RDF&gt;&lt;cc:Work rdf:about=""&gt;&lt;dc:format&gt;image/svg+xml&lt;/dc:format&gt;&lt;dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/&gt;&lt;dc:title/&gt;&lt;/cc:Work&gt;&lt;/rdf:RDF&gt;&lt;/metadata&gt;&lt;defs&gt;&lt;linearGradient id="lG3826" x1="7.0996" gradientUnits="userSpaceOnUse" y1="18.829" gradientTransform="matrix(1.5858347,0,0,1.8078238,1098.1851,351.13716)" x2="1.5461" y2="-0.95166"&gt;&lt;stop stop-color="#000" offset="0"/&gt;&lt;stop stop-color="#9c9b99" offset="1"/&gt;&lt;/linearGradient&gt;&lt;linearGradient id="lG3828" y2="372.44" gradientUnits="userSpaceOnUse" y1="375.7" x2="1111.7" x1="1097.7"&gt;&lt;stop style="stop-color:#ac9393;" offset="0"/&gt;&lt;stop style="stop-color:#c8b7b7;" offset="1"/&gt;&lt;/linearGradient&gt;&lt;/defs&gt;&lt;g transform="translate(-1080.9375,-357.3329)"&gt;&lt;path style="stroke-width:0;stroke-miterlimit:4;fill:url(#lG3826);" d="m1080.9,357.32,39.996-0.0426-0.01,40.008c-15.507-25.519-15.36-25.95-39.988-39.965z"/&gt;&lt;path style="stroke-dashoffset:0;stroke:#7aa3be;stroke-linecap:round;stroke-miterlimit:4;stroke-width:1.49999988;fill:#c1e6fd;" d="m1091.9,363.55c6.5716-6.4925,16.576-7.3925,23.147-0.90003,6.5717,6.4925,6.5717,17.019,0,23.511-4.4424-8.6113-12.288-15.713-23.147-22.611z"/&gt;&lt;path style="stroke-dashoffset:0;stroke:#ce81b0;stroke-linecap:round;stroke-miterlimit:4;stroke-width:1.5;fill:#f4c4e2;" d="m1110.2,367.62c3.217,3.2168,3.217,8.4323,0,11.649-3.8194-4.2357-8.3307-8.1824-11.649-11.649,3.217-3.2168,8.4325-3.2168,11.649-0.00002z"/&gt;&lt;path style="stroke-linejoin:bevel;stroke:#000000;stroke-linecap:round;stroke-dasharray:none;stroke-miterlimit:4;stroke-width:0.80000001;fill:url(#lG3828);" d="m1081,357.34c18.79,6.4752,32.53,16.56,39.894,39.892-11.19-17.028-14.878-19.19-27.352-14.96,6.2984-12.098,3.9371-13.19-12.542-24.932z"/&gt;&lt;/g&gt;&lt;/svg&gt;</pre>
</div>
<div title="NumPy" server.title="NumPy" server.page.revision="1579758" server.etag="&quot;willrogers_public/NumPy/1579758:09a43d36b5d487e566d4860cb5cb3daeb493b4d6&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131206135412" created="20131205095044" tags="" _hash="a1fd391e985fbfed54c3724d98b054b997180c69">
<pre>* See also CoThread, MatPlotLib

Numpy is a numerical python library apparently inspired by Matlab.  A core concept is a numpy array, which is highly optimised.

!!Basics
* You can create an array from a sequence: {{{numpy.array(&lt;sequence&gt;)}}}.
* You can create a new array with {{{empty(shape)}}}, {{{zeros(shape)}}}, {{{ones(shape)}}}
* You can add or subtract arrays of the same shape, and multiply an array by a scalar.

!!!!Shape
In 2D arrays, the first index is the row and the second the column:
{{{
&gt;&gt;&gt; x = numpy.arange(12).reshape(3,4)
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
&gt;&gt;&gt; x[1,2]
6
}}}

You can apply functions to rows and columns by specifying the axis:
{{{
&gt;&gt;&gt; numpy.mean(x, axis=0)
array([ 4.,  5.,  6.,  7.])
&gt;&gt;&gt; numpy.mean(x, axis=1)
array([ 1.5,  5.5,  9.5])
}}}
!!Indexing
Here's the page from the documentation: http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html.
This gets a bit involved, but it is worth understanding.  Essentially, you start with a numpy array {{{x}}} and you get different parts of it depending on what you put in the square brackets.
!!!!Slicing
This extends Python's slicing {{{x[&lt;start&gt;:&lt;stop&gt;:&lt;step&gt;]}}} to more dimensions.  You have a tuple of slice objects, and the nth slice object refers to the nth dimension.  A colon is a placeholder, and means you get everything from that dimension.

{{{
&gt;&gt;&gt; x[:,1] = [1,1,1]
&gt;&gt;&gt; x
array([[ 0,  1,  0,  0],
       [ 4,  1,  7,  7],
       [ 8,  1, 10, 11]])
}}}

Unlike standard slicing of a list, slicing returns a view on the original array, which means that if you change the result, the original array changes too:
{{{
&gt;&gt;&gt; y = x[:,2]
array([ 0,  7, 10])
&gt;&gt;&gt; y[1] = 1
&gt;&gt;&gt; x
array([[ 0,  1,  0,  0],
       [ 4,  1,  1,  7],
       [ 8,  1, 10, 11]])
}}}

If you have a 2D array and ask for {{{x[0]}}}, you get the first row (i.e. it uses it as the first index).

</pre>
</div>
<div title="TiddlySpaceFollowingPlugin" server.title="TiddlySpaceFollowingPlugin" server.page.revision="1521864" server.etag="&quot;system-plugins_public/TiddlySpaceFollowingPlugin/1521864:5b0d1242c986e3ed31eef10bf4fe65249f2269b8&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="65a4f81f24d076e5c3fc66d2ff037c994c514bcd">
<pre>/***
|''Name''|TiddlySpaceFollowingPlugin|
|''Version''|0.7.1|
|''Description''|Provides a following macro|
|''Author''|Jon Robson|
|''Requires''|TiddlySpaceConfig TiddlySpaceTiddlerIconsPlugin ErrorHandler|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
!Usage
Tag a tiddler with "follow" to express a list of followers.
Using the {{{&lt;&lt;followTiddlers X&gt;&gt;}}}
will reveal the number of tiddlers with name X in the set of spaces the *current* user viewing your space follows.
{{{&lt;&lt;following jon&gt;&gt;}}} will list all the users following Jon.
{{{&lt;&lt;followers jon&gt;&gt;}}} will list all the followers of jon.
{{{&lt;linkedTiddlers&gt;&gt;}}} will list all tiddlers across TiddlySpace linked to the current tiddler
{{{&lt;linkedTiddlers follow:yes&gt;&gt;}}} will list all tiddlers across TiddlySpace that come from your list of followers
adds spaceLink view type {{{&lt;&lt;view server.bag spaceLink&gt;&gt;}}} creates a link to the space described in server.bag
{{{&lt;&lt;view server.bag spaceLink title&gt;&gt;}}} makes a link to the tiddler with title expressed in the field title in space server.bag
If no name is given eg. {{{&lt;&lt;following&gt;&gt;}}} or {{{&lt;&lt;follow&gt;&gt;}}} it will default the current user.
!StyleSheet
.followTiddlersList li {
	list-style:none;
}

.followButton {
	width: 2em;
}

.followTiddlersList li .siteIcon {
	height:48px;
	width: 48px;
}

#sidebarTabs .followers li a,
.followers .siteIcon,
.followers .siteIcon div {
	display: inline;
}

.followTiddlersList li .externalImage, .followTiddlersList li .image {
	display: inline;
}

.scanResults li {
	list-style: none;
}
!Code
***/
//{{{
(function($) {
var LIMIT_FOLLOWING = 100;

var tweb = config.extensions.tiddlyweb;
var tiddlyspace = config.extensions.tiddlyspace;
var currentSpace = tiddlyspace.currentSpace.name;

var shadows = config.shadowTiddlers;
config.annotations.ScanTemplate = "This tiddler is the default template used in the display of tiddlers founding using the tsScan macro. To access attributes use the view macro e.g. {{{&lt;&lt;view title text&gt;&gt;}}}";
shadows.ScanTemplate = "&lt;&lt;view modifier SiteIcon width:24 height:24 spaceLink:yes label:no&gt;&gt; &lt;&lt;view title link&gt;&gt;";
shadows.FollowersTemplate = "&lt;&lt;view server.bag SiteIcon width:24 height:24 spaceLink:yes label:no&gt;&gt; &lt;&lt;view server.bag spaceLink&gt;&gt;";
shadows.FollowingTemplate = "&lt;&lt;view title SiteIcon width:24 height:24 spaceLink:yes label:no&gt;&gt; &lt;&lt;view title spaceLink&gt;&gt;";
shadows.FollowTiddlersBlackList = "";
shadows.FollowTiddlersHeading = "There are tiddlers in spaces you follow using the follow tag which use the title &lt;&lt;view title text&gt;&gt;";
shadows.FollowTiddlersTemplate = ["* &lt;&lt;view server.space SiteIcon width:24 height:24 spaceLink:yes label:no&gt;&gt; ",
	"&lt;&lt;view server.space spaceLink title external:no&gt;&gt; modified by &lt;&lt;view modifier spaceLink&gt;&gt; ",
	"in the &lt;&lt;view server.space spaceLink&gt;&gt; space (&lt;&lt;view modified date&gt;&gt; @ &lt;&lt;view modified date 0hh:0mm&gt;&gt;).\n"].join("");

var name = "StyleSheetFollowing";
shadows[name] = "/*{{{*/\n%0\n/*}}}*/".
	format(store.getTiddlerText(tiddler.title + "##StyleSheet"));
store.addNotification(name, refreshStyles);

// provide support for sucking in tiddlers from the server
tiddlyspace.displayServerTiddler = function(src, title, workspace, callback) {
	var adaptor = store.getTiddlers()[0].getAdaptor();
	var localTitle = tiddlyspace.getLocalTitle(title, workspace);
	var tiddler = new Tiddler(localTitle);
	tiddler.text = "Please wait while this tiddler is retrieved...";
	tiddler.fields.doNotSave = "true";
	store.addTiddler(tiddler);
	src = story.displayTiddler(src || null, tiddler.title);
	tweb.getStatus(function(status) {
		var context = {
			host: tweb.host, // TODO: inherit from source tiddler?
			workspace: workspace,
			headers: { "X-ControlView": "false" }
		};
		var getCallback = function(context, userParams) {
			var tiddler = context.tiddler;
			tiddler.title = localTitle;
			store.addTiddler(tiddler);
			story.refreshTiddler(localTitle, null, true); // overriding existing allows updating
			if(callback) {
				callback(src, tiddler);
			}
		};
		adaptor.getTiddler(title, context, null, getCallback);
	});
};

tiddlyspace.scroller = {
	runHandler: function(title, top, bottom, height) {
		var i;
		var handlers = tiddlyspace.scroller.handlers;
		var tidEl = story.getTiddler(title);
		if(tidEl) {
			var topEl = $(tidEl).offset().top + 20;
			if(top === false || (topEl &gt; top &amp;&amp; topEl &lt; bottom)) {
				var h = handlers[title];
				for(i = 0; i &lt; h.length; i++) {
					h[i]();
				}
				tiddlyspace.scroller.clearHandlers(title);
			}
		} else {
			tiddlyspace.scroller.clearHandlers(title);
		}
	},
	clearHandlers: function(title) {
		tiddlyspace.scroller.handlers[title] = [];
	},
	registerIsVisibleEvent: function(title, handler) {
		tiddlyspace.scroller.handlers[title] = tiddlyspace.scroller.handlers[title] || [];
		tiddlyspace.scroller.handlers[title].push(handler);
	},
	init: function() {
		this.handlers = {};
		this.interval = window.setInterval(function() {
			var top = $(window).scrollTop();
			var height = $(window).height();
			var bottom = top + height;
			var title;
			for(title in tiddlyspace.scroller.handlers) {
				if(title) {
					tiddlyspace.scroller.runHandler(title, top, bottom, height);
				}
			}
		}, 2000); // every 2 seconds check scroll position
	}
};
tiddlyspace.scroller.init();

var followMacro = config.macros.followTiddlers = {
	locale: {
		followListHeader: "Here are tiddlers from spaces you follow using the follow tag which use this title.",
		noTiddlersFromFollowers: "None of the spaces you follow contain a tiddler with this name.",
		errorMessage: "There was a problem retrieving tiddlers from the server. Please try again later."
	},
	init: function() {
		followMacro.lookup = {};
	},
	followTag: "follow",
	getHosts: function(callback) {
		tweb.getStatus(function(status) {
			callback(tweb.host, tiddlyspace.getHost(status.server_host, "%0"));
		});
	},
	getBlacklist: function() {
		return store.getTiddlerText("FollowTiddlersBlackList").split("\n");
	},
	handler: function(place, macroName, params, wikifier, paramString, tiddler) {
		var args = paramString.parseParams("anon")[0];
		var containingTiddler = story.findContainingTiddler(place).getAttribute('tiddler');
		var title = (args.anon &amp;&amp; args.anon[0]) || tiddler.fields["server.title"] || tiddler.title;
		var tid = store.getTiddler(title);
		var user = params[1] || false;
		if(tid) {
			followMacro.makeButton(place, {
				url: "/search?q=title:%22" + encodeURIComponent(title) + "%22",
				containingTiddler: containingTiddler,
				blacklisted: followMacro.getBlacklist(), title: title, user: user,
				consultFollowRelationship: (args.follow &amp;&amp;
					args.follow[0] === 'false') ? false : true });
		}
	},
	makeButton: function(place, options) { // this is essentially the same code in TiddlySpaceFollowingPlugin
		var title = options.title;
		var blacklisted = options.blacklisted;
		var tiddler = store.getTiddler(title);
		var btn = $('&lt;div class="followButton" /&gt;').addClass("notLoaded").appendTo(place)[0];
		if(blacklisted.contains(title)) {
			$(btn).remove();
			return;
		} else {
			var user = options.user;
			window.setTimeout(function() { // prevent multiple calls due to refresh
				tiddlyspace.scroller.registerIsVisibleEvent(options.containingTiddler, function() {
					var mkButton = function(followers, ignore) {
						if(!followers &amp;&amp; !ignore) {
							$(btn).remove();
						} else {
							$("&lt;a /&gt;").appendTo(btn);
							var scanOptions = { url: options.url,
								spaceField: options.spaceField || "bag", template: null, sort: "-modified",
								callback: function(tiddlers) {
									$(btn).removeClass("notLoaded");
									followMacro.constructInterface(btn, tiddlers);
								}
							};
							if(!ignore) {
								scanOptions.showBags = followMacro._getFollowerBags(followers);
							}
							scanOptions.hideBags = [tiddler.fields["server.bag"]];
							scanMacro.scan(null, scanOptions, user);
						}
					};
					if(options.consultFollowRelationship) {
						followMacro.getFollowers(mkButton);
					} else {
						mkButton([], true);
					}
				});
			}, 1000);
		}
	},
	constructInterface: function(container, tiddlers) {
		var txt = tiddlers.length;
		var className = txt &gt; 0 ? "hasReplies" : "noReplies";
		var el = $(story.findContainingTiddler(container));
		$(container).empty().addClass(className);
		var btn = $("&lt;a /&gt;").addClass("followedTiddlers").text(txt).
			click(function(ev) {
				followMacro.followingOnClick(ev);
			}).appendTo('&lt;div class="followedTiddlers" /&gt;').appendTo(container)[0];
		$.data(btn, "tiddlers", tiddlers);
	},
	followingOnClick: function(ev) {
		var target = ev.target;
		var locale = followMacro.locale;
		var el = $('&lt;div class="followTiddlersList" /&gt;')[0];
		var popup = Popup.create(target,"div");
		$(popup).addClass("taggedTiddlerList followList").click(function(ev) { // make it so only clicking on the document outside the popup removes the popup
			if(ev.target.parentNode != document) {
				ev.stopPropagation();
			}
		}).append(el);
		var tiddlers = $.data(target, "tiddlers") || [];
		scanMacro.template(el, tiddlers.slice(0,1), "FollowTiddlersHeading");
		scanMacro.template(el, tiddlers, "FollowTiddlersTemplate");
		if(tiddlers.length === 0) {
			$("&lt;li /&gt;").text(locale.noTiddlersFromFollowers).appendTo(el);
		}
		Popup.show();
		ev.stopPropagation();
		return popup;
	},
	_getFollowerBags: function(followers) { // XXX: private or not?
		return $.map(followers, function(name, i) {
			return name != currentSpace ? "%0_public".format(name) : null;
		});
	},
	getFollowers: function(callback, username) {
		// returns a list of spaces being followed by the existing space
		var followersCallback = function(user) {
			if(!user.anon) {
				scanMacro.scan(null, { 
					url: "/search?q=bag:%0_public tag:%1 _limit:%2".format(user.name, followMacro.followTag, LIMIT_FOLLOWING),
					spaceField: "title", template: null, cache: true,
					callback: function(tiddlers) {
						var followers = [];
						for(var i = 0; i &lt; tiddlers.length; i++) {
							followers.push(tiddlyspace.resolveSpaceName(tiddlers[i].title));
						}
						callback(followers);
					}
				});
			} else {
				callback(false);
			}
		};
		return !username ? tweb.getUserInfo(followersCallback) : followersCallback({ name: username });
	}
};

var scanMacro = config.macros.tsScan = {
	init: function () {
		this.scanned = {};
	},
	_tiddlerfy: function(jsontiddlers, options) {
		var tiddlers = [];
		var spaceField = options.spaceField || "bag"; // TODO: phase out use view types instead
		$.each(jsontiddlers, function(i, t) {
			var use = false;
			if(!options.showBags || (options.showBags &amp;&amp; options.showBags.contains(t.bag))) {
				use = true;
			}
			if(options.hideBags &amp;&amp; options.hideBags.contains(t.bag)) {
				use = false;
			}
			if(use) {
				var spaceName = t[spaceField];
				var tiddler = config.adaptors.tiddlyweb.toTiddler(t, tweb.host);
				tiddler.fields["server.space"] = tiddlyspace.resolveSpaceName(spaceName);
				tiddlers.push(tiddler);
			}
		});
		return tiddlers;
	},
	_scanCallback: function(place, jsontiddlers, options) {
		var locale = followersMacro.locale;
		var tiddlers = scanMacro._tiddlerfy(jsontiddlers, options);
		
		if(options.sort) {
			tiddlers = store.sortTiddlers(tiddlers, options.sort);
		}
		if(options.filter) {
			var _store = new TiddlyWiki();
			config.lastStore = _store;
			for(var i = 0; i &lt; tiddlers.length; i++) {
				var clone = tiddlers[i];
				clone.title = tiddlyspace.getLocalTitle(clone.title, clone.fields['server.workspace']);
				_store.addTiddler(clone);
			}
			tiddlers = _store.filterTiddlers(options.filter);
		}
		if(place) {
			$(place).empty();
			var list = $("&lt;ul /&gt;").appendTo(place)[0];
			scanMacro.template(list, tiddlers, options.template);
			if(tiddlers.length === 0) {
				$("&lt;li /&gt;").text(options.emptyMessage || locale.noone).appendTo(list);
				$(list).addClass("emptyList");
			}
		}
		if(options.callback) {
			options.callback(tiddlers);
		}
	},
	constructSearchUrl: function(host, options) {
		if(options.url) {
			return options.url;
		}
		var inputs = options.searchValues;
		var tag = options.tag;
		var searchField = options.searchField || "title";
		var searchQuery = [];
		for(var i = 0; i &lt; inputs.length; i++) {
			searchQuery.push('%0:"%1"'.format(searchField, inputs[i]));
		}
		var query = searchQuery.join(" OR ");
		query = tag ? "(%0) AND tag:%1".format(query, tag) : query;
		query = options.query ? "%0;%1;".format(query, options.query) : query;
		query = options.fat ? "%0&amp;fat=1".format(query) : query;
		return '%0/search?q=%1'.format(host, query);
	},
	scan: function(place, options) { // TODO: make use of list macro with url filter
		var locale = followersMacro.locale;
		options.template = options.template ? options.template : "ScanTemplate";
		followMacro.getHosts(function(host, tsHost) {
			$(place).text(followersMacro.locale.pleaseWait);
			options = options ? options: {};
			var url = scanMacro.constructSearchUrl(host, options);
			if(options.cache &amp;&amp; scanMacro.scanned[url]) {
				var tiddlers = scanMacro.scanned[url].tiddlers;
				var run = function(tiddlers) {
					scanMacro._scanCallback(place, tiddlers, options);
				};
				if(tiddlers) {
					run(tiddlers);
				} else {
					scanMacro.scanned[url].callbacks.push(run);
				}
			} else {
				var callback = function(tiddlers) {
					scanMacro._scanCallback(place, tiddlers, options);
				};
				if(scanMacro.scanned[url] &amp;&amp; scanMacro.scanned[url].callbacks) {
					scanMacro.scanned[url].callbacks.push(callback);
				} else {
					scanMacro.scanned[url] = {
						callbacks: [callback]
					};
				}
				ajaxReq({
					url: url,
					dataType: "json",
					success: function(tiddlers) {
						scanMacro.scanned[url].tiddlers = tiddlers;
						var callbacks = scanMacro.scanned[url].callbacks;
						while(callbacks.length &gt; 0) {
							callbacks.pop()(tiddlers);
						}
					},
					error: function(xhr) {
						$(place).empty();
						$("&lt;span /&gt;").addClass("annotation error").text(locale.error.format(xhr.status)).appendTo(place);
					}
				});
			}
		});
	},
	template: function(place, tiddlers, template) { // TODO: make use of list macro.
		for(var i = 0; i &lt; tiddlers.length; i++) {
			var tiddler = tiddlers[i];
			var item = $('&lt;li class="spaceName" /&gt;').appendTo(place)[0];
			var spaceName = tiddler.fields["server.space"] || "";
			var templateText = store.getTiddlerText(template).replace(/\$1/mg, spaceName);
			wikify(templateText, item, null, tiddler);
		}
	},
	getOptions: function(paramString, tiddler) {
		var args = paramString.parseParams("name", null, true, false, true)[0];
		var options = { query: false, sort: false, tag: false, template: false, showBags: args.show || false,
			hideBags: args.hide || false, filter: false, spaceField: "bag", searchField: "title", fat: false,
			emptyMessage: false };
		for(var name in args) {
			if(name != "name") {
				if(name == "fat") {
					options[name] = true;
				} else {
					options[name] = args[name][0];
				}
			}
		}
		// if user has set searchField to modifier, then use the modifiers value if available otherwise use searchValues.
		var searchField = options.searchField;
		var searchValues = args[searchField] ? args[searchField] : args.searchValues;
		// if neither of those were used use the first parameter
		var defaultValues = tiddler ? [ tiddler.title ] : [];
		options.searchValues = searchValues ? searchValues : ( args.name ? [args.name[0]] : defaultValues);
		return options;
	},
	handler: function(place, macroName, params, wikifier, paramString, tiddler) {
		var container = $("&lt;div /&gt;").addClass("scanResults resultsArea").appendTo(place)[0];
		var options = scanMacro.getOptions(paramString, tiddler);
		scanMacro.scan(container, options);
	}
};

var followersMacro = config.macros.followers = {
	locale: {
		loggedOut: "Please login to see the list of followers",
		noSupport: "We were unable to retrieve followers as your browser does not support following.",
		pleaseWait: "Please wait while we look this up...",
		error: "Error %0 occurred whilst retrieving data from server",
		noone: "None."
	},
	handler: function(place, macroName, params, wikifier, paramString, tiddler) {
		var locale = followersMacro.locale;
		var args = paramString.parseParams("name", null, true, false, true)[0];
		var username = args.name ? args.name[0] : false;
		var container = $('&lt;div class="followers" /&gt;').text(locale.pleaseWait).
			appendTo(place)[0];
		var followersCallback = function(user) {
			if(user.anon) {
				$("&lt;span /&gt;").text(locale.loggedOut).appendTo(container);
			} else {
				var options = scanMacro.getOptions(paramString);
				$.extend(options, {
					url: "/search?q=title:@%0 OR title:%0 tag:%1 _limit:%2".
						format(user.name, followMacro.followTag, LIMIT_FOLLOWING),
					spaceField: "bag",
					template: options.template ? options.template : "FollowersTemplate"
				});
				scanMacro.scan(container, options);
			}
		};
		return !username ? followersCallback({ name: currentSpace }) : followersCallback({ name: username });
	}
};

var followingMacro = config.macros.following = {
	locale: {
		pleaseWait: followersMacro.locale.pleaseWait,
		loggedOut: "Please login to see who you are following",
		noSupport: followersMacro.locale.noSupport,
		error: followersMacro.locale.error,
		noone: followersMacro.locale.noone
	},
	handler: function(place, macroName, params, wikifier, paramString, tiddler) {
		var locale = followingMacro.locale;
		var args = paramString.parseParams("name", null, true, false, true)[0];
		var fat = args.fat ? true : false;
		var username = args.name ? args.name[0] : false;
		var container = $('&lt;div class="following" /&gt;').text(locale.pleaseWait).
			appendTo(place)[0];
		var followingCallback = function(user) {
			if(user.anon) {
				$("&lt;span /&gt;").text(locale.loggedOut).appendTo(container);
			} else {
				var options = scanMacro.getOptions(paramString);
				$.extend(options, {
					url: "/search?q=bag:%0_public tag:%1 _limit:%2".format(user.name, followMacro.followTag, LIMIT_FOLLOWING),
					spaceField: "title",
					template: options.template ? options.template : "FollowingTemplate"
				});
				scanMacro.scan(container, options);
			}
		};
		return !username ? followingCallback({ name: currentSpace }) : followingCallback({ name: username });
	}
};

var linkedMacro = config.macros.linkedTiddlers = {
	handler: function(place, macroName, params, wikifier, paramString, tiddler) {
		var args = paramString.parseParams("anon")[0];
		var title = params[0] || tiddler.fields["server.title"] || tiddler.title;
		var tid = store.getTiddler(title);
		var containingTiddler = story.findContainingTiddler(place).getAttribute('tiddler');
		if(tid) {
			followMacro.makeButton(place, {
				spaceField: "recipe",
				url: "/bags/%0/tiddlers/%1/backlinks".format(tid.fields['server.bag'],
					encodeURIComponent(tid.title)),
				blacklisted: followMacro.getBlacklist(),
				title: title,
				containingTiddler: containingTiddler,
				user: params[1] || false,
				consultFollowRelationship: args.follow ? true : false });
		}
	}
};

if(config.options.chkFollowTiddlersIsLinkedTiddlers) {
	merge(config.macros.followTiddlers, config.macros.linkedTiddlers);
	config.shadowTiddlers.FollowTiddlersHeading = "These are the other tiddlers that link to this tiddler.";
}

})(jQuery);
//}}}</pre>
</div>
<div title="PylintProfile" server.title="PylintProfile" server.page.revision="1012651" server.etag="&quot;willrogers_public/PylintProfile/1012651:79d7ea2f698b720e06dae8fbd55f9f1ab9c18844&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130103133839" created="20130103133817" tags="pylint python" _hash="cd64c9e8234a03b5f0c631bfbbd41dcd701f66b7">
<pre>These are the customisations I'm using:

{{{
--report n  # wrong order?
--max-line-length=100
--attr-rgx=[a-z_][a-z0-9_]{0,30}$
--variable-rgx=[a-z_][a-z0-9_]{0,30}$
--good-names=i,j,k,e,_,log
--dummy-variables-rgx=unused
--disable=E1103 # Lots of false positives where it thinks things are lists.
}}}</pre>
</div>
<div title="PythonPackages" server.title="PythonPackages" server.page.revision="1481894" server.etag="&quot;willrogers_public/PythonPackages/1481894:ccd6c6f2dfd7bd9fd2dea8fa35628b75565be254&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131025110729" created="20110615144900" tags="package python" _hash="f3f8e49fbab228a29d0cd23695c81feaa19ad371">
<pre>There's a page in the python tutorial on this: http://docs.python.org/tutorial/modules.html.

To find out what version of a library you're using, you should be able to use {{{&lt;libname&gt;.__version__}}}.

There's a special variable {{{__name__}}} which usually contains the name of the module.  So for {{{simple_example.py}}} its {{{__name__}}} will be {{{simple_example}}}.  The exception to this is if the script has been run directly, in which case {{{__name__}}} is {{{"__main__"}}}.  This leads to the common idiom:
{{{
if __name__ == "__main__":
    run_main_process()
}}}

!!Packages
You can make a directory a python package by putting an {{{__init__.py}}} file inside it.  You can then import the relevant modules within that package by:
{{{
import &lt;package&gt;.&lt;module&gt;
}}}
To avoid typing the whole package string, you can import a module or object directly:
{{{
from &lt;package&gt; import &lt;module&gt;
}}}

{{{sys.modules}}} is a dict of all the modules imported since python started: name: object.

!!Linux library installations
One notable thing is that python libraries have to be installed per python version.  So there'll be different packages for python 2.4, 2.6 and 3.1, just to change the place where they are installed.

There may be differences in the libraries as well, but not necessarily.

!!Distributing packages
This just seems to be a bit of a mess for python - it's the only thing I've found which seems painful to work with for python.

The original tool for this was {{{distutils}}}.  People quickly found out that it had some flaws, but fixing these hasn't been particularly straightforward.  There's a summary of the current state of affairs on this page: http://guide.python-distribute.org/introduction.html, but in other places you'll find slightly different versions.  The main players:

* {{{distutils}}} - the original, widely accepted to be flawed
* {{{setuptools}}} - this was the installation program that went along with distutils and is also being phased out.  It includes the {{{easy_install}}} command
* {{{distutils2}}} - this intends to fix all the problems with distutils, but seems to be coming along slowly.  It will be default by python 3.3
* {{{Distribute}}} - this includes a better version of setuptools
* {{{pip}}} - this seems to be the long-term replacement for setuptools, and possibly also Distribute, but this is not clear

The above page says that the current recommendation for a developer is to use either {{{distutils}}} (despite its flaws) or {{{Distribute}}} until {{{distutils2}}} is complete.</pre>
</div>
<div title="EmiQA" server.title="EmiQA" server.page.revision="656863" server.etag="&quot;willrogers_public/EmiQA/656863:b39ef2a20568f47e5e26780b8c11e60d5392c710&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120328143839" created="20120328141247" tags="" _hash="377b57ce7c30e4848648f265192f399bf318281b">
<pre>!!EMI Quality Assurance

* QA Policies are defined and monitored
* Metrics and KPIs are defined and collected
* 

!!EMI Release Cycle
* Requirements from PTB and users
* Development and test plans
* Development and testing
* Certification
* Release, maintenance and support

!!EMI Test Infrastructure
* Release deployment tests
* Inter-component tests
** Increased scope of testing
** Bug fix and workaround verification
* Large Scale &lt;something&gt; tests
* 180 machines
* 7 sites
* Monitoring, Specific VO, Support via GGUS
* Docs: https://twiki.cern.ch/twiki/bin/view/EMI/TestBed
* In EMI2, SL5, SL6, Debian6
* We don't have continuous integration - too much manual intervention
* Instead, defined a list of tests, and carried them out at some point
* The products themselves don't have common test infrastructures:
** Jenkins
** Atlassian Bamboo
** Home-made
** Others

!!EMI Certification Process
* Testing in isolation by product team
* Release candidate deployed on EMI testing infrastructure
* Inter-component testing 
* -&gt; release</pre>
</div>
<div title="BitwiseOperators" server.title="BitwiseOperators" server.page.revision="363767" server.etag="&quot;willrogers_public/BitwiseOperators/363767:79e239116c239a3030f82b496320b5cbada694fa&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111124140226" created="20111124135545" tags="" _hash="69f2b1edb32389482d77c57e936c5da1dd201148">
<pre>These are really simple, so I don't know why I've puzzled about them before.  You just write the integers in binary, then execute on each pair of digits in turn.  The following examples are from python.  
The operators are:
* | - bitwise or
* &amp; - bitwise and
* ^ - bitwise exclusive or 
* x &lt;&lt; n - shift bits of x left: equivalent to multiplying by 2 to the power n
* x &gt;&gt; n - shift bits of x right.  The right-most digit is discarded
* ~x - invert all the bits of x: the effect in python is -(x+1), but this is the only bit I don't understand fully

So:
{{{
0 =&gt; 00 
1 =&gt; 01
2 =&gt; 10
3 =&gt; 11
4 =&gt; 100

1 &amp; 2 -&gt; 00 -&gt; 0
2 | 4 -&gt; 110 -&gt; 6
2 ^ 4 -&gt; 110 -&gt; 6
3 ^ 2 -&gt; 01 -&gt; 1
~3 -&gt; ...11100 -&gt; -4   # what's the difference between this and ~11?

2 &lt;&lt; 2 -&gt; 1000 -&gt; 8
6 &gt;&gt; 2 -&gt; 1 -&gt; 1
}}}</pre>
</div>
<div title="GchqPuzzles" server.title="GchqPuzzles" server.page.revision="364053" server.etag="&quot;willrogers_public/GchqPuzzles/364053:8fd2a9e2324a6a08be8d15061a4de73afe43a2c9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110529182016" created="20110423095919" tags="gchq puzzles" _hash="0188e0606338ef1cc9a8928ccb2201b9dc9cc917">
<pre>The puzzles are here: http://www.gchq.gov.uk/challenges/

One of the puzzles involve some codes, and I wrote some python to decode:
CodePython

The answer is as follows:
THESEMESSAGESTELLYOUWHATTHECODEWORDISALLBUTONEGIVESYOUTHREEDIGITSTHEFIRSTTWOARECOORDINATESOFWHERETOPUTTHETHIRDINANINEBYNINEGRIDWHENYOUHAVEALLSEVENTEENDIGITSSOLVETHESUDOKUTHEEIGHTEENTHANSWERISNINELETTERSWHICHYOUUSETOREPLACEONETONINEINTHEGLODYOUWILLTHENSEETHECODEWORDINTHEMIDDLE


The final solution seems to involve a sudoku.  I think I'll write some python to solve sudokus, too.
SudokuPython
[Though in practice I don't really have time.]

</pre>
</div>
<div title="PastAddresses" server.title="PastAddresses" server.page.revision="1162846" server.etag="&quot;willrogers_private/PastAddresses/1162846:338c8df72d4d97862b41476eb05a13b02cef22cc&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20130327213414" created="20120115165212" tags="" _hash="2a3806d70d228b2c1a665684916959f158757ab1">
<pre>Certain things require the past three years' addresses.  May as well get them right.

Before May 2009, I was living at Sinope.

| Start | End | Address | Postcode |
| May 2009 | August 2010 | 274 Abingdon Rd, Oxford | ~OX1 4TA |
| August 2010 | October 2010 | 10 Loder Rd, Harwell, Didcot, Oxfordshire | ~OX11 0HR |
| October 2010 | March 2011 | 118 Green Close, Didcot, Oxfordshire | ~OX11 8TB |
| March 2011 | 9th March 2012 | 55A Aston St, Oxford | ~OX4 1EW |
| 9th March 2012 | August 2012 | BF, 223A Iffley Rd, Oxford | ~OX4 1SQ |
| August 2012 | Now | 90 Cardigan Rd, Reading | ~RG1 5QW |</pre>
</div>
<div title="moreCommand" server.title="moreCommand" server.page.revision="1521923" server.etag="&quot;system-images_public/moreCommand/1521923:2528a2182f7bde086f0b094e9076108a7b9203ba&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-images_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-images_public" server.permissions="read" server.content-type="image/svg+xml" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="83f02e8680765ba08fd5764a7627f51cdd4b7f0d">
<pre>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" viewBox="434 218 68 68"
width="30" height="30"&gt;
&lt;g stroke="none" stroke-opacity="1" stroke-dasharray="none" fill="none" fill-opacity="1"&gt;
	&lt;g&gt;
		&lt;path d="M 478.39694 232.53705 L 478.39694 232.53705 
		C 477.1145 231.85132 475.77875 231.30147 474.41058 230.88734 L 474.41058 218.24994 L 461.58942 218.24994 
		L 461.58942 230.88734 C 460.22125 231.30147 458.8855 231.85132 457.60306 232.53705 L 448.66824 223.60214 
		L 439.6022 232.66814 L 448.53717 241.60304 C 447.8515 242.8854 447.30157 244.22116 446.88745 245.58936 
		L 434.25 245.58936 L 434.25 258.41052 L 446.88745 258.41052 
		C 447.30157 259.77869 447.8515 261.11447 448.53717 262.39688 L 439.6022 271.33173 L 448.66824 280.3978 
		L 457.60306 271.46283 C 458.8855 272.14862 460.22125 272.69846 461.58942 273.11252 L 461.58942 285.74988 
		L 474.41058 285.74988 L 474.41058 273.11252 C 475.77875 272.69846 477.1145 272.14862 478.39694 271.46283 
		L 487.33176 280.3978 L 496.39767 271.33173 L 487.46286 262.39688 
		C 488.14853 261.11447 488.69836 259.77869 489.11255 258.41052 L 501.74988 258.41052 L 501.74988 245.58936 
		L 489.11255 245.58936 C 488.69836 244.22116 488.14853 242.8854 487.46286 241.60304 L 496.39767 232.66814 
		L 487.33176 223.60214 Z M 475.3328 244.66714 C 479.3825 248.71698 479.3825 255.2829 475.3328 259.33273 
		C 471.28296 263.3826 464.71704 263.3826 460.66724 259.33273 
		C 456.61737 255.2829 456.61737 248.71698 460.66724 244.66714 
		C 464.71704 240.61734 471.28296 240.61734 475.3328 244.66714" fill="#111"
		class="glyph"/&gt;
	&lt;/g&gt;
&lt;/g&gt;
&lt;/svg&gt;</pre>
</div>
<div title="SqlSyntax" server.title="SqlSyntax" server.page.revision="1018743" server.etag="&quot;willrogers_public/SqlSyntax/1018743:58ff5c7ebf9524b8117b3b99bd670b31699ecbae&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130108163854" created="20120312164938" tags="sql" _hash="4fb6c69f34171c26663b1832787d445984d37dd3">
<pre>!!SQL syntax

* SqlNull
* SqlFunctions

Both of these work fine (different types of quotes):
{{{
insert into RepublishInfo values ('2011-01-01', '00:00:00', NULL);
}}}
{{{
insert into RepublishInfo values ("2011-01-01", "00:00:00", NULL);
}}}

Delete everything from a table, keeping the table structure:
{{{
delete from LcgRecords;
}}}

{{{
select LocalJobID, Site from JobRecords where ScalingFactor = '1200';
}}}
Timestamps:
{{{
select * from JobRecords where UpdateTime &gt; '2011-07-27 14:00:00';
}}}
All the records updated today:
{{{
select * from JobRecords where date(UpdateTime) = date(now());
}}}

{{{
update JobRecords set ServiceLevel = ServiceLevel * 4, ServiceLevelType = "Si2k" where ServiceLevelType = "HEPSPEC";
}}}
You can use {{{where &lt;field&gt; between &lt;value1&gt; and &lt;value2&gt;}}} as well.
Use the IN keyword to match more than one item in a where clause, either in a list or another query:
{{{
select count(*) from UserCPU where ExecutingSite not in ("CERN-PROD", "GRIF", "FI_HIP_T2", "NO-NORGRID-T2");
mysql&gt; select distinct Site from VSummaries where Site not in (select name from OSGSites);
}}}

You can use AS to give tables or columns simpler names.

UNION will give distinct results from the two select queries.
{{{
select name from Employees1 union select name from Employees2;
}}}

!!NULL

!!Joins
{{{
select &lt;columns&gt; from &lt;table1&gt; &lt;JOIN-TYPE&gt; &lt;table2&gt; ON &lt;table1.col1&gt;=&lt;table2.col2&gt;
}}}
!!!!Types of join
* INNER JOIN - rows where there is a match in both tables
** So you only get examples where there is complete data
* LEFT JOIN - return all rows from the left table whether or not there is a match in the right table
** So there might be empty fields where we couldn't get some information from the right 
* RIGHT JOIN - like left but the other way round
** I read a note that RIGHT JOINs are rarely used, because LEFT JOINs are more efficient and you could just reword a LEFT JOIN instead
* FULL JOIN or FULL OUTER JOIN - all rows from both.
** These are rarely used and are not implemented in ~MySQL, though you can emulate them.

I wanted to get all the records in one table which had sites which were in another table.
{{{
select * from VSumCPU where ExecutingSite in (select name from OSGSites);
}}}

!!Boolean stuff

* {{{select name from DNs where id = 11;}}} - gets one result
* {{{select name from DNs where id = 11 or 0;}}} - gets one result because '0' evaluates to false
* {{{select name from DNs where id = 11 and 0;}}} - gets nothing because '0' evaluates to false
* {{{select name from DNs where id = 11 or 1;}}} - gets everything in the table because '1' evaluates to true
* {{{select name from DNs where id = 11 or id = 0;}}} - gets two results

!!Wild cards
You can use the following wildcards with LIKE:
* % - matches any string
* _ - matches any single character
* [abc] matches a, b, or c - not in mysql
* [^abc] matches anything but a, b, or c - not in mysql
You can escape these with a backslash.  LIKE is not case-sensitive.

MySQL has extended regexp, which you can use with RLIKE and NOT RLIKE.

!!Creating tables
{{{
create table &lt;name&gt; (
&lt;col1&gt; &lt;datatype&gt;,
&lt;col2&gt; &lt;datatype&gt;,
...
)
}}}
!!!!Constraints
* NOT NULL - can't have NULL values
* UNIQUE - can't have two fields with the same value 
** can have more than one per table
* PRIMARY KEY - unique identifier, which cannot be NULL
** only one per table
* FOREIGN KEY - directs to a primary key in another table, and ensures that you can't have invalid data in the column which is supposed to refer to that other table
* CHECK - allows you to place a constraint on a value in the database (e.g. greater than 0)
* DEFAULT - puts a default value in a column if it's not specified

!!Indices 
Creating an index on a table allows you to speed up searches and queries, but it means that it takes longer to update the table.  You can remove an index using {{{DROP INDEX &lt;indexname&gt;}}}.</pre>
</div>
<div title="PythonBoolean" server.title="PythonBoolean" server.page.revision="891612" server.etag="&quot;willrogers_public/PythonBoolean/891612:0ec13e0bc8ce68e8b5e81e40706a437299e47bed&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120926203703" created="20120925203326" tags="" _hash="0d53ec28f8b9ed2420db07d423786fdfd1d21c5d">
<pre>The raw boolean types True and False are relatively recent.  Before that, and still now:

| ''False'' | ''True'' |
| 0 | any other number |
| "" | any other string |
| [] | any other list |
| () | any other tuple |
| {} | any other dict |

!!{{{and}}} and {{{or}}}
{{{
&gt;&gt;&gt; 'a' and 'b'         
'b'
&gt;&gt;&gt; '' and 'b' 
''
&gt;&gt;&gt; 'a' and 'b' and 'c'
'c'
&gt;&gt;&gt; 'a' or sidefx()
'a'
}}}
* {{{and}}} returns the first false object
* if none are false, {{{and}}} returns the last object
* {{{or}}} returns the first true object
* if none are true, {{{or}}} returns the last object
* the function sidefx() isn't called, because {{{or}}} returns 'a' immediately
</pre>
</div>
<div title="CvsNotes" server.title="CvsNotes" server.page.revision="675014" server.etag="&quot;willrogers_public/CvsNotes/675014:03aab5d3ab421e42cc3901d4eda6b5ec22baaa9d&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120411153040" created="20111104155712" tags="apel cvs" _hash="c872a90c86fbcb8c245aebc57abd7ad65f66980f">
<pre>!CVS

See also SvnNotes.

I've used SVN since I started at RAL, but the APEL client source code is in CVS.  My instinctive reaction, partly because I've heard a number of things about how SVN is a big improvement on CVS, is to bury my head in the sand and muddle through.  It would be wise to migrate the CVS repo to SVN anyway, since the CERN CVS service is scheduled to be shut down.  

In the meantime, however, I have to work with CVS for editing the client code, so I should do it properly.  The defiinitive book, like SVN, is available online here: http://cvsbook.red-bean.com/cvsbook.html.

!!Checking out code
This works a little differently to SVN.  You need to specify a 'CVSROOT', which tells CVS where to look for the code.  There are also a number of ways of authenticating, but the one that works for me is SSH - this is presumably according to the key in my Ubuntu VM, which I'll need to copy if I want to check it out from elsewhere.

So this is how I do it:
{{{
export CVSROOT=:ext:wrogers@isscvs.cern.ch:/local/reps/jra1mw
export CVS_RSH=ssh
cvs co org.glite.apel.core
}}}

!!!Checking out a tag
{{{
cvs checkout -r glite-apel-publisher_R_2_0_14_0 org.glite.apel.core
}}}

!!Working with code
A lot of CVS commands are the same or similar to those in SVN.  So:
{{{
cvs ci -m 'This is a commit'
}}}

[[You can't delete directories without admin rights.|http://stackoverflow.com/questions/204991/remove-empty-directory-from-cvs]].

!!Status
I found the output from {{{cvs status}}} a bit confusing.  It seems to go through file by file to tell you that they're up to date, whereas {{{svn status}}} will only tell you if something has changed.  I found this snippet:
* {{{cvs status 2&gt;&amp;1 | egrep "(^\? |Status: )" | grep -v Up-to-date}}}
The author claims that it will show all updated, added and deleted files, and any that CVS doesn't know about.

{{{cvs diff}}} is similar to {{{svn diff}}}, but to make it clearer you probably want {{{cvs diff -c}}}, which gives you a couple of lines each side of the changes as in SVN.

!!Tagging
This is how I got on to the whole topic, because I needed to make a tag for the publisher release.  Tagging in SVN is simple, because there's no magic - you copy the trunk to the tags directory, and promise never to touch it again.  Tags are built into CVS, so there's no tags directory; they are kept more like by magic.

To make a tag, do as follows:
{{{
cvs tag &lt;tag-name&gt;
}}}
You can also use dates as a tag, so you can go back to a particular point in time.  But to go to a tag, you use (I think) {{{cvs update}}}, which seems slightly counter-intuitive.  I think this may actually be present in SVN as well, though.

!!!Sticky tags
This is another slightly complicated part which I don't think was carried through to SVN.  Or it might be quite simple but the name is confusing.

!!Branches
I now think I need to make a branch for a version of the APEL publisher - a separate branch for glite rather than EMI, because the configuration for the two systems are different even if the java code is the same.

It's [[here|http://cvsbook.red-bean.com/cvsbook.html#Branches]] in the book.  The basic message seems to be that you should check out the tag you want to branch from (often in the past, as in our APEL case) and then re-tag that as a branch using {{{cvs tag -b}}}.</pre>
</div>
<div title="CaToolsImplementation" server.title="CaToolsImplementation" server.page.revision="1580189" server.etag="&quot;willrogers_public/CaToolsImplementation/1580189:704a00fe8282bf243e32a3b1e24340b2deb2a60c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131206161838" created="20131206161838" tags="" _hash="3e4711a54e07486652bc16ecb532a3ed8b199212">
<pre>The CaTools interface is quite simple, but the implementation is fairly complicated to allow this.

!!!{{{Channel}}}
A class which represents one connection to a PV.

!!!{{{ChannelCache}}}
A simple class which stores the {{{Channel}}} objects.  It is basically a dictionary with PV names as keys; if the item doesn't exist, it creates a new one.</pre>
</div>
<div title="BashScriptingBasics" server.title="BashScriptingBasics" server.page.revision="363723" server.etag="&quot;willrogers_public/BashScriptingBasics/363723:f1874007d91b6b52a06f84ba858d1d7787993e48&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120307095448" created="20111031101829" tags="" _hash="703da07354bfcb6ec78857ad0b3041abf2941a5c">
<pre>A shell is the interface between the user and the kernel.  It interprets the user's commands and executes the appropriate system calls.

A bash script just consists of a number of lines of commands inside a file.  These are all executed much as they would if you typed them in one by one, according to the defined environment.

You can specify the program which will execute the script at the top of the file:  {{{#!/bin/bash}}} or {{{#!/usr/bin/env python}}} are examples.

!!Running

To run a script, change the permissions so that the current user has execute, and specify the file:  {{{./script}}}.  The reason that you need the './' is that the current directory is not part of the PATH variable.

To run the commands in the script in the current shell use the dot command:
{{{
. .bashrc
}}}
If you run the file ({{{./.bashrc}}}) a second shell will be created to run the file.  In this case it doesn't make sense, because then the variables in the file will be lost when the second shell exits.

A well-written bash script returns a number between 0 and 255, only zero denoting success.

You can get debugging information from bash by running {{{bash -xv}}}.</pre>
</div>
<div title="CMemory" server.title="CMemory" server.page.revision="1310114" server.etag="&quot;willrogers_public/CMemory/1310114:af5bb2277b5d61447c29d1a44608c5c8488d85c8&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130716124547" created="20130209203344" tags="c memory" _hash="b01f1141cfef401cdc04da714f615af8d1906c76">
<pre>!!!Memory
Memory is typically allocated in chunks.  One byte could hold a char, two could hold a short and four (but probably 8) might hold an int.  A ''pointer'' might be two or four bytes, and will point to one of the other bytes - that is, holding an address.

There is a distinction between memory parts called the 'stack' and the 'heap'.  There's a lot of good material here
* http://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap
* a very good presentation [[here|http://www.google.co.uk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=4&amp;ved=0CD4QFjAD&amp;url=http%3A%2F%2Fwww.iar.com%2FGlobal%2FResources%2FSeminars%2FWorking_with_the_Stack_and_Heap.pdf&amp;ei=ZLZ3UMDLD6q40QW874HQBA&amp;usg=AFQjCNHIaLCPNqY5dGkdMcc7563kE-G9MA&amp;sig2=JnDCXgpPur8ldwXukyxSDg]] too.
!!!The stack
The stack is small and fast, and it's used for e.g. variables declared within certain scopes.  Those variables are automatically destroyed when they reach the end of their validity.  You would create an int like this:
{{{
int x = 1;
}}}

You can use a stack for this because nested function calls work in the same way as a stack - the most recently-defined variables are lost whenever a function exits.

!!!The heap
The heap is larger, and more difficult to deal with.  When you create something with the 'new' keyword (C++) or malloc() (C), it is created on the heap, and you are returned a pointer to it.  If you leave the scope you're in, the object remains, and it is up to you to delete it.  If you don't it will cause a memory leak.

To create something on the heap, you need to use the {{{malloc()}}} function.  If you do this, you must later use the {{{free()}}} function to release the memory, or it will cause a memory leak.
{{{
int *iptr = malloc(sizeof(int));
free(iptr);
}}}

You may want to do this if you're trying to pass a variable around outside of scope (you could return a pointer to that variable), or if you have large items which might use up too much space on the stack.  In practice, you don't need this too much in small programs.  You also need to do this if you don't know the size of an array that you're going to create.

</pre>
</div>
<div title="GitShow" server.title="GitShow" server.page.revision="1490308" server.etag="&quot;willrogers_public/GitShow/1490308:bb91799fc94c5025498ff5cd7657bf022fa17206&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131029164002" created="20131029163843" tags="" _hash="6336ff6bae3df9bf9aafbeaec4b1147dddec7c5b">
<pre>{{{git show}}} can be used to view all kinds of different git objects:

* Without arguments, it shows the latest commit on HEAD, or the same as {{{git show HEAD}}}.  
** {{{git show &lt;commit&gt;}}} shows any specified commit
* {{{git show &lt;branch&gt;:&lt;file&gt;}}} shows a file from a branch
* {{{git show &lt;commit&gt;:&lt;file&gt;}}} shows a file from a commit</pre>
</div>
<div title="LizPresents" server.title="LizPresents" server.page.revision="1341375" server.etag="&quot;willrogers_private/LizPresents/1341375:32d4128538fe176ac9c52085ab7dd4ea09610380&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20130812185722" created="20130812185722" tags="" _hash="6e1ec500e04d48766e453ca4266087c03d512fd6">
<pre>* Flowers
* Pyjamas
* Lemonade
* Fruit?
</pre>
</div>
<div title="SideBarOptions" server.title="SideBarOptions" server.page.revision="1521921" server.etag="&quot;system-theme_public/SideBarOptions/1521921:c62f8f504409ef8c44f0e9e87a21465265073cc6&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-theme_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-theme_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="6516f71685d10be266a599f46d8dcf1c658225d0">
<pre>&lt;&lt;closeAll&gt;&gt;&lt;&lt;permaview&gt;&gt;&lt;&lt;newTiddler&gt;&gt;</pre>
</div>
<div title="CPPBasics" server.title="CPPBasics" server.page.revision="1572120" server.etag="&quot;willrogers_public/CPPBasics/1572120:9a7bf49378ae71d3dc45463f8c4a6bb8900c379c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131202113411" created="20110814110717" tags="" _hash="f943de4bcfa14baea27b6e9cc5f88ccb03b486d1">
<pre>First, all the C pages on this wiki apply also to C++.  Start with CBasics.
* CPPSyntax
* CPPClasses

C++ is very much built on top of C.  Development began in 1979 at Bell Labs by Bjarne Stroustrup.  It developed somewhat slowly, adding new functions as it went, and was codified only in 1998, and revised in 2003, as an ISO standard.

It offers:
* templates
* classes and objects
* inheritance and multiple inheritance
* encapsulation 
* polymorphism, by a number of methods which are somewhat more complicated than Java

It has gained a certain amount of criticism, mostly that it's too complicated and large a language.  Some say this is both because it's successful, and because many programmers who use it are not proficient.

One important part of programming in C++ is to note that it does have a different philosophy to programming in C.  It is possible to write a hybrid of C and C++, but in general it is better to write in C++ and not use C tools (like {{{malloc}}} and {{{free}}}) which have been hidden by new features ({{{new}}} and {{{delete}}}) in C++.

!!Data types
C++ has all the datatypes of C, plus;
* {{{bool}}}: {{{ true }}} or {{{ false }}}
* {{{wchar_t}}}: a wide character, of which I don't know the use
* {{{long_double}}}: which doesn't seem to be very different to double, but may vary with machine implementation.
Note that {{{char}}} may be used to store numbers, but if so you should declare them as signed or unsigned so that everyone knows that that is what is going on.
!!Keywords
Here are some of the keywords I find:
* {{{friend}}} - allows certain things access to private members of a class
* {{{delete}}} - deallocate memory from the other end of a pointer

Here's the full list:
{{{
asm, auto, bool, break, case, catch, char, class, const, const_cast, continue, default, delete, do, double, dynamic_cast, else, enum, explicit, export, extern, false, float, for, friend, goto, if, inline, int, long, mutable, namespace, new, operator, private, protected, public, register, reinterpret_cast, return, short, signed, sizeof, static, static_cast, struct, switch, template, this, throw, true, try, typedef, typeid, typename, union, unsigned, using, virtual, void, volatile, wchar_t, while 
}}}
These words are also reserved:
{{{and, and_eq, bitand, bitor, compl, not, not_eq, or, or_eq, xor, xor_eq}}}</pre>
</div>
<div title="shadowIcon" server.title="shadowIcon" server.page.revision="1521926" server.etag="&quot;system-images_public/shadowIcon/1521926:a39745d8abdc19ab691f547ffba34e11ef53c8a7&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-images_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-images_public" server.permissions="read" server.content-type="image/png" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="754f7258625a19c375dcae5254d6a604c7686d8d">
<pre>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</pre>
</div>
<div title="TopupTesting" server.title="TopupTesting" server.page.revision="1539916" server.etag="&quot;willrogers_public/TopupTesting/1539916:1734fd524d3598ef874c0245bc9f0ec547074981&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131118104333" created="20130528085618" tags="epics" _hash="4d23798149760c2856a06141a995a8594e620df2">
<pre>To test topup, there are several required components:
* three ~IOCs: 
** machineSim
** topup 
** topupTimer
* two python processes:
** machineSim
** topupLauncher, which starts Process, Timer, ~RadmonProcess and ~BPMMonitor
* the topup ~UIs

!!Setup

First check out the machineSim and topup modules.  Run {{{make}}} in the top-level directories.

I run the simulator on ports 6016 and 6017.  Nick runs his simulator on 6014 and 6015.  The machine runs on 5064 and 5065.

To avoid trying to interact with the machine itself, the python processes and the ~IOCs must be started in the following environment:
{{{
# swap to using the correct EPICS ports
export EPICS_CA_SERVER_PORT=6016
export EPICS_CA_REPEATER_PORT=6017
}}}
You can alternatively run
{{{
. changeports 6016
}}}

Topup still wants to run with {{{dls-python2.6}}}, so load the old environment:
{{{
module load RHEL6-RHEL5
}}}

!!!Start the ~IOCs

!!!!Machine sim
This one provides the PVs that the machine does (or at least the relevant ones).  However, you need topupSim to change them so that this  IOC does act like the machine.  It has now been moved to the machineSim support module.

{{{
./bin/linux-x86/simStart.sh
}}}
This also starts the {{{topupSim}}} python process, which manages the machine IOC so that it looks like a real one

!!!!topup
{{{
./bin/linux-x86/sttopupIOC.sh
./bin/linux-x86/sttopupTimerIOC.boot
}}}

!!!Fill the virtual ring
{{{
cd python
dls-python ffpgUI.py
}}}
First, ensure there is a fill pattern.  It complained sometimes that the fill pattern I had chosen was not a valid one.  A constant fill pattern at 0.6nC worked fine.


!!!Start the python process
{{{
dls-python topupLauncher.py
}}}

This starts all the processes as separate cothreads:
* {{{Process}}} - the background process, to which the UI talks
* {{{RadmonProcess}}}
* {{{BPMMonitor}}}
* {{{Timer}}} - sets the ~PVs in the topupTimer IOC

!!!Start the UI itself
{{{
cd python
dls-python topupUI.py
}}}

!!!Errors
* {{{AttributeError: ffpgBTSDipole instance has no attribute 'savedBTSDipoleSetting'}}}
** This happens when you start {{{ffpg.py}}} directly, rather than through the  FFPG UI.
* {{{Can't get actual fill PV - no simulation IOC or wrong EPICS port}}} - this happens when you try to run the simulator but with no IOC running for it to talk to
* If you can't find certain environment variables, you're probably running from the wrong directory.  Some filepaths are relative.
* The below seems to come fom running two or more IOCs on the same machine.  The first IOC runs fine, but any further ones produce this warning.
** This page suggests some network configuration which would allow parallel IOCs, but it seems quite heavyweight: http://www.aps.anl.gov/epics/tech-talk/2007/msg00014.php
** It doesn't appear that this error causes a problem for us.
{{{
cas warning: Configured TCP port was unavailable.
cas warning: Using dynamically assigned TCP port 42889,
cas warning: but now two or more servers share the same UDP port.
cas warning: Depending on your IP kernel this server may not be
cas warning: reachable with UDP unicast (a host's IP in EPICS_CA_ADDR_LIST)
}}}
</pre>
</div>
<div title="GitBranch" server.title="GitBranch" server.page.revision="1560357" server.etag="&quot;willrogers_public/GitBranch/1560357:6ce83b7638403505ca413134f35850035c266400&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131125135419" created="20131125135419" tags="" _hash="e709cefeeeebe87e466db8d0d8eaa11100decd1d">
<pre>
Branches are managed magically, unlike in SVN where they are manual.  

See http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging

* {{{git branch}}} lists the local branches; {{{-r}}} lists branches of the remotes, and {{{-a}}} lists all
* {{{git checkout &lt;branch&gt;}}} switches to the named branch
* {{{git branch -d &lt;branch&gt;}}} deletes the named branch (for example, if you have merged it)
* {{{git branch -m &lt;new-name&gt;}}} renames the current branch

To list the differences between two branches, use 
* {{{git diff &lt;branch1&gt;..&lt;branch2&gt;}}}
If you omit one branch, the current branch will be used.  You can also compare against commits using the first part of the SHA1 sum:
* {{{git diff d21d420 sofb.py}}}
</pre>
</div>
<div title="MetaLangRecursion" server.title="MetaLangRecursion" server.page.revision="662009" server.etag="&quot;willrogers_public/MetaLangRecursion/662009:e2264135a48bfdfeb5b333b95a85bf7774163044&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120331183647" created="20120331182018" tags="" _hash="ece82515b1b58e4a3ef7f070028d80c6767d3446">
<pre>{{{
fun npower(x,n) : real = 
    if n = 0 
    then 1
    else x * npower(x,n-1)
&gt; val npower = fun : real * int -&gt; real
}}}
This will take n calculations; the following is more efficient
{{{
fun power(x,n) : real =
    if n = 0 then 1
    else if n mod 2 = 0 then power(x*x, n div 2)
        else x * power(x*x, n div 2);
}}}
Recursion is only useful if the sequence will terminate.  If you put a negative integer in the above functions, they will run forever.
{{{
fun nsum (n) : int = 
    if n = 0 then 0
    else n + nsum(n-1);
}}}
This lays all the numbers out in a row (the stack) until it gets to the end and adds them.  This means it's O(n) in space.

You can prevent this by adding a second argument which acts as an 'accumulator'.  This is known as 'tail-recursion', because the rest of the current function-call is complete and doesn't need remembering.  This makes recursion as efficient as looping.  Some functional languages guarantee that recursive functions are arranged to use tail recursion.

Note that the function power can accumulate values on the stack, and this could be prevented, but the maximum number of values needed in memory for an int argument would be only 30.  It's not worth complicating the function - it's often best to write simple code first then optimise.

Tail-recursive functions resemble while loops.</pre>
</div>
<div title="PossibleRequirements" server.title="PossibleRequirements" server.page.revision="1059871" server.etag="&quot;willrogers_public/PossibleRequirements/1059871:f89cae5275895fba78f833edb0fcff1b4c69e39a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130204193128" created="20120401120139" tags="careers" _hash="27ea2c03842f07728052624cfa5d9160dd6ca8d6">
<pre>In practice, a visible code base and a Stack Overflow reputation will be required to get the best jobs.

These are coming from a number of places, including PossibleJobs.

!!Computer Science
* 'good understanding of computer science generally'

!!Programming
* 'ability to get stuff done in python'
* extensive Java experience
* Good HTML (5), CSS
* JavaScript, jQuery
* C#, ASP.NET

!!Python
* knowledge of Django and its libraries

!!Databases
* experience with RDBMS
* excellent SQL skills
* SQL server

!!Other technical
* XML
* experience of GIS software
* Git or similar VCS
* MVC
* Behaviour/Test Driven Design
* Open source code you’re proud of, and an active Stack Overflow profile
* Deep knowledge of how &lt;wherever&gt; works from our blog and podcasts 

!!Other personal
* Proven telecommuting skills: self-motivating, self-directing, and aggressively communicative (if working remote)
* Familiarity with agile processes

</pre>
</div>
<div title="favicon.ico" server.title="favicon.ico" server.page.revision="1521895" server.etag="&quot;tiddlyspace/favicon.ico/1521895:75648789e769eff7a438f9eb5eef5b7746544f94&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="image/x-icon" modified="20131111192334" created="20131111192334" tags="excludeLists excludeSearch" _hash="d884f6069c2350d026d57c45dc100c1390bd6112">
<pre>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AP8zZgAAAGYA//8zAADMMwD/mTMAAGYzAP8zMwAAADMAzP8AAADMAADMmQAAAGYAAMwzAAAAAADuzAAA3QAAALvMAACqAAAAiMwAAHcAAABVmQAARAAAACKZAAARAADuAJkA3QAAALsAmQCqAAAAiACZAHcAAABVAJkARAAAACIAZgARAADuAABm3QAAALsAAGaqAAAAiAAAZncAAABVAABmRAAAACIAAGYRAAAA7u7uM93d3QC7u7szqqqqAIiIiDN3d3cAVVVVM0RERAAiIiIzERERAAAAADMBAQEBAQEBAQEBpXl5eXl5eXl5eXmlAQEBAQEBAQEBAQEBAQEBAQEBgHl5eXl5eXl5eXl5eXl5gAEBAQEBAQEBAQEBAQEB/Xp5eXlVT04qKioqTk9VeXl5ev0BAQEBAQEBAQEBAaV5eXlPKioqKioqKioqKioqT3l5eaUBAQEBAQEBAQGAeXlVTioqKioqKioqKioqKioqTlV5eYABAQEBAQEBgHl5VSoqKioqKioqKioqKioqKioqKlV5eYABAQEBAaV5eVUqKioqKioqKioqKioqKioqKioqKlV5eaUBAQEBeXlVKioqKioqKioqKioqKioqKioqKioqKlV5eQEBAXl5eU4qKioqKioqKjExMTExMSoqKioqKioqTnl5eQEBeXlPKioqKioqKjEyMjIyMjIyMjEqKioqKioqT3l5AXp5eSoqKioqKioxMjIxBwcHBzEyMjEqKioqKioqeXl6eXlVKioqKioqMTIxBwcHBwcHBwcxMjEqKioqKipVeXl5eU8qKioqKioyMgcHBwcHBwcHBwcyMioqKioqKk95eXl5TioqKioqMTIxBwcHBwcHBwcHBzEyMSoqKioqTnl5eXkqKioqKioxMgcHBwcHBwcHBwcHBzIxKioqKioqeXl5eSoqKioqKjEyBwcHBwcHBwcHBwcHMjEqKioqKip5eXl5KioqKioqMTIHBwcHBwcHBwcHBwcyMSoqKioqKnl5eXkqKioqKioxMgcHBwcHBwcHBwcHBzIxKioqKioqeXl5eU4qKioqKjEyMQcHBwcHBwcHBwcxMjEqKioqKk55eXl5TyoqKioqKjIyBwcHBwcHBwcHBzIyKioqKioqT3l5eXlVKioqKioqMTIxBwcHBwcHBwcxMjEqKioqKipVeXl6eXkqKioqKioqMTIyMQcHBwcxMjIxKioqKioqKnl5egF5eU8qKioqKioqMTIyMjIyMjIyMSoqKioqKipPeXkBAXl5eU4qKioqKioqKjExMTExMSoqKioqKioqTnl5eQEBAXl5VSoqKioqKioqKioqKioqKioqKioqKipVeXkBAQEB+nl5VSoqKioqKioqKioqKioqKioqKioqVXl5+gEBAQEBenl5VSoqKioqKioqKioqKioqKioqKlV5eXoBAQEBAQEBeXl5VU4qKioqKioqKioqKioqKk5VeXl5AQEBAQEBAQEBenl5eU8qKioqKioqKioqKipPeXl5egEBAQEBAQEBAQEB+nl5eXlVT04qKioqTk9VeXl5efoBAQEBAQEBAQEBAQEBAXl5eXl5eXl5eXl5eXl5eXkBAQEBAQEBAQEBAQEBAQEBAQF6eXl5eXl5eXl5eXoBAQEBAQEBAQEB/+AH//+AAf/+AAB//AAAP/gAAB/wAAAP4AAAB8AAAAPAAAADgAAAAYAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAYAAAAHAAAADwAAAA+AAAAfwAAAP+AAAH/wAAD/+AAB//4AB///gB/8oAAAAIAAAAEAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAACAAAAAwAAAAMAAAADAAAABG1bSA61m3JXuqB4mbuhd8m9o3jqvaF4+b2hePm9o3jqu6F3ybqgeJm1m3JXbVtIDgAAAAQAAAADAAAAAwAAAAMAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAUAAAAGAAAACI98Wye0nXWavKF4876kev++pHr/vqR6/76kev++pHr/vqR6/76kev++pHr/vqR6/76kev+8oXjztJ11mo98WycAAAAIAAAABgAAAAUAAAADAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAQAAAAHAAAAChwcHBKulnGJvaN5+L6kev++pHr/y7GJ/9/Fnv/s1K7/9t25//rivv/64r7/9t25/+zUrv/fxZ7/y7GJ/76kev++pHr/vaN5+K6WcYkcHBwSAAAACgAAAAcAAAAEAAAAAgAAAAEAAAAAAAAAAAAAAAEAAAADAAAABwAAAAtuYkUst552z76kev++pHr+1LuS//Latf/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD/8tq1/9S7kv++pHr+vqR6/7eeds9uYkUsAAAACwAAAAcAAAADAAAAAQAAAAAAAAABAAAAAgAAAAQAAAAIi3hbNbqgd+a+pHr/xayD/+3Vr//85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA/+3Vr//FrIP/vqR6/7qgd+aJdVg0AAAACAAAAAQAAAACAAAAAQAAAAEAAAACAAAABIl8WSW8oXjlvqR6/8yyiv/54Lz//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//ngvP/Msor/vqR6/7yheOWJfFklAAAABAAAAAIAAAABAAAAAAAAAAFfXz8Iu6F4zL6kev/Msor/+uK+//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//rivv/Msor/vqR6/7uheMxfXz8IAAAAAQAAAAAAAAAAAAAAAbqid4K+pHr/xayD//ngvP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//fgvP/FrIP/vqR6/7qid4IAAAABAAAAAAAAAAC3l28gvaN5+L6kev7t1a///OXA//zlwP/85cD//OXA//zlwP/85cD//OXA/+/Twv/Qq8f/u5HK/7OGzP+zhsz/u5HK/9Crx//v08L//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA/+3Vr/++pHr+vaN5+LeXbyAAAAAAAAAAALuheJa+pHr/1LuS//zlwP/85cD//OXA//zlwP/85cD//OXA//riwP/Pq8f/r4HM/6+Bzf+vgc3/r4HN/6+Bzf+vgc3/r4HN/6+BzP/Pq8f/+uLA//zlwP/85cD//OXA//zlwP/85cD//OXA/9S5kv++pHr/u6F4lgAAAACii3MLvKF4876kev/y2rX//OXA//zlwP/85cD//OXA//zlwP/64sD/w5vJ/6+Bzf+vg83/w5vc/9W06v/dwPD/3cDw/9W06v/Dm9z/r4PN/6+Bzf/Dm8n/+uLA//zlwP/85cD//OXA//zlwP/85cD/8tq1/76kev+8oXjzootzC72feFW+pHr/y7GJ//zlwP/85cD//OXA//zlwP/85cD//OXA/8+rx/+vgc3/tIfQ/9a16//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//Wtev/tIfQ/6+Bzf/Pq8f//OXA//zlwP/85cD//OXA//zlwP/85cD/y7GJ/76kev+9n3hVvaF4mL6kev/fxZ7//OXA//zlwP/85cD//OXA//zlwP/v08L/r4HM/6+Dzf/Wtev/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//Wtev/r4PN/6+BzP/v08L//OXA//zlwP/85cD//OXA//zlwP/fxZ7/vqR6/72heJi8oXfIvqR6/+zUrv/85cD//OXA//zlwP/85cD//OXA/9Crx/+vgc3/w5vc/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//Dm9z/r4HN/9Crx//85cD//OXA//zlwP/85cD//OXA/+zUrv++pHr/vKF3yL2jeOq+pHr/9t25//zlwP/85cD//OXA//zlwP/85cD/u5HK/6+Bzf/VtOr/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/9W06v+vgc3/u5HK//zlwP/85cD//OXA//zlwP/85cD/9t25/76kev+9o3jqvaF4+b6kev/64r7//OXA//zlwP/85cD//OXA//zlwP+zhsz/r4HN/93A8P/hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/3cDw/6+Bzf+zhsz//OXA//zlwP/85cD//OXA//zlwP/64r7/vqR6/72hePm9oXj5vqR6//rivv/85cD//OXA//zlwP/85cD//OXA/7OGzP+vgc3/3cDw/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//dwPD/r4HN/7OGzP/85cD//OXA//zlwP/85cD//OXA//rivv++pHr/vaF4+b2jeOq+pHr/9t25//zlwP/85cD//OXA//zlwP/85cD/u5HK/6+Bzf/VtOr/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/9W06v+vgc3/u5HK//zlwP/85cD//OXA//zlwP/85cD/9t25/76kev+9o3jqvKF3yL6kev/s1K7//OXA//zlwP/85cD//OXA//zlwP/Qq8f/r4HN/8Ob3P/hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/w5vc/6+Bzf/Qq8f//OXA//zlwP/85cD//OXA//zlwP/s1K7/vqR6/7yhd8i9oXiYvqR6/9/Fnv/85cD//OXA//zlwP/85cD//OXA/+/Twv+vgcz/r4PN/9a16//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//hw/P/4cPz/9a16/+vg83/r4HM/+/Twv/85cD//OXA//zlwP/85cD//OXA/9/Fnv++pHr/vaF4mL2feFW+pHr/y7GJ//zlwP/85cD//OXA//zlwP/85cD//OXA/8+rx/+vgc3/tIfQ/9a16//hw/P/4cPz/+HD8//hw/P/4cPz/+HD8//Wtev/tIfQ/6+Bzf/Pq8f//OXA//zlwP/85cD//OXA//zlwP/85cD/y7GJ/76kev+9n3hVootzC7yhePO+pHr/8tq1//zlwP/85cD//OXA//zlwP/85cD/+uLA/8Obyf+vgc3/r4PN/8Ob3P/VtOr/3cDw/93A8P/VtOr/w5vc/6+Dzf+vgc3/w5vJ//riwP/85cD//OXA//zlwP/85cD//OXA//Latf++pHr/vKF486KLcwsAAAAAu6N3l76kev/Uu5L//OXA//zlwP/85cD//OXA//zlwP/85cD/+uLA/8+rx/+vgcz/r4HN/6+Bzf+vgc3/r4HN/6+Bzf+vgc3/r4HM/8+rx//64sD//OXA//zlwP/85cD//OXA//zlwP/85cD/1LmS/76kev+7oXiWAAAAAAAAAAC3l28gvaN5+L6kev7t1a///OXA//zlwP/85cD//OXA//zlwP/85cD//OXA/+/Twv/Qq8f/u5HK/7OGzP+zhsz/u5HK/9Crx//v08L//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA/+3Vr/++pHr+vaN5+LeXbyAAAAAAAAAAAAAAAAC6oneCvqR6/8Wsg//54Lz//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/34Lz/xayD/76kev+6oneCAAAAAAAAAAAAAAAAAAAAAH9/VQa8oHjLvqR6/8yyiv/64r7//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD/+uK+/8yyiv++pHr/vKB4y39/VQYAAAAAAAAAAAAAAAAAAAAAAAAAALKhbh67o3nkvqR6/8yyiv/54Lz//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//ngvP/Msor/vqR6/7ujeeSyoW4eAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALqbdim7o3nkvqR6/8Wsg//t1a///OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/t1a//xayD/76kev+7o3nkupt2KQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALKhbh68oHjLvqR6/76kev7Uu5L/8tq1//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/85cD//OXA//zlwP/y2rX/1LmS/76kev6+pHr/vKB4y7Khbh4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH9/VQa6oneCvaN5+L6kev++pHr/y7GJ/9/Fnv/s1K7/9t25//rivv/64r7/9t25/+zUrv/fxZ7/y7GJ/76kev++pHr/vaN5+Lqid4J/f1UGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC3l28gu6F4lryhePO+pHr/vqR6/76kev++pHr/vqR6/76kev++pHr/vqR6/76kev++pHr/vKF487uheJa3l28gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAootzC72feFW9oXiYvKF3yL2jeOq9oXj5vaF4+b2jeOq8oXfIvaF4mL2feFWii3MLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/gB///gAH//gAAf/wAAD/4AAAf8AAAD+AAAAfAAAADwAAAA4AAAAGAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAGAAAABwAAAA8AAAAPgAAAH8AAAD/gAAB/8AAA//gAAf/+AAf//4Af/</pre>
</div>
<div title="BinaryUploadPlugin" server.title="BinaryUploadPlugin" server.page.revision="1521860" server.etag="&quot;system-plugins_public/BinaryUploadPlugin/1521860:153c3ea9d3de701ffcad088913bf29a62ead9437&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="fa2a79fa940254cf1cdd7980c85b5efd0eff0ce5">
<pre>/***
|''Name''|BinaryUploadPlugin|
|''Version''|0.3.16|
|''Author''|Ben Gillies and Jon Robson|
|''Type''|plugin|
|''Source''|http://github.com/TiddlySpace/tiddlyspace/raw/master/src/plugins/BinaryUploadPlugin.js|
|''Description''|Upload a binary file to TiddlyWeb|
|''CoreVersion''|2.6.1|
|''Requires''|TiddlySpaceConfig TiddlyWebConfig|
!Usage
{{{
&lt;&lt;binaryUpload bag:&lt;name&gt; edit:tags edit:title tags:&lt;default tags&gt; title:&lt;title&gt; &gt;&gt;
}}}
* {{{bag:&lt;name&gt;}}}: optional; if left out, the file will be saved to the current workspace
* {{{edit:tags}}}: specifies that you want to tag the file being uploaded
* {{{edit:title}}}: specifies that you want to set the title to something other than the filename
* {{{tags:&lt;default tags&gt;}}}: specifies a default set of tags to apply to the file (requires {{{edit:tags}}} to be set)
* {{{title:&lt;title&gt;}}}: predefines the title of the binary tiddler
!Requires
TiddlyWeb
tiddlywebplugins.form
!Code
***/
//{{{
(function($) {

var tiddlyspace = config.extensions.tiddlyspace;

var macro = config.macros.binaryUpload = {
	locale: {
		titleDefaultValue: "Please enter a title...",
		tagsDefaultValue: "Please enter some tags...",
		titlePrefix: "title: ",
		tagsPrefix: "tags: ",
		loadSuccess: 'Tiddler %0 successfully uploaded',
		loadError: "An error occurred when uploading the tiddler %0",
		uploadInProgress: "Please wait while the file is uploaded...",
		membersOnly: "Only members can upload."
	},
	renderInputFields: function(container, options) {
		var locale = macro.locale;
		var editableFields = options.edit;
		var includeFields = {
			tags:  editableFields &amp;&amp; editableFields.contains("tags") ? true : false,
			title: editableFields &amp;&amp; editableFields.contains("title") ? true : false
		};
		var fields = ["title", "tags"];
		for(var i = 0; i &lt; fields.length; i++) {
			var fieldName = fields[i];
			var userDefault = options[fieldName];
			var defaultValue = userDefault ? userDefault[0] : false;
			if(includeFields[fieldName] || defaultValue) {
				var localeDefault = locale["%0DefaultValue".format(fieldName)];
				var className = defaultValue ? "userInput" : "userInput notEdited";
				var inputEl;
				var val = defaultValue || localeDefault || "";
				var iContainer = $("&lt;div /&gt;").addClass("binaryUpload%0".format(fieldName)).
					appendTo(container);
				if(defaultValue &amp;&amp; !includeFields[fieldName]) {
					var label = locale["%0Prefix".format(fieldName)];
					$("&lt;span /&gt;").text(label).appendTo(iContainer);
					$("&lt;span /&gt;").addClass("disabledInput").text(val).appendTo(iContainer);
					inputEl = $("&lt;input /&gt;").attr("type", "hidden");
				} else {
					inputEl = $("&lt;input /&gt;").attr("type", "text");
				}
				inputEl.attr("name", fieldName).
					addClass("%0Edit".format(fieldName)).
					val(val).addClass(className).appendTo(iContainer);
			}
		}
	},
	getTiddlerName: function(fileName) {
		var fStart = fileName.lastIndexOf("\\");
		var fStart2 = fileName.lastIndexOf("/");
		fStart = fStart &lt; fStart2 ? fStart2 : fStart;
		fileName = fileName.substr(fStart+1);
		return fileName;
	},
	errorHandler: function(fileName) {
		displayMessage("upload of file %0 failed".format(fileName));
	},
	uploadFile: function(place, baseURL, workspace, options) {
		var pleaseWait = $(".uploadProgress", place);
		var iframeName = options.target;
		var form = $("form", place);
		var existingVal = $("input[name=title]", form).val();
		var fileName = existingVal || $('input:file', form).val();
		if(!fileName) {
			return false; // the user hasn't selected a file yet
		}
		fileName = macro.getTiddlerName(fileName);
		$("input[name=title]", place).val(fileName);
		// we need to go somewhere afterwards to ensure the onload event triggers
		var redirectTo = "/%0/tiddlers.txt?select=title:%1".
			format(workspace, fileName);
		var token = tiddlyspace ? tiddlyspace.getCSRFToken() : "";
		var action = "%0?csrf_token=%1&amp;redirect=%2"
			.format(baseURL, token, redirectTo);
		form[0].action = action; // dont use jquery to work with ie
		form[0].target = iframeName;
		// do not refactor following line... won't work in IE6 otherwise
		$(place).append($('&lt;iframe name="' + iframeName + '" id="' + iframeName + '"/&gt;').css('display','none'));
		macro.iFrameLoader(iframeName, function() {
			var content = document.getElementById(iframeName).contentWindow.document.documentElement;
			if($(content).text().indexOf(fileName) &gt; -1) {
				options.callback(place, fileName, workspace, baseURL);
			} else {
				macro.errorHandler(fileName);
			}
			form.show(1000);
			pleaseWait.hide(1000);
		});
		form.hide(1000);
		pleaseWait.show(1000);
		return true;
	},
	createUploadForm: function(place, options) {
		var locale = macro.locale;
		if(readOnly) {
			$('&lt;div class="annotation" /&gt;').text(locale.membersOnly).
				appendTo(place);
			return;
		}
		var bag = options.bag;
		options.callback = options.callback ? options.callback :
			function(place, fileName, workspace, baseurl) {
				macro.displayFile(place, fileName, workspace);
				displayMessage(locale.loadSuccess.format(fileName));
				$("input[type=text]", place).val("");
			};
		var defaults = config.defaultCustomFields;
		place = $("&lt;div /&gt;").addClass("container").appendTo(place)[0];
		var workspace = bag ? "bags/%0".format(bag) : config.defaultCustomFields["server.workspace"];
		var baseURL = defaults["server.host"];
		baseURL += (baseURL[baseURL.length - 1] !== "/") ? "/" : "";
		baseURL = "%0%1/tiddlers".format(baseURL, workspace);
		//create the upload form, complete with invisible iframe
		var iframeName = "binaryUploadiframe%0".format(Math.random());
		// do not refactor following line of code to work in IE6.
		var form = $('&lt;form action="%0" method="POST" enctype="multipart/form-data" /&gt;'.
					format(baseURL)).addClass("binaryUploadForm").
			appendTo(place)[0];
		macro.renderInputFields(form, options);
		$(form).
			append('&lt;div class="binaryUploadFile"&gt;&lt;input type="file" name="file" /&gt;&lt;/div&gt;').
			append('&lt;div class="binaryUploadSubmit"&gt;&lt;input type="submit" value="Upload" disabled /&gt;&lt;/div&gt;').
			submit(function(ev) {
				this.target = iframeName;
				options.target = iframeName;
				macro.uploadFile(place, baseURL, workspace, options);
			})
			.find('[type="file"]').bind('change', function() {
				$(form).find('[type="submit"]').prop('disabled', false);
			}).end();
		$('&lt;div /&gt;').addClass("uploadProgress").text(locale.uploadInProgress).hide().appendTo(place);
		$("input[name=file]", place).change(function(ev) {
			var target = $(ev.target);
			var fileName = target.val();
			var title = $("input[type=text][name=title]", place);
			if(!title.val()) {
				title.val(fileName);
			}
		});
	},
	handler: function(place, macroName, params, wikifier, paramString, tiddler) {
		params = paramString.parseParams(null, null, true);
		macro.createUploadForm(place, params[0]);
	},
	iFrameLoader: function(iframeName, callback) {
		var iframe = document.getElementById(iframeName); //jQuery doesn't seem to want to do this!?
		var locale = macro.locale;
		$(".userInput").addClass("notEdited"); // reset editing
		var finishedLoading = function() {
			callback();
		};
		var iFrameLoadHandler = function() {
			finishedLoading.apply();
			return;
		};

		iframe.onload = iFrameLoadHandler;
		//IE
		completeReadyStateChanges = 0;
		iframe.onreadystatechange = function() {
			if (++(completeReadyStateChanges) == 3) {
				iFrameLoadHandler();
			}
		};
	},
	displayFile: function(place, title, workspace) {
		var adaptor = store.getTiddlers()[0].getAdaptor();
		var context = {
			workspace: workspace,
			host: config.defaultCustomFields['server.host']
		};
		adaptor.getTiddler(title, context, null, function(context) {
			if(context.status) {
				store.addTiddler(context.tiddler);
				story.displayTiddler(place, title);
				var image = config.macros.image;
				if(image &amp;&amp; image.refreshImage) {
					image.refreshImage("/%0/tiddlers/%1".format(workspace, title));
					image.refreshImage(title);
					image.refreshImage("/%0".format(title));
					image.refreshImage("%0/%1/tiddlers/%2".format(config.extensions.tiddlyweb.host, workspace, title));
				}
			} else {
				displayMessage(macro.locale.loadError.format(title));
			}
		});
	}
};

if(tiddlyspace) {
	config.macros.binaryUploadPublic = {
		handler: function(place, macroName, params, wikifier, paramString, tiddler) {
			var options = paramString.parseParams(null, null, true)[0];
			var bag = tiddlyspace.getCurrentBag("public");
			options.bag = bag;
			macro.createUploadForm(place, options);
		}
	};
	config.messages.privacySetting = config.options.chkPrivateMode ?
		"private" : "public";
	config.macros.binaryUpload.defaultWorkspace = tiddlyspace.
		getCurrentWorkspace(config.messages.privacySetting);
}

})(jQuery);
//}}}</pre>
</div>
<div title="TenerifeFlights" server.title="TenerifeFlights" server.page.revision="364810" server.etag="&quot;willrogers_public/TenerifeFlights/364810:b3f00fdc2ae3e2d6b6ef48b225e0f28435bcf9d9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110829170229" created="20110819120432" tags="" _hash="1b527df524e5f8c1a43dc6ffc755a69ca81a9c23">
<pre>To get to the Canary Islands, we basically need to fly via Tenerife South.  Both Ryanair and EasyJet fly there.  We ideally want to fly out on the 3rd and back on the 17th, both Saturdays.  We'd also probably want a flight which gets in earlyish on the 3rd so that we can connect with a ferry to the island we're going to which is not Tenerife (likely La Gomera or La Palma).

Here's the places we might want to fly from:

| '''EasyJet''' | '''Ryanair''' |
| Bristol | Bristol |
| Gatwick | Stansted |
| | Luton |
| | East Midlands |
| | Birmingham |

Possibles (prices as of 19/8, excluding baggage):
* A bag costs £25 on Ryanair and £30 on EasyJet.  We might want to try and share one...
* The Gatwick and Bristol flights seem more expensive
* There aren't flights on the right days for East Midlands, but eg the Friday flights seem cheaper.

!!!!Sat 3rd
| Luton | 11:10 | 15:45 | £58 | Ryanair |
| Birmingham | 07:05 | 11:40 | £78 | Ryanair |


!!!!Sat 17th
| Luton | 06:25 | 10:45 | £58 | Ryanair |
| Birmingham | 12:15 | 16:55 | £58 | Ryanair |

!!Travel to airports
!!!!Luton
More than 2hrs on the train, but you can drive and park relatively easily.  You would of course have to fly back there as well
!!!!Birmingham
Only about an hour on the train from Oxford
!!!!East Midlands 
Easier via my parents' house?</pre>
</div>
<div title="WindowsNotes" server.title="WindowsNotes" server.page.revision="364921" server.etag="&quot;willrogers_public/WindowsNotes/364921:e2c5dddcd597f5fc2ec9eab8c8047bcab89c2f54&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110726100027" created="20110726095800" tags="" _hash="8cdfd6bd954715f744112fd75eeca76cc7c84164">
<pre>!!Keyboard Shortcuts

| Ctrl-Shift-Esc | Task manager |
| Win-Break | System properties |
| Win-D | Show desktop |
| Win-R | run box |
| Win-E | My Computer |
| Win-L | Lock screen |

!!Run Box

| taskmgr | Task manager |
| iexplore | IE |
| msconfig | System configuration utility |
| cmd | Command prompt |
| msinfo32 | System information |
| sysdm.cpl | System properties |</pre>
</div>
<div title="TiddlySpaceInit" server.title="TiddlySpaceInit" server.page.revision="1521909" server.etag="&quot;tiddlyspace/TiddlySpaceInit/1521909:0289c8c4afa689e4708384af1f2904ea81a52f26&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch systemConfig" _hash="05e5325df4a93506529425c558842d5953dd6a44">
<pre>/***
|''Name''|TiddlySpaceInitialization|
|''Version''|0.7.3|
|''Description''|Initializes new TiddlySpaces the first time they are created|
|''Status''|@@beta@@|
|''Source''|http://github.com/TiddlySpace/tiddlyspace/blob/master/src/plugins/TiddlySpaceInit.js|
|''CoreVersion''|2.6.1|
|''Requires''|TiddlySpaceConfig RandomColorPalettePlugin chrjs ImageMacroPlugin|
!TODO
* robust error notification and recovery
!MarkupPreHead
&lt;!--{{{--&gt;
&lt;link href="/bags/%0_public/tiddlers.atom" rel="alternate"
	type="application/atom+xml" title="%0's public feed" /&gt;
&lt;link rel="canonical" href="%1/" /&gt;
&lt;!--}}}--&gt;
!Code
***/
//{{{
(function($) {

var versionField = "tiddlyspaceinit_version";
var markupPreHead = store.getTiddlerText(tiddler.title + "##MarkupPreHead", "");
var tiddlyspace = config.extensions.tiddlyspace;
var currentSpace = tiddlyspace.currentSpace;
var tweb = config.extensions.tiddlyweb;

var plugin = config.extensions.TiddlySpaceInit = {
	version: "0.6",
	SiteTitle: "%0",
	SiteSubtitle: "a TiddlySpace",
	flagTitle: "%0SetupFlag",
	flagWarning: "Please do not modify this tiddler; it was created " +
		"automatically upon space creation.",

	dispatch: function(ev) {
		var title = plugin.flagTitle.format([currentSpace.name]);
		config.annotations[title] = plugin.flagWarning;
		if(currentSpace.type != "private") {
			return;
		}
		var tiddlers = [];
		var tid = store.getTiddler(title);
		if(tid) {
			curVersion = parseFloat(tid.fields[versionField]);
			reqVersion = parseFloat(plugin.version);
			if(curVersion &lt; reqVersion) {
				plugin.update(curVersion, tid);
				tid.fields[versionField] = plugin.version;
				tid.incChangeCount();
				tid = store.saveTiddler(tid);
				tiddlers.push(tid);
			}
		} else { // first run
			tid = new Tiddler(title);
			tid.tags = ["excludeLists", "excludeSearch", "excludePublisher"];
			tid.fields = $.extend({}, config.defaultCustomFields);
			tid.fields[versionField] = plugin.version;
			tid.text = "@@%0@@".format([plugin.flagWarning]);
			tid = store.saveTiddler(tid);
			tiddlers = tiddlers.concat(plugin.firstRun(), tid);
		}
		autoSaveChanges(null, tiddlers);
	},
	update: function(curVersion, flagTiddler) {
		if(curVersion &lt; 0.2) {
			this.createAvatar();
		}
		if(curVersion &lt; 0.3) {
			flagTiddler.tags.pushUnique("excludePublisher"); // XXX: never persisted
		}
		if(curVersion &lt; 0.5) { // v0.4 was faulty
			this.setupMarkupPreHead();
		}
		if(curVersion &lt; 0.6) {
			this.purgeSystemSettings();
		}
	},
	pubTid: {
		tags: ["excludeLists", "excludeSearch"],
		fields: $.extend({}, config.defaultCustomFields, {
			"server.workspace": tiddlyspace.getCurrentWorkspace("public")
		})
	},
	makeTiddlerIfNot: function(tiddler) {
		if (!store.tiddlerExists(tiddler.title)) {
			$.extend(true, tiddler, plugin.pubTid);
			return [store.saveTiddler(tiddler)];
		} else {
			return [];
		}
	},
	firstRun: function() {
		var tiddlers = [];
		// generate Site*itle
		$.each(["SiteTitle", "SiteSubtitle"], function(i, item) {
			var tid = new Tiddler(item);
			tid.text = plugin[item].format([currentSpace.name]);
			tiddlers.push.apply(tiddlers,
				plugin.makeTiddlerIfNot(tid));
		});
		// generate public ColorPalette
		var tid = new Tiddler("ColorPalette");
		tid.text = config.macros.RandomColorPalette.generatePalette({
			saturation_pale: 0.67, saturation_light: 0.53,
			saturation_mid: 0.43, saturation_dark: 0.06,
			pale: 0.99, light: 0.85, mid: 0.5, dark: 0.31
		},
			false);
		tiddlers.push.apply(tiddlers, plugin.makeTiddlerIfNot(tid));
		this.createAvatar();
		this.setupMarkupPreHead();
		return tiddlers;
	},
	// remove _cookie slices (TiddlyWiki 2.6.2 beta 6 remnants)
	purgeSystemSettings: function() {
		var ss = store.getTiddler("SystemSettings");
		if(ss) {
			var lines = ss.text.split("\n");
			var persistentOptions = $.grep(lines, function(line, i) {
				return line.indexOf("_cookie:") == -1;
			});
			ss.text = persistentOptions.join("\n");
			ss = store.saveTiddler(ss);
			autoSaveChanges(null, [ss]);
		}
	},
	createAvatar: function() {
		var avatar = "SiteIcon";
		var host = tweb.host;
		var notify = function(xhr, error, exc) {
			displayMessage("ERROR: could not create avatar - " + // TODO: i18n
				"%0: %1".format([xhr.statusText, xhr.responseText]));
			// TODO: resolve!?
		};

		var pubBag = tiddlyspace.getCurrentBag("public");
		var tid = new tiddlyweb.Tiddler(avatar);
		tid.bag = new tiddlyweb.Bag(pubBag, host);

		var callback = function(data, status, xhr) {}; // avatar already exists; do nothing
		var errback = function(xhr, error, exc) {
			if(xhr.status != 404) {
				return;
			}
			// copy default avatar
			var _notify = function(tid, status, xhr) {
				displayMessage("created avatar"); // TODO: i18n
				var image = config.macros.image;
				if(image &amp;&amp; image.refreshImage) {
					var uri = "/%0/tiddlers/SiteIcon".
						format(tiddlyspace.getCurrentWorkspace("public"));
					image.refreshImage(uri);
					image.refreshImage("SiteIcon");
				}
			};
			var _callback = function(tid, status, xhr) {
				tid.title = avatar;
				tid.bag.name = pubBag;
				delete tid.etag;
				tid.put(_notify, notify); // TODO: add to current session document (via adaptor?)
			};
			tweb.getUserInfo(function(user) {
				var avatarTitle = currentSpace.name == user.name ?
					"defaultUserIcon" : "defaultSiteIcon";
				var tid = new tiddlyweb.Tiddler(avatarTitle);
				tid.bag = new tiddlyweb.Bag("common", host);
				tid.get(_callback, notify);
			});
		};
		tid.get(callback, errback);
	},
	savePublicTiddlerText: function(title, text, pubWorkspace) {
		var tid = new Tiddler(title);
		tid.text = text;
		tid.tags = ["excludeLists"];
		tid.fields = $.extend({}, config.defaultCustomFields);
		tid.fields["server.workspace"] = pubWorkspace;
		tid.fields["server.page.revision"] = "false";
		tid = store.saveTiddler(tid);
		autoSaveChanges(null, [tid]);
	},
	setupMarkupPreHead: function() {
		var pubWorkspace = tiddlyspace.getCurrentWorkspace("public");
		var existing = store.getTiddler("MarkupPreHead");
		if(!existing || existing.fields["server.workspace"] != pubWorkspace) {
			var context = this;
			tweb.getStatus(function(status) {
				var text = markupPreHead.format(currentSpace.name,
					tiddlyspace.getHost(status.server_host, currentSpace.name));
				context.savePublicTiddlerText("MarkupPreHead", text,
					pubWorkspace);
			});
		}
		// also set up DefaultTiddlers
		var title = "DefaultTiddlers";
		existing = store.getTiddler(title) || new Tiddler(title);
		if(existing.fields["server.workspace"] != pubWorkspace) {
			var text = existing.text || store.getShadowTiddlerText(title);
			this.savePublicTiddlerText(title, text, pubWorkspace);
		}
	}
};

$(document).bind("startup", plugin.dispatch);

})(jQuery);
//}}}</pre>
</div>
<div title="GitSvn" server.title="GitSvn" server.page.revision="1490298" server.etag="&quot;willrogers_public/GitSvn/1490298:47fe313432d11c6a8663daa5ce64bcb1bc1ad641&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131029163643" created="20131029163621" tags="" _hash="6a1929651cefe428224465385f52adfc69af5ca2">
<pre>
This allows you to run a local git repository connected to an SVN repository.  To create a git-svn repo:
* {{{git svn clone &lt;svn url&gt;}}}
To pull updates from svn:
* {{{git svn rebase}}}
To find the git commit corresponding to an svn commit, use
* {{{git svn find-rev r&lt;number&gt;}}}
You can then checkout that commit with 
* {{{git checkout &lt;sha1&gt;}}} (or unambiguous part thereof)
This will leave you with a 'detached HEAD' - you're not on a branch, you've just checked out one revision.  To go back, switch back to a branch:
* {{{git checkout master}}}</pre>
</div>
<div title="SpotiPi" server.title="SpotiPi" server.page.revision="908605" server.etag="&quot;willrogers_public/SpotiPi/908605:0ad28080faa650a9ef4d1cea74945a3b133105a4&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121014180307" created="20121014130424" tags="pi raspberry spotify" _hash="753f34c683cff546415bce0642a36e9820c7142b">
<pre>There are two ways to do this, both of which require a premium account.  One is to use the Spotify libraries (you need a developer key) and the other is to use despotify.

!!despotify
This does not use the official libraries - it was painstakingly reverse engineered by some hackers in Sweden.  Spotify has decided to allow it to be used with a premium account.

Let's try.  First download the code from Hexxeh as a tar ball:
https://github.com/Hexxeh/despotify/downloads
{{{
sudo apt-get install libtool git libssl-dev libmpg123-dev libvorbis-dev libncursesw5-dev
}}}
Not on the list:
{{{
sudo apt-get libao-dev
}}}

Unbelievably, it works fine!  To control volume from the command line, use the {{{alsamixer}}} command.

!!Developing your own client
The problem here is that the ARMv6 library for Spotify uses soft float not hard float calculations, and the faster raspbian OS uses hard float.  I tried on raspbian, and gcc couldn't find the library even though it appeared to be looking in the right place.  This blog confirms: http://m25cl.blogspot.co.uk/2012/09/raspberry-pi-spotify.html

I installed a soft-float version of Debian from the downloads page, and it does indeed work - I used the spshell program, and it worked although it is boring in that it doesn't let you play music.  To play, it would appear you need the ALSA library libasound2, which I currently can't download for armel (404).



</pre>
</div>
<div title="DiamondLauncher" server.title="DiamondLauncher" server.page.revision="1601322" server.etag="&quot;willrogers_public/DiamondLauncher/1601322:5b6a0db4230b8a27350b24ba7e3ec07cd7fb3ebd&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131220143643" created="20130704085648" tags="" _hash="d422be5886232f20064f7d887aee7b55bfd2c439">
<pre>The Diamond Launcher is the way that most of the Diamond GUI interfaces are started.  It is a funny little program, written in python.

See also DiamondRedirector, LauncherScripts

It is installed in {{{/dls_sw/prod/etc/Launcher/}}}.  The code is at {{{$SVN_ROOT/etc/trunk/prod/Launcher}}}.

[[Here|http://www.cs.diamond.ac.uk/cgi-bin/wiki.cgi/Adding_a_new_application_to_the_Launcher]] are instructions on how to add a program to the launcher, which give a bit of insight into how it works.  The {{{applications.xml}}} file determines what is shown, and gives you enough information to launch each program directly.  In particular, most programs are run against a port number, the default of which is 5064.  I presume that {{{applications.html}}} is merely an XSL transformation of this file.

!!Proposed behaviour
Ideally, scripts should launch using the redirector, which should point to the script which sets up the environment for that particular program.

The launcher should determine the environment in which things are launched.  In particular, if the OS is RHEL6, we should use EPICS 3.14.12.3, and if RHEL5 3.14.11.  Run scripts could do further customisation if necessary.

The main problem is that some screens want to be launched with different configuration depending on some argument.  If the script does not go in the launcher, where should it go?

!!To do
* Determine rogue scripts and owners (see LauncherScripts):
{{{
for file in *; do echo "$file:"; git log "$file" | grep 'Author' | finger `cut -d " " -f 2` | grep Name | tr -s '\t' | cut -f 2  | uniq; echo; done &gt; owners.txt
}}}
* Plan for locating script (courtesy Paul):
** script alongside {{{.edl}}} files
** copy to {{{data}}} directory with {{{.edl}}} files when building
** use redirector to point to the script in the appropriate version

!!Source
The source code is found at {{{$SVN_ROOT/etc/trunk/prod/Launcher}}}. 
!!Program
The program is in the following files: 
* {{{launcherCommon.py}}} - common code between the two interfaces
** {{{xmlFile}}} handles parsing {{{applications.xml}}}
** {{{launcherCommon}}} is a base class for the launcher applications
** it holds a list of xmlFile objects, one for each {{{applications.xml}}} file that it can find
* {{{launcherApplication.py}}} - the standalone application
* {{{launcherStatus.py}}} - the status bar version

* {{{install-launcher.sh}}} is used to install the launcher in the Gnome status bar.
* {{{spawn.sh}}} is called to start each program.  It sources the DLS environment from {{{/dls_sw/etc/profile}}}.

!!Running 
If you check it out and run {{{python launcherApplication.py}}}, you can run all the applications, so no additional environment is needed.

All programs are run using {{{spawn.sh}}}.

!!Logging
The launcher logs to {{{/tmp/launcher-$UID.log}}}


!!Helper scripts
When additional logic is required to launch programs, an additional script is dumped in the same directory as the launcher, and this is referred to in {{{applications.xml}}}.</pre>
</div>
<div title="UbuntuHashes" server.title="UbuntuHashes" server.page.revision="364846" server.etag="&quot;willrogers_public/UbuntuHashes/364846:c840ea04745091e8a87b9c911a9bd68333fe5dee&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110428205519" created="20110428205443" tags="" _hash="b5346d389eecffb3c93817f36019177668f223ff">
<pre>I couldn't find the checksums anywhere apart from [[here|http://forum.ubuntu-fr.org/viewtopic.php?id=462411]]:

* 8468300a61ea1e3b7607f46f7643b57a *ubuntu-11.04-alternate-amd64.iso
* e6a29ce3dccb0ab12332036dcff7d9e4 *ubuntu-11.04-alternate-i386.iso
* 7de611b50c283c1755b4007a4feb0379 *ubuntu-11.04-desktop-amd64.iso
* 8b1085bed498b82ef1485ef19074c281 *ubuntu-11.04-desktop-i386.iso
* 355ca2417522cb4a77e0295bf45c5cd5 *ubuntu-11.04-server-amd64.iso
* b1a479c6593a90029414d201cb83a9cc *ubuntu-11.04-server-i386.iso

My version of ubuntu-11.04-desktop-i386.iso gives a hash of 
* 6D35A7900809E2735F52253AC7A3CED8 *ubuntu-11.04-desktop-i386.iso
The download was obviously invalid in some way (it was smaller than the Wubi version). When I downloaded the ISO via Wubi, I got:
* 8B1085BED498B82EF1485EF19074C281 *ubuntu-11.04-desktop-i386.iso
This matches.</pre>
</div>
<div title="LinuxPartitions" server.title="LinuxPartitions" server.page.revision="1614921" server.etag="&quot;willrogers_public/LinuxPartitions/1614921:cc06032b216fd9d816cd63c84bb5cf899ddad25d&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20140103134209" created="20140103123318" tags="" _hash="f0969d580109d4a045ec1fef09f4db0eb481fd38">
<pre>It is common to divide a block device (hard drive, memory stick) into different partitions of different sizes with different filesystems on them.  The information about the partitions is stored in a partition table.

* {{{/dev/sda}}} or {{{/dev/sdb}}} is the ''device''
* {{{/dev/sda1}}} or {{{/dev/sdb2}}} is a ''partition''

{{{fdisk -l}}} shows the different partitions:
{{{
will@will-ubuntu2:~$ sudo fdisk -l

Disk /dev/sda: 250.1 GB, 250059350016 bytes
255 heads, 63 sectors/track, 30401 cylinders, total 488397168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0xace7f343

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048      206847      102400    7  HPFS/NTFS/exFAT
/dev/sda2          206848   118450660    59121906+   7  HPFS/NTFS/exFAT
/dev/sda3       118452222   488396799   184972289    5  Extended
/dev/sda5       118452224   476035071   178791424   83  Linux
/dev/sda6       476037120   488396799     6179840   82  Linux swap / Solaris

Disk /dev/sdb: 15.9 GB, 15931539456 bytes
255 heads, 63 sectors/track, 1936 cylinders, total 31116288 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            8192    31116287    15554048    c  W95 FAT32 (LBA)
}}}
In this case, there are two disks: 
* {{{/dev/sda}}} - the SSD on which Linux and Windows 7 are installed
* {{{/dev/sdb}}} - the SD card from my camera

{{{gparted}}} gives a similar view in a GUI.

!!Formatting
A simple way to format is in a camera - mine creates one partition ({{{fat32}}}) plus a few files.  Doing it from the command line is more complicated because there are a lot of options.  It's recommended to use {{{cfdisk}}} rather than {{{fdisk}}}.</pre>
</div>
<div title="EmiWorkPackages" server.title="EmiWorkPackages" server.page.revision="710491" server.etag="&quot;willrogers_public/EmiWorkPackages/710491:a32e4f503bf11b7b993af4f140191c5f79dfa38b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120515083830" created="20111018152049" tags="" _hash="b0f76770895960cd587e2451678d46de6d1a6b76">
<pre>At the plenary sessions in the EMI AHM, there were presentations on each work package.  I've summarised them each in their own tiddler below.  Note that they each have an EMI Twiki page appending their title to this URL: https://twiki.cern.ch/twiki/bin/view/EMI/.

* EmiNA1 - Administration and Technical Management
* EmiNA2 - Outreach and Collaborations.
* EmiNA3 - Sustainability and ~Long-Term Strategies
* EmiSA1 - Maintenance and Support
* EmiSA2 - Quality Assurance
* EmiJRA1 - Middleware Development, Evolution and Integration 

At the same level of importance on the twiki are: 
* PEB - the Project Execution Board
* ECB - Executive Collaboration Board, higher-level than John's Collaboration Board, with about 7 participants
* PTB - Product Technical Board
* EMT - Engineering Management Team, led by Cristina Aiftimiei.
</pre>
</div>
<div title="LinuxLinks" server.title="LinuxLinks" server.page.revision="364286" server.etag="&quot;willrogers_public/LinuxLinks/364286:c5b5f989ff04d5902bd57f661854d2cf3c4816af&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120307112506" created="20120307111044" tags="linux" _hash="792c358904f4a639274b0795ca0bf2bd5e120278">
<pre>You can make links in two ways on Linux - hard and soft.  I'm only used to making soft links.

!!Soft links
You make a soft or symbolic link like so:
{{{
$ ln -s testfile linkfile
$ ll
lrwxrwxrwx 1 root root  8 Mar  7 11:07 linkfile -&gt; testfile
-rw-r--r-- 1 root root 21 Mar  7 11:07 testfile
}}}
A soft link creates another file which redirects to the original file.  Note the permissions - completely open with an 'l' at the beginning to indicate that it's a link. Anyone can get to the link and follow it, so the permissions act like they would for the original file.

If the file is changed, the link still points to the file so the change will be seen by someone looking at the link.  If the original file was moved or deleted, the link is left without anything to resolve to:
{{{
$ rm testfile
$ ll
lrwxrwxrwx 1 root root 8 Mar  7 11:07 linkfile -&gt; testfile
$ cat linkfile
cat: linkfile: No such file or directory
}}}
You can restore the file or a different file and the link will still work.

!!Hard links
You make a hard link like this:
{{{
$ ln testfile linkfile
$ ll
-rw-r--r-- 2 root root 19 Mar  7 11:11 linkfile
-rw-r--r-- 2 root root 19 Mar  7 11:11 testfile
}}}
Notice that the number on the right of the permissions has incremented to '2'.  This is the number of references on the filesystem to that particular 'inode'.

A hard link makes a second reference to the same file.  This means that anything you do to the link happens to the original file - in fact they have the same status.  So changing permissions on the link changes permissions on the original file.  However, removing either doesn't destroy the file - that happens when you remove the last link to the file.</pre>
</div>
<div title="SpaceSettings" server.title="SpaceSettings" server.page.revision="1521882" server.etag="&quot;system-info_public/SpaceSettings/1521882:5036704184802a586f2b0ab1a3f535560ed8be37&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-info_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-info_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeMissing excludeSearch" _hash="59d90cba2585970233eb03744888f06cec46918d">
<pre>!Upload an icon
&lt;&lt;tiddler spaceIcon&gt;&gt;
!Describe your space
If you haven't already done so, you should provide a brief decscription of yourself and what you're using this space for. To do this, just edit the [[SiteInfo]] tiddler (keeping the title the same of course).

!Change the title
&lt;&lt;tiddler spaceTitle&gt;&gt;
!Change the theme
&lt;&lt;tiddler colorScheme&gt;&gt;
!Change the menu
If you'd like to change the menu items along the top, you can edit the [[MainMenu]] tiddler.

!Change the default tiddlers
&lt;&lt;tiddler setDefaultTiddlers&gt;&gt;
!More Advanced customisations
If you know HTML and CSS, you can edit some or all of the following tiddlers to customise your space further:
* PageTemplate
* EditTemplate
* ViewTemplate
* StyleSheet</pre>
</div>
<div title="PythonSelf" server.title="PythonSelf" server.page.revision="901919" server.etag="&quot;willrogers_public/PythonSelf/901919:e727b4d66db27a5e1be8c90c745f5e318c6333f4&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121007113642" created="20121007113412" tags="oop python self" _hash="31c1c18f220f9b082c92b90575ec223a450616d8">
<pre>{{{self}}} is equivalent to {{{this}}} in Java.

!!methods
A method is a function belonging to a class.

The first argument in any method (that is, it must be associated with an object) (including {{{__init__}}}) always refers to the object itself.  By convention 'self' is always used for the name of this argument.  When you call the method, you don't have to supply the first argument - python automatically does it.

!!member variables
You assign any member variables (or 'instance variables') to self:
{{{
self.x = 10
}}}
By convention, you give all of these a reasonable value in the {{{__init__}}} method.  You can refer to them using 'self' within the class, and the object name outside of the class: {{{print obj.x}}}.</pre>
</div>
<div title="SiteSubtitle" server.title="SiteSubtitle" server.page.revision="1523477" server.etag="&quot;willrogers_public/SiteSubtitle/1523477:83f30a4439f7ca915dd6ff93040c3858260ff989&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131112130826" created="20110421100842" tags="excludeLists excludeSearch" _hash="23f0d76466913d29cb156cd319e2a217c5a67998">
<pre>Online notebook</pre>
</div>
<div title="WorkAccounts" server.title="WorkAccounts" server.page.revision="365033" server.etag="&quot;willrogers_private/WorkAccounts/365033:959820a80b1ca8d101a18f8493bb05dc3b947fac&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20110802151131" created="20110802145250" tags="" _hash="ec302054da770c1a32796540c666bcd94034363f">
<pre>
!!General 

| OPB |  STFC email address | old pwd |
| Events and training | " | " |
| RAL computer training | " | " |


!!APEL

| Savannah | STFC email address | new pwd |
| ETICS | Certificate | - |
| CERN account | wrogers | new pwd |</pre>
</div>
<div title="FastFeedbackSrc" server.title="FastFeedbackSrc" server.page.revision="1488553" server.etag="&quot;willrogers_public/FastFeedbackSrc/1488553:d602a3920897526bd1e0b10f892147d393f9a01c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131028162902" created="20130709102528" tags="" _hash="d5ad3b5cf9c17553ea0da90feb5c0f7524c0f83b">
<pre>See GenericDevice, FastFeedbackExcite

The {{{src}}} directory contains mainly C code:


!!Core
* {{{fofb.h}}} contains
** four sets of anonymous CEnums
** {{{struct MEMORY_MAP}}}
** {{{struct FOFBSTATE}}}
** {{{struct FEEDBACK}}}
*** the FEEDBACK struct contains an array of 10 seconds' worth of FOFBSTATE structs, used to retain the past state for post mortems

!!!!{{{fofb.c}}} 
This is the actual program.  It defines a number of variables and functions, then starts a loop which runs indefinitely.

These are the functions defined:
* {{{write_node_mask()}}}
* {{{write_fast_buffered()}}}
* {{{checkPscStates()}}}
* {{{check_watchdog()}}}
* {{{getcell()}}}
* {{{getcellsub()}}}
* {{{pmc_ack()}}}
* {{{pmc_init()}}}
* {{{stop_feedback()}}}
* {{{irq_handler()}}}
* {{{check_events()}}}
* {{{reset_accumulator()}}}
* {{{controller_step()}}}
* {{{stop_gracefully()}}}
* {{{tick()}}}
* {{{fixed_to_float()}}}
* {{{inverse_matrix_multiply()}}}
* {{{SetMask()}}}
* {{{check_flags()}}}
* {{{dma_setup()}}}
* {{{pscTask()}}}
* {{{fofbTask()}}}
* {{{pmc_configure()}}}
* {{{FeedbackInit()}}}
* {{{FeedbackStart()}}}

!!!!Registers
From line 742 to the end, there is a lot of cryptic stuff regarding registers.  Several functions are defined by the preprocessor, apparently so that they can be defined for different types.

Each of the following functions acts on a {{{Variant}}}, defined in {{{GenericDevice.h}}}.  See GenericDevice.  Each of them is of type {{{GenericFunction}}}, and they are registered in {{{GenericInit}}} below.
* {{{powerdown()}}}
* {{{setTimeFrame()}}}
* {{{dataSelect()}}}
Other functions (also of type {{{GenericFunction}}} are defined using macros so that they can operate on variable types.

* {{{GenericInit()}}} - 150 lines - this seems to register a lot of listeners to EPICS variables; the names are abbreviated, and I can't find where they are filled.
** It calls {{{GenericRegister}}} a lot of times, with a name, a function of type {{{GenericType}}} and {{{udata}}}, which seems to be of differing types.
* {{{register_excite()}}}

!!!!Power supply controllers
* {{{psc.c}}}, {{{psc.h}}} - these represent the power supply controllers
** structs {{{io_PSC_link_reg}}} and {{{io_PSC_link}}}
** external functions {{{write_fast}}}, {{{read_status}}}, {{{correctorPresent}}}, {{{trigger_vmetro}}}
** ~EPICS-registered functions: {{{FofbStart}}} and {{{FofbAddCorrector}}}.  These are called from the database definition file {{{generic.dbd}}}.  This appears to be how the program is started inside an IOC.

It uses {{{#define LOCAL static}}} to declare local variables - that is, they can't be used outside of the file.


!!Post mortems
The {{{feedback}}} struct contains an int pmode corresponding to the current state of post mortem; there is an enum for the possible states in {{{fofb.h}}}.  {{{PM_POST}}} seems to be standard operation, where states are stored in the {{{states}}} buffer.  {{{feedback.sn}}} (state number) records which item in the buffer to use, and each loop the current state is copied to that item.

!!Utils

* {{{sysc.c}}} - low-level system interaction - this also has a function registered in EPICS: {{{FofbUseBusRequest2}}}, which as far as I can tell is the only function used from this file.

* {{{constants.h}}} - as you'd expect, constants for the use of the program

* {{{GenericDevice.c}}}, {{{GenericDevice.h}}}, {{{GenericDeviceP.h}}} - these appear to be related to EPICS variables, but I can't get a handle on quite how.
* {{{pmc_regs.h}}} - defines two structs: {{{WRITE_REGS}}} and {{{READ_REGS}}}.  These are used for reading from and writing to the hardware.

* {{{timing.h}}} - this contains only the function timebase(), which appears to return some kind of timestamp.

I don't yet see the point of {{{fofbMain.cpp}}}, the only C++ code there.
!!!!Altivec
Altivec is a library used for vector calculation on the ~PowerPC architecture.  It works in terms of 128-bit vectors, designed so that they can fit in one register - that is, four ints, four floats or more shorts or chars.  The below functions make use of 4-floats to minimise the number of calculations.
* {{{vector.h}}} - this has two functions used for vector matrix operations in {{{fofb.c}}}.
** {{{Saturate()}}}, used in {{{fixed_to_float()}}} -  it converts an integer array into a float array depending on some checks, and returns the number of failed checks
** {{{gemvf4()}}}, used in {{{inverse_matrix_multiply()}}} - it must handle the multiplication of the response matrix



!!Object files
* There are two binaries in the directory: {{{read_intel_hex.o}}} and {{{devMrfPmc.o}}}.  These are both 32-bit ELF files, for PowerPC architecture.  Identical files appear to be in the directory {{{O.vxWorks-ppc604_long}}}, once the project has been built.

!!Libraries
The code uses a few VXWorks libraries:
* semLib: http://www.vxdev.com/docs/vx55man/vxworks/ref/semLib.html
* msgQLib: http://www.vxdev.com/docs/vx55man/vxworks/ref/msgQLib.html

!!Questions
* Why is {{{static}}} renamed {{{LOCAL}}}?
{{{
#define LOCAL static
}}}
* Why is there such a mix of conventions for variable names?
* Why is "excite.h" included in fofb.c, then "excite-inl.h" included lower down?  Isn't there a conflict?
* Where does the apparently in-built {{{UINT32}}} come from?
* Where does {{{IMPORT}}} come from?
* What do the {{{GenericDevice}}} files represent?
* What's the purpose of the {{{#define}}}d functions?
* What is Rocket IO?</pre>
</div>
<div title="MatPlotLib" server.title="MatPlotLib" server.page.revision="1575652" server.etag="&quot;willrogers_public/MatPlotLib/1575652:783dfd1236fa97af111d0d0786347881cc969cfb&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131204113825" created="20130604150751" tags="" _hash="b3900a9ad54583176c63c6f1eb21faadb2502935">
<pre>{{{matplotlib}}} is a Python library for various plotting purposes.  Its homepage is http://matplotlib.org.  It is compatible with numpy and scipy.

!!Basics
You can quickly plot something as follows:
{{{
import matplotlib.pyplot as pp
pp.plot(&lt;array&gt;)
pp.suptitle('My plot') # top middle
pp.show()
}}}
A bar chart:
{{{
pp.bar(bins, values)
}}}

</pre>
</div>
<div title="CodePython" server.title="CodePython" server.page.revision="363866" server.etag="&quot;willrogers_public/CodePython/363866:a10fd81dd81bae382dd22bd44ffaa7980537e7b9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110423100554" created="20110423100123" tags="gchq puzzles python" _hash="3579ba59bd1c5e4e3b96ee21fcb0c937e964fa02">
<pre>Here's the source code.

{{{
#!/usr/bin/env python

# This file has the first code, the second code and the decoded text.
# The two codes encode the same plain text.
f = open('strings.txt')

code1 = f.readline()
code2 = f.readline()
plain = f.readline()

f.close()



# construct the Vigenere Square
abc = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
abc2 = abc + abc
vsquare = {}

for letter in abc:
    n = abc.index(letter)
    vsquare[letter] = abc2[n:n+26]


# Get the key as a stream given the encoded version
# and the plain text version.
def get_key(code, plain):
    key_stream = ""
    # zip truncates to the length of the shorter 
    for p_letter, c_letter in zip(plain, code):

        no = vsquare[p_letter].index(c_letter)
        key = abc[no]
        key_stream += key
    return key_stream

key = get_key(code1, plain)
print key
print '\n'

# Given the code and the key stream, extract the uncoded version.
def decode(code, key):
    code = code.strip()
    key = key.strip()
    plain = ""
    for c_letter, k_letter in zip(code, key):
        
        no = vsquare[k_letter].find(c_letter)
        k = abc[no]
        plain += k
    return plain

answer = decode(code2, key)
print answer
print '\n'

key.strip()
# Get the key as numbers
number_key_list = [str(abc.find(letter)) for letter in key]
number_key = "".join(number_key_list)

print number_key
print len(number_key)

# Get the first 225 letters before it repeats
number_key2 = number_key[:225]
print '225-number key:'
print number_key2
print 'trying to get the square:\n'
row = ""
i = 1
for no in number_key2:
    if len(row) == 15:
        print row 
        row = ""
        i = i + 1
    row += str(no)

print row + '\n'
    

full_key = number_key2 + number_key2
full_key  = [str(abc[int(no)]) for no in full_key]
full_key = "".join(full_key)


answer = decode(code2, full_key)
print answer

f4 = open('raw_answer.txt', 'a')
f4.write(answer + '\n')
f4.close()
}}}</pre>
</div>
<div title="UbuntuElevenFour" server.title="UbuntuElevenFour" server.page.revision="364835" server.etag="&quot;willrogers_public/UbuntuElevenFour/364835:c95cac7cb4177994c214f9684758b03571b466ce&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111030173641" created="20110428145319" tags="machine ubuntu virtual vm" _hash="71cd2269fb682a9aa9bf360e46e199ed5e7cad8f">
<pre>I tried to install Ubuntu both in VirtualBox and via Wubi at home, while I had plenty of internet.

I had a problem with my first download: UbuntuHashes

In the VM: 
* You need to install guest additions
* It only loads Ubuntu classic first time round, and I think you've got to give it a bit more video memory.
* I did that and gave it 32 MB of video memory, but it seems very slow, and although it's obvioulsy Unity it's still grey and old-fashioned looking.

!!NVidia graphics card 
There was a lot of trouble running my graphics card with Ubuntu 11.04.  The message it presented was: "This driver is activated but not currently in use."  There's a bug report about it [[here|https://bugs.launchpad.net/ubuntu/+source/nvidia-common/+bug/771788]], which claims that a fix has been released; if you hover over the package nvidia-commons, it says that the latest release is 0.2.35.  The package apparently at fault was nvidia-commons, whose page is [[here|http://packages.ubuntu.com/natty/nvidia-common]].  It has a changelog, but the releases up until 0.2.35 don't appear to mention this problem.

In the end, I installed it and this problem is still there, but doesn't seem to be a problem.  If you see what I mean.

!!Installed packages
* spotify
* gnome-mail
</pre>
</div>
<div title="SiteTitle" server.title="SiteTitle" server.page.revision="364710" server.etag="&quot;willrogers_public/SiteTitle/364710:b0f90021cbad8e0ea7380472328447691ab92adc&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110421100842" created="20110421100842" tags="excludeLists excludeSearch" _hash="abc9df78bb22964d3ed953e97bc24c7d9cdcef57">
<pre>willrogers</pre>
</div>
<div title="DiamondModules" server.title="DiamondModules" server.page.revision="1317086" server.etag="&quot;willrogers_public/DiamondModules/1317086:409b4e6366fb3ba31d33a5fb0c3d9f32bf3bbabd&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130722093827" created="20130626154837" tags="" _hash="c229e26b343524fceaab2d7b21281737d8a1b5a0">
<pre>Diamond uses the {{{module}}} command to control environments.  The locations it looks are stored in the {{{MODULEPATH}}} variable, which includes the {{{privatemodules}}} directory which I found in my home directory.

You can see which modules are loaded with {{{module list}}}.

You can switch a module for another using {{{module swap}}}.  In particular, if you do this for EPICS versions, it knows (because of the way the scripts are set up) that it needs to remove the old EPICS version.</pre>
</div>
<div title="CTypedef" server.title="CTypedef" server.page.revision="1311999" server.etag="&quot;willrogers_public/CTypedef/1311999:fbef0bc57890356b43e17dd0e1e4ff66f2044131&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130718105257" created="20130709101646" tags="" _hash="edd2c174a79ae9addc67be413c9d663e7ef21f2d">
<pre>{{{typedef}}} has a few meanings in C.

!!Clarification

I found
{{{
typedef double FIRTYPE;
}}}
in the FastFeedback code.  This just means that the type FIRTYPE acts exactly as a double.  It is guidance for the programmer of the semantics of the particular double that is being used.  The compiler doesn't generate warnings if the wrong type of double is used.

!!Simplification
If you declare a struct, when creating an example of it, you have to use the keyword {{{struct}}}:
{{{
/* io structure of each link */
struct io_PSC_link
{
    struct io_PSC_link_reg reg[PSC_IP_NO_OF_REGISTERS];
    struct io_PSC_link_reg breakreg;
    ...
    REG16BIT unused_3[32+64];
};
...
static struct io_PSC_link * psc_link[PSC_MAX_LINKS] = {0};
}}}
The call at the end here is creating a local array of pointers to {{{io_PSC_link}}} structs.

If you put {{{typedef}}} before the declaration, you don't have to use the {{{struct}}} keyword before creating an instance, because you've registered the struct as a type.  It would work like this:
{{{
typedef struct {
 ... 
} io_PSC_link;
...
static io_PSC_link * psc_link[PSC_MAX_LINKS] = {0};
}}}

!!More detail
This gets a bit complicated.  Generally, when you create a struct its name is in the struct namespace, and you can reference it using {{{struct &lt;name&gt;}}}.  The typedef avoids this by putting it in the 'global namespace' along with variables and function names - that's why it is at the end of the struct definition rather than the start.  You could put it in the struct namespace as well (even with a different name, but that seems a bit silly).</pre>
</div>
<div title="BashNumbers" server.title="BashNumbers" server.page.revision="363708" server.etag="&quot;willrogers_public/BashNumbers/363708:aeb5ba922af7ee5fa9890404ae2ad0ecc78953a5&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120306095451" created="20120305152952" tags="bash linux" _hash="318c2968a3f21944f674b54a916b92b3522d4d3f">
<pre>Bash doesn't seem to get on with numbers all that well, but you can do integer calculations.  You can define negative numbers: {{{x=-1}}}.

For testing numbers, see BashConditions.

There are two ways of calculation, and they both mysteriously don't need to use $ to reference variables:
{{{
let x=$x+1                  #  or let x=x+1
}}}
{{{
((z=$x-1))                  #  or ((z=x-1)) or ((z = z + 1))
}}}
You can use +,-,*,/,% for integer calculations.

There's also a command called {{{expr}}} which evaluates expressions, but I found it a little fiddly (e.g. escaping *).  It looks like you wouldn't use it for this kind of thing in bash, but it does do other things as well.
{{{
expr 10 \* 3
}}}</pre>
</div>
<div title="EdmBug" server.title="EdmBug" server.page.revision="1322541" server.etag="&quot;willrogers_public/EdmBug/1322541:5613a8a263cd800f24da9f45c7d472923fccf345&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130725160624" created="20130722101345" tags="" _hash="d1a8d2527a1c932b78059cd61cb32f40cfbd70c9">
<pre>The errors when running EDM appeared to originate from {{{baselib/xygraph.cc}}}.  Michael fixed this by correcting a cast whenever it checked for {{{ProcessVariable::SpecificType}}}.  In the case of an integer, the cast to a long pointer before dereferencing was incorrect, and it should have been a cast to an int.

This has changed since version 1-12-28.  

Versions 40 and 41 quote 'fixes for 64-bit systems'.  This appears to be where our problems start.

!!{{{setVal}}}
This is a static method called four times.  It casts a double to the specified pvType and puts it in the {{{ith}}} element of the destination array.  I'm not actually sure that the change I've made here is correct.

!!Elsewhere
{{{
           case ProcessVariable::specificType::integer:
             if (  xyo-&gt;ySigned[i] ) {
-              dyValue = (double) ( (long *) xyo-&gt;yPvData[i] )[n];
+              dyValue = (double) ( (int *) xyo-&gt;yPvData[i] )[n];
             }
             else {
-              dyValue = (double) ( (long *) xyo-&gt;yPvData[i] )[n];
+              dyValue = (double) ( (unsigned int *) xyo-&gt;yPvData[i] )[n];
             }
             break;
}}}

{{{xPvData}}} and {{{yPvData}}} are arrays with type {{{void *}}} and length {{{XYGC_K_MAX_TRACES}}} - that is, 20.  {{{xPvType}}} and {{{yPvType}}} are {{{int}}} arrays of the same length.
What happens in this snippet:
* {{{i}}} is the number of traces
* it casts the PV data to a long pointer then takes the {{{ith}}} item
* it takes the {{{nth}}} item from the resulting array
* it casts that to a double and assigns it to dyValue
{{{dyValue}}} seems then to be written to a temporary file.</pre>
</div>
<div title="TiddlySpaceSearcher" server.title="TiddlySpaceSearcher" server.page.revision="1521908" server.etag="&quot;tiddlyspace/TiddlySpaceSearcher/1521908:93e8ccce195fbc3f63e5d67b0302c3394b26756a&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch systemConfig" _hash="e3762c200fa4b897f6e7bbb9e0e7d83f860a89a5">
<pre>/***
|''Name''|TiddlySpaceSearcher|
|''Version''|0.2.5|
|''Requires''|TiddlySpaceConfig TiddlySpaceFollowingPlugin|
***/
//{{{
(function($) {
var tiddlyspace = config.extensions.tiddlyspace;
var tsScan = config.macros.tsScan;

config.shadowTiddlers.SearchTemplate = "&lt;&lt;view server.bag SiteIcon label:no width:24 height:24 preserveAspectRatio:yes&gt;&gt; &lt;&lt;view server.bag spaceLink title external:no&gt;&gt; in space &lt;&lt;view server.bag spaceLink&gt;&gt;";
config.shadowTiddlers.StyleSheetSearch = [".resultsArea .siteIcon { display: inline; }",
	".searchForm {text-align: left;}"].join("\n");
store.addNotification("StyleSheetSearch", refreshStyles);

var search = config.macros.tsSearch = {
	locale: {
		advanced: "Advanced Options",
		header: "Search",
		resultsHeader: "Results (%0)",
		find: "find",
		noResults: "No tiddlers matched your search query",
		query: "QUERY: ",
		error: "please provide a search query or a tag, modifier or title!",
		titleAdvanced: "where the title is",
		modifierAdvanced: "where the last modifier is",
		spaceAdvanced: "only in the space: ",
		notspaceAdvanced: "but not in the spaces: ",
		tagsAdvanced: "with the tags: "
	},
	andConstructor: function(container, label, fieldname, negationMode) {
		var tags = $("&lt;div /&gt;").appendTo(container);
		$('&lt;span /&gt;').text(label).appendTo(tags);
		var id = "area" + Math.random();
		container = $("&lt;span /&gt;").attr("id", id).appendTo(tags)[0];
		function add(container) {
			var el = $('&lt;input type="text" /&gt;').attr("field", fieldname).appendTo(container);
			if(negationMode) {
				el.attr("negation", "true");
			}
		}
		add(container);
		var el = $("&lt;button /&gt;").text("AND").click(function(ev) {
			add($(ev.target).data("container"));
			ev.preventDefault();
		}).appendTo(tags);
		$(el).data("container", container);
	},
	fieldConstructor: function(container, label, field) {
		container = $("&lt;div /&gt;").appendTo(container)[0];
		$("&lt;span /&gt;").text(label).appendTo(container);
		$("&lt;input /&gt;").attr("text", "input").attr("field", field).appendTo(container);
	},
	advancedOptions: function(form) {
		var locale = search.locale;
		var container = $("&lt;div /&gt;").addClass("tsAdvancedOptions").appendTo(form)[0];
		$("&lt;h2/ &gt;").text(search.locale.advanced).appendTo(container);
		$("&lt;div /&gt;").addClass("separator").appendTo(container);
		search.fieldConstructor(container, locale.titleAdvanced, "title");
		search.fieldConstructor(container, locale.modifierAdvanced, "modifier");
		search.fieldConstructor(container, locale.spaceAdvanced, "space");
		search.andConstructor(container, locale.notspaceAdvanced, "space", true);
		search.andConstructor(container, locale.tagsAdvanced, "tag");
	},
	constructSearchQuery: function(form) {
		var data = [], select = [];
		var query = $("[name=q]", form).val();
		if(query) {
			data.push("q=%0".format(query));
		}

		// add tags, fields etc..
		$("[field]", form).each(function(i, el) {
			var val = $(el).val();
			var name = $(el).attr("field");
			var negate = $(el).attr("negation") == "true";
			if(val &amp;&amp; name) {
				val = encodeURIComponent(val);
				val = negate ? "!" + val : val;
				if(name == "space") {
					val += "_public";
					name = "bag";
				}
				if(negate) {
					select.push("select=%0:%1".format(name,val));
				} else {
					var prefix = data.length === 0 ? "q=" : "";
					data.push('%0%1:"%2"'.format(prefix, name, val));
				}
			}
		});
		var dataString = data.join(" ");
		if(dataString.length === 0 &amp;&amp; !query) {
			return false;
		}
		var selectStatement = select.join("&amp;");
		if(dataString.length &gt; 0 &amp;&amp; selectStatement.length &gt; 0) {
			dataString += "&amp;";
		}
		dataString += selectStatement;
		return "/search?%0".format(dataString);
	},
	constructForm: function(place) {
		var locale = search.locale;
		$("&lt;h1 /&gt;").text(locale.header).appendTo(place);
		var form = $("&lt;form /&gt;").appendTo(place)[0];
		$('&lt;input type="text" name="q" /&gt;').appendTo(form);
		$('&lt;input type="submit" /&gt;').val(locale.find).appendTo(form);
		search.advancedOptions(form);
		var query = $('&lt;h2 class="query"/&gt;').appendTo(place)[0];
		var results = $("&lt;div /&gt;").appendTo(place).addClass("resultsArea")[0];
		var lookup = function(url) {
			if(!url) {
				results.empty().addClass("error").text(locale.error);
				return;
			}
			config.extensions.tiddlyweb.getStatus(function(status) {
				$(query).text(locale.query);
				var href = status.server_host.url + url;
				$("&lt;a /&gt;").attr("href", href).text(href).appendTo(query);
				tsScan.scan(results, { url: url, emptyMessage: search.locale.noResults, cache: true,
					template: "SearchTemplate", sort: "title", callback: function(tiddlers) {
						$("&lt;h2 /&gt;").text(locale.resultsHeader.format(tiddlers.length)).prependTo(results);
					}
				});
			});
		};
		$(form).submit(function(ev) {
			ev.preventDefault();
			var url = search.constructSearchQuery(form);
			config.macros.tsSearch.lastSearch = url;
			lookup(url);
		});
		if(search.lastSearch) {
			lookup(search.lastSearch);
		}
		return form;
	},
	handler: function(place) {
		var container = $("&lt;div /&gt;").addClass("searchForm").appendTo(place)[0];
		search.constructForm(container);
	}
};

})(jQuery);
//}}}</pre>
</div>
<div title="StructuredMarkup" server.title="StructuredMarkup" server.page.revision="364772" server.etag="&quot;willrogers_public/StructuredMarkup/364772:d9648fa9ebc2e33f58d00c16ed9eeedb6a8e62c0&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120229160919" created="20111120111104" tags="html python xml" _hash="6f3793d06c343261c4ba0befb80e8d687c67e4b2">
<pre>Chapter 19 of the python documentation is all about HTML and XML.

!!!19.1 - 19.4: HTML 
~HTMLParser (19.1) is the most likely part of this to be useful.  However, when doing screen-scraping-type stuff, I quickly went on to using [[Beautiful Soup|http://www.crummy.com/software/BeautifulSoup]], which I found easy to use to do what I wanted.
!!!19.5: Expat
Is this an example of a sax parser?  It seems to be.
!!!19.6 - 19.8: XML DOM
This is a node-based xml handler, which means it reads everything into memory and constructs a tree of objects.  This makes it easy to use, but slower and using more memory.
!!!19.9 - 19.12: XML SAX
This is an event-based xml handler, which is fast and requires less memory because it doesn't read everything into memory.
See SaxPython.
!!!19.13: XML Element Tree
This is recommended for working with XML, but was introduced in python 2.5, so I'll use sax for now.
</pre>
</div>
<div title="PoloForSale" server.title="PoloForSale" server.page.revision="364454" server.etag="&quot;willrogers_public/PoloForSale/364454:c43f128188679c178bc3f4226c9577794d658762&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110923185912" created="20110923185912" tags="" _hash="52fa1403996fd4857e60a33a7bf03c8896ea52d8">
<pre>37 Long Furlong Rd, ~OX13 6BL.

VW Polo 1.4ME (60hp) 3 door hatchback.
Reg 51 plate, 68700 miles, 9 months MOT
Silver, with alloy wheels, new tyres.
Full spec including ABS, Aircon, twin airbags, electric windows, central locking.
Nice tidy car, good little low-cost runaround, or first car for new drivers.
£2100 ono.
For more info, call 01235 534229 or 07789 676599, or email adam.warne@diamond.ac.uk
Located near Abingdon.</pre>
</div>
<div title="RaspberryPi" server.title="RaspberryPi" server.page.revision="1615548" server.etag="&quot;willrogers_public/RaspberryPi/1615548:7b763e9d5cbb8fb0aacf364118d968cbe502b0c4&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20140104115808" created="20121006102643" tags="pi raspberry" _hash="079817764fddd947c938798c090001e0b3d04bd7">
<pre>On my first try, I used the Raspbian OS provided on Maplin's SD card.  It worked fine.

* SpotiPi
* RaspBian
* RaspBMC

There's a tool in the raspi-config program which allows you to resize the partitions.

!!Samba
The instructions here seemed good enough: https://help.ubuntu.com/10.04/serverguide/samba-fileserver.html.
It was easy to set up a connection to the disk in Nautilus, apparently less so in Nemo.  I had a problem moving a big file.

In RaspBMC, a few dependencies couldn't be installed, but it does seem to work fine.

To navigate to a samba share in Ubuntu, go to {{{/run/user/&lt;uid&gt;/gvfs/}}}

!!iPlayer
I installed get-iplayer, and what it does is downloads the streams from the iPlayer website and encodes to mp4.  It appears to work fine.  You can install it using {{{apt-get}}}.

!!Overclocking
There is now a simple setting in the raspi-config program to overclock the processor, with steps from 700MHz to 1000MHz.  It is possible for the pi not to boot, but so far I have had no problems.

I tested the new settings with one of my Project Euler problems, and I did get the expected speedups, with some random variation. 

!!Music player
You can run a headless music player using either {{{mpd}}} or {{{mopidy}}}.  Mopidy is essentially an enhanced version of {{{mpd}}} which allows connection to Spotify, among other things.

!!!!Mounting an HDD
You've got to mount a filesystem so that everyone can read it:
{{{
sudo mount /dev/sda1/ /media/hdd -ouser,umask=0000,ro
}}}

!!!!Mopidy
There is good documentation here: {{{http://docs.mopidy.com/en/develop/}}}.  You can install using {{{apt}}}, once you've added the correct repo.

!!!!Output
You can change the audio output using the following commands:
{{{
sudo amixer cget numid=3 
sudo amixer cset numid=3 1
}}}
* 0 is default (HDMI if available)
* 1 is 3.5mm jack
* 2 is HDMI



</pre>
</div>
<div title="Backstage" server.title="Backstage" server.page.revision="1521902" server.etag="&quot;tiddlyspace/Backstage/1521902:8c276419061cf879172d34ea15003d30871df63d&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="" modified="20131111192332" created="20131111192332" tags="excludeLists excludeMissing excludeSearch" _hash="374716f48c21298abb095093dce2176965648975">
<pre>!SpaceUnplugged
{{unpluggedSpaceTab{
{{wizard{
&lt;&lt;image unsyncedIcon width:48&gt;&gt; Sync is currently unavailable in ~TiddlyWiki due to security constraints in modern browsers. Research is being done to build a suitable alternative. In the meantime if you have changed content in an offline ~TiddlyWiki, you can get your content back into ~TiddlySpace by using the ''import'' functionality from the backstage of the online wiki.
}}}
}}}

!Menu
&lt;&lt;message messages.memberStatus&gt;&gt; &lt;&lt;homeLink&gt;&gt;
{{unsyncedList{&lt;&lt;message messages.syncListHeading&gt;&gt; &lt;&lt;list filter [is[unsynced]]&gt;&gt;}}}

running TiddlySpace@glossary version &lt;&lt;message extensions.tiddlyweb.status.tiddlyspace_version&gt;&gt;
{{autotable{
&lt;&lt;tiddler Backstage##Resources&gt;&gt;
}}}

!Resources
[[blog|@@blog]] [[documentation|@@docs]] [[featured spaces|@@featured]] 

!ImportExport
&lt;&lt;fileImport&gt;&gt;
You can download this TiddlySpace as an offline TiddlyWiki:

{{chunkyButton{&lt;&lt;exportSpace&gt;&gt;}}}

!BackstageTiddlers
|upload a &lt;&lt;message messages.privacySetting&gt;&gt; file: &lt;&lt;binaryUpload&gt;&gt;|&lt;&lt;closeAll&gt;&gt;&lt;&lt;permaview&gt;&gt;&lt;&lt;newTiddler&gt;&gt;&lt;&lt;newJournal "DD MMM YYYY" "journal"&gt;&gt;&lt;&lt;saveChanges&gt;&gt;|
|&gt;|&lt;&lt;search&gt;&gt;|
|&gt;|&lt;&lt;tiddler Backstage##Tiddlers&gt;&gt;|

!Tiddlers
&lt;&lt;tabs
	txtMainTab
	"Recent" "Recently edited tiddlers" TabTimeline
	"All" "All tiddlers" TabAll
	"Public" "All public tiddlers" [[TiddlySpaceTabs##Public]]
	"Private" "All private tiddlers" [[TiddlySpaceTabs##Private]]
	"Tags" "All tags" TabTags
	"Spaces" "Tiddlers grouped by space" [[TiddlySpaceTabs##Spaces]]
	"Missing" "Missing tiddlers" TabMoreMissing
	"Orphans" "Orphaned tiddlers" TabMoreOrphans
	"Shadows" "Shadowed tiddlers" TabMoreShadowed
&gt;&gt;

!BatchOps
&lt;&lt;tabs
	txtPublisherTab
	"Private" "Move tiddlers from private to public" Backstage##BatchPrivate
	"Public" "Move tiddlers from public to private" Backstage##BatchPublic
&gt;&gt;

!BatchPrivate
&lt;&lt;TiddlySpacePublisher type:private&gt;&gt;

!BatchPublic
&lt;&lt;TiddlySpacePublisher type:public&gt;&gt;

!Plugins
''Note:'' Many of these plugins are core TiddlySpace plugins and cannot be changed unless first cloned.

&lt;&lt;tiddler PluginManager&gt;&gt;

!Tweaks
These options change behavior in TiddlyWiki //only// and may be ineffective in TiddlySpace.

&lt;&lt;tiddler AdvancedOptions&gt;&gt;</pre>
</div>
<div title="TiddlySpaceRevertRevision" server.title="TiddlySpaceRevertRevision" server.page.revision="1521871" server.etag="&quot;system-plugins_public/TiddlySpaceRevertRevision/1521871:7eecaa1341a2c1f93a5601fe600b0305c99f9258&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeMissing excludeSearch systemConfig" _hash="db2d6dc5a63b9262d62fb6ffe02dbe10fdd31feb">
<pre>/***
|''Name''|TiddlySpaceRevertRevision|
|''Description''|Revert to a previous revision|
|''Author''|BenGillies|
|''Version''|0.1|
|''Status''|unstable|
|''Source''|http://github.com/TiddlySpace/tiddlyspace|
|''CodeRepository''|http://github.com/TiddlySpace/tiddlyspace|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''CoreVersion''|2.6.0|
|''Requires''|TiddlyWebAdaptor TiddlySpaceRevisionView|
!Usage
Add a control button to revert to a particular revision.

The button must be called from within a revision, as generated by TiddlySpaceRevisionView
!Code
***/
//{{{
(function($) {

config.commands.revert = {
	text: "revert",
	tooltip: "make this revision the current one",
	handler: function(ev, src, title) {
		var revElem = story.getTiddler(title);
		var tidToRevert = store.getTiddler($(revElem).attr("revName"));

		var revision = store.getTiddler(title);
		if ((revision) &amp;&amp; (tidToRevert)) {
			tidToRevert.text = revision.text;
			var newFields = merge({}, revision.fields);
			for (var fieldName in newFields) {
				if (fieldName.substr(0, 7) === "server.") {
					delete newFields[fieldName];
				}
			}
			merge(tidToRevert.fields, newFields);
			tidToRevert.tags = merge([], revision.tags);
			tidToRevert.fields.changecount = 1;
			delete tidToRevert.fields.doNotSave;

			store.saveTiddler(tidToRevert.title, tidToRevert.title,
				tidToRevert.text, null, null, tidToRevert.tags,
				tidToRevert.fields, false, tidToRevert.created, tidToRevert.creator);

			autoSaveChanges(true);
		}
	}
};

})(jQuery);
//}}}</pre>
</div>
<div title="saveTiddler" server.title="saveTiddler" server.page.revision="1521927" server.etag="&quot;system-images_public/saveTiddler/1521927:d0d1d6ebe7420f7157105e676eb0db531d4b54b5&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-images_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-images_public" server.permissions="read" server.content-type="image/svg+xml" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="461592520ce0f489a4d4a95f0dcb4e1e46d2f6e7">
<pre>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" viewBox="2 724 68 55" 
width="30" height="30"&gt;
&lt;g stroke="none" stroke-opacity="1" stroke-dasharray="none" fill="none" fill-opacity="1"&gt;
	&lt;g&gt;
		&lt;path d="M 2.25 756 L 11.25 747 L 24.75 760.4994 L 60.750004 724.4994 L 69.75 733.49902 
		L 24.749977 778.49976 Z" fill="#101010" class="glyph"/&gt;
	&lt;/g&gt;
&lt;/g&gt;
&lt;/svg&gt;</pre>
</div>
<div title="SvnNotes" server.title="SvnNotes" server.page.revision="1333433" server.etag="&quot;willrogers_public/SvnNotes/1333433:d7973eedf91f00658ecef51523b2dbbe996ff00b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130805085118" created="20111209115653" tags="svn vcs" _hash="798217cdc474818357930c8a572a04ab025ed0b3">
<pre>Having started CvsNotes, and trying to sort out some problems with the APEL repositories, I realised I should probably make some notes on SVN as well.  I've got the basic concepts fine, but a lot of the detail is actually still vague for me.  I won't cover administration for the moment.

Most of this will come from the comprehensive free book available online: http://svnbook.red-bean.com/.

!!Introduction
SVN is designed to be the successor to CVS - so it works in a very similar way, with similar commands, but aims to correct most of the design flaws which made CVS difficult to work with.  It doesn't try to be a radical overhaul in versioning - more tries to do the same thing better.

SVN and CVS don't lock files, on the basis that as well as being awkward when more than one person is trying to work at the same time, source code has lots of dependencies, so changes to one file inevitably affect others.  Locking the file you're editing won't guard against problems between files.

SVN instead uses the 'working repository' paradigm, whereby there can be many versions of code being worked on, with one central repository maintaining state.

!!Useful stuff
* {{{svn info}}} is a very good command for getting a feel for what's going on.  It will tell you:
** the URL of the current directory (or file specified)
** the revision of the last change of the current directory
** the author and date of that change
* {{{svn log}}} shows the log messages associated with changes - very useful
** I think it shows all changes relevant to the specified location
* {{{svn export}}} just removes all the .svn data and gives you a clean copy.  You do this either from a working copy or directly from the repository.
* {{{svn diff}}} diffs the current changes from the base version.  You can compare to the head revision in the repo using {{{svn diff -r HEAD}}}.

!!{{{svn status}}}
{{{svn status}}} shows if files have been modified, added, deleted or are not known to svn.  {{{svn status -v}}} shows the current revision and the revision where the file was last changed for all files.  {{{svn status -u}}} compares with the latest from the repository, so needs to be authenticated to the repo.
* If you see an L in the status, the directory or file might be locked.  This happened when I got a network error trying to commit from my virtual machine.  You can use {{{svn cleanup}}} to remove the locks.
* If you see a plus in the status, it means svn knows about the history of the file (e.g. when you have moved or copied a file) and will retain it.

!!Merging
It's simple to create a branch using {{{svn copy}}}.  Merging the branch back is more complicated.
I had a simple example where I hadn't actually changed the trunk while I'd been working on a new version.  The command
{{{
svn merge --reintegrate &lt;url-of-branch&gt;
}}}
from the {{{trunk}}} directory, seemed to work fine.  It did take aaages on the SVN server at work though - no idea why.  The {{{--reintegrate}}} flag refers to the fact that the branch is coming back into the trunk, rather than the more 'standard' merge of trunk changes to the branch.  I hadn't done any of those standard merges, because there were no changes in the trunk to merge.  Once you have reintegrated a branch, you should delete it.

Alternatively, you may want to merge new changes from the trunk into a working branch, so that it doesn't get too out of date.  You can do this as follows:
{{{
svn merge -r 1914:1956 https://svn.esc.rl.ac.uk/repos/sct/software/apel/dbloader/trunk
}}}
The revision numbers are the rev when you split the branch and current rev of the trunk.  It will prompt you to resolve any conflicts.

!!Undoing
If you delete a directory and then decide you didn't want to before committing, undo like this:
{{{
svn revert &lt;directory&gt; --recursive
}}}

If you add a directory (using eg {{{svn cp}}} and change your mind, you can:
{{{
svn rm --force &lt;directory&gt;
}}}
Not quite sure why you need to force it.

If you want to undo a change which has been committed, you can use merge in reverse.  Here's an example (when I'd checked out the latest version, which I wanted to revert):
{{{
svn merge -r HEAD:97493 .
}}}
You then need to check the changes back in.


!!Commands
As well as {{{svn}}}, the main command, there are other top-level commands:

* {{{svnversion}}} - reports the revisions of the items present in a working copy.  More on this when I've figured more out about it.
* {{{svnlook}}} - I don't know what this does yet.
* {{{svnadmin}}} - for administration of a repo.  This doesn't concern me at the moment.

There are others which look even more towards the administration side of things.  I'll add them as and when they become relevant to me.</pre>
</div>
<div title="ChristmasPresents" server.title="ChristmasPresents" server.page.revision="991213" server.etag="&quot;willrogers_private/ChristmasPresents/991213:ee2c840f8b558ebf7db4013d4ca862abedff714a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20121212222055" created="20111108120024" tags="" _hash="862bc0b16d6bb2f0b77c8410640334f4e8c590f5">
<pre>!!2012
* Liz: How To Tell If Your Cat Is Planning To Kill You
* Liz: [[Behind the Beautiful Forevers|http://www.amazon.co.uk/Behind-Beautiful-Forevers-Death-Mumbai/dp/1846274494/ref=sr_1_1?ie=UTF8&amp;qid=1354015360&amp;sr=8-1]]
* Liz: pyjamas?
* Liz: raspberry sauce
* Cathie: Kenneth Branagh Much Ado on DVD
* E, K, A: Amazon wishlists
* L: 12-18 month girly clothes (charity shop?)

!!2011

* Liz: cuddly penguin, cat; Le Creuset mug, Thai rainbow mug; garlic press; woman saddle; alarm clock
* Dad: Alexander rugby triptych
* Ed: Harry Potter box set
* Katrine: see above
* Alexander:
* Mum: TabletComputer
* Grandad:
</pre>
</div>
<div title="BankAccounts" server.title="BankAccounts" server.page.revision="975712" server.etag="&quot;willrogers_private/BankAccounts/975712:1aff966f04f78a50677f2f72e410d901d9c157f6&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20121201122156" created="20110515122013" tags="" _hash="7b0267e83c48bab3991393f91f7e50ba72cb153e">
<pre>| Bank accounts |c
|HSBC current account | 40-18-01 | 61361821 | |
|HSBC credit card | | | Mastercard |
|First Direct e-Savings account | 40-47-58 | 83819787 | |
|First Direct cash e-ISA | 40-47-72 | 32056168 | |
|Northern Rock ~E-Saver | 08-60-64 | 61167886 | ....XQT (Username) |
|Stuart Smith's S + S ISA | | | Cofunds |
|Tesco Bank Fixed Rate Saver | 40-64-05 | 11609867 |  |

I considered the Nationwide MySave Online Plus, but the application was a little involved, so I gave up.
I then went through the sign-up process for the Shawbrook 18 month bond, 3.9%.  I claimed I was going to pay in £75000.  They now said that they're going to ring me within 7 days.</pre>
</div>
<div title="CFunctions" server.title="CFunctions" server.page.revision="1310840" server.etag="&quot;willrogers_public/CFunctions/1310840:ed0a20f487142a07a25cb5bf539a12b2ad7473f5&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130717084550" created="20121124155005" tags="" _hash="90cf4de34548e2c42f2de929b5b85e163743e8e4">
<pre>There are some standard functions available, and these presumably come from the standard library.  I will update here when it is more clear.

C functions may be called recursively.

!!!{{{&lt;ctype.h&gt;}}}
* {{{isdigit(c)}}} - returns whether a character is a digit - that is, 0 if not, and any non-zero value if so

</pre>
</div>
<div title="CaTools" server.title="CaTools" server.page.revision="1579997" server.etag="&quot;willrogers_public/CaTools/1579997:4b77cf72cbbdaf07f0e96e3766b3fb3b06687b77&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131206161047" created="20130523133331" tags="catools cothread epics python" _hash="0580373b47073d1ed11071fb4b543ffc555580c6">
<pre>This is the EPICS part of the cothread package - CA stands for channel access.  PV stands for process variable.

See also CaToolsImplementation

There are four important functions.  In general, you can supply one or more ~PVs, and you will receive the corresponding number of values in return.

!!!!Common arguments:
* {{{pvs}}} 
* {{{timeout}}} - in seconds
* {{{throw}}} - whether (in the event of failure) an exception is thrown or a {{{ca_nothing}}} object is returned with {{{ok = False}}}

!!!{{{caget}}}
This gets the value of the specified PV. 

Arguments:
* {{{format}}} - how much data is returned with the data
** {{{FORMAT_RAW}}} - {{{.name}}} and {{{.ok}}}
** {{{FORMAT_TIME}}} - also {{{timestamp}}} and {{{raw_stamp}}}
** {{{FORMAT_CTRL}}} - extra information, which depends on datatype
* {{{datatype}}} - the datatype you would like to receive
* {{{count}}} - may 'limit the number of waveform points'.  I don't know what this means.

!!!{{{caput}}}
This sets the value of a certain PV

!!!{{{camonitor}}}
Receive notification when a PV changes.

Arguments:
* {{{callback}}} - the function called when the values changes:
** if one PV is specified, {{{callback(value)}}} is called
** if more than one PV is specified, {{{callback(value, index)}}} is called

!!!{{{connect}}}
Establish connection to PV before trying to interact with it.  This is apparently not terribly useful.

!!!{{{ca_nothing}}}

{{{ca_nothing}}} is an exception class.  It can mean something has gone wrong, but it could also mean that something has gone right.  The {{{maybe_throw}}} decorator changes exception handling to take this possibility into account.  When you call {{{caget}}} or {{{caput}}}, you can specify whether to throw an exception or simply return a {{{ca_nothing}}} object, which you can query to find more information.  Another useful example is when retrieving an array of values.  If some of the calls are invalid, {{{ca_nothing}}} objects are in the returned array.

</pre>
</div>
<div title="setDefaultTiddlers" server.title="setDefaultTiddlers" server.page.revision="1521878" server.etag="&quot;system-info_public/setDefaultTiddlers/1521878:c0f8314f256b1ae4d33273c77d2acf4c9d657467&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-info_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-info_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="c632865df818925daec0d5040975797a27218e81">
<pre>Once you have some content then you may choose to determine a tiddler, or set of tiddlers to display each time you load ~TiddlySpace. This is determined by the [[DefaultTiddlers]].</pre>
</div>
<div title="_space" server.title="_space" server.page.revision="1521890" server.etag="&quot;tiddlyspace/_space/1521890:c1e3276ece15f4abffaf44c8106e354b65d73106&quot;" modifier="None" creator="None" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/html" modified="20131111192332" created="20131111192332" tags="excludeLists excludeMissing excludeSearch" _hash="8c535528a72c980d5c68cc9ca28ef21cb040b270">
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta http-equiv="Content-Type" content="text/html;charset=utf-8"&gt;
	&lt;title&gt;This Space&lt;/title&gt;
	&lt;link href="/bags/common/tiddlers/profile.css" type='text/css' rel='stylesheet' &gt;
	&lt;link href="/bags/common/tiddlers/admin.css" type='text/css' rel='stylesheet' &gt;
	&lt;!--[if lte IE 8]&gt;
	&lt;script type="text/javascript" src="/bags/common/tiddlers/json2.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript" src="/bags/common/tiddlers/es5-shim.min.js"&gt;&lt;/script&gt;
	&lt;![endif]--&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="container"&gt;
	&lt;div id="text-html" class="main section"&gt;
		&lt;a class="app" href="/"&gt;home&lt;/a&gt;
		&lt;div class="left"&gt;
		&lt;h2&gt;About this space &lt;button class='toggleNext'&gt;&lt;/button&gt;&lt;/h2&gt;
		&lt;div id="siteinfo"&gt;&lt;/div&gt;
		&lt;h2&gt;Site Icon&lt;/h2&gt;
		&lt;div&gt;
			&lt;img id="siteicon" class="siteicon"&gt;
			&lt;form id="upload" method="POST" enctype="multipart/form-data"&gt;
				&lt;input type="hidden" name="title" value="SiteIcon" /&gt;
				&lt;input type="hidden" name="tags" value="excludeLists"&gt;
				&lt;input type="hidden" name="csrf_token" class="csrf" /&gt;
				&lt;input type="file" name="file" accept="image/*" /&gt;
				&lt;input class="btn" type="submit" value="upload" /&gt;
			&lt;/form&gt;
			&lt;div id="dropzone"&gt;Drop file here
				&lt;img class="notloading" src="/bags/common/tiddlers/ajax-loader.gif" alt="submitting SiteIcon" /&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;h2&gt;Vital Statistics&lt;/h2&gt;
		&lt;div id="info"&gt;please wait while information is loaded about this space...&lt;/div&gt;
		&lt;button class="spacereset"&gt;Reset Space&lt;/button&gt;
		&lt;div class="reset-confirm-wrap messageArea"&gt;
			&lt;button class="close-btn" title="cancel reset"&gt;×&lt;/button&gt;
			&lt;p&gt;Are you sure you want to reset the space? You can't go back! This will remove all the content from the space!&lt;/p&gt;
			&lt;form class="cf"&gt;
				&lt;label for="reset-confirm"&gt;Enter the space name to confirm.&lt;/label&gt;
				&lt;input type="text" name="reset-confirm" class="reset-confirm-input inputBox" /&gt;
				&lt;button type="submit"&gt;Reset Now&lt;/button&gt;
			&lt;/form&gt;
			&lt;div class="reset-message-area"&gt;
				&lt;p class="performing"&gt;Resetting...&lt;/p&gt;
				&lt;p class="finished"&gt;Reset Done!&lt;/p&gt;
				&lt;p class="recipe-error-msg"&gt;Error removing includes. Please remove manually.&lt;/p&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;/div&gt;
		&lt;div class="right"&gt;
		&lt;div class="ts-membership"&gt;
			&lt;h2&gt;
				Add Member
				&lt;a href="http://docs.tiddlyspace.com/What%20is%20a%20member%3F" title="What is a Member?" class="help"&gt;What is a Member?&lt;/a&gt;
			&lt;/h2&gt;
			&lt;div&gt;
				&lt;p&gt;Add a new member to your space by entering their name below. Enter a space name instead and prefix with @ to add everyone who is already a member of that space.&lt;/p&gt;
				&lt;form class="ts-members"&gt;
					&lt;input class="inputBox" type="text" name="username"&gt;
					&lt;input type="submit" value="Add Member" class="btn" /&gt;
				&lt;/form&gt;
			&lt;/div&gt;
			&lt;h2&gt;
				Existing Members &lt;button class='toggleNext'&gt;&lt;/button&gt;
			&lt;/h2&gt;
			&lt;div&gt;
				Your space currently has the following members: 
				&lt;ul class="ts-members"&gt;&lt;/ul&gt;
			&lt;/div&gt;
			&lt;h2&gt;
				Include Space
				&lt;a class="help" href="http://docs.tiddlyspace.com/What%20is%20space%20inclusion%3F" title="What is inclusion?"&gt;What is Inclusion?&lt;/a&gt;
			&lt;/h2&gt;
			&lt;form class="ts-includes"&gt;
				&lt;input class="inputBox" type="text" name="spacename"&gt;
				&lt;input type="submit" value="Include Space" class="btn" /&gt;
			&lt;/form&gt;
		&lt;/div&gt;
		&lt;div&gt;
			&lt;h2&gt;Included Spaces &lt;button class='toggleNext'&gt;&lt;/button&gt;&lt;/h2&gt;
			&lt;div&gt;
			This space includes the following spaces:
			&lt;ul class="ts-includes"&gt;&lt;/ul&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;/div&gt;
		&lt;div class="clear"&gt;&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;
&lt;script src='/bags/common/tiddlers/backstage.js'&gt;&lt;/script&gt;
&lt;script src='/bags/common/tiddlers/jquery.js'&gt;&lt;/script&gt;
&lt;script src='/bags/tiddlyspace/tiddlers/chrjs'&gt;&lt;/script&gt;
&lt;script src='/bags/common/tiddlers/chrjs.space'&gt;&lt;/script&gt;
&lt;script src='/bags/common/tiddlers/chrjs.users'&gt;&lt;/script&gt;
&lt;script src='/bags/common/tiddlers/chrjs.identities'&gt;&lt;/script&gt;
&lt;script src='/bags/tiddlyspace/tiddlers/TiddlySpaceCSRF'&gt;&lt;/script&gt;
&lt;script src='/bags/common/tiddlers/jquery-form.js'&gt;&lt;/script&gt;
&lt;script src="/bags/common/tiddlers/siteiconupload.js"&gt;&lt;/script&gt;
&lt;script src="/bags/common/tiddlers/ts.js"&gt;&lt;/script&gt;
&lt;script src="/status.js"&gt;&lt;/script&gt;
&lt;script src="/bags/common/tiddlers/space.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<div title="MysqlNotes" server.title="MysqlNotes" server.page.revision="1021752" server.etag="&quot;willrogers_public/MysqlNotes/1021752:2fee931a65ee5abc8e5817d68ab00491e7b7c56a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130110092743" created="20110726100835" tags="mysql sql" _hash="aa634736e7380428d022c4abb9ac80dd3ae2279b">
<pre>See also SqlSyntax.

* MySQLIndices
* MySQLFiles

You can use {{{explain &lt;statement&gt;}}} for information on how the query will be run, for use in optimising.

!!Command line
Note that there's no space between -p and the password, and note the &lt; directing the sql file into the command.
{{{
mysql -u &lt;username&gt; -p&lt;password&gt; &lt;db-name&gt; &lt; &lt;file&gt;.sql
}}}

* {{{\g}}} - same as semicolon
* {{{\G}}} - display results differently
* {{{\c}}} - cancel current command
* {{{\N}}} in a text file represents NULL.

!!Client commands

{{{ show databases; }}} - show the databases
{{{ select database(); }}} - show the current database
{{{ use &lt;db-name&gt; }}} - select a database
{{{ show tables; }}} - show tables inside one database
{{{ describe &lt;table-name&gt;; }}} - show a summary of a table
{{{ show warnings; }}} - if warnings are mentioned after some operation
{{{ show processlist; }}} - show commands currently running
{{{ show procedure status; }}} - list procedures
{{{ show create procedure &lt;name&gt;; }}} - show specific procedure

!!Table types
* MyISAM used to be the default table type
* InnoDB is now the default table type

!!Datatypes
* CHAR(n) always holds the number of characters specified
* VARCHAR(n) can hold up to the number of specified characters, but is slower than CHAR

!!Procedures
Any variables in a stored procedure (in mysql) must be declared at the top of the procedure.  These variables can have default values.

!!Variables
Here is a really good explanation of variables and session variables: http://stackoverflow.com/questions/1009954/mysql-variable-vs-variable-whats-the-difference

!!Triggers
You can use triggers in mysql 5.0 and above.  The documentation is here: http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html.
</pre>
</div>
<div title="PythonDistutils" server.title="PythonDistutils" server.page.revision="1375068" server.etag="&quot;willrogers_public/PythonDistutils/1375068:d0db43f2ed38e8cf05906e0f66805157f5012e30&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130828124613" created="20120109105117" tags="" _hash="b88687a8adf4171020157d0d876e6f759b3afa15">
<pre>In the PythonDocumentation, not everything comes under the 40 core chapters.  There are also 11 chapters on {{{distutils}}}, which I'm looking at so that I can build an RPM for the SSM.

The documentation is here: http://docs.python.org/distutils/index.html.

It is considered to be a bit basic, but attempts to rationalise Python packaging have had a hard time of it.  The current recommendation is to use {{{distutils}}} if your requirements are very simple, and {{{setuptools}}} for anything more complicated.</pre>
</div>
<div title="CStructs" server.title="CStructs" server.page.revision="1354393" server.etag="&quot;willrogers_public/CStructs/1354393:dc76f7b983291653893653a00d8742d3e787373a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130820144857" created="20130712215542" tags="" _hash="b8ed3631b45284bb28e303f314bac5e4e591a038">
<pre>A structure is a collection of variables - the closest C gets to a class.  See also CTypedef.

!!Definition
{{{
struct point {
    int x;
    int y;
};
}}}
You could put a variable name between the final brace and the final semicolon, and this would declare a variable of the new struct type immediately.
To use a variable, just use a dot: {{{p.x;}}}.

You can initialise a struct immediately as follows:
{{{
struct point p = { .x = 3, .y=2 };
}}}

If you assign one struct to another, you don't need to use {{{memcpy}}} or anything.  C will copy the data from one variable to the other.

In newer versions of C, it is possible to define an anonymous struct.  Presumably this is only useful if you create an example of it at the time.

You can initialise everything in a struct to zero like this:
{{{
struct point p = {0};
}}}

!!{{{-&gt;}}}
The arrow is a special way to get to members of a struct when all you have is a pointer to that struct:

{{{
my_struct s;
my_struct *sp;

s.x = 1;
sp-&gt;x = 2;
(*sp).x = 2; // this is the same thing
}}}

You cannot define a struct of the same type as a member of a struct, but you CAN define a pointer to a struct of the same type.  This allows recursive definitions, for the purposes of binary trees and such things.  Occasionally, you may also need two structs which refer to each other.

{{{.}}} and {{{-&gt;}}} (also {{{[]}}}) have high precedence, so
{{{
&amp;conn-&gt;db-&gt;rows[i]
}}}
gets the address of the result of following all the arrows.</pre>
</div>
<div title="EmiStandards" server.title="EmiStandards" server.page.revision="879573" server.etag="&quot;willrogers_public/EmiStandards/879573:b1b9d45e0e11deb5f57042aae4d870ff19440e98&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120918103534" created="20120918102317" tags="" _hash="e04a5cc2d851c1ee2702510768cae6c15a972a19">
<pre>Given by Morris Riedel at the EgiTfPrague.

!!EMI Strategies
EMI has a large number of protocols internally 
EMI works with: PRACE, EUDAT, EGI, XSEDE, OSG
XSEDE developed from ~TeraGrid, and now has incorporated/affiliated OSG

!!Open standard adoption
* EMI-ES, CAR, StAR
* OGF
* There is a matrix on the EMI website: http://www.eu-emi.eu/standardization-matrix

!!The future
Developing standards takes longer than a project like EMI.  Other projects begin to take interest, eg EUDAT in the StAR.  The benefit is not just for the current project, but for the future.
!!Emerging topics</pre>
</div>
<div title="TiddlySpaceViewTypes" server.title="TiddlySpaceViewTypes" server.page.revision="1521869" server.etag="&quot;system-plugins_public/TiddlySpaceViewTypes/1521869:368b35e17a1a4298f83357b72fa7365b1271344e&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="0a5a070cb32ab7b3dc724809555448e9948cf232">
<pre>/***
|''Name''|TiddlySpaceViewTypes|
|''Version''|0.6.0|
|''Status''|@@beta@@|
|''Description''|Provides TiddlySpace specific view types|
|''Author''|Jon Robson|
|''Source''|http://github.com/TiddlySpace/tiddlyspace/raw/master/src/plugins/TiddlySpaceViewTypes.js|
|''Requires''|TiddlySpaceConfig TiddlySpaceTiddlerIconsPlugin|
!Usage
Provides replyLink, spaceLink and SiteIcon view types.
!!SiteIcon view parameters
* labelPrefix / labelSuffix : prefix or suffix the label with additional text. eg. labelPrefix:'modified by '
* spaceLink: if set to "yes" will make any avatars link to the corresponding space. {{{&lt;&lt;originMacro spaceLink:yes&gt;&gt;}}}

!Code
***/
//{{{
(function($) {

var tiddlyspace = config.extensions.tiddlyspace;
var originMacro = config.macros.tiddlerOrigin;
var tweb = config.extensions.tiddlyweb;

config.macros.view.replyLink = {
	locale: {
		label: "Reply to this tiddler"
	}
};

var _replyButtons = [];
var _replyInitialised, _replyScriptLoaded;
config.macros.view.views.replyLink = function(value, place, params, wikifier,
		paramString, tiddler) {
	var valueField = params[0];
	var imported;
	if(valueField == "title") { // special casing for imported tiddlers
		var localTitle = tiddler.title;
		var serverTitle = tiddler.fields["server.title"];
		if(serverTitle &amp;&amp; localTitle != serverTitle) {
			value = serverTitle ? serverTitle : localTitle;
			imported = true;
		}
	} else {
		title = tiddler[valueField] ? tiddler[valueField] : tiddler.fields[valueField];
	}
	var args = paramString.parseParams("anon")[0];
	var label = (args.label) ? args.label : config.macros.view.replyLink.locale.label;
	var space;
	if(tiddler) {
		var bag = tiddler.fields["server.bag"];
		space = tiddlyspace.resolveSpaceName(bag);
	}
	var container = $('&lt;span class="replyLink" /&gt;').appendTo(place)[0];

	tweb.getUserInfo(function(user) {
		if ((!user.anon) &amp;&amp; ((space &amp;&amp; user.name != space &amp;&amp;
				user.name != tiddlyspace.currentSpace.name) || imported)) {
			var link = $("&lt;a /&gt;")
				.text(config.macros.view.replyLink.locale.label)
				.appendTo(container)[0];

			if(typeof(createReplyButton) === "undefined") {
				_replyButtons.push(link);
			}
			if(_replyInitialised) {
				createReplyButton(link);
			} else if(!_replyScriptLoaded) {
				_replyScriptLoaded = true;
				$.getScript("/bags/common/tiddlers/_reply-button.js",
					function() {
						_replyInitialised = true;
						for(var i = 0; i &lt; _replyButtons.length; i++) {
							createReplyButton(_replyButtons[i]);
						}
						_replyButtons = [];
					});
			}
		}
	});

};

config.macros.view.views.spaceLink = function(value, place, params, wikifier,
		paramString, tiddler) {
		var spaceName = tiddlyspace.resolveSpaceName(value);
		var isBag = params[0] == "server.bag" &amp;&amp; value === spaceName ? true : false;
		var args = paramString.parseParams("anon")[0];
		var titleField = args.anon[2];
		var labelField = args.labelField ? args.labelField[0] : false;
		var label;
		if(labelField) {
			label = tiddler[labelField] ? tiddler[labelField] : tiddler.fields[labelField];
		} else {
			label = args.label ? args.label[0] : false;
		}
		var title = tiddler[titleField] ? tiddler[titleField] : tiddler.fields[titleField];

		var link = createSpaceLink(place, spaceName, title, label, isBag);
		if(args.external &amp;&amp; args.external[0] == "no") {
			$(link).click(function(ev) {
				var el = $(ev.target);
				var title = el.attr("tiddler");
				var bag = el.attr("bag");
				var space = el.attr("tiddlyspace");
				bag = space ? space + "_public" : bag;
				if(title &amp;&amp; bag) {
					ev.preventDefault();
					tiddlyspace.displayServerTiddler(el[0], title,
						"bags/" + bag);
				}
				return false;
			});
		}
};

config.macros.view.views.SiteIcon = function(value, place, params, wikifier,
		paramString, tiddler) {
	var options = originMacro.getOptions(paramString);
	if(!tiddler || value == "None") { // some core tiddlers lack modifier
		value = false;
	}
	var field = params[0];
	if(field == "server.bag") {
		options.notSpace = !originMacro._isSpace(value);
	}
	tiddlyspace.renderAvatar(place, value, options);
};

})(jQuery);
//}}}</pre>
</div>
<div title="BashConditions" server.title="BashConditions" server.page.revision="363678" server.etag="&quot;willrogers_public/BashConditions/363678:e1ef97c1e935b210b64c2f6687a6341d571a2bb4&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120305164308" created="20111101100238" tags="bash linux" _hash="bf1faa6dbd234e9972d43cafdd277c84d3cdaac1">
<pre>
!!How conditions are used
if statements in bash work something like this (see BashControlFlow):
{{{
if [ &lt;condition&gt; ] ; then
   &lt;do something&gt;
fi
}}}
You can also use {{{if test &lt;condition&gt;}}}.

You can also use double brackets - see bottom.

!!What conditions there are
There are quite a few of these conditions: 
* {{{ -e &lt;file&gt; }}} - file exists
* {{{ -s &lt;file&gt; }}} - file exists and has length &gt; 0
* {{{ -f &lt;file&gt; }}} - file is a regular file
* {{{ -d &lt;file&gt; }}} - file is a directory
* {{{ -r,w,x &lt;file&gt; }}} - file is readable, writable, executable by me
* {{{ -n &lt;string&gt; }}} - string length &gt; 0
* {{{ -z &lt;string&gt; }}} - string length = 0
* {{{ &lt;no1&gt; -eq &lt;no2&gt; }}} - integers equal
* {{{ &lt;no1&gt; -gt, ge, lt, le, ne &lt;no2&gt; }}} - integers greater than, greater than or equal to, less than, less than or equal to, not equal (see also BashNumbers)

!!and, or, not
* {{{ -e &lt;file&gt; -a -f &lt;file&gt; }}} - use of {{{-a}}} as and (probably illogically)
* {{{ -e &lt;file&gt; -o -f &lt;file&gt; }}} - use of {{{-o}}} as or 
* {{{ ! -e &lt;file&gt; }}} - use of ! to negate expression

!!Double brackets
You can use the doubled logical operators {{{&amp;&amp;}}} and {{{||}}} as follows:
{{{
# ls a-file &gt;&gt; /dev/null 2&gt;&amp;1 &amp;&amp; echo "executed"
executed
# ls not-a-file &gt;&gt; /dev/null 2&gt;&amp;1 &amp;&amp; echo "executed"
# ls a-file &gt;&gt; /dev/null 2&gt;&amp;1 || echo "executed"
# ls not-a-file &gt;&gt; /dev/null 2&gt;&amp;1 || echo "executed"
executed
}}}
So:
* the second operand to {{{&amp;&amp;}}} is executed if the first one succeeds.
* the second operand to {{{||}}} is executed if the first one fails.</pre>
</div>
<div title="TiddlySpaceCloneCommand" server.title="TiddlySpaceCloneCommand" server.page.revision="1521898" server.etag="&quot;tiddlyspace/TiddlySpaceCloneCommand/1521898:a6ead19b2275939afb9f7ed42032fda4dbf93b3c&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch systemConfig" _hash="3ecfd7c955dc674752681565ad0ed68f8fcad5d9">
<pre>/***
|''Name''|TiddlySpaceCloneCommand|
|''Version''|0.5.8|
|''Description''|provides a toolbar command for cloning external tiddlers|
|''Status''|stable|
|''Source''|http://github.com/TiddlySpace/tiddlyspace/raw/master/src/plugins/TiddlySpaceCloneCommand.js|
|''Requires''|TiddlySpaceConfig TiddlySpaceFilters|
!Code
***/
//{{{
(function($) {

var cmd = config.commands;
var tiddlyspace = config.extensions.tiddlyspace;

var fieldsCache = {};

cmd.cloneTiddler = {
	text: cmd.editTiddler.text,
	tooltip: "Create a copy of this tiddler in the current space",
	errorMsg: "Error publishing %0: %1",

	isEnabled: function(tiddler) {
		return !config.filterHelpers.is.local(tiddler) &amp;&amp; !readOnly;
	},
	handler: function(ev, src, title) {
		var tiddler = store.getTiddler(title);
		if(tiddler) {
			fieldsCache[title] = $.extend({}, tiddler.fields);
			tiddler.fields["server.workspace"] = tiddlyspace.getCurrentWorkspace(config.options.chkPrivateMode ?
		"private" : "public");
			tiddler.fields["server.permissions"] = "read, write, create"; // no delete
			delete tiddler.fields["server.page.revision"];
			delete tiddler.fields["server.title"];
			delete tiddler.fields["server.etag"];
			// special handling for pseudo-shadow tiddlers
			if(tiddlyspace.coreBags.contains(tiddler.fields["server.bag"])) {
				tiddler.tags.remove("excludeLists");
			}
		} else { // ensure workspace is the current space
			var el = story.findContainingTiddler(src);
			el = $(el);
			var fields = el.attr("tiddlyfields");
			if(fields) { // inherited via TiddlyLink
				fields = fields.decodeHashMap();
				fields["server.workspace"] = config.
					defaultCustomFields["server.workspace"];
			} else {
				fields = config.defaultCustomFields;
			}
			fields = String.encodeHashMap(fields);
			el.attr("tiddlyfields", fields);
		}
		cmd.editTiddler.handler.apply(this, arguments);
		if(tiddler) {
			tiddler.fields["server.permissions"] += ", delete";
		}
		return false;
	}
};

cmd.editTiddler.isEnabled = function(tiddler) {
	return !cmd.cloneTiddler.isEnabled.apply(this, arguments);
};

// hijack cancelTiddler to restore original fields
var _cancelHandler = cmd.cancelTiddler.handler;
cmd.cancelTiddler.handler = function(ev, src, title) {
	var tiddler = store.getTiddler(title);
	if(tiddler) {
		tiddler.fields = fieldsCache[title] || tiddler.fields;
		delete fieldsCache[title];
	}
	return _cancelHandler.apply(this, arguments);
};

// hijack saveTiddler to clear unused fields stash
var _saveHandler = cmd.saveTiddler.handler;
cmd.saveTiddler.handler =  function(ev, src, title) {
	delete fieldsCache[title];
	return _saveHandler.apply(this, arguments);
};

})(jQuery);
//}}}</pre>
</div>
<div title="GnuDebugger" server.title="GnuDebugger" server.page.revision="1295444" server.etag="&quot;willrogers_public/GnuDebugger/1295444:0c3d29c740beecc0bd7caea17a47e6a6e834629f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130704155118" created="20130704100745" tags="c linux" _hash="dbcf4450f5d11e30398f325027ecd2806e93201c">
<pre>The GNU Debugger (or {{{gdb}}}) is a command-line debugger.  It is most often used with C and C++.

A simple example is to make a C hello world program.  If you compile with the option {{{-g}}}, debugging symbols are added to the produced binary.  Even though there's not much to the program, the command {{{gdb a.out}}} will tell you whether debugging symbols have been found.  It then goes into a prompt, which I don't know how to use yet.

The [[documentation|http://sourceware.org/gdb/current/onlinedocs/gdb/]] says that there are basically four things you can do with {{{gdb}}}:
* start the program specifying certain initial conditions
* make the program stop on certain conditions
* find out what has happened when the program has stopped
* change things within the program 

Here's a page with some tips on using gdb with C++: http://sourceware.org/gdb/onlinedocs/gdb/Debugging-C-Plus-Plus.html.

!!Prompt
When you start a program with gdb, it opens a {{{(gdb)}}} prompt.  You can use different commands here to step through the code:
* {{{run}}} - start going until you hit a breakpoint
** you can pass program arguments after {{{run}}}
* {{{n}}} - next line of current function
* {{{s}}} - step into - next executed line, in whichever function
* {{{bt}}} - show a backtrace
* {{{break &lt;function&gt;}}} - set a breakpoint at the specified function name
** {{{break &lt;classname}}} or {{{break &lt;classname&gt;::&lt;method&gt;}}} will also work
* {{{p &lt;variable&gt;}}} - print the value of some variable 
</pre>
</div>
<div title="SideBarTabs" server.title="SideBarTabs" server.page.revision="1521918" server.etag="&quot;system-theme_public/SideBarTabs/1521918:31c845f58e6ac8d6bb78b1ad508902dab417ae47&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-theme_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-theme_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeMissing excludeSearch" _hash="6b74609cea4ddb529f42d3331e63b7775376af47">
<pre>&lt;&lt;tiddler Backstage##Tiddlers&gt;&gt;</pre>
</div>
<div title="BuildingAndroid" server.title="BuildingAndroid" server.page.revision="1325604" server.etag="&quot;willrogers_public/BuildingAndroid/1325604:3a6d102b3c834fd438ad18bc85df7b8c16060415&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130728151735" created="20130728104130" tags="" _hash="935af874b7958a523803b2cc386faa2c84bb1305">
<pre>I've now got a 64-bit Ubuntu build, so I should be able to build Android from source.  
See: http://stackoverflow.com/questions/17432090/recommended-linux-distro-for-android-development-workstation/17432425#17432425

!!Installations
I'm following the instructions here: http://source.android.com/source/.

So far I have omitted:
* The soft link
* The USB permissions (this is going to go wrong.  Actually it hasn't yet.  Maybe it will if I try to connect to a real device.)
* Using a separate output directory

!!!!Java
It seems you need Sun JDK 1.6.  I have downloaded it to my {{{android}}} directory - we'll see if I need to do something more complicated.

I then added the {{{bin}}} directory to the path before building.

!!Source
I followed the instructions with a few variations, and used {{{repo sync}}} to (presumably) download the trunk.  I think it probably took about an hour.

!!Building
I had one error with java (see http://stackoverflow.com/questions/8780507/missing-symbols-building-android-on-ubuntu), apparently fixed by not appending a slash to the end of the path I gave for it.  It took about an hour and a half for {{{make -j4}}}.
</pre>
</div>
<div title="AndroidDevelop" server.title="AndroidDevelop" server.page.revision="1521840" server.etag="&quot;willrogers_public/AndroidDevelop/1521840:656d753f9e92affbba54c0dc1be82ed38fba5344&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131111192410" created="20131110203531" tags="" _hash="4d32695d8a6aa1fdd3ac6cd6f6946f7615a13b1b">
<pre>[[Develop|http://developer.android.com/develop/index.html]] is the second and largest part of the Android documentation.  It has the following sections:

* Training
* AndroidApiGuides
* Reference - javadocs for the Android libraries, including Android's implementation of the standard java libraries
* Tools
* Google Services
* Samples

Each of these sections is large.</pre>
</div>
<div title="RefreshTiddlerCommand" server.title="RefreshTiddlerCommand" server.page.revision="1521867" server.etag="&quot;system-plugins_public/RefreshTiddlerCommand/1521867:d4c161f76a458866f4ac7d9dcac5d3c2fc31b7af&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="02e0b362ad77cbb6e902b176a082430649e798ac">
<pre>/***
|''Name''|RefreshTiddlerCommand|
|''Version''|0.3.0|
***/
//{{{
(function($) {

var cmd = config.commands.refreshTiddler = {
	text: "refresh",
	locale: {
		refreshing: "Refreshing tiddler..."
	},
	tooltip: "refresh this tiddler to be the one on the server",
	handler: function(ev, src, title) {
		var tiddler = store.getTiddler(title);
		if(!tiddler) {
			tiddler = new Tiddler(title);
			merge(tiddler.fields, config.defaultCustomFields);
		}
		$(story.getTiddler(title)).find(".viewer").
			empty().text(cmd.locale.refreshing);
		var dirtyStatus = store.isDirty();
		story.loadMissingTiddler(title, {
			"server.workspace": tiddler.fields["server.recipe"]  ? "recipes/" + tiddler.fields["server.recipe"] :
				tiddler.fields["server.workspace"] || "bags/"+tiddler.fields["server.bag"],
			"server.host": tiddler.fields["server.host"],
			"server.type": tiddler.fields["server.type"]
		}, function() {
			store.setDirty(dirtyStatus);
		});
	}
};

})(jQuery);
//}}}</pre>
</div>
<div title="BashSubScripts" server.title="BashSubScripts" server.page.revision="363739" server.etag="&quot;willrogers_public/BashSubScripts/363739:01e18d23c4cc3da152c07be35f2f75965ebd6e68&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120306111601" created="20120306111601" tags="" _hash="2cd633db7da22e84f07b31c541b72c9a8ddb6fc7">
<pre>It's simple to call scripts from other scripts.

To use  a variable from another script, you have to export it.

You can return 0 or another integer from a script to denote success or failure, then:
{{{
if ./subscr ; then 
    echo "success"
else 
    echo "failure"
fi
}}}</pre>
</div>
<div title="BashFunctions" server.title="BashFunctions" server.page.revision="363695" server.etag="&quot;willrogers_public/BashFunctions/363695:ecec1d6972e3249cf1a7da9b864fdbaf24fcdbe1&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120306114603" created="20120306113345" tags="" _hash="6bb4ab925dde9d0af15ecbed407e96cabc139b13">
<pre>Functions have a special use in bash.  You can type them from the command line:

{{{
function hello () { echo "Hello World"; }
# OR
hello() { echo "Hello World"; }
# OR 
function hello { echo "Hello World"; }
# NOT
hello { echo "Hello World"; }
}}}
The hello function is then available for you to use.  You can add them to your .bashrc, and you can use them in scripts.

* You can list functions with {{{typeset -f}}}
* You can export functions with {{{typeset -fx &lt;name&gt;}}}
* {{{type hello}}} will tell you that {{{hello is a function}}} and display it
* Use {{{return}}} to exit the function, and {{{return n}}} to return success or failure.

</pre>
</div>
<div title="DlsScripts" server.title="DlsScripts" server.page.revision="1423011" server.etag="&quot;willrogers_public/DlsScripts/1423011:7dfa7820ead710e1a8fcec3c89ae0861e9cbd04c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130926072859" created="20130925122620" tags="" _hash="62d2f3b1828c8689a13c2a7b76a1987616d4ecfc">
<pre>!!Overview
!!!!{{{dls-checkout-module.py}}}
Although it does something which is essentially simple, helps you think in terms of the areas, trunk, branches, releases that the {{{dls-release.py}}} scripts etc. use.

!!!!{{{dls-include-license.py}}}
Simply prepend GPL text to the beginning of specified files, with some sensible substitutions.

!!!!{{{dls-list-branches.py}}}
Given a module, list all the branches in SVN.

!!Package
There are two python packages in the distribution:  {{{dls_scripts}}} has only a few files, and {{{py_scripts}}} has many.

!!!!{{{dls_scripts}}}
The only apparently useful module in here is {{{dlsgroups.py}}}.  It is used by a few of the scripts in {{{py_scripts}}}.  Perhaps this is the library package, but this is the only module which doesn't need to be executed.

!!!!{{{py_scripts}}}
This contains all the python scripts which are executed, which is the vast majority.</pre>
</div>
<div title="PythonExceptions" server.title="PythonExceptions" server.page.revision="364588" server.etag="&quot;willrogers_public/PythonExceptions/364588:f4bc757fd5736b132eb6be79d57455140988db1c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111027144352" created="20110513152858" tags="exceptions python" _hash="214ab8dc0fb8529d0a5fcddd499f846c034d9bef">
<pre>I haven't yet quite nailed down how to use exceptions in python.  Here it is.

{{{
try:
    ... do something ...
except:
    ... handle the exception ...
}}}

{{{
try:
    ... do something ...
except Exception:
    ... handle the exception ...
}}}

{{{
try:
    ... do something ...
except Exception as e: 
    ... do something using e ...
else:
    ... do something if the exception is not thrown ...
finally:
    ... do something whether or not the exception is thrown ...
}}}

You can catch more than one type of exception at a time:
{{{
...
except (OneException, TwoException), e:
...
}}}

I don't know what the difference between {{{ except Exception, e: }}} and {{{ except Exception as e: }}} is - it seems you can do either.  To get the message, you can {{{ print e }}} or {{{ str(e) }}},

!!!Raising exceptions

{{{
raise Exception
}}}
{{{
raise Exception('Something went wrong.')
}}}</pre>
</div>
<div title="privateIcon" server.title="privateIcon" server.page.revision="1521894" server.etag="&quot;tiddlyspace/privateIcon/1521894:7547f2ec9a2589f7f9d28d5568fd981b8832f387&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="image/png" modified="20131111192334" created="20131111192334" tags="excludeLists excludeSearch" _hash="94eabb8c954332020ab12d027656ddc3adb98c63">
<pre>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</pre>
</div>
<div title="CryptographyNotes" server.title="CryptographyNotes" server.page.revision="661860" server.etag="&quot;willrogers_public/CryptographyNotes/661860:f545fd67d9c048a854ea73286b4705b093a6d43b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120331170703" created="20110729151137" tags="crypto openssl" _hash="64010f39d7f499a3de1d4aa870ef4c3670dd9e55">
<pre>There's a lot of detail here which is difficult to take in all in one go.  There's a really good page here that describes how to do quite a few: http://www.madboa.com/geek/openssl/.

!!~OpenSSL

~OpenSSL is possibly the biggest Linux command I've seen.  It seems to have 3 sections:  
!!!Cryptography, such as:
* signing / verifiying signatures
* encryption / decryption
* hashing
* requesting, signing and verifying certificates

!!!!CRLs
CRLs are just lists of revoked certificates, used to note those certificates we shouldn't accept.  In the certificates directory after install lcg-CA, there are certificates, signing policies, something, and files named &lt;something&gt;.crl_url.  To convert these into actual CRLs, you have to run the fetch-crl gadget, which is available at RAL and probably in gLite too.  The actual CRLs are called &lt;hash&gt;.r0.

* SelfSignedCert
* MessageHashes
!!!Random number generation
!!!SSL


!!Proxies
I've got some experience with the proxies from my ~MyProxyUploader days, but some of it's a bit vague, and probably some of it wasn't that well understood at the time.

Now Andrea Guarise has tried to use the SSM with a proxy, so I think I need to look at it again.

I used the ~CertWizard to create a 'local proxy' from my personal e-Science certificate, but it was only one file rather than a separate certificate and key.  This means it will need some tweaking to use with the SSM.  It will probably provide some good OpenSSL experience too.  

So, I looked inside the proxy.  It has three long strings of rubbish: certificate, rsa private key, certificate.  My guess is that this is the public and private key of the proxy plus my certificate's public key.  Let's see.

{{{
[root@apel-test grid-security]# openssl x509 -in proxy -subject
subject= /C=UK/O=eScience/OU=CLRC/L=RAL/CN=will rogers/CN=proxy
-----BEGIN CERTIFICATE-----
MIICaDCCAVCgAwIBAgICfyowDQYJKoZIhvcNAQEFBQAwUzELMAkGA1UEBhMCVUsx
...
}}}

Awesome.  I tried this again twice, with files containing just the two individual certificate parts, and one came up as the proxy and one came up as mine.  As a side note, this confirms something I'd been wondering about for a while: ''that information must be somehow encoded in the string of gobbledegook!''  Good.  As you'd expect, OpenSSL will verify ''my certifcate'', but it won't verify the proxy - it says {{{ error 20 at 0 depth lookup:unable to get local issuer certificate }}}.

!!~GnuPG
This is an open-source implementation of the PGP program developed by Phil Zimmerman in 1991.  It does some of the things that OpenSSL does, but using simply generated key pairs rather than the whole certificate infrastructure that APEL and the grid in general uses.</pre>
</div>
<div title="MiniCosts" server.title="MiniCosts" server.page.revision="364324" server.etag="&quot;willrogers_public/MiniCosts/364324:e8d7443e0e3da3e3e431eecc81bd80a6664cfe6c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111005201707" created="20111005190047" tags="" _hash="8ac94d1829ef584a471f78bfd3a77e6a46cf66e1">
<pre>I got the Mini in May 2009.  These are the non-petrol costs incurred since then:

| ''Date'' | ''Description'' | ''Cost'' |
| May 09 | tax | £125 |
| May 09 | insurance | £518 |
| May 09 | new tyres | £152 |
| May 09 | MOT / service | £188 |
| Summer 09 | Ignition leads | £106 |
| Summer 09 | Green Flag | £42 |
| Summer 09 | Spark plugs | £45 |
| Autumn 09 | Fan belt | £5 |
| Early 10 | Thermo switch | £113 |
| Apr 10 | Tax | £125 |
| May 10 | MOT / service | £271 |
| May 10 | Insurance / breakdown cover | £516 |
| Sept 10 | Oil leak | £66 |
| Dec 10 | New battery | £70 |
| Apr 11 | Tax | £130 |
| May 11 | MOT / service | £194 |
| May 11 | Insurance | £547 |

This totals £3213 in a bit less than 2 1/2 years:
Year 1: £1294
Year 2: £1048
Year 2 1/2: £871</pre>
</div>
<div title="DiamondRedirector" server.title="DiamondRedirector" server.page.revision="1560422" server.etag="&quot;willrogers_public/DiamondRedirector/1560422:3612e991ef4f2844e02743ad6fa03699c45018b3&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131125141852" created="20130819091844" tags="" _hash="6db9e57274a56625f07b1ddaa5d7e71ec7c182d3">
<pre>The Diamond redirector is a tool used to allow a simple way to map an IOC's name to its startup script.

!!{{{configure-ioc}}}
This simply takes a string (the IOC name) and provides a path to a boot script.  The redirect table is here: {{{/dls_sw/prod/etc/redirector/redirect_table}}}.

There are options
* {{{s}}} - show one IOC
* {{{l}}} - list all ~IOCs
* {{{e}}} - edit one IOC
* {{{b}}} - batch edit several ~IOCs

!!{{{configure-tool}}}
This provides the path to some library.  The redirect table is here: {{{/dls_sw/prod/etc/build/tools_build/RELEASE.RHEL6-x86_64}}}.  I don't think there is a version for ~RHEL5.</pre>
</div>
<div title="_reply" server.title="_reply" server.page.revision="1521889" server.etag="&quot;tiddlyspace/_reply/1521889:3b3e67dcbe2725711533d0829b534ccb096cd0a6&quot;" modifier="bengillies" creator="bengillies" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/html" modified="20131111192332" created="20131111192332" tags="excludeLists excludeMissing excludeSearch" _hash="01c7fff74dd8fd746394153d7c586fee665e4ce6">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"&gt;
	&lt;title&gt;Reply&lt;/title&gt;
	&lt;link rel="stylesheet" href="//tiddlyspace.com/bags/benspa_public/tiddlers/bootvelcro.css"&gt;
	&lt;style&gt;
		html,
		body {
			overflow: hidden;
			background-color: transparent;
		}

		#container {
			/* prevent a fouc if no images present */
			display: none;
		}

		.modal-header {
			border-bottom: none;
			padding: 5px 0 0;
			position: absolute;
			width: 100%;
			background-color: #e0e0e0;
			-webkit-border-radius: 6px 6px 0 0;
			-moz-border-radius: 6px 6px 0 0;
			border-radius: 6px 6px 0 0;
			cursor: move;
		}

		.form-actions {
			position: absolute;
			bottom: 0;
			box-sizing: border-box;
			-moz-box-sizing: border-box;
			width: 100%;
			margin: 0;
			border-radius: 0 0 6px 6px;
			background-color: #e0e0e0;
			border-top: 1px solid gray;
		}

		.form-actions input.btn {
			width: auto;
			float: right;
			margin: 0 0.2em;
		}

		.closeBtn {
			background-color: #DCE7F1 !important;
		}

		.primary {
			background-color: #09F !important;
		}

		h1 {
			margin-bottom: 9px;
			margin-top: 9px;
		}

		body {
			width: 100%;
			height: 100%;
			position: absolute;
		}

		.modal {
			margin: 10px;
			top: 0;
			left: 0;
			bottom: 0;
			width: 510px;
			position: absolute;
			box-shadow: #444 0px 0px 10px 2px;
			border-radius: 6px;
			background-color: white;
			border: 1px solid gray;
			background-color: #F0F4F8;
		}

		label em {
			cursor: pointer;
		}

		.modal-body {
			overflow: auto;
			position: absolute;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
			margin: 65px 20px 67px;
			background-color: transparent;
		}

		.nav-tabs {
			padding-left: 1%;
			margin: 0;
			width: 99%;
			border-color: gray;
		}

		.nav-tabs &gt; li {
			cursor: pointer;
		}

		.nav-tabs &gt; li &gt; a {
			line-height: 2.4em;
			font-weight: bold;
			font-size: 100%;
		}

		.nav-tabs &gt; li.active &gt; a{
			background-color: #F0F4F8;
			border-color: gray;
			border-bottom-color: #F0F4F8;
		}

		.active {
			display: block;
		}

		input,
		textarea,
		select,
		.uneditable-input {
			color: #606060;
		}

		.imagePicker {
			-moz-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
			-webkit-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
			box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
			border: 1px solid #CCC;
			height: 110px;
			overflow: auto;
			-webkit-border-radius: 3px;
			-moz-border-radius: 3px;
			border-radius: 3px;
			margin-left: 0;
		}

		.imagePicker img {
			margin: 5px;
			border: 2px solid transparent;
		}

		.imagePicker .current {
			border: 2px dotted #555;
		}

		label {
			font-weight: bold;
		}

		.form-actions label {
			float: left;
			margin-top: 0.75em;
		}

		fieldset input,
		fieldset textarea {
			width: 90%;
			border-color: gray;
		}

		@media all and (max-width: 550px) {
			.modal {
				width: 95%;
			}
		}

		#help {
			position: absolute;
			border: 0;
			right: 4px;
			top: 5px;
			text-indent: -9999px;
			color: transparent;
			height: 16px;
			width: 16px;
			background: none;
			background-image: url(/bags/common/tiddlers/help.png);
			background-repeat: no-repeat;
			background-color: white;
			z-index: 2;
			border-radius: 10px;
		}

		#help-info {
			padding: 0;
			border: 1px solid gray;
			width: 60%;
			height: 50px;
			color: #404040;
			background-color: white;
			position: absolute;
			top: 5px;
			right: 5px;
			z-index: 1;
			cursor: auto;
			border-radius: 5px;

		}

		#help-info p {
			padding: 10px 25px;
			margin-bottom: 0;
		}
	&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;div id="container"&gt;
		&lt;form action="#" class="modal"&gt;
			&lt;div class="modal-header"&gt;
				&lt;button id="help"&gt;help&lt;/button&gt;
				&lt;div id="help-info" style="display:none;"&gt;&lt;p&gt;
				Found something interesting? Write about it in your own space. &lt;a href="//docs.tiddlyspace.com/Reply to this Tiddler" target="_blank"&gt;Find out more&lt;/a&gt;
				&lt;/p&gt;&lt;/div&gt;
				&lt;ul class="nav nav-tabs" data-tabs="tabs"&gt;
					&lt;li class="active" data-tab-name="post"&gt;&lt;a href="#postForm"&gt;Reply&lt;/a&gt;&lt;/li&gt;
				&lt;/ul&gt;
			&lt;/div&gt;


			&lt;fieldset id="postForm" class="modal-body"&gt;
				&lt;label&gt;Title
					&lt;input type="text" name="title"&gt;
				&lt;/label&gt;
				&lt;input type="hidden" name="url"&gt;
				&lt;label&gt;Post
					&lt;textarea name="text" rows="8"&gt;&lt;/textarea&gt;
				&lt;/label&gt;
				&lt;label&gt;Tags
					&lt;input type="text" name="tags" value=""&gt;
				&lt;/label&gt;
			&lt;/fieldset&gt;


			&lt;div class="form-actions"&gt;
				&lt;label class="checkbox"&gt;
					&lt;input type="checkbox" name="private" val="private"&gt;
					keep private
				&lt;/label&gt;
				&lt;input type="submit" class="btn primary btn-large" value="Done"&gt;
				&lt;input type="button" class="btn btn-large closeBtn" value="Cancel"&gt;
			&lt;/div&gt;
		&lt;/form&gt;
	&lt;/div&gt;

	&lt;script type="text/javascript"
            src="/bags/common/tiddlers/jquery.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript" src="/bags/tiddlyspace/tiddlers/chrjs"&gt;&lt;/script&gt;
	&lt;script type="text/javascript" src="/bags/common/tiddlers/_reply.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<div title="RegexNotes" server.title="RegexNotes" server.page.revision="1000420" server.etag="&quot;willrogers_public/RegexNotes/1000420:880c992f9f7bce8be5b23a497ddafc361eb3a6fe&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121223113622" created="20120106165109" tags="regex regexp" _hash="234da0ff0fd2b781d13a2a2253bbb9c45f7d4779">
<pre>Regex is simple enough in small chunks, but it can rapidly get more complicated and unreadable.

There is a POSIX standard regex, which is used by for example {{{locate -r}}}.  Bash I think has its own version, which isn't POSIX - see BashSpecialCharacters.

* See also PythonRegex

!!Basics
* Regex is case sensitive by default
* {{{.}}} matches any single character except a newline, so is equivalent to {{{[^\n]}}}
* {{{^}}} matches the start of a line
* {{{$}}} matches the end of a line
* &lt;pattern&gt;{n} checks for exactly n matches, eg: {{{egrep resources_used.vmem=[0-9]{8} &lt;file&gt;}}}
* &lt;pattern&gt;{n,m} checks for between n and m matches inclusive
* &lt;pattern&gt;? matches zero or one instances
* &lt;pattern&gt;* matches zero or any number of instances
* &lt;pattern&gt;+ matches one or more instances
* (a|b|c) matches a, b or c

!!Special characters
* {{{\d}}} is a digit
* {{{\D}}} is any non-numeric character

!!Groups 
You surround a group by parentheses, and then you can retrieve these groups later.  For example, with the long regular expressions matching a log file in an APEL log file, it matches once.  But then you can pick out the bits you want using the groups.  You can group a certain section for convenience then omit it from the numbered groups using :?: {{{(:?.*)}}}.
</pre>
</div>
<div title="ToggleTiddlerPrivacyPlugin" server.title="ToggleTiddlerPrivacyPlugin" server.page.revision="1521863" server.etag="&quot;system-plugins_public/ToggleTiddlerPrivacyPlugin/1521863:c4612ab52bfdba5163fb372d386a07e5810a951c&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="3acf06056e188b31bcc3c42ec673a050886d64c4">
<pre>/***
|''Name''|ToggleTiddlerPrivacyPlugin|
|''Version''|0.7.1|
|''Status''|@@beta@@|
|''Description''|Allows you to set the privacy of new tiddlers and external tiddlers within an EditTemplate, and allows you to set a default privacy setting|
|''CoreVersion''|2.6.1|
|''Requires''|TiddlySpaceConfig|
|''Source''|http://github.com/TiddlySpace/tiddlyspace/raw/master/src/plugins/ToggleTiddlerPrivacyPlugin.js|
!Notes
When used in conjunction with TiddlySpaceTiddlerIconsPlugin changing the privacy setting will also interact with any privacy icons.

Currently use of
{{{&lt;&lt;setPrivacy defaultValue:public&gt;&gt;}}} is in conflict with {{{&lt;&lt;newTiddler fields:"server.workspace:x_private"&gt;&gt;}}}

There is an option, found in the tweak tab of the backstage, called txtPrivacyMode. Set this to either ''public'' or ''private'' depending on your security preference. If you choose not to set it then it will default to ''public''.
!Params
defaultValue:[private|public]
Allows you to set the default privacy value (Default is private)

!Code
***/
//{{{
(function($) {

	var tiddlyspace = config.extensions.tiddlyspace,
		macro;
	macro = config.macros.setPrivacy = {
		handler: function(place, macroName, params, wikifier, paramString, tiddler) {
			if(readOnly) {
				return;
			}
			var el = $(story.findContainingTiddler(place)),
				args = paramString.parseParams("name",
					null, true, false, true)[0],
				container = $("&lt;div /&gt;").
					addClass("privacySettings").
					appendTo(place)[0],
				currentSpace = tiddlyspace.currentSpace.name,
				currentBag = tiddler ? tiddler.fields["server.bag"] : false,
				// XXX: is the following reliable?
				isNewTiddler = el.hasClass("missing") || !currentBag,
				tiddlerStatus = tiddlyspace.getTiddlerStatusType(tiddler),
				customFields = el.attr("tiddlyfields"),
				defaultValue = "public",
				options = config.macros.tiddlerOrigin ?
						config.macros.tiddlerOrigin.getOptions(paramString) :
						{};
			customFields = customFields ? customFields.decodeHashMap() : {};
			if(isNewTiddler || !["public", "private", "unsyncedPrivate",
					"unsyncedPublic"].contains(tiddlerStatus)) {
				if(args.defaultValue) {
					defaultValue = args.defaultValue[0].toLowerCase();
				} else {
					defaultValue = config.options.chkPrivateMode ?
							"private" : "public";
				}
				defaultValue = defaultValue ?
						"%0_%1".format(currentSpace, defaultValue) :
						customFields["server.bag"];
				this.createRoundel(container, tiddler, currentSpace,
						defaultValue, options);
			}
		},
		updateEditFields: function(tiddlerEl, bag) {
			var saveBagField = $('[edit="server.bag"]', tiddlerEl),
				saveWorkspaceField = $('[edit="server.workspace"]', tiddlerEl),
				input = $("&lt;input /&gt;").attr("type", "hidden"),
				workspace = "bags/" + bag;
			if(saveBagField.length === 0) {
				input.clone().attr("edit", "server.bag").val(bag).
					appendTo(tiddlerEl);
			} else {
				saveBagField.val(bag);
			}
			// reset to prevent side effects
			$(tiddlerEl).attr("tiddlyFields", "");
			if(saveWorkspaceField.length === 0) {
				input.clone().attr("edit", "server.workspace").
					val(workspace).appendTo(tiddlerEl);
			} else {
				saveWorkspaceField.val(workspace);
			}
		},
		setBag: function(tiddlerEl, newBag, options) {
			var bagStatus,
				title = $(tiddlerEl).attr("tiddler"),
				tiddler = store.getTiddler(title),
				originButton = $(".originButton", tiddlerEl)[0],
				refreshIcon,
				newWorkspace = "bags/" + newBag,
				rPrivate = $("input[type=radio].isPrivate", tiddlerEl),
				rPublic = $("input[type=radio].isPublic", tiddlerEl);
			refreshIcon = function(type) {
				var originMacro = config.macros.tiddlerOrigin;
				if(originButton &amp;&amp; originMacro) {
					options.noclick = true;
					originMacro.showPrivacyRoundel(tiddler, type,
							originButton, options);
				}
			};
			macro.updateEditFields(tiddlerEl, newBag);
			if(tiddler) {
				tiddler.fields["server.bag"] = newBag;
				// for external tiddlers
				tiddler.fields["server.workspace"] = newWorkspace;
			}
			if(newBag.indexOf("_public") &gt; -1) {
				rPrivate.attr("checked", false);
				rPublic.attr("checked", true);
				bagStatus = "public";
			} else {
				rPublic.attr("checked", false); // explicitly do this for ie
				rPrivate.attr("checked", true);
				bagStatus = "private";
			}
			refreshIcon(bagStatus);
		},
		createRoundel: function(container, tiddler, currentSpace,
							   defaultValue, options) {
			var privateBag = "%0_private".format(currentSpace),
				publicBag = "%0_public".format(currentSpace),
				rbtn = $("&lt;input /&gt;").attr("type", "radio").
					attr("name", tiddler.title),
				el = story.findContainingTiddler(container);
			rbtn.clone().val("private").addClass("isPrivate").
				appendTo(container);
			$("&lt;label /&gt;").text("private").appendTo(container); // TODO: i18n
			rbtn.clone().val("public").addClass("isPublic")
				.appendTo(container);
			$("&lt;label /&gt;").text("public").appendTo(container); // TODO: i18n
			$("[type=radio]", container).click(function(ev) {
				var btn = $(ev.target);
				tiddler.fields["server.page.revision"] = "false";
				if(btn.hasClass("isPrivate")) { // private button clicked.
					$(el).addClass("isPrivate").removeClass("isPublic");
					macro.setBag(el, privateBag, options);
				} else {
					$(el).addClass("isPublic").removeClass("isPrivate");
					macro.setBag(el, publicBag, options);
				}
			});
			window.setTimeout(function() {
				macro.setBag(el, defaultValue, options);
			}, 100);
			// annoyingly this is needed as customFields are added to end of EditTemplate so are not present yet
			// and don't seem to respect any existing customFields.
		}
	};

}(jQuery));
//}}}</pre>
</div>
<div title=".vimrc" server.title=".vimrc" server.page.revision="1319029" server.etag="&quot;willrogers_public/.vimrc/1319029:4235de0e2db4b4ef3409490fad47ed71c80e9cd2&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130723081557" created="20110505103349" tags="cygwin linux vim" _hash="f623c93a912b56b3f2f1193c16119ae71353f947">
<pre>Custom vim profile.

{{{
set nocompatible
set tabstop=4
set expandtab
set backspace=2
set shiftwidth=4
map \ :noh&lt;cr&gt;
}}}
These will set:
* If you search in lower-case, the search is not case-sensitive
* If you put an upper-case character in the search, the search IS case-sensitive.
{{{
set ignorecase
set smartcase
}}}</pre>
</div>
<div title="TiddlyWebAdaptor" server.title="TiddlyWebAdaptor" server.page.revision="1521858" server.etag="&quot;system/TiddlyWebAdaptor/1521858:9ea7c9bc9a1219744731aff04ae79b97e6f25896&quot;" modifier="FND" creator="FND" server.workspace="bags/system" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system" server.permissions="read" server.content-type="text/javascript" modified="200811260000" created="200811260000" tags="excludeLists excludeSearch systemConfig" _hash="487ec1465c11e0798c029b3ed15a2f71ae51ce92">
<pre>/***
|''Name''|TiddlyWebAdaptor|
|''Description''|adaptor for interacting with TiddlyWeb|
|''Author:''|FND|
|''Contributors''|Chris Dent, Martin Budden|
|''Version''|1.4.10|
|''Status''|stable|
|''Source''|http://svn.tiddlywiki.org/Trunk/association/adaptors/TiddlyWebAdaptor.js|
|''CodeRepository''|http://svn.tiddlywiki.org/Trunk/association/|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''CoreVersion''|2.5|
|''Keywords''|serverSide TiddlyWeb|
!Notes
This plugin includes [[jQuery JSON|http://code.google.com/p/jquery-json/]].
!To Do
* createWorkspace
* document custom/optional context attributes (e.g. filters, query, revision) and tiddler fields (e.g. server.title, origin)
!Code
***/
//{{{
(function($) {

var adaptor = config.adaptors.tiddlyweb = function() {};

adaptor.prototype = new AdaptorBase();
adaptor.serverType = "tiddlyweb";
adaptor.serverLabel = "TiddlyWeb";
adaptor.mimeType = "application/json";

adaptor.parsingErrorMessage = "Error parsing result from server";
adaptor.noBagErrorMessage = "no bag specified for tiddler";
adaptor.locationIDErrorMessage = "no bag or recipe specified for tiddler"; // TODO: rename

// retrieve current status (requires TiddlyWeb status plugin)
adaptor.prototype.getStatus = function(context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	var uriTemplate = "%0/status";
	var uri = uriTemplate.format([context.host]);
	var req = httpReq("GET", uri, adaptor.getStatusCallback, context,
		null, null, null, null, null, true);
	return typeof req == "string" ? req : true;
};

adaptor.getStatusCallback = function(status, context, responseText, uri, xhr) {
	context.status = responseText ? status : false;
	try {
		context.statusText = xhr.statusText;
	} catch(exc) { // offline (Firefox)
		context.status = false;
		context.statusText = null;
	}
	context.httpStatus = xhr.status;
	if(context.status) {
		context.serverStatus = $.evalJSON(responseText); // XXX: error handling!?
	}
	if(context.callback) {
		context.callback(context, context.userParams);
	}
};

// retrieve a list of workspaces
adaptor.prototype.getWorkspaceList = function(context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	context.workspaces = [];
	var uriTemplate = "%0/recipes"; // XXX: bags?
	var uri = uriTemplate.format([context.host]);
	var req = httpReq("GET", uri, adaptor.getWorkspaceListCallback,
		context, { accept: adaptor.mimeType }, null, null, null, null, true);
	return typeof req == "string" ? req : true;
};

adaptor.getWorkspaceListCallback = function(status, context, responseText, uri, xhr) {
	context.status = status;
	context.statusText = xhr.statusText;
	context.httpStatus = xhr.status;
	if(status) {
		try {
			var workspaces = $.evalJSON(responseText);
		} catch(ex) {
			context.status = false; // XXX: correct?
			context.statusText = exceptionText(ex, adaptor.parsingErrorMessage);
			if(context.callback) {
				context.callback(context, context.userParams);
			}
			return;
		}
		context.workspaces = workspaces.map(function(itm) { return { title: itm }; });
	}
	if(context.callback) {
		context.callback(context, context.userParams);
	}
};

// retrieve a list of tiddlers
adaptor.prototype.getTiddlerList = function(context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	var uriTemplate = "%0/%1/%2/tiddlers%3";
	var params = context.filters ? "?" + context.filters : "";
	if(context.format) {
		params = context.format + params;
	}
	var workspace = adaptor.resolveWorkspace(context.workspace);
	var uri = uriTemplate.format([context.host, workspace.type + "s",
		adaptor.normalizeTitle(workspace.name), params]);
	var req = httpReq("GET", uri, adaptor.getTiddlerListCallback,
		context, merge({ accept: adaptor.mimeType }, context.headers), null, null, null, null, true);
	return typeof req == "string" ? req : true;
};

adaptor.getTiddlerListCallback = function(status, context, responseText, uri, xhr) {
	context.status = status;
	context.statusText = xhr.statusText;
	context.httpStatus = xhr.status;
	if(status) {
		context.tiddlers = [];
		try {
			var tiddlers = $.evalJSON(responseText); //# NB: not actual tiddler instances
		} catch(ex) {
			context.status = false; // XXX: correct?
			context.statusText = exceptionText(ex, adaptor.parsingErrorMessage);
			if(context.callback) {
				context.callback(context, context.userParams);
			}
			return;
		}
		for(var i = 0; i &lt; tiddlers.length; i++) {
			var tiddler = adaptor.toTiddler(tiddlers[i], context.host);
			context.tiddlers.push(tiddler);
		}
	}
	if(context.callback) {
		context.callback(context, context.userParams);
	}
};

// perform global search
adaptor.prototype.getSearchResults = function(context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	var uriTemplate = "%0/search?q=%1%2";
	var filterString = context.filters ? ";" + context.filters : "";
	var uri = uriTemplate.format([context.host, context.query, filterString]); // XXX: parameters need escaping?
	var req = httpReq("GET", uri, adaptor.getSearchResultsCallback,
		context, { accept: adaptor.mimeType }, null, null, null, null, true);
	return typeof req == "string" ? req : true;
};

adaptor.getSearchResultsCallback = function(status, context, responseText, uri, xhr) {
	adaptor.getTiddlerListCallback(status, context, responseText, uri, xhr); // XXX: use apply?
};

// retrieve a particular tiddler's revisions
adaptor.prototype.getTiddlerRevisionList = function(title, limit, context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	var uriTemplate = "%0/%1/%2/tiddlers/%3/revisions";
	var workspace = adaptor.resolveWorkspace(context.workspace);
	var uri = uriTemplate.format([context.host, workspace.type + "s",
		adaptor.normalizeTitle(workspace.name), adaptor.normalizeTitle(title)]);
	var req = httpReq("GET", uri, adaptor.getTiddlerRevisionListCallback,
		context, merge({ accept: adaptor.mimeType }, context.headers), null, null, null, null, true);
	return typeof req == "string" ? req : true;
};

adaptor.getTiddlerRevisionListCallback = function(status, context, responseText, uri, xhr) {
	context.status = status;
	context.statusText = xhr.statusText;
	context.httpStatus = xhr.status;
	if(status) {
		context.revisions = [];
		try {
			var tiddlers = $.evalJSON(responseText); //# NB: not actual tiddler instances
		} catch(ex) {
			context.status = false; // XXX: correct?
			context.statusText = exceptionText(ex, adaptor.parsingErrorMessage);
			if(context.callback) {
				context.callback(context, context.userParams);
			}
			return;
		}
		for(var i = 0; i &lt; tiddlers.length; i++) {
			var tiddler = adaptor.toTiddler(tiddlers[i], context.host);
			context.revisions.push(tiddler);
		}
		var sortField = "server.page.revision";
		context.revisions.sort(function(a, b) {
			return a.fields[sortField] &lt; b.fields[sortField] ? 1 :
				(a.fields[sortField] == b.fields[sortField] ? 0 : -1);
		});
	}
	if(context.callback) {
		context.callback(context, context.userParams);
	}
};

// retrieve an individual tiddler revision -- XXX: breaks with standard arguments list -- XXX: convenience function; simply use getTiddler?
adaptor.prototype.getTiddlerRevision = function(title, revision, context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	context.revision = revision;
	return this.getTiddler(title, context, userParams, callback);
};

// retrieve an individual tiddler
//# context is an object with members host and workspace
//# callback is passed the new context and userParams
adaptor.prototype.getTiddler = function(title, context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	context.title = title;
	if(context.revision) {
		var uriTemplate = "%0/%1/%2/tiddlers/%3/revisions/%4";
	} else {
		uriTemplate = "%0/%1/%2/tiddlers/%3";
	}
	if(!context.tiddler) {
		context.tiddler = new Tiddler(title);
	}
	context.tiddler.fields["server.type"] = adaptor.serverType;
	context.tiddler.fields["server.host"] = AdaptorBase.minHostName(context.host);
	context.tiddler.fields["server.workspace"] = context.workspace;
	var workspace = adaptor.resolveWorkspace(context.workspace);
	var uri = uriTemplate.format([context.host, workspace.type + "s",
		adaptor.normalizeTitle(workspace.name), adaptor.normalizeTitle(title),
		context.revision]);
	var req = httpReq("GET", uri, adaptor.getTiddlerCallback, context,
		merge({ accept: adaptor.mimeType }, context.headers), null, null, null, null, true);
	return typeof req == "string" ? req : true;
};

adaptor.getTiddlerCallback = function(status, context, responseText, uri, xhr) {
	context.status = status;
	context.statusText = xhr.statusText;
	context.httpStatus = xhr.status;
	if(status) {
		try {
			var tid = $.evalJSON(responseText);
		} catch(ex) {
			context.status = false;
			context.statusText = exceptionText(ex, adaptor.parsingErrorMessage);
			if(context.callback) {
				context.callback(context, context.userParams);
			}
			return;
		}
		var tiddler = adaptor.toTiddler(tid, context.host);
		tiddler.title = context.tiddler.title;
		tiddler.fields["server.etag"] = xhr.getResponseHeader("Etag");
		// normally we'd assign context.tiddler = tiddler here - but we can't do
		// that because of IE, which triggers getTiddler in putTiddlerCallback,
		// and since ServerSideSavingPlugin foolishly relies on persistent
		// object references, we need to merge the data into the existing object
		$.extend(context.tiddler, tiddler);
	}
	if(context.callback) {
		context.callback(context, context.userParams);
	}
};

// retrieve tiddler chronicle (all revisions)
adaptor.prototype.getTiddlerChronicle = function(title, context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	context.title = title;
	var uriTemplate = "%0/%1/%2/tiddlers/%3/revisions?fat=1";
	var workspace = adaptor.resolveWorkspace(context.workspace);
	var uri = uriTemplate.format([context.host, workspace.type + "s",
		adaptor.normalizeTitle(workspace.name), adaptor.normalizeTitle(title)]);
	var req = httpReq("GET", uri, adaptor.getTiddlerChronicleCallback,
		context, { accept: adaptor.mimeType }, null, null, null, null, true);
	return typeof req == "string" ? req : true;
};

adaptor.getTiddlerChronicleCallback = function(status, context, responseText, uri, xhr) {
	context.status = status;
	context.statusText = xhr.statusText;
	context.httpStatus = xhr.status;
	if(status) {
		context.responseText = responseText;
	}
	if(context.callback) {
		context.callback(context, context.userParams);
	}
};

// store an individual tiddler
adaptor.prototype.putTiddler = function(tiddler, context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	context.title = tiddler.title;
	context.tiddler = tiddler;
	context.host = context.host || this.fullHostName(tiddler.fields["server.host"]);
	var uriTemplate = "%0/%1/%2/tiddlers/%3";
	try {
		context.workspace = context.workspace || tiddler.fields["server.workspace"];
		var workspace = adaptor.resolveWorkspace(context.workspace);
	} catch(ex) {
		return adaptor.locationIDErrorMessage;
	}
	var uri = uriTemplate.format([context.host, workspace.type + "s",
		adaptor.normalizeTitle(workspace.name),
		adaptor.normalizeTitle(tiddler.title)]);
	var etag = adaptor.generateETag(workspace, tiddler);
	var headers = etag ? { "If-Match": etag } : null;
	var payload = {
		type: tiddler.fields["server.content-type"] || null,
		text: tiddler.text,
		tags: tiddler.tags,
		fields: $.extend({}, tiddler.fields)
	};
	delete payload.fields.changecount;
	$.each(payload.fields, function(key, value) {
		if(key.indexOf("server.") == 0) {
			delete payload.fields[key];
		}
	});
	payload = $.toJSON(payload);
	var req = httpReq("PUT", uri, adaptor.putTiddlerCallback,
		context, headers, payload, adaptor.mimeType, null, null, true);
	return typeof req == "string" ? req : true;
};

adaptor.putTiddlerCallback = function(status, context, responseText, uri, xhr) {
	context.status = [204, 1223].contains(xhr.status);
	context.statusText = xhr.statusText;
	context.httpStatus = xhr.status;
	if(context.status) {
		var loc = xhr.getResponseHeader("Location");
		var etag = xhr.getResponseHeader("Etag");
		if(loc &amp;&amp; etag) {
			var bag = loc.split("/bags/").pop().split("/")[0];
			context.tiddler.fields["server.bag"] = bag;
			context.tiddler.fields["server.workspace"] = "bags/" + bag;
			var rev = etag.split("/").pop().split(/;|:/)[0];
			context.tiddler.fields["server.page.revision"] = rev;
			context.tiddler.fields["server.etag"] = etag;
			if(context.callback) {
				context.callback(context, context.userParams);
			}
		} else { // IE
			context.adaptor.getTiddler(context.tiddler.title, context,
				context.userParams, context.callback);
		}
	} else if(context.callback) {
		context.callback(context, context.userParams);
	}
};

// store a tiddler chronicle
adaptor.prototype.putTiddlerChronicle = function(revisions, context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	context.title = revisions[0].title;
	var headers = null;
	var uriTemplate = "%0/%1/%2/tiddlers/%3/revisions";
	var host = context.host || this.fullHostName(tiddler.fields["server.host"]);
	var workspace = adaptor.resolveWorkspace(context.workspace);
	var uri = uriTemplate.format([host, workspace.type + "s",
		adaptor.normalizeTitle(workspace.name),
		adaptor.normalizeTitle(context.title)]);
	if(workspace.type == "bag") { // generate ETag
		var etag = [adaptor.normalizeTitle(workspace.name),
			adaptor.normalizeTitle(context.title), 0].join("/"); //# zero-revision prevents overwriting existing contents
		headers = { "If-Match": '"' + etag + '"' };
	}
	var payload = $.toJSON(revisions);
	var req = httpReq("POST", uri, adaptor.putTiddlerChronicleCallback,
		context, headers, payload, adaptor.mimeType, null, null, true);
	return typeof req == "string" ? req : true;
};

adaptor.putTiddlerChronicleCallback = function(status, context, responseText, uri, xhr) {
	context.status = [204, 1223].contains(xhr.status);
	context.statusText = xhr.statusText;
	context.httpStatus = xhr.status;
	if(context.callback) {
		context.callback(context, context.userParams);
	}
};

// store a collection of tiddlers (import TiddlyWiki HTML store)
adaptor.prototype.putTiddlerStore = function(store, context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	var uriTemplate = "%0/%1/%2/tiddlers";
	var host = context.host;
	var workspace = adaptor.resolveWorkspace(context.workspace);
	var uri = uriTemplate.format([host, workspace.type + "s",
		adaptor.normalizeTitle(workspace.name)]);
	var req = httpReq("POST", uri, adaptor.putTiddlerStoreCallback,
		context, null, store, "text/x-tiddlywiki", null, null, true);
	return typeof req == "string" ? req : true;
};

adaptor.putTiddlerStoreCallback = function(status, context, responseText, uri, xhr) {
	context.status = [204, 1223].contains(xhr.status);
	context.statusText = xhr.statusText;
	context.httpStatus = xhr.status;
	if(context.callback) {
		context.callback(context, context.userParams);
	}
};

// rename an individual tiddler or move it to a different workspace -- TODO: make {from|to}.title optional
//# from and to are objects with members title and workspace (bag; optional),
//# representing source and target tiddler, respectively
adaptor.prototype.moveTiddler = function(from, to, context, userParams, callback) { // XXX: rename parameters (old/new)?
	var self = this;
	var newTiddler = store.getTiddler(from.title) || store.getTiddler(to.title); //# local rename might already have occurred
	var oldTiddler = $.extend(true, {}, newTiddler); //# required for eventual deletion
	oldTiddler.title = from.title; //# required for original tiddler's ETag
	var _getTiddlerChronicle = function(title, context, userParams, callback) {
		return self.getTiddlerChronicle(title, context, userParams, callback);
	};
	var _putTiddlerChronicle = function(context, userParams) {
		if(!context.status) {
			return callback(context, userParams);
		}
		var revisions = $.evalJSON(context.responseText); // XXX: error handling?
		// change current title while retaining previous location
		for(var i = 0; i &lt; revisions.length; i++) {
			delete revisions[i].revision;
			if(!revisions[i].fields.origin) { // NB: origin = "&lt;workspace&gt;/&lt;title&gt;"
				revisions[i].fields.origin = ["bags", revisions[i].bag, revisions[i].title].join("/");
			}
			revisions[i].title = to.title;
		}
		// add new revision
		var rev = $.extend({}, revisions[0]);
		$.each(newTiddler, function(i, item) {
			if(!$.isFunction(item)) {
				rev[i] = item;
			}
		});
		rev.title = to.title;
		rev.created = rev.created.convertToYYYYMMDDHHMM();
		rev.modified = new Date().convertToYYYYMMDDHHMM();
		delete rev.fields.changecount;
		revisions.unshift(rev);
		if(to.workspace) {
			context.workspace = to.workspace;
		} else if(context.workspace.substring(0, 4) != "bags") { // NB: target workspace must be a bag
			context.workspace = "bags/" + rev.bag;
		}
		var subCallback = function(context, userParams) {
			if(!context.status) {
				return callback(context, userParams);
			}
			context.adaptor.getTiddler(newTiddler.title, context, userParams, _deleteTiddler);
		};
		return self.putTiddlerChronicle(revisions, context, context.userParams, subCallback);
	};
	var _deleteTiddler = function(context, userParams) {
		if(!context.status) {
			return callback(context, userParams);
		}
		$.extend(true, newTiddler, context.tiddler);
		context.callback = null;
		return self.deleteTiddler(oldTiddler, context, context.userParams, callback);
	};
	callback = callback || function() {};
	context = this.setContext(context, userParams);
	context.host = context.host || oldTiddler.fields["server.host"];
	context.workspace = from.workspace || oldTiddler.fields["server.workspace"];
	return _getTiddlerChronicle(from.title, context, userParams, _putTiddlerChronicle);
};

// delete an individual tiddler
adaptor.prototype.deleteTiddler = function(tiddler, context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	context.title = tiddler.title; // XXX: not required!?
	var uriTemplate = "%0/bags/%1/tiddlers/%2";
	var host = context.host || this.fullHostName(tiddler.fields["server.host"]);
	var bag = tiddler.fields["server.bag"];
	if(!bag) {
		return adaptor.noBagErrorMessage;
	}
	var uri = uriTemplate.format([host, adaptor.normalizeTitle(bag),
		adaptor.normalizeTitle(tiddler.title)]);
	var etag = adaptor.generateETag({ type: "bag", name: bag }, tiddler);
	var headers = etag ? { "If-Match": etag } : null;
	var req = httpReq("DELETE", uri, adaptor.deleteTiddlerCallback, context, headers,
		null, null, null, null, true);
	return typeof req == "string" ? req : true;
};

adaptor.deleteTiddlerCallback = function(status, context, responseText, uri, xhr) {
	context.status = [204, 1223].contains(xhr.status);
	context.statusText = xhr.statusText;
	context.httpStatus = xhr.status;
	if(context.callback) {
		context.callback(context, context.userParams);
	}
};

// compare two revisions of a tiddler (requires TiddlyWeb differ plugin)
//# if context.rev1 is not specified, the latest revision will be used for comparison
//# if context.rev2 is not specified, the local revision will be sent for comparison
//# context.format is a string as determined by the TiddlyWeb differ plugin
adaptor.prototype.getTiddlerDiff = function(title, context, userParams, callback) {
	context = this.setContext(context, userParams, callback);
	context.title = title;

	var tiddler = store.getTiddler(title);
	try {
		var workspace = adaptor.resolveWorkspace(tiddler.fields["server.workspace"]);
	} catch(ex) {
		return adaptor.locationIDErrorMessage;
	}
	var tiddlerRef = [workspace.type + "s", workspace.name, tiddler.title].join("/");

	var rev1 = context.rev1 ? [tiddlerRef, context.rev1].join("/") : tiddlerRef;
	var rev2 = context.rev2 ? [tiddlerRef, context.rev2].join("/") : null;

	var uriTemplate = "%0/diff?rev1=%1";
	if(rev2) {
		uriTemplate += "&amp;rev2=%2";
	}
	if(context.format) {
		uriTemplate += "&amp;format=%3";
	}
	var host = context.host || this.fullHostName(tiddler.fields["server.host"]);
	var uri = uriTemplate.format([host, adaptor.normalizeTitle(rev1),
		adaptor.normalizeTitle(rev2), context.format]);

	if(rev2) {
		var req = httpReq("GET", uri, adaptor.getTiddlerDiffCallback, context, null,
			null, null, null, null, true);
	} else {
		var payload = {
			title: tiddler.title,
			text: tiddler.text,
			modifier: tiddler.modifier,
			tags: tiddler.tags,
			fields: $.extend({}, tiddler.fields)
		}; // XXX: missing attributes!?
		payload = $.toJSON(payload);
		req = httpReq("POST", uri, adaptor.getTiddlerDiffCallback, context,
			null, payload, adaptor.mimeType, null, null, true);
	}
	return typeof req == "string" ? req : true;
};

adaptor.getTiddlerDiffCallback = function(status, context, responseText, uri, xhr) {
	context.status = status;
	context.statusText = xhr.statusText;
	context.httpStatus = xhr.status;
	context.uri = uri;
	if(status) {
		context.diff = responseText;
	}
	if(context.callback) {
		context.callback(context, context.userParams);
	}
};

// generate tiddler information
adaptor.prototype.generateTiddlerInfo = function(tiddler) {
	var info = {};
	var uriTemplate = "%0/%1/%2/tiddlers/%3";
	var host = this.host || tiddler.fields["server.host"]; // XXX: this.host obsolete?
	host = this.fullHostName(host);
	var workspace = adaptor.resolveWorkspace(tiddler.fields["server.workspace"]);
	info.uri = uriTemplate.format([host, workspace.type + "s",
		adaptor.normalizeTitle(workspace.name),
		adaptor.normalizeTitle(tiddler.title)]);
	return info;
};

// create Tiddler instance from TiddlyWeb tiddler JSON
adaptor.toTiddler = function(json, host) {
	var created = Date.convertFromYYYYMMDDHHMM(json.created);
	var modified = Date.convertFromYYYYMMDDHHMM(json.modified);
	var fields = json.fields;
	fields["server.type"] = adaptor.serverType;
	fields["server.host"] = AdaptorBase.minHostName(host);
	fields["server.bag"] = json.bag;
	fields["server.title"] = json.title;
	if(json.recipe) {
		fields["server.recipe"] = json.recipe;
	}
	if(json.type &amp;&amp; json.type != "None") {
		fields["server.content-type"] = json.type;
	}
	fields["server.permissions"] = json.permissions.join(", ");
	fields["server.page.revision"] = json.revision;
	fields["server.workspace"] = "bags/" + json.bag;
	var tiddler = new Tiddler(json.title);
	tiddler.assign(tiddler.title, json.text, json.modifier, modified, json.tags,
		created, json.fields, json.creator);
	return tiddler;
};

adaptor.resolveWorkspace = function(workspace) {
	var components = workspace.split("/");
	return {
		type: components[0] == "bags" ? "bag" : "recipe",
		name: components[1] || components[0]
	};
};

adaptor.generateETag = function(workspace, tiddler) {
	var revision = tiddler.fields["server.page.revision"];
	var etag = revision == "false" ? null : tiddler.fields["server.etag"];
	if(!etag &amp;&amp; workspace.type == "bag") {
		if(typeof revision == "undefined") {
			revision = "0";
		} else if(revision == "false") {
			return null;
		}
		etag = [adaptor.normalizeTitle(workspace.name),
			adaptor.normalizeTitle(tiddler.title), revision].join("/");
		etag = '"' + etag + '"';
	}
	return etag;
};

adaptor.normalizeTitle = function(title) {
	return encodeURIComponent(title);
};

})(jQuery);


/*
 * jQuery JSON Plugin
 * version: 1.3
 * source: http://code.google.com/p/jquery-json/
 * license: MIT (http://www.opensource.org/licenses/mit-license.php)
 */
(function($){function toIntegersAtLease(n)
{return n&lt;10?'0'+n:n;}
Date.prototype.toJSON=function(date)
{return this.getUTCFullYear()+'-'+
toIntegersAtLease(this.getUTCMonth())+'-'+
toIntegersAtLease(this.getUTCDate());};var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};$.quoteString=function(string)
{if(escapeable.test(string))
{return'"'+string.replace(escapeable,function(a)
{var c=meta[a];if(typeof c==='string'){return c;}
c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}
return'"'+string+'"';};$.toJSON=function(o,compact)
{var type=typeof(o);if(type=="undefined")
return"undefined";else if(type=="number"||type=="boolean")
return o+"";else if(o===null)
return"null";if(type=="string")
{return $.quoteString(o);}
if(type=="object"&amp;&amp;typeof o.toJSON=="function")
return o.toJSON(compact);if(type!="function"&amp;&amp;typeof(o.length)=="number")
{var ret=[];for(var i=0;i&lt;o.length;i++){ret.push($.toJSON(o[i],compact));}
if(compact)
return"["+ret.join(",")+"]";else
return"["+ret.join(", ")+"]";}
if(type=="function"){throw new TypeError("Unable to convert object of type 'function' to json.");}
var ret=[];for(var k in o){var name;type=typeof(k);if(type=="number")
name='"'+k+'"';else if(type=="string")
name=$.quoteString(k);else
continue;var val=$.toJSON(o[k],compact);if(typeof(val)!="string"){continue;}
if(compact)
ret.push(name+":"+val);else
ret.push(name+": "+val);}
return"{"+ret.join(", ")+"}";};$.compactJSON=function(o)
{return $.toJSON(o,true);};$.evalJSON=function(src)
{return eval("("+src+")");};$.secureEvalJSON=function(src)
{var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,'@');filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']');filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,'');if(/^[\],:{}\s]*$/.test(filtered))
return eval("("+src+")");else
throw new SyntaxError("Error parsing JSON, source is not valid.");};})(jQuery);
//}}}</pre>
</div>
<div title="SiteIcon" server.title="SiteIcon" server.page.revision="1484060" server.etag="&quot;willrogers_public/SiteIcon/1484060:593b8638f416dec182fd0d7de9555b1bb6b1e5ac&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="image/jpeg" modified="20131026135129" created="20110421100842" tags="" _hash="d0602cfd62af3ac3e8dab88781369af296e4d26a">
<pre>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</pre>
</div>
<div title="GuitarTabs" server.title="GuitarTabs" server.page.revision="364118" server.etag="&quot;willrogers_public/GuitarTabs/364118:732e2558d3e278d7eadadc6d9ff8bbd5df9eb02c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110508140628" created="20110507141147" tags="" _hash="6515d1acfacfeac9596008421a540b857a176e8b">
<pre>* FakenhamFair
* RepeaterBeater
* NewYorkGirls</pre>
</div>
<div title="StyleSheetTiddler" server.title="StyleSheetTiddler" server.page.revision="1521917" server.etag="&quot;system-theme_public/StyleSheetTiddler/1521917:88ba86ad3b34a1733c00fe60f5eddc4debb97c38&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-theme_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-theme_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="1a28a9b1acf2996cdfbb522f52f0e56353d9f883">
<pre>/*{{{*/
.tiddler .originButton div {
	display: inline-block;
}

.tiddler .spaceSiteIcon .siteIcon {
	_display: inline; /* IE doesn't like inline-block */
}

.tiddler .originButton {
	display: block;
}

.selected .tagging,
.selected .tagging:hover {
	border: none;
	background: none;
}

.tagging {
	float: none;
	background: none;
	border: none;
}

.tagging li.listTitle {
	margin-left: 0px;
}
.tagging li {
	margin: 0 8px;
}

.tagging .tiddlyLink {
	-webkit-border-radius: 3px;
	-moz-border-radius: 3px;
	-o-border-radius: 3px;
	border-radius: 3px;
	padding: 1px 2px;
	line-height: 1.2em;
}

/* for following */
#popup .siteIcon {
	float: left;
	height: 25px;
}

.content {
	width: 100%; /* IE */
	font-size: 0.9em;
}

.editorHeading {
	height: 48px;
}

.heading {
	left: 0;
	margin-bottom: 40px;
	position: relative;
	top: 32px;
}

.followButton a {
	display: block;
	margin-top: -20px;
}

.tiddler .followPlaceHolder {
	display: block;
	position: absolute;
	top: 16px;
	right: 64px;
	_right: 138px; // add width of modifierIcon
}

.tiddler .followButton {
	position: relative;
	height: 24px;
	text-align: left;
	color: #fff;
	background: [[ColorPalette::PrimaryMid]];
	padding: 10px 0px 0px 10px;
	width: 38px;
	margin: -16px -8px 24px 0;
}

/* creates the larger triangle */
.followButton:before {
	content: "\00a0";
	display: block; /* reduce the damage in FF3.0 */
	position: relative;
	bottom: -20px;
	right: 0;
	width: 0;
	height: 0;
	border-width: 0 0 20px 20px;
	border-style: solid;
	border-color: transparent [[ColorPalette::PrimaryMid]];
}

.toolbar svg {
	height: 16px;
	width: 16px;
}

.toolbar svg .glyph {
	fill: #ccc;
}

.toolbar a:hover .glyph {
	fill: black;
}

.toolbar a:active .glyph {
	fill: [[ColorPalette::Background]];
}

.originButton,
.followPlaceHolder,
.tiddler .subtitle {
	cursor: pointer;
}

.editSpaceSiteIcon .originButton {
	cursor: auto;
}

.tiddler .subtitle:hover {
	font-weight: bold;
	background: none;
}

.originButton img,
.originButton svg {
	margin-left: 0px;
}

.modifierIcon {
	position: absolute;
	width: 74px;
	top: 0px;
	right: 0px;
	_right: 74px; /* in IE6 positioning works incorrectly so use -width instead */
	text-align: right;
}

.modifierIcon img,
.modifierIcon svg {
	margin-right: 8px;
}

.tiddler .viewer {
	padding-bottom: 16px;
	margin: 0 0 0 56px;
	line-height: 1.4em;
}

.viewer pre {
	margin-left: 0;
}

.siteIcon .label {
	color: [[ColorPalette::TertiaryDark]];
}

.tiddler .spaceSiteIcon {
	float: left;
	margin-right: 0;
	margin-top: 0;
	position: relative;
	display: block;
}

.tiddler .titleBar {
	display: block;
	margin-right: 136px;
	margin-left: 56px;
}

.followButton a {
	color: [[ColorPalette::Background]];
}

.tiddler {
	position: relative;
	padding: 0;
	margin-bottom: 3em;
	border-top: 3px solid [[ColorPalette::PrimaryMid]];
	background: #fff;
}

.tiddler .editor {
	padding: 0px 8px;
}

.tiddler .heading .title {
	position: relative;
	display: block;
	word-wrap: break-word;
	font-size: 32px;
	line-height: 32px;
}
.tiddler .heading .editor.title {
	font-size: 1.7em;
	line-height: normal;
}

.tiddler .headingClear {
	clear: both;
}

.tiddler .subtitle {
	font-style: italic;
	font-size: 0.9em;
	color: #a6a59e;
	margin-top: 0;
}

.toolbar {
	position: absolute;
	padding: 0;
	top: 8px;
	right: -8px;
}

.toolbar .moreCommand.highlight {
	background: none;
}

.tiddler .toolbar .button {
	border: none;
	display: inline;
	padding: 0px;
	margin-right: 16px;
}

.tiddler .toolbar a:hover {
	background: none;
}

.tiddler .tagged .listTitle {
	display: none;
}

.revButton {
	float: right;
}

/*! EditTemplate specific*/
.tiddler .privacySettings {
	text-align: center;
}
.tiddler .privacySettings .originButton {
	display: inline;
}

.editSpaceSiteIcon, .privacyEdit {
	float: left;
}

.editSpaceSiteIcon svg,
.editSpaceSiteIcon img,
.editSpaceSiteIcon .roundelLabel {
	float: left;
}

.tagTitle {
	position: absolute;
	text-align: center;
	width: 48px;
	top: 0px;
	left: -56px;
}

.editSpaceSiteIcon .originButton img,
.editSpaceSiteIcon .originButton svg {
	height: 16px;
	margin-left: 24px;
	margin-right: 32px;
	width: 16px;
}

.tagAnnotation {
	margin-top: 8px;
	padding-bottom: 8px;
}
.annotationsBox {
	margin-top: 8px;
}

.editorFooter {
	position: relative;
	padding: 0;
	margin-top: 16px;
	margin-left: 64px;
}

.tiddler .editorFooter .editor {
	padding-left: 0px;
}

.heading .editor input {
	width: 100%;
	font-size: 1.5em;
}

.spaceSiteIcon .externalImage .image a:hover,
.modifierIcon .externalImage .image a:hover {
	background: none;
}

div.toolbar {
	visibility:hidden;
	right:-16px;
}

.selected div.toolbar {
	visibility: visible;
}

.followButton a:hover {
	background: [[ColorPalette::PrimaryMid]];
	text-decoration: underline;
}

a.image:hover {
	background: transparent;
}

@media all and (max-device-width: 480px) {
	div.toolbar {
		visibility:visible;
	}
}
@media only screen and (device-width: 768px) {
	div.toolbar {
		visibility:visible;
	}
}
@media all and (max-width: 960px) {
	.tiddler .titleBar {
		margin-left: 36px;
		margin-right: 80px;
	}

	.tiddler .heading {
		margin-bottom: 48px;
	}

	.tiddler .heading .title {
		font-size: 32px;
		line-height: 32px;
	}

	.tiddler .modifierIcon img,
	.tiddler .modifierIcon svg,
	.tiddler .spaceSiteIcon .originButton img,
	.originButton svg {
		width: 32px;
		height: 32px;
		margin-left: 0px;
		margin-right: 0px;
	}

	.tiddler .followPlaceHolder {
		right: 48px;
	}

	.tiddler .followButton {
		width: 24px;
	}

	.tiddler .viewer {
		margin: 0px 0px 0px 36px;
		padding-top: 0;
	}

	br {
		line-height: 0.5em;
	}
}
/*}}}*/</pre>
</div>
<div title="ScienceSoft" server.title="ScienceSoft" server.page.revision="922459" server.etag="&quot;willrogers_public/ScienceSoft/922459:caaa6433aeec569c964fb4c1eab74179fd9a8b55&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121029170208" created="20121029170010" tags="ahm emi sciencesoft" _hash="0a7335ee19cd00e4275c0b7dc993da22e7bf3d72">
<pre>Talk by Alberto di Meglio at the EmiAhmBudapest

!!Motivations
It is acknowledged that the heavyweight approach that EMI has taken is not sustainable in the long term.  ~ScienceSoft was designed as a vehicle for continuing some of the useful functions of EMI:
* Introduce a collaborative structure for scientific software
* open contributions
** provide as much or as little as fits your needs
* providing practical collaborative functionality and services for the software

!!Plans
It is in prototype phase.  It is accepted that it may not take off, but full operation is planned from spring 2013.
Similar concepts:
* EGI applications SB, runmycode, sourceforge, pandata, plume, ~ResearchGATE, academia.edu, ohloh, The ~OpenScience Project
* currently looking for ways to make the project sustainable
* need participation from EMI partners

!!First steps
* uses Drupal (no original web development), hosted by CERN.
* simple data model defined
* different login methods being implemented</pre>
</div>
<div title="EmiNA2" server.title="EmiNA2" server.page.revision="710509" server.etag="&quot;willrogers_public/EmiNA2/710509:d4ba9c1375446a70933e88f2ca36673b4186d9ca&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="201205150842" created="20111018153243" tags="" _hash="7c2ab3de55ace38503ea6430122d913f1ca97575">
<pre>!!NA2 - Outreach and Collaborations / Dissemination and Training
''Leader: Emidio Giorgio''
https://twiki.cern.ch/twiki/bin/view/EMI/NA2

After the first EMI review, recommendations:
* imporove outreach and promotion
* improve online marketing to increase traffic to the website
* improve the website
Dissemination: a number of different conferences...
Training: a similar number of events, plus a 'training infrastructure'.
They definitely are interested in everybody's input, for the website or things 'worth disseminating'.</pre>
</div>
<div title="EmiNA3" server.title="EmiNA3" server.page.revision="710512" server.etag="&quot;willrogers_public/EmiNA3/710512:2e787ac4311b4f76c237ba695c6676f4537cc511&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120515084433" created="20111018153425" tags="" _hash="65a9096546fca79bac57d5857e32e5f283bd9629">
<pre>!!NA3 - Sustainability and ~Long-Term Strategies

''Leader: Morris Riedel''
https://twiki.cern.ch/twiki/bin/view/EMI/NA3

This work package was started in the middle of the project, because of recommendations of the reviewers.

Some notes:
* the project finishes must be better than three months.
* EMI is a big influence on OGF.
* we need to shift EMI development towards open source; also integration with OS distributions

John asked whether to 'sell' EMI as an overall distribution or the individual packages.  Morris said 'both'.</pre>
</div>
<div title="EmiNA1" server.title="EmiNA1" server.page.revision="710520" server.etag="&quot;willrogers_public/EmiNA1/710520:65b80d1794a26b121ef3cedb00bd5a34df0b7398&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120515091510" created="20111018153024" tags="" _hash="817c6e7d7d70a386dd73076f87612fb5c3a724e6">
<pre>!!NA1 - Administration and Technical Management 


''Leader: Alberto di Meglio'' - also the EMI project director
https://twiki.cern.ch/twiki/bin/view/EMI/NA1


A number of recommendations in the first EMI review
One thing that seems relevant to us is that product teams will be encouraged to package our own products to a professional (EPEL / Debian) level.  There was more on this throughout the sessions.

Recommendations:
* Strategy director and plan: Morris Riedel and NA3
* Reduce deliverables and improve coherence
* Improve sustainability
* Better marketing, website, outreach, promotion
* Technical deliverables not detailed enough
* Establish a relationship with PRACE
* Improve industrial engagement - some progress
* Establish a clear position on clouds
* Increase EMI visibility within standards bodies
</pre>
</div>
<div title="ReadingFlats" server.title="ReadingFlats" server.page.revision="713469" server.etag="&quot;willrogers_public/ReadingFlats/713469:777ba322ebfcd0de12fda51bd7211f550cb66c7d&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120517171948" created="20120514204945" tags="" _hash="763d99b4913d8c518537f13f96ffbd320dab31aa">
<pre>!!Possibles
|[[Paris Dillon|http://www.findaproperty.com/to-rent/property-11621317]]|£775|east of H|1st July|no photo|
|**[[Parkway|http://www.parkway-properties.co.uk/Property-To-Rent-Cardigan-Road-Reading-PI-487.htm]]|£850|Cardigan Rd, east of centre|July 1st|terrace|
|**[[Romans|http://www.romans.co.uk/Property/43954/]]|£875|Cardigan Rd, east of H|8th June|terrace|
|[[Romans|http://romans.co.uk/Property/42741/#maptab]]|£895|Drake Way, south of H|July 2nd|Posh|
|[[Premier|http://premierreading.co.uk/product_details.php?product_id=831]]|£850|south of H| |a bit modern|
|[[Right move|http://www.rightmove.co.uk/property-to-rent/property-34243744.html]]|£700|Zinzan St, centre|15th July|fairly small|
|[[Right move|http://www.rightmove.co.uk/property-to-rent/property-22926105.html]]|£825|Sherman Road, west of H|13th July|terrace|
|[[Right move|http://www.rightmove.co.uk/property-to-rent/property-26556646.html]]|£850|Alpine Rd, west of H|May||
|[[Right move|http://www.rightmove.co.uk/property-to-rent/property-22573062.html]]|£950|Elgar Rd, west of H||3 bed|
|[[Right move|http://www.rightmove.co.uk/property-to-rent/property-37465937.html]]|£950|Elgar Rd, west of H|now|3 bed|
|[[Martyn Russell|http://www.martynrussell.co.uk/Property-To-Rent-Kendrick-Road-Reading-PI-1114.htm - Martyn Russell]]|£875|right by hospital, west|June 30th|looks nice|
|[[Right move|http://www.rightmove.co.uk/property-to-rent/property-22597626.html]]|£950|Caversham|1st June|2 bed apt, communal garden|
|[[Parkers|http://www.parkersproperties.co.uk/property-details/berkshire/reading/tilehurst-road]]|£795|Tilehurst|28th June|Tilehurst Rd, looks nice enough|
|[[Vanderpump|http://www.vebra.com/home/search/vdetails.asp?src=agent&amp;fd=1288&amp;bd=0&amp;db=2&amp;cl=16941&amp;pid=23145410]]|£825|Edge of Tilehurst|May|1st floor maisonette, by country|
|[[Right move|http://www.rightmove.co.uk/property-to-rent/property-18223988.html]]|£895|Tilehurst|14th July|By the country|
|[[Davis Tate|http://www.davistate.com/pangbourne-lettings/pangbourne-lettings/07,0,0,0,1753702,62937,00.htm]]|£850|Pangbourne|1st June|Farm cottage|

!!Letting agents
[[RNR|http://www.rnrproperties.co.uk/]]
[[Romans|http://romans.co.uk/]] - quite a few properties
[[Atlantis|http://www.atlantisproperty.co.uk/]]
[[Martyn Russell|http://www.martynrussell.co.uk]] - crap search on website, so had to look through
[[Parkway Properties|http://www.parkway-properties.co.uk/]]
[[Parkers|http://www.parkersproperties.co.uk]] - about 10, but none appropriate
[[Redstones|http://redstones.co.uk/]]
[[Space|http://www.space.uk.net/]] - about 10, but none relevant to us
[[Flatmans|http://www.flatmans.com/]] - nothing immediately useful
[[Jon Rosi|http://www.jonrosi.co.uk/]]
[[Adams Estates|http://www.adamsestates.net]] - not terribly promising
[[Walmsey|http://www.walmsley.co.uk/]]
[[Westgate|http://www.westgateonline.co.uk]]
[[Premier|http://premierreading.co.uk]]

!!Accumulators
findaproperty.com
rightmove.com

!!Gone

|*[[Atlantis|http://www.vebra.com/home/search/vdetails.asp?src=agent&amp;fd=1081&amp;bd=0&amp;db=2&amp;cl=12747&amp;pid=23155040]]|£995|Pangbourne||view!|
|*[[Atlantis|http://www.vebra.com/home/search/vdetails.asp?src=agent&amp;fd=1081&amp;bd=0&amp;db=2&amp;cl=12747&amp;pid=23135760]]|£895|Kennet Side|June 16th|By the river!|
|*[[Right move|http://www.rightmove.co.uk/property-to-rent/property-37402490.html]]|£995|Caversham, west|1st June|2 bed apt, over-40s only!|
|*[[Right move|http://www.rightmove.co.uk/property-to-rent/property-21944388.html]]|£895|southwest of H |now|2 bed semi, garden|
|*[[Right move|http://www.rightmove.co.uk/property-to-rent/property-22719324.html]]|£800|southwest of H |now|2 bed terrace, nice garden|</pre>
</div>
<div title="VirtualUbuntu" server.title="VirtualUbuntu" server.page.revision="975191" server.etag="&quot;willrogers_public/VirtualUbuntu/975191:f3713da301b0e06bdd7ce5179872313b9c055a24&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121130171722" created="20110421124628" tags="machine ubuntu virtual virtualbox vm" _hash="b680607136a49fc5e8489ff831aee60c010f9f0d">
<pre>See VirtualBox on how to install any virtual machine.

As well as installing the Guest Additions, I went to Additional Drivers and activated the driver there.

It was a struggle making two desktops work, because VirtualBox kept crashing, but eventually I got it working on Ubuntu 2D.

!!Configuration
* Network proxy - this is a bit tricky
** You can set a system-wide proxy using System -&gt; Preferences -&gt; Network Proxy
** This doesn't seem to work for Ubuntu Software Centre and Update Manager
** I can't make the automatic proxy URL work - I have to use the particular machine and port
* Synaptic package manager has its own proxy settings, which you can configure
** Settings -&gt; Preferences...
** If you set these, Ubuntu Software Centre and Update Manager seem to work.
* {{{ apt-get install vim }}}
* System -&gt; Preferences -&gt; Screensaver
** Deactivate screensaver and screen lock for a VM
* System -&gt; Preferences -&gt; Power Management
** Deactivate sleep for a VM

!!kerberos
* {{{apt-get install krb5-user krb5-clients}}}
* {{{vim /etc/krb5.conf}}} and add the bumf which is in ~KrbConf in Trac.

!!Programming 
* {{{apt-get install eclipse}}}
** See EclipseNotes for more
* SVN - see SvnUbuntu

!!Versions
!!!10.04 LTS
* I installed this on my old laptop, and used it quite a lot
* It seems to run fine on the new laptop with 3D acceleration off
* If I enable 3D acceleration, it doesn't really work

!!!10.10
* I installed this for a little while on the old laptop and it seemed to work fine

!!!11.04
* I can't run this successfully, but it may be because of the 3D acceleration issue</pre>
</div>
<div title="EmiMessaging" server.title="EmiMessaging" server.page.revision="363994" server.etag="&quot;willrogers_public/EmiMessaging/363994:9120ef04b5e5e48088fa4558f37c3628b113f242&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111018122043" created="20111018122043" tags="" _hash="76d3307037bb9e7302ad4de38bc9bb8b7713e684">
<pre>Talk at the EMI AHM by Lionel Cons.

!!Year 2 plan
* Provide recommendations for messaging based on research done in year 1
* Products:
** Apache ActiveMQ - the obvious one.  But the project is finishing, so we may not get further features, just bug fixes.
** Apache ActiveMQ Apollo - its future is a little bit unclear
** RabbitMQ - cloud-oriented, written in Erlang
* Recommendations:
** Use STOMP
** Avoid vendor lock-in
** Isolate messaging components
** Use dedicated messaging services made of independent brokers
** Test, benchmark and validate your use cases.
** Guidelines:  http://goo.gl/q62ol
* Services available
** EMI ''should'' have one
** One dev instance at CERN
** You can set up your own instances
** EGI provides a network of four brokers
* Architecture:
** All producers connect to a random broker
** All consumers need to connect to all brokers
* Brokers and libraries are available already.
** Prototype software arriving
** FBQ - file based queue, which separates application from messaging
* Documentation needs improving, and needs feedback in order to improve

There is talk of a messaging library being set up.  I'm not sure who is going to write this.  What is described is very similar to the SSM.</pre>
</div>
<div title="GettingStarted" server.title="GettingStarted" server.page.revision="1521877" server.etag="&quot;system-info_public/GettingStarted/1521877:4d4e00d5e2ff6b2b8f55b9accda742480cfc480d&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-info_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-info_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeMissing excludeSearch" _hash="7e99bcf2e2a4af3eabd3854cc9d1c43ca1b359a7">
<pre>/%

Hello,

If you choose to change this GettingStarted tiddler, you may wish to add the following to your new content if you expect you space to be included:

&lt;&lt;&lt;
----
Hello,
''This ~GettingStarted tiddler has been customized.''
If you want to see the original system tiddler just click the following link: GettingStarted@system-info at system-info.
&lt;&lt;&lt;
%/

Welcome to your brand new [[TiddlySpace|http://docs.tiddlyspace.com/TiddlySpace]].

You're almost ready to go, there are just a couple of things left to do.

!Customise your space
Go to [[SpaceSettings]] to finish customising  your space. When you're done, come back here (just scroll up). Don't worry though, this will still be open when you've finished.

!Further Customisation

For advanced options, the [[ServerSettings]] tiddler is used to enable the following features:

#index: The value is the name of a tiddler that will be presented when loading the space.  For example, when set to {{{Hello}}} for the space hello.tiddlyspace.com, navigating to that URL will present the Hello tiddler. If there is no {{{Hello}}} you will get an error.
#editor: The name of an [[editor application|http://docs.tiddlyspace.com/Example%20Tiddler%20Editors]] to edit tiddlers with.  Applications come from [[included spaces|http://docs.tiddlyspace.com/How%20do%20I%20include%2Fexclude%20spaces%3F]]

//If you do not need or understand these features there is no need to create a ServerSettings tiddler.//

To edit these options: 

* click [[here|ServerSettings]] to open the [[ServerSettings]] tiddler
* click on the edit button (the pencil icon)
* add the options you wish to set 
* click on the save button (the tick icon).

An example [[ServerSettings]] tiddler:
{{{
index: HelloThere
editor: /edit#{tiddler}
}}}

The additional text after /edit allows a tiddler to be opened in edit mode e.g:
{{{http://hello.tiddlyspace.com/edit#MyTiddler}}}

!!See Also

* [[ServerSettings shadow tiddler|http://docs.tiddlyspace.com/ServerSettings%20shadow%20tiddler]]
* [[Choosing a non-TiddlyWiki Default Application for your Space|http://docs.tiddlyspace.com/Choosing%20a%20non-TiddlyWiki%20Default%20Application%20for%20your%20Space]]

!Finished customising?
You can [[Start writing]] some [[tiddlers|http://docs.tiddlyspace.com/Tiddler]].
If you're not done tweaking yet though, you can always [[Customise this space|SpaceSettings]] a bit more.

You can also [[access and read other tiddlers in various ways|http://docs.tiddlyspace.com/Viewing%20Tiddlers]].

!Administration
If you'd like to change your password or create another space, visit "Your Account" from the [[Universal Backstage|http://docs.tiddlyspace.com/UniversalBackstage]] (the blue dot in the upper right of the page). If you'd like to add a member or [[include a space|http://docs.tiddlyspace.com/How%20do%20I%20include%2Fexclude%20spaces%3F]] visit "This Space" from the [[Universal Backstage|http://docs.tiddlyspace.com/UniversalBackstage]].

You can have as many spaces as you like and each space can have as many members as you or your group need.

!Stuck?
If you're stuck, and would like some help, please visit the [[help|http://help.tiddlyspace.com]] space, which can point you in the right direction.</pre>
</div>
<div title="SvnUbuntu" server.title="SvnUbuntu" server.page.revision="364789" server.etag="&quot;willrogers_public/SvnUbuntu/364789:4e122e76dbf56c8787ecb64e2db5fe816ee8b489&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111021100011" created="20110421131520" tags="" _hash="e0e2db1722d9790b7facb1a50d53f6eee7e014a3">
<pre>Working with e-Science SVN on Ubuntu: see http://svn.esc.rl.ac.uk

* Install Subversion:
** {{{ apt-get install subversion }}}
* Install Kerberos packages:
** {{{ apt-get install krb5-user }}}
** I used the default blank space for the default realm
* Copy the sample file from the site above to {{{ /etc/krb5.conf }}}
* {{{ kinit hgs15624 }}} to create a token
* now try {{{ svn co https://svn.esc.rl.ac.uk/repos/sct/software/apel/ }}}

</pre>
</div>
<div title="TiddlySpacePublishingCommands" server.title="TiddlySpacePublishingCommands" server.page.revision="1521868" server.etag="&quot;system-plugins_public/TiddlySpacePublishingCommands/1521868:3beba30c544f45a763fecb3129e8d7bf72ea1247&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="d38da0ee80a7dc114a17466600f9430fa2a962bb">
<pre>/***
|''Name''|TiddlySpacePublishingCommands|
|''Version''|0.8.5|
|''Status''|@@beta@@|
|''Description''|toolbar commands for drafting and publishing|
|''Author''|Jon Robson|
|''Source''|http://github.com/TiddlySpace/tiddlyspace/raw/master/src/plugins/TiddlySpacePublishingCommands.js|
|''CoreVersion''|2.6.1|
|''Requires''|TiddlySpaceConfig TiddlySpaceFilters|
!Usage
Provides changeToPrivate, changeToPublic and saveDraft commands
Provides TiddlySpacePublisher macro.
{{{&lt;&lt;TiddlySpacePublisher type:private&gt;&gt;}}} make lots of private tiddlers public.
{{{&lt;&lt;TiddlySpacePublisher type:public&gt;&gt;}}} make lots of public tiddlers public.
!TODO
* add public argument?
!Code
***/
//{{{
(function($) {

var tiddlyspace = config.extensions.tiddlyspace;
var originMacro = config.macros.tiddlerOrigin;

tiddlyspace.getTiddlerStatusType = function(tiddler) {
	var isShadow = store.isShadowTiddler(tiddler.title);
	var exists = store.tiddlerExists(tiddler.title);
	if(isShadow &amp;&amp; !exists) {
		return "shadow";
	} else if(!exists) {
		return "missing";
	} else {
		var types = ["private", "public"];
		var type = "external";
		for(var i = 0; i &lt; types.length; i++) {
			var t = types[i];
			type = config.filterHelpers.is[t](tiddler) ? t : type;
		}
		if(config.filterHelpers.is.unsynced(tiddler)) {
			type = type == "private" ? "unsyncedPrivate" : "unsyncedPublic";
		}
		return type;
	}
};

var cmd = config.commands.publishTiddler = {
	text: "make public",
	tooltip: "Change this private tiddler into a public tiddler",
	errorMsg: "Error publishing %0: %1",

	isEnabled: function(tiddler) {
		return !readOnly &amp;&amp; config.filterHelpers.is["private"](tiddler);
	},
	handler: function(ev, src, title) {
		var tiddler = store.getTiddler(title);
		if(tiddler) {
			var newBag = cmd.toggleBag(tiddler.fields["server.bag"]);
			this.moveTiddler(tiddler, {
				title: tiddler.fields["publish.name"] || tiddler.title,
				fields: { "server.bag": newBag }
			});
		}
	},
	toggleBag: function(bag, to) {
		var newBag;
		if(typeof bag != typeof "") {
			var tiddler = bag;
			bag = tiddler.fields["server.bag"];
		}
		if(bag.indexOf("_private") &gt; -1) { // should make use of endsWith
			to = to ? to : "public";
			newBag = bag.replace("_private", "_" + to);
		} else {
			to = to ? to : "private";
			newBag = bag.replace("_public", "_" + to);
		}
		return newBag;
	},
	copyTiddler: function(title, newTitle, newBag, callback) {
		var original = store.getTiddler(title);
		newTitle = newTitle ? newTitle : title;
		var adaptor = original.getAdaptor();
		var publish = function(original, callback) {
			var tiddler = $.extend(new Tiddler(newTitle), original);
			tiddler.fields = $.extend({}, original.fields, {
				"server.bag": newBag,
				"server.workspace": "bags/%0".format(newBag),
				"server.page.revision": "false"
			});
			delete tiddler.fields["server.title"];
			tiddler.title = newTitle;
			adaptor.putTiddler(tiddler, null, null, callback);
		};
		publish(original, callback);
	},
	moveTiddler: function(tiddler, newTiddler, callback) {
			var info = {
			copyContext: {},
			deleteContext: {}
		};
		var _dirty = store.isDirty();
		var adaptor = tiddler.getAdaptor();
		var newTitle = newTiddler.title;
		var oldTitle = tiddler.title;
		delete tiddler.fields["server.workspace"];
		var oldBag = tiddler.fields["server.bag"];
		var newBag = newTiddler.fields["server.bag"];
		var newWorkspace = "bags/%0".format(newBag);
		cmd.copyTiddler(oldTitle, newTitle, newBag, function(ctx) {
				info.copyContext = ctx;
				var context = {
					tiddler: tiddler,
					workspace: newWorkspace
				};
				store.addTiddler(ctx.tiddler);
				tiddler.title = oldTitle; // for cases where a rename occurs
				if(ctx.status) { // only do if a success
					if(oldBag != newBag) {
						adaptor.deleteTiddler(tiddler, context, {}, function(ctx) {
							info.deleteContext = ctx;
							var el;
							if(tiddler) {
								tiddler.fields["server.workspace"] = newWorkspace;
								tiddler.fields["server.bag"] = newBag;
							}
							el = el ? el : story.refreshTiddler(oldTitle, null, true);
							if(oldTitle != newTitle) {
								store.deleteTiddler(oldTitle);
								store.notify(oldTitle, true);
							}
							if(el) {
								story.displayTiddler(el, newTitle);
							}
							if(oldTitle != newTitle) {
								story.closeTiddler(oldTitle);
							}
							if(callback) {
								callback(info);
							}
							store.setDirty(_dirty);
						});
					} else {
						if(callback) {
							callback(info);
						}
					}
					refreshDisplay();
				}
		});
	}
};

var changeToPrivate = config.commands.changeToPrivate = {
	text: "make private",
	tooltip: "turn this public tiddler into a private tiddler",
	isEnabled: function(tiddler) {
		return !readOnly &amp;&amp; config.filterHelpers.is["public"](tiddler);
	},
	handler: function(event, src, title) {
		var tiddler = store.getTiddler(title);
		var newBag = cmd.toggleBag(tiddler, "private");
		var newTiddler = { title: title, fields: { "server.bag": newBag }};
		cmd.moveTiddler(tiddler, newTiddler);
	}
};
config.commands.changeToPublic = cmd;

/* Save as draft command */
var saveDraftCmd = config.commands.saveDraft = {
	text: "save draft",
	tooltip: "Save as a private draft",
	isEnabled: function(tiddler) {
		return changeToPrivate.isEnabled(tiddler);
	},
	getDraftTitle: function(title) {
		var draftTitle;
		var draftNum = "";
		while(!draftTitle) {
			var suggestedTitle = "%0 [draft%1]".format(title, draftNum);
			if(store.getTiddler(suggestedTitle)) {
				draftNum = !draftNum ? 2 : draftNum + 1;
			} else {
				draftTitle = suggestedTitle;
			}
		}
		return draftTitle;
	},
	createDraftTiddler: function(title, gatheredFields) {
		var tiddler = store.getTiddler(title);
		var draftTitle = saveDraftCmd.getDraftTitle(title);
		var draftTiddler = new Tiddler(draftTitle);
		if(tiddler) {
			$.extend(true, draftTiddler, tiddler);
		} else {
			$.extend(draftTiddler.fields, config.defaultCustomFields);
		}
		for(var fieldName in gatheredFields) {
			if(TiddlyWiki.isStandardField(fieldName)) {
				draftTiddler[fieldName] = gatheredFields[fieldName];
			} else {
				draftTiddler.fields[fieldName] = gatheredFields[fieldName];
			}
		}
		var privateBag = tiddlyspace.getCurrentBag("private");
		var privateWorkspace = tiddlyspace.getCurrentWorkspace("private");
		draftTiddler.title = draftTitle;
		draftTiddler.fields["publish.name"] = title;
		draftTiddler.fields["server.workspace"] = privateWorkspace;
		draftTiddler.fields["server.bag"] = privateBag;
		draftTiddler.fields["server.title"] = draftTitle;
		draftTiddler.fields["server.page.revision"] = "false";
		delete draftTiddler.fields["server.etag"];
		return draftTiddler;
	},
	handler: function(ev, src, title) {
		var tiddler = store.getTiddler(title); // original tiddler
		var tidEl = story.getTiddler(title);
		var uiFields = {};
		story.gatherSaveFields(tidEl, uiFields);
		var tid = saveDraftCmd.createDraftTiddler(title, uiFields);
		tid = store.saveTiddler(tid.title, tid.title, tid.text, tid.modifier,
			new Date(), tid.tags, tid.fields);
		autoSaveChanges(null, [tid]);
		story.closeTiddler(title);
		story.displayTiddler(src, title);
		story.displayTiddler(src, tid.title);
	}
};

var macro = config.macros.TiddlySpacePublisher = {
	locale: {
		title: "Batch Publisher",
		changeStatusLabel: "Make %0",
		noTiddlersText: "No tiddlers to publish",
		changeStatusPrompt: "Make all the selected tiddlers %0.",
		description: "Change tiddlers from %0 to %1 in this space"
	},

	listViewTemplate: {
		columns: [
			{ name: "Selected", field: "Selected", rowName: "title", type: "Selector" },
			{ name: "Tiddler", field: "tiddler", title: "Tiddler", type: "Tiddler" },
			{ name: "Status", field: "status", title: "Status", type: "WikiText" }
		],
		rowClasses: []
	},

	changeStatus: function(tiddlers, status, callback) { // this is what is called when you click the publish button
		var publicBag;
		for(var i = 0; i &lt; tiddlers.length; i++) {
			var tiddler = tiddlers[i];
			var newTiddler = {
				title: tiddler.title,
				fields: { "server.bag": cmd.toggleBag(tiddler, status) }
			};
			cmd.moveTiddler(tiddler, newTiddler, callback);
		}
	},
	getMode: function(paramString) {
		var params = paramString.parseParams("anon")[0];
		var status = params.type ?
			(["public", "private"].contains(params.type[0]) ? params.type[0] : "private") :
			"private";
		var newStatus = status == "public" ? "private" : "public";
		return [status, newStatus];
	},
	handler: function(place, macroName, params, wikifier, paramString, tiddler) {
		var wizard = new Wizard();
		var locale = macro.locale;
		var status = macro.getMode(paramString);
		wizard.createWizard(place, locale.title);
		wizard.addStep(macro.locale.description.format(status[0], status[1]),
			'&lt;input type="hidden" name="markList" /&gt;');
		var markList = wizard.getElement("markList");
		var listWrapper = $("&lt;div /&gt;").addClass("batchPublisher").
			attr("refresh", "macro").attr("macroName", macroName).
			attr("params", paramString)[0];
		markList.parentNode.insertBefore(listWrapper, markList);
		$.data(listWrapper, "wizard", wizard);
		macro.refresh(listWrapper);
	},
	getCheckedTiddlers: function(listWrapper, titlesOnly) {
		var tiddlers = [];
		$(".chkOptionInput[rowName]:checked", listWrapper).each(function(i, el) {
			var title = $(el).attr("rowName");
			if(titlesOnly) {
				tiddlers.push(title);
			} else {
				tiddlers.push(store.getTiddler(title));
			}
		});
		return tiddlers;
	},
	refresh: function(listWrapper) {
		var checked = macro.getCheckedTiddlers(listWrapper, true);
		var paramString = $(listWrapper).empty().attr("params");
		var wizard = $.data(listWrapper, "wizard");
		var locale = macro.locale;
		var params = paramString.parseParams("anon")[0];
		var publishCandidates = [];
		var status = macro.getMode(paramString);
		var pubType = status[0];
		var newPubType = status[1];
		var tiddlers = params.filter ? store.filterTiddlers(params.filter[0]) :
			store.filterTiddlers("[is[%0]]".format(pubType));
		var enabled = [];
		for(var i = 0; i &lt; tiddlers.length; i++) {
			var tiddler = tiddlers[i];
			var title = tiddler.title;
			if(!tiddler.tags.contains("excludePublisher") &amp;&amp; title !== "SystemSettings") {
				publishCandidates.push({ title: title, tiddler: tiddler, status: pubType});
			}
			if(checked.contains(title)) {
				enabled.push("[rowname=%0]".format(title));
			}
		}

		if(publishCandidates.length === 0) {
			createTiddlyElement(listWrapper, "em", null, null, locale.noTiddlersText);
		} else {
			var listView = ListView.create(listWrapper, publishCandidates, macro.listViewTemplate);
			wizard.setValue("listView", listView);
			var btnHandler = function(ev) {
				var tiddlers = macro.getCheckedTiddlers(listWrapper);
				var callback = function(status) {
					$(".batchPublisher").each(function(i, el) {
						macro.refresh(el);
					});
				};
				macro.changeStatus(tiddlers, newPubType, callback);
			};
			wizard.setButtons([{
				caption: locale.changeStatusLabel.format(newPubType),
				tooltip: locale.changeStatusPrompt.format(newPubType),
				onClick: btnHandler
			}]);
			$(enabled.join(",")).attr("checked", true); // retain what was checked before
		}
	}
};

})(jQuery);
//}}}</pre>
</div>
<div title="PythonDocstrings" server.title="PythonDocstrings" server.page.revision="364561" server.etag="&quot;willrogers_public/PythonDocstrings/364561:abf79bd071e646c1cc04326f7a5618e14f3b112a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111220134227" created="20110704091037" tags="" _hash="82c843b198580dd08b8ac4df9943b743a8907e0f">
<pre>This is the way you should really document Python code:

http://www.python.org/dev/peps/pep-0257/

If you've put a docstring in any class, function or method, you can retrieve it with {{{&lt;thing&gt;.__doc__}}}.</pre>
</div>
<div title="TiddlySpaceTabs" server.title="TiddlySpaceTabs" server.page.revision="1521916" server.etag="&quot;system-theme_public/TiddlySpaceTabs/1521916:cd59dcc480da74613f5f07ff97584e59ce8d4bc8&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-theme_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-theme_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="7bc357188d6afd65d6724a670b0052c0488766a4">
<pre>!Spaces
&lt;&lt;groupBy server.bag&gt;&gt;

!Private
&lt;&lt;list filter [is[private]]&gt;&gt;

!Public
&lt;&lt;list filter [is[public]]&gt;&gt;

!Drafts
&lt;&lt;list filter [is[draft]]&gt;&gt;</pre>
</div>
<div title="InfrastructureSummary" server.title="InfrastructureSummary" server.page.revision="364205" server.etag="&quot;willrogers_public/InfrastructureSummary/364205:b5bdf2ebe32b4b443f417eafb3578258d810c8a7&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111019073648" created="20111019073216" tags="" _hash="32e2e4674ed36884a0e146f2436edcc40eaab60f">
<pre>Laurence Field

Messaging investigation for APEL (DGAS input welcome)
Messaging guidelines online, live, but will be considered final at month 22.

Infastructure Area Consolidation:
* GLUE 2.0
** 3/8 
* EMIR
** Prototype available - good progress
** Interfaces agreed
* ERIS - EMI Resource Information Service

* SL6, Debian 6
* Accounting
** Usage Records being consolidated - Andrea's work (CAR and StAR)
** Usage Records publising via messaging - progressing well (us!)
** Cristina's report complete - one of the objectives
* Problem: investigation into Service Monitoring and Management

Infrastructue are topics are somewhat miscellaneous, so they don't have many common ideas.</pre>
</div>
<div title="TiddlySpaceSanitizer" server.title="TiddlySpaceSanitizer" server.page.revision="1521866" server.etag="&quot;system-plugins_public/TiddlySpaceSanitizer/1521866:402f24fea9e875c2b298524a46839d9836fb399a&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="4e7490026802a699cc23155cd88b09a2cce3fb87">
<pre>/***
|''Description''|Sanitisation for dynamically pulling tiddlers into your space and displaying them|
!Notes
Works both inside and outside TiddlyWiki. Uses the HTML Sanitizer provided by the Google Caja project
(see http://code.google.com/p/google-caja/wiki/JsHtmlSanitizer for more on this), which is licensed under
an Apache License (see http://www.apache.org/licenses/LICENSE-2.0).
!Code
***/
//{{{
(function($) {

var cleanURL = function(url) {
	var regexp = /^(?:http|https|mailto|ftp|irc|news):\/\//;
	return (regexp.test(url)) ? url : null;
};

$.sanitize = function(html) {
	return html_sanitize(html, cleanURL);
};

/*
 * HTML Sanitizer, provided by Google Caja
 */

/* Copyright Google Inc.
 * Licensed under the Apache Licence Version 2.0
 * Autogenerated at Tue May 17 17:39:24 BST 2011
 * @provides html4
 */var html4={};html4.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10},html4.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0},html4.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128},html4.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,nobr:0,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},html4.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},html4.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"body::background":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0},html4.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},html4.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"body::background":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2};var html=function(a){function x(b,c,d){var e=[];w(function(b,e){for(var f=0;f&lt;e.length;f+=2){var g=e[f],h=e[f+1],i=null,j;if((j=b+"::"+g,a.ATTRIBS.hasOwnProperty(j))||(j="*::"+g,a.ATTRIBS.hasOwnProperty(j)))i=a.ATTRIBS[j];if(i!==null)switch(i){case a.atype.NONE:break;case a.atype.SCRIPT:case a.atype.STYLE:h=null;break;case a.atype.ID:case a.atype.IDREF:case a.atype.IDREFS:case a.atype.GLOBAL_NAME:case a.atype.LOCAL_NAME:case a.atype.CLASSES:h=d?d(h):h;break;case a.atype.URI:h=c&amp;&amp;c(h);break;case a.atype.URI_FRAGMENT:h&amp;&amp;"#"===h.charAt(0)?(h=d?d(h):h,h&amp;&amp;(h="#"+h)):h=null;break;default:h=null}else h=null;e[f+1]=h}return e})(b,e);return e.join("")}function w(b){var c,d;return v({startDoc:function(a){c=[],d=!1},startTag:function(e,f,g){if(!d){if(!a.ELEMENTS.hasOwnProperty(e))return;var h=a.ELEMENTS[e];if(h&amp;a.eflags.FOLDABLE)return;if(h&amp;a.eflags.UNSAFE){d=!(h&amp;a.eflags.EMPTY);return}f=b(e,f);if(f){h&amp;a.eflags.EMPTY||c.push(e),g.push("&lt;",e);for(var i=0,j=f.length;i&lt;j;i+=2){var k=f[i],l=f[i+1];l!==null&amp;&amp;l!==void 0&amp;&amp;g.push(" ",k,'="',r(l),'"')}g.push("&gt;")}}},endTag:function(b,e){if(d)d=!1;else{if(!a.ELEMENTS.hasOwnProperty(b))return;var f=a.ELEMENTS[b];if(!(f&amp;(a.eflags.UNSAFE|a.eflags.EMPTY|a.eflags.FOLDABLE))){var g;if(f&amp;a.eflags.OPTIONAL_ENDTAG)for(g=c.length;--g&gt;=0;){var h=c[g];if(h===b)break;if(!(a.ELEMENTS[h]&amp;a.eflags.OPTIONAL_ENDTAG))return}else for(g=c.length;--g&gt;=0;)if(c[g]===b)break;if(g&lt;0)return;for(var i=c.length;--i&gt;g;){var h=c[i];a.ELEMENTS[h]&amp;a.eflags.OPTIONAL_ENDTAG||e.push("&lt;/",h,"&gt;")}c.length=g,e.push("&lt;/",b,"&gt;")}}},pcdata:function(a,b){d||b.push(a)},rcdata:function(a,b){d||b.push(a)},cdata:function(a,b){d||b.push(a)},endDoc:function(a){for(var b=c.length;--b&gt;=0;)a.push("&lt;/",c[b],"&gt;");c.length=0}})}function v(c){return function(d,e){d=String(d);var f=null,g=!1,h=[],j=void 0,l=void 0,m=void 0;c.startDoc&amp;&amp;c.startDoc(e);while(d){var n=d.match(g?t:u);d=d.substring(n[0].length);if(g){if(n[1]){var o=b(n[1]),p;if(n[2]){var q=n[3];switch(q.charCodeAt(0)){case 34:case 39:q=q.substring(1,q.length-1)}p=k(i(q))}else p=o;h.push(o,p)}else if(n[4]){l!==void 0&amp;&amp;(m?c.startTag&amp;&amp;c.startTag(j,h,e):c.endTag&amp;&amp;c.endTag(j,e));if(m&amp;&amp;l&amp;(a.eflags.CDATA|a.eflags.RCDATA)){f===null?f=b(d):f=f.substring(f.length-d.length);var r=f.indexOf("&lt;/"+j);r&lt;0&amp;&amp;(r=d.length),l&amp;a.eflags.CDATA?c.cdata&amp;&amp;c.cdata(d.substring(0,r),e):c.rcdata&amp;&amp;c.rcdata(s(d.substring(0,r)),e),d=d.substring(r)}j=l=m=void 0,h.length=0,g=!1}}else if(n[1])c.pcdata&amp;&amp;c.pcdata(n[0],e);else if(n[3])m=!n[2],g=!0,j=b(n[3]),l=a.ELEMENTS.hasOwnProperty(j)?a.ELEMENTS[j]:void 0;else if(n[4])c.pcdata&amp;&amp;c.pcdata(n[4],e);else if(n[5]&amp;&amp;c.pcdata)switch(n[5]){case"&lt;":c.pcdata("&amp;lt;",e);break;case"&gt;":c.pcdata("&amp;gt;",e);break;default:c.pcdata("&amp;amp;",e)}}c.endDoc&amp;&amp;c.endDoc(e)}}function s(a){return a.replace(m,"&amp;amp;$1").replace(n,"&amp;lt;").replace(o,"&amp;gt;")}function r(a){return a.replace(l,"&amp;amp;").replace(n,"&amp;lt;").replace(o,"&amp;gt;").replace(p,"&amp;#34;").replace(q,"&amp;#61;")}function k(a){return a.replace(j,g)}function i(a){return a.replace(h,"")}function g(a,b){return f(b)}function f(a){a=b(a);if(c.hasOwnProperty(a))return c[a];var f=a.match(d);if(f)return String.fromCharCode(parseInt(f[1],10));if(!!(f=a.match(e)))return String.fromCharCode(parseInt(f[1],16));return""}var b;"script"==="SCRIPT".toLowerCase()?b=function(a){return a.toLowerCase()}:b=function(a){return a.replace(/[A-Z]/g,function(a){return String.fromCharCode(a.charCodeAt(0)|32)})};var c={lt:"&lt;",gt:"&gt;",amp:"&amp;",nbsp:"240",quot:'"',apos:"'"},d=/^#(\d+)$/,e=/^#x([0-9A-Fa-f]+)$/,h=/\0/g,j=/&amp;(#\d+|#x[0-9A-Fa-f]+|\w+);/g,l=/&amp;/g,m=/&amp;([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,n=/&lt;/g,o=/&gt;/g,p=/\"/g,q=/\=/g,t=new RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^&gt;\"'\\s]*))?)|(/?&gt;)|[\\s\\S][^a-z\\s&gt;]*)","i"),u=new RegExp("^(?:&amp;(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|&lt;!--[\\s\\S]*?--&gt;|&lt;!\\w[^&gt;]*&gt;|&lt;\\?[^&gt;*]*&gt;|&lt;(/)?([a-z][a-z0-9]*)|([^&lt;&amp;&gt;]+)|([&lt;&amp;&gt;]))","i");return{escapeAttrib:r,makeHtmlSanitizer:w,makeSaxParser:v,normalizeRCData:s,sanitize:x,unescapeEntities:k}}(html4),html_sanitize=html.sanitize

// stop here if we're not in TiddlyWiki
// XXX: is this the correct way of checking for TiddlyWiki?
if (!window.TiddlyWiki || !window.store || !store instanceof TiddlyWiki) {
	return;
}

var tiddlyspace = config.extensions.tiddlyspace;

var _subWikify = Wikifier.prototype.subWikify;

var cleanedTitle = 'This section has been cleaned of any potentially harmful code';

var replaceFunctions = {
	html: function(w) {
		var sanitizedHTML, spanEl;
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
			sanitizedHTML = $.sanitize(lookaheadMatch[1]);
			spanEl = createTiddlyElement(w.output, 'span', null, 'sanitized');
			spanEl.innerHTML = sanitizedHTML;
			spanEl.setAttribute('title', cleanedTitle);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	},
	customFormat: function(w) {
		switch(w.matchText) {
			case '@@':
				var e = createTiddlyElement(w.output, 'span');
				var styles = config.formatterHelpers.inlineCssHelper(w);
				if (styles.length === 0) {
					e.className = 'marked';
				}
				w.subWikifyTerm(e, /(@@)/mg);
				break;
			case '{{':
				var lookaheadRegExp = /\{\{[\s]*([\w]+[\s\w]*)[\s]*\{(\n?)/mg;
				lookaheadRegExp.lastIndex = w.matchStart;
				var lookaheadMatch = lookaheadRegExp.exec(w.source);
				if(lookaheadMatch) {
					w.nextMatch = lookaheadRegExp.lastIndex;
					e = createTiddlyElement(w.output,lookaheadMatch[2] == "\n" ? "div" : "span",null,lookaheadMatch[1]);
					w.subWikifyTerm(e,/(\}\}\})/mg);
				}
				break;
		}
	}
};

Wikifier.prototype.subWikify = function(output, terminator) {
	var tid = this.tiddler,
		spaceName = tiddlyspace.currentSpace.name,
		tidSpace, recipeName, stripped;
	try {
		recipeName = tid.fields['server.recipe'] ||
			tid.fields['server.workspace'];
		tidSpace = tiddlyspace.resolveSpaceName(recipeName);
		if (tidSpace !== spaceName) {
			// external tiddler, so replace dangerous formatters
			stripped = stripHTML(tid, this.formatter);
		}
	} catch(e) {
		// do nothing. There's no tiddler, so assume it's safe (?!?!?)
	}

	_subWikify.apply(this, arguments);

	if (stripped) {
		// change back to the original function
		unstripHTML(stripped, this.formatter);
	}
};

// replace potentially unsafe formatters with versions that strip bad HTML/CSS
var stripHTML = function(tid, formatter) {
	var popped = {}, _handler;
	for (var i = 0; i &lt; formatter.formatters.length; i++) {
		var f = formatter.formatters[i];
		if (replaceFunctions[f.name]) {
			_handler = f.handler;
			popped[f.name] = _handler;
			f.handler = replaceFunctions[f.name];
		}
	};

	return popped;
};

// put the original formatters back where they belong
var unstripHTML = function(stripped, formatter) {
	for (var i = 0; i &lt; formatter.formatters.length; i++) {
		var f = formatter.formatters[i];
		if (stripped[f.name]) {
			f.handler = stripped[f.name];
		}
	};
};

})(jQuery);
//}}}</pre>
</div>
<div title="LinuxLocations" server.title="LinuxLocations" server.page.revision="1615226" server.etag="&quot;willrogers_public/LinuxLocations/1615226:429619f6acfefb8d3153854544919db28d803e49&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20140103210730" created="20140103121616" tags="" _hash="f2d527add5628bd9936d92c31377020552899ef4">
<pre>
* /bin
* /boot - static files used for booting.  Includes the compiled kernel
* /dev - information about devices, which seem to be streams of data
* /etc - configuration files
* /home - user home directories
* /lib - essential shared libraries and kernel modules
* /media - mount point for removable media
* /opt - add-on optional software
* /root - home directory for the root user
* /sbin
* /proc - information about running processes
* /usr - programs installed for users</pre>
</div>
<div title="MarkupPreHead" server.title="MarkupPreHead" server.page.revision="364291" server.etag="&quot;willrogers_public/MarkupPreHead/364291:7ee8e2264163e6e3029d2a82316dae7b48500846&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110421100842" created="20110421100842" tags="excludeLists" _hash="366daa81a459afc9c61a81452b7e4b29cef35511">
<pre>&lt;!--{{{--&gt;
&lt;link rel="shortcut icon" href="/recipes/willrogers_public/tiddlers/favicon.ico" /&gt;
&lt;link href="/bags/willrogers_public/tiddlers.atom" rel="alternate"
	type="application/atom+xml" title="willrogers's public feed" /&gt;
&lt;link rel="canonical" href="http://willrogers.tiddlyspace.com/" /&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="MySQLIndices" server.title="MySQLIndices" server.page.revision="853564" server.etag="&quot;willrogers_public/MySQLIndices/853564:53566a993a75b84e89f9cc4b37e6fa4b0725c0cc&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120904140742" created="20120904135824" tags="mysql" _hash="77bb87ce741ed0456a93e2ded5f0449e8571cc04">
<pre>Indexing a column in a table allows you to retrieve a value from that column faster.  If you have a {{{where}}} clause in a query, the db can find the value in that column.

Using {{{explain select}}} in ~MySQL should show you whether an index is being used.

!!How it works
This is from a combination of Konrad's explanation and [[here|http://stackoverflow.com/questions/2362667/how-b-tree-indexing-works-in-mysql]].

A binary tree (~B-Tree) index stores the column value as a ~B-Tree key and a pointer to the record as the corresponding value.  A binary tree allows you to find the value in log2(n) time, instead of a search over the records which is n time.

The pointer to the record is an offset for ~MyISAM and the table's primary key in ~InnoDB.  ~InnoDB stores all its data in a binary tree, with the primary key as the key and the rest of the data as the value.

!!Multiple-column indices
See http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html.
You can specify more than one column in an index.  This allows you to speed up queries which use any continuous set of these columns, starting with the first.  So if you're checking the first, or the first and the second and the third, then it is quicker.  If you check the first and the third, you are not any quicker.

The ~MySQL docs say you can consider the index as a sorted array containing the values in the listed columns.  So if you're checking for values in the first and second columns, you can pick out the correct rows from the first column and then check the second column for the correct value.  But if you're checking the first and third columns, you'll have to search through all the values selected from the first column, because you can't use the second column to narrow it down.


</pre>
</div>
<div title="MatlabBasics" server.title="MatlabBasics" server.page.revision="1594723" server.etag="&quot;willrogers_public/MatlabBasics/1594723:03edab7cf2b830462f0491e74570868c8089d5e8&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131213162147" created="20131001112028" tags="" _hash="57728946bfdac68bc823404ee0d38ea0d60bbec4">
<pre>See MatlabArrays, MatlabFunctions

Matlab is a proprietary 'numerical computing environment and fourth-generation programming language'.  It is developed by ~MathWorks.

You generally either type into the command prompt or run matlab scripts.  The language is generally procedural but does include object orientation.

!!Types
See MatlabArrays.
There is no particular 'bool' in Matlab: 0 and 1 are used as in C.

!!Environment
The matlab window contains a prompt in the middle, files on the left, and variables and command history on the right.  Use the command {{{path}}} to show the Matlab path, and {{{which &lt;function&gt;}}} to show the path of a particular function.

!!Arithmetic
{{{
x = 2
x = x + 2
x * 3
x ^ 4
x == 3
x / 3
}}}
!!Comments
{{{
% This is a one line comment
%{
This is a multi-line comment
...
%}
}}}
</pre>
</div>
<div title="FindLocate" server.title="FindLocate" server.page.revision="1572575" server.etag="&quot;willrogers_public/FindLocate/1572575:cc7041994ab49d87b16a29e5b73f4b5e3145ea77&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131202152915" created="20120307141515" tags="" _hash="32ff70fce3c717bcbe37c72cd8b70b976ab308b4">
<pre>{{{find}}} and {{{locate}}} are two variations of ways to find files on a Linux filesystem.

!!Locate
{{{locate}}} simply searches the list of all paths for the string you provide.  It uses a database which you can bring up to date with the command {{{updatedb}}}.  You must be root to do this.

!!Find
The basic usage is 
{{{
find &lt;options&gt; &lt;path&gt; &lt;expression&gt;
}}}

* {{{find /dls_sw/ -name '*.edl'}}} - find all the {{{.edl}}} files in {{{/dls_sw}}}
** the quotes are important - otherwise bash will expand the variables
* {{{-iname}}} is case-insensitive

!!!!Links
* {{{-P}}} - never follow symbolic links
* {{{-L}}} - follow symbolic links
* {{{-H}}} - ??
</pre>
</div>
<div title="SelfSignedCert" server.title="SelfSignedCert" server.page.revision="850999" server.etag="&quot;willrogers_public/SelfSignedCert/850999:5e5ed6e7efda3abb73e9696e60abd51a8f96eb6b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120831083717" created="20110715104721" tags="certificate crypto openssl self-signed" _hash="cbac0515e7e128f8649d562f70b1e271ec6774ab">
<pre>Here's the process I always find: http://www.akadia.com/services/ssh_test_certificate.html.  It seems to work fine.

It generates a certificate with a signature algorithm of {{{sha1withRSAEncryption}}}.  To use a different algorithm, you have to put {{{-sha256}}} or whatever in the {{{openssl req}}} commands.  SHA2 only seems to be supported by openssl 1.  This gives {{{sha256WithRSAEncryption}}}.

!!Verifying it

Suppose I need to verify the self-signed cert against the certificates in the lcg-CA package.  Even though it signed itself, I can't just add it to the {{{ /etc/grid-security/certificates }}} directory.  However, I think the process is just to create a link to the same certificate whose name is &lt;hash-of-DN&gt;.&lt;digit&gt;.  Why this is, I'm not exactly sure.  The hash is openssl's {{{ openssl x509 -hash }}} thing and is some kind of SHA1 of a form of the certificate DN.

There's a script to do this here: http://www.madboa.com/geek/openssl/#verify-new 
{{{
#!/bin/sh
#
# usage: certlink.sh filename [filename ...]

for CERTFILE in $*; do
  # make sure file exists and is a valid cert
  test -f "$CERTFILE" || continue
  HASH=$(openssl x509 -noout -hash -in "$CERTFILE")
  test -n "$HASH" || continue

  # use lowest available iterator for symlink
  for ITER in 0 1 2 3 4 5 6 7 8 9; do
    test -f "${HASH}.${ITER}" &amp;&amp; continue
    ln -s "$CERTFILE" "${HASH}.${ITER}"
    test -L "${HASH}.${ITER}" &amp;&amp; break
  done
done
}}}</pre>
</div>
<div title="GenericDevice" server.title="GenericDevice" server.page.revision="1343034" server.etag="&quot;willrogers_public/GenericDevice/1343034:5704e65a7e00fcdd28a4005c80f4d8c10743f80c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130815145453" created="20130807091107" tags="" _hash="e8b38335e801b945d8ac63a91dc4f03a987d5ce2">
<pre>There are three source files: {{{GenericDevice.h}}}, {{{GenericDeviceP.h}}} and {{{GenericDevice.c}}}.  The idea is that you can bind an EPICS PV to areas in memory, so that you can change the PV value and any caputs to those ~PVs will be reflected in the code.  Having discovered this, I've left this part of the code alone for now.

!!!!Variant
* The Variant struct seems to just be a way of storing any type of data.

!!!!Closure
A {{{Closure}}} struct contains only an integer and a pointer to a Variant.

!!!!Hashtable
* {{{store_lookup}}} looks for a name in some hash table and returns a Closure 
* {{{GenericRegister}}} adds a Variant to the hash table, adding the specified {{{GenericFunction}}} and pointer to {{{udata}}}, whatever that might be.

!!!!Functions
* {{{GenericEvent}}} calls {{{post_event}}}, which is a function I cannot locate
* {{{RegisterGenericHook}}} takes a {{{GenericHook}}} and assigns it to be the current HookFunction. 
* the type {{{GenericFunction}}} is a function which takes a Variant and returns nothing
* the type {{{GenericHook}}} is a function which takes an integer (onEntry) and a Variant and returns nothing
* {{{GenericCall}}} calls the {{{GenericFunction}}} associated with the specified closure, also calling the defined {{{GenericHook}}} on entry and exit.

As far as I can tell, the {{{GenericHook}}} functionality is not used.

!!GenericDeviceP
I don't know why this is separate, but it defines a struct devSupport and some examples of it, which seem to correspond to EPICS records.

I think it contains the EPICS headers.</pre>
</div>
<div title="QtBasics" server.title="QtBasics" server.page.revision="1572219" server.etag="&quot;willrogers_public/QtBasics/1572219:42fb003cda22bc8011730b6e5d8a99e834ed0136&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131202140446" created="20131202135418" tags="" _hash="6efd854dfc51e345c8f3d6b4952f0f70433479a9">
<pre>Qt is a cross-platform GUI framework which is widely used.  It's used at Diamond particularly with the Python bindings PyQt.

This is a simplistic description of how to make your first Qt app: http://www.wikihow.com/Create-Your-First-Qt-Program-on-Ubuntu-Linux.

I would like to build and use EpicsQt.

!!Tools
{{{qmake}}} is a Qt tool used to generate a Makefile from a simpler description file, with the suffix {{{.pro}}}:
{{{
qmake -project
qmake
make
}}}</pre>
</div>
<div title="DataSummary" server.title="DataSummary" server.page.revision="363952" server.etag="&quot;willrogers_public/DataSummary/363952:88e03b772369c3ff9899ed9b612425f77b0fd963&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111019071237" created="20111019071237" tags="" _hash="fb67522c9cc3809959ddcc6412c980aaa2f7356d">
<pre>Patrick Fuhrmann

* Competitors: dCache, StoRM, DPM
** All represented here
* Four aims:
** Improving existing components
** User satisfaction
** Standardisation
** Integration
</pre>
</div>
<div title="publicIcon" server.title="publicIcon" server.page.revision="1521911" server.etag="&quot;tiddlyspace/publicIcon/1521911:92143e30a3124b0d4df2e1d7606934f81c9f0abe&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="image/png" modified="20131111192334" created="20131111192334" tags="excludeLists excludeSearch" _cache-max-age="43200" _hash="8e44a24b6d966bfdda2a6cfeb9f141ac3a3892a5">
<pre>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</pre>
</div>
<div title="RpmBuild" server.title="RpmBuild" server.page.revision="698174" server.etag="&quot;willrogers_public/RpmBuild/698174:4747f054f6d748d0a7c7fe4d04e014ff1c4ceacb&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120502083823" created="20120206161618" tags="linux rpm" _hash="62eb6dacfbbe8f25ca3389d509b63b04a0a4c7c1">
<pre>I've got to mess around with RPM .spec files to try and make the APEL packages build successfully on SL6.  This means that I really need to know what's going on, so I may as well take a little crash course in RPMs.

There's a document created by Wadud which seems pretty good and describes the process, which I've stored in the network drive at work.

!!Basics
The command {{{rpmbuild}}} is in the yum package {{{rpm-build}}}.  It's a gadget which builds RPMs using instructions in a .spec file.  The spec file contains various definitions and instructions, in a certain format and order.

The default location for all the RPM building activity is {{{/usr/src/redhat}}}.  In this directory, there are a standard set of directories which are used:  BUILD, RPMS, SOURCES, SPECS and SRPMS.  To build RPMs, the basic requisites are:
* Sources in the SOURCES directory (probably in a zipped tar file, including scripts and things)
* A spec file in the SPECS directory.

!!The spec file
The spec file basically defines everything rpmbuild does.  It can contain:
* An introduction section, with no header, which contains general information about the package
* A prep section (%prep), which often uses the %setup macro
* A build section (%build), which probably uses scripts to build the package
* An install section (%install)
* A clean section (%clean)
* A files section (%files)
** This is the bit I've been puzzling over.  It lists the files which are to go into the binary RPM.
** I don't yet know how it knows which files correspond to the ones it's supposed to send to different places.

!!The introduction section
A lot of this is fairly standard, but using macros to build up different string sometimes.  One neat thing is the {{{Requires:}}} line:
{{{
Requires:       stomppy, python-daemon
}}}
means that the RPM won't install unless it can find installed rpms by those names.

!!The files section
I just can't find any documentation which seems to explain this section to me, despite all documentation saying that this is a very important part of a spec file.  The problem I have is that I would expect that each file would need to have two locations: the one on the system that's building the RPM, and the one on the system where the RPM is installed.  Alternatively, they'd have to be the same, but {{{rpmbuild}}} is not finding files which are in the location specified in my spec file.

[[This question|http://stackoverflow.com/questions/8084796/what-actually-is-rpm-build-root]] on Stack Overflow answers a lot of this question, and I'll have to do some experimentation to find out exactly what it means.  

So... it appears that what happens is you have to use a temporary directory, known as the buildroot.  You put the files you want to use in there with the same directory structure as they will have on the file system when installed - so {{{%{buildroot}/usr/bin/blah}}} or {{{%{buildroot}/etc/boo}}}.  Then it knows what it wants to copy to where.  If the files are copied to the buildroot but not listed, {{{rpmbuild}}} will complain.  If you get an error about 'unpackaged files', check all the files inside the buildroot to see if they aren't listed.

!!The {{{rpmbuild}}} command
Once you've set everything up correctly, use the {{{rpmbuild}}} command to do the work.  There are several different things you can do with it, such as build only, build source RPMs, build binaries or build everything.  These correspond to different headers in the spec file, so certain options process different parts of the spec file.

</pre>
</div>
<div title="editTiddlerReadOnly" server.title="editTiddlerReadOnly" server.page.revision="1521933" server.etag="&quot;system-images_public/editTiddlerReadOnly/1521933:a1cef2479f2667ef92cf7d3628bc7e0dd16d3b9a&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-images_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-images_public" server.permissions="read" server.content-type="image/svg+xml" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="24d0766e948d10eb5e220d57a8c0d16a194ebe1f">
<pre>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" viewBox="506 234 68 36" width="30" height="30"&gt;&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;&lt;dc:date&gt;2010-09-16 14:51Z&lt;/dc:date&gt;&lt;!-- Produced by OmniGraffle Professional 5.2.3 --&gt;&lt;/metadata&gt;&lt;defs&gt;&lt;/defs&gt;&lt;g stroke="none" stroke-opacity="1" stroke-dasharray="none" fill="none" fill-opacity="1"&gt;&lt;rect width="1118" height="783"/&gt;&lt;g&gt;&lt;path d="M 538.68195 244.31807 C 540.43927 246.07547 540.43927 248.9247 538.68195 250.68204 C 536.92456 252.4394 534.07532 252.4394 532.318 250.68204 C 530.5606 248.9247 530.5606 246.07547 532.318 244.31807 C 534.07532 242.56075 536.92456 242.56075 538.68195 244.31807 M 511.12607 257.99356 C 511.26108 258.13019 511.39728 258.26608 511.53473 258.40121 C 527.2556 273.86606 552.74414 273.86606 568.46515 258.40121 C 568.60248 258.26617 568.73853 258.13037 568.87354 257.9938 C 568.8736 257.99374 568.8736 257.99371 568.8736 257.99362 C 568.87366 257.99371 568.87366 257.9938 568.87372 257.9939 C 570.72504 256.12051 572.35046 254.11153 573.74994 252 C 573.74994 251.99997 573.74994 251.99994 573.74994 251.99992 C 572.35046 249.8884 570.72504 247.87938 568.87372 246.00606 C 568.87366 246.00613 568.87366 246.00621 568.8736 246.00627 C 568.73865 245.86966 568.60254 245.73383 568.46515 245.5987 C 552.74414 230.13387 527.2556 230.13387 511.53473 245.5987 C 511.39728 245.73383 511.26108 245.86974 511.12613 246.00635 C 511.126 246.00624 511.126 246.00616 511.12595 246.00606 C 509.2748 247.87938 507.64954 249.88837 506.24994 251.9998 L 506.24994 251.99983 C 506.24994 251.9999 506.25 251.99992 506.25 251.99997 C 506.25 252 506.24994 252.00005 506.24994 252.00009 L 506.24994 252.00012 C 507.64954 254.11157 509.2748 256.12051 511.12595 257.9939 C 511.126 257.99377 511.126 257.99365 511.12607 257.99359 Z M 515.44916 252 C 515.8548 251.55469 516.27502 251.11778 516.71014 250.68985 C 522.16632 245.32257 529.06055 242.23206 536.17273 241.41824 C 534.6662 241.96199 533.2525 242.83762 532.04498 244.04512 C 527.65155 248.43852 527.65155 255.56163 532.04498 259.95502 C 533.2522 261.16226 534.6656 262.03778 536.17175 262.58154 C 529.05988 261.76761 522.16608 258.6771 516.71014 253.31009 C 516.2751 252.88219 515.85486 252.44528 515.44922 252 Z M 564.55054 251.99995 C 564.14502 252.44525 563.7248 252.88217 563.28973 253.31009 C 557.83368 258.67712 550.93988 261.76764 543.828 262.58157 C 545.33423 262.03781 546.74756 261.1623 547.9549 259.95502 C 552.34833 255.56163 552.34833 248.43852 547.9549 244.04512 C 546.74744 242.83765 545.33374 241.96202 543.82715 241.41824 C 550.9394 242.23206 557.83356 245.3226 563.28973 250.68985 C 563.7248 251.11775 564.14502 251.55467 564.55054 251.99995 Z M 568.8736 257.99362 C 570.7249 256.12033 572.35028 254.11139 573.74988 252.00002" fill="black" class="glyph"/&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;</pre>
</div>
<div title="PythonStructs" server.title="PythonStructs" server.page.revision="901876" server.etag="&quot;willrogers_public/PythonStructs/901876:0fb6c3eddb87534abdd5bcdf543f970124563c61&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121007104151" created="20121007104151" tags="python struct" _hash="4b670b619842645fd92d3ad79bf745dac032da9a">
<pre>!!Structs?  
Kevin used these in the SSM, and I was a bit puzzled.  They're mentioned on the tutorial page in the PythonClasses page (I quote):

Sometimes it is useful to have a data type similar to the Pascal “record” or C “struct”, bundling together a few named data items. An empty class definition will do nicely:
{{{
class Employee:
    pass

john = Employee() # Create an empty employee record

# Fill the fields of the record
john.name = 'John Doe'
john.dept = 'computer lab'
john.salary = 1000
}}}
</pre>
</div>
<div title="I10Switching" server.title="I10Switching" server.page.revision="1589739" server.etag="&quot;willrogers_public/I10Switching/1589739:bb3029de2f238316e24b165eb6c5804470d9232d&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131211110531" created="20131209141700" tags="" _hash="386c2289b4457a178329bf9a33494a670857642d">
<pre>In straight 10, there are two insertion devices which are capable of producing different polarisations of light.  For certain experiments, the I10 beamline would like to switch between these two polarisations quickly.  There are special magnets in place capable of diverting the beam through the two ~IDs at 10Hz to allow alternate flashes of light at different polarisations.  This setup was inspired by Spring-8 in Japan, but it is known that the equivalent installation is not used that often.  We hope that ours will prove more useful.

While one beam is heading down the beamline, the other is diverted by 1mrad.  We believe this is plenty.

!!Questions
What are the trim tables and what effect do they have?
* There is something about the trims managing vertical steering but not horizontal steering.
How are the power supply waveforms set up?
Why are we so close to the maximum magnet current?
What is jaw phase?
How would BURTing the magnets work?
What's the deal with 'scaling the waveforms'.  Certainly seems that that's not the plan.
!!Controls
See http://confluence.diamond.ac.uk/display/CHLP/I10+Fast+Chicane.

Once the magnets are on and cycling, you generally want to be able to tweak them so that the beams are aligned and pointing down the beamline.  The I10 knobs are for this purpose, but are very raw.

!!Magnets
There are five (I believe dedicated) magnets for this purpose:
{{{
SR09A-PC-FCHIC-01
SR09A-PC-FCHIC-02
SR10S-PC-FCHIC-03
SR10S-PC-FCHIC-04
SR10S-PC-FCHIC-05
}}}
The four outer magnets (two each side of both IDs) are controlled using sine waves at a frequency of 10Hz, synchronised by the master timing generator.  The central magnet has a fixed current.  All five have a well-defined ramping-up process.  As well as the sine wave, tweaking the magnets during use will generate a 'DC offset' (less than 2A).  This must be removed after use - in particular, before the magnets go through the ramping down process to degauss them.

The four kickers have a maximum current of 24.75A; you may ask for up to 24.4A.  There is a plan to test the magnets and power supplies to determine the limits of reliable operation.  They each have a 'rate limiter', which determines how fast the current (actually voltage) can change.  This means that you have to be careful ramping down different magnets, because if you go too fast the rate limiters are unlikely to keep synchronised.

There is discussion as to whether the magnets should be on continuously, at zero current, or should be turned off.  If on, you always know the state.

Although you could logically leave the magnets on, with the electron beam going round one ID and through the other, the magnets are not designed to maintain constant current and will overheat in probably a few minutes.

!!Performance
We realistically need the beamline to tell us if the alignment is correct.  The ~XBPMs are not precise enough.

!!FastFeedback
At present, the switching causes disturbance to the rest of the beam that is corrected by fast feedback; it is an operational requirement that fast feedback must be running in order to do the switching.  You can see that there is a particular excess at 10Hz and harmonics.  It would be best to:
* minimise disturbance of the rest of the beam
* use feed forward to alleviate the specific effects at 10Hz
It would also be good to see explicitly the effect that the switching is having.

Since FOFB is off during injection, we won't be able to run the chicanes during a fill, but topup works while the chicanes are on.</pre>
</div>
<div title="SystemSettings" server.title="SystemSettings" server.page.revision="365030" server.etag="&quot;willrogers_private/SystemSettings/365030:a29761d85cd8953bcadedf7c8ec88880733659ea&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20110421100842" created="20110421100842" tags="excludeLists" _hash="1720b805c0408fb371f3e66ca349c2c80a668005">
<pre>chkPrivateMode: false</pre>
</div>
<div title="PythonLists" server.title="PythonLists" server.page.revision="891607" server.etag="&quot;willrogers_public/PythonLists/891607:902dc35b6cf5289c9bf0708167f761d2be382255&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120926203224" created="20120925211841" tags="list python syntax" _hash="54acc94caa6d89f4737f2f976edb9e1ee307c47a">
<pre>Some notes I might not have to hand:

!!lists
* li[:] returns a copy of a list, not the list itself.  Whenever you slice a list, you get a new list
* li.extend(li2) concatenates the two lists
* li.index(item) returns the index of the first item that matches
* li.remove(item) removes the first item that matches
* li.pop() removes the last item and returns it
* you can use + and * n on lists

!!list comprehension
List comprehensions allow you to make a second list from every item in a list by applying a function:
{{{
li = [ x*2 for x in li]
}}}
You can change the original list in place, but otherwise it returns a new list.  You can also filter at the same time by appending an if:
{{{
li = [ x*2 for x in li if is_prime(x) ]
}}}
</pre>
</div>
<div title="chrjs" server.title="chrjs" server.page.revision="1521886" server.etag="&quot;tiddlyspace/chrjs/1521886:e107c5e7ebaf1a443a757db5c55e6cbac5010c9a&quot;" modifier="None" creator="None" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/javascript" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch systemConfig" _cache-max-age="43200" _hash="21f8cd31fb5331db45ab9f2cfbaeb97c6cdf38a9">
<pre>/***
https://raw.github.com/tiddlyweb/chrjs/master/main.js
***/
//{{{
// TiddlyWeb adaptor
// v0.14.3

/*jslint vars: true, unparam: true, nomen: true, white: true */
/*global jQuery */

var tiddlyweb = (function($) {

"use strict";

var tw = {
	routes: {
		// host is the TiddlyWeb instance's URI (including server_prefix)
		// placeholders "_type" &amp; "name" refer to the respective bag/recipe
		root     : "{host}/",
		bags     : "{host}/bags",
		bag      : "{host}/bags/{name}",
		recipes  : "{host}/recipes",
		recipe   : "{host}/recipes/{name}",
		tiddlers : "{host}/{_type}s/{name}/tiddlers",
		tiddler  : "{host}/{_type}s/{name}/tiddlers/{title}",
		revisions: "{host}/{_type}s/{name}/tiddlers/{title}/revisions",
		revision : "{host}/{_type}s/{name}/tiddlers/{title}/revisions/{revision}",
		search   : "{host}/search?q={query}"
	}
};

var convertTimestamp, supplant;

// host (optional) is the URI of the originating TiddlyWeb instance
tw.Resource = function(type, host) {
	if(arguments.length) { // initialization
		this._type = type;
		if(host !== false) {
			this.host = host !== undefined ? host.replace(/\/$/, "") : null;
		}
	}
};
$.extend(tw.Resource.prototype, {
	// retrieves resource from server
	// callback is passed resource, status, XHR (cf. jQuery.ajax success)
	// errback is passed XHR, error, exception, resource (cf. jQuery.ajax error)
	// filters is an optional filter string (e.g. "select=tag:foo;limit=5")
	get: function(callback, errback, filters) {
		var uri = this.route();
		if(filters) {
			var separator = uri.indexOf("?") === -1 ? "?" : ";";
			uri += separator + filters;
		}
		var self = this;
		return $.ajax({
			url: uri,
			type: "GET",
			dataType: "json",
			success: function(data, status, xhr) {
				var resource = self.parse(data);
				resource.etag = xhr.getResponseHeader("Etag");
				callback(resource, status, xhr);
			},
			error: function(xhr, error, exc) {
				errback(xhr, error, exc, self);
			}
		});
	},
	// sends resource to server
	// callback is passed data, status, XHR (cf. jQuery.ajax success)
	// errback is passed XHR, error, exception, resource (cf. jQuery.ajax error)
	put: function(callback, errback) {
		var self = this;
		var options = {
			url: this.route(),
			type: "PUT",
			contentType: "application/json",
			data: JSON.stringify(this.baseData()),
			success: function(data, status, xhr) {
				callback(self, status, xhr);
			},
			error: function(xhr, error, exc) {
				errback(xhr, error, exc, self);
			}
		};
		if(this.ajaxSetup) {
			this.ajaxSetup(options);
		}
		return $.ajax(options);
	},
	// deletes resource on server
	// callback is passed data, status, XHR (cf. jQuery.ajax success)
	// errback is passed XHR, error, exception, resource (cf. jQuery.ajax error)
	"delete": function(callback, errback) {
		var self = this;
		var options = {
			url: this.route(),
			type: "DELETE",
			success: function(data, status, xhr) {
				callback(self, status, xhr);
			},
			error: function(xhr, error, exc) {
				errback(xhr, error, exc, self);
			}
		};
		if(this.ajaxSetup) {
			this.ajaxSetup(options);
		}
		return $.ajax(options);
	},
	// returns an object carrying only the essential information of the resource
	baseData: function() {
		var data = {},
			self = this;
		$.each(this.data, function(i, item) {
			var value = self[item];
			if(value !== undefined) {
				data[item] = value;
			}
		});
		return data;
	},
	// returns corresponding instance from a raw object (if applicable)
	parse: function(data) {
		return data;
	},
	// list of accepted keys in serialization
	data: [],
	// returns resource's URI
	route: function() {
		return supplant(tw.routes[this._type], this);
	}
});

var Container = function(type, name, host) {
	if(arguments.length) { // initialization
		tw.Resource.apply(this, [type, host]);
		this.name = name;
		this.desc = "";
		this.policy = new tw.Policy({});
	}
};
Container.prototype = new tw.Resource();
$.extend(Container.prototype, {
	tiddlers: function() {
		return new tw.TiddlerCollection(this);
	},
	parse: function(data) {
		var type = tw._capitalize(this._type),
			container = new tw[type](this.name, this.host);
		data.policy = new tw.Policy(data.policy);
		return $.extend(container, data);
	},
	data: ["desc", "policy"]
});

// attribs is an object whose members are merged into the instance (e.g. query)
tw.Collection = function(type, host, attribs) {
	if(arguments.length) { // initialization
		tw.Resource.apply(this, [type, host]);
		$.extend(this, attribs);
	}
};
tw.Collection.prototype = new tw.Resource();

tw.TiddlerCollection = function(container, tiddler) {
	if(arguments.length) { // initialization
		tw.Collection.apply(this, [tiddler ? "revisions" : "tiddlers"]);
		this.container = container || null;
		this.tiddler = tiddler || null;
	}
};
tw.TiddlerCollection.prototype = new tw.Collection();
$.extend(tw.TiddlerCollection.prototype, {
	parse: function(data) {
		var container = this.container;
		return $.map(data, function(item, i) {
			var tiddler = new tw.Tiddler(item.title, container),
				bag = item.bag;
			tiddler = tw.Tiddler.prototype.parse.apply(tiddler, [item]);
			if(!tiddler.bag &amp;&amp; bag) { // XXX: bag always present!?
				tiddler.bag = new tw.Bag(bag, container.host);
			}
			if(!tiddler.recipe &amp;&amp; item.recipe) {
				tiddler.recipe = new tw.Recipe(item.recipe, container.host);
			}
			delete item.recipe;
			return $.extend(tiddler, item);
		});
	},
	route: function() {
		var params = this.container;
		if(this.tiddler) {
			var container = this.tiddler.bag || this.tiddler.recipe;
			params = {
				_type: container._type,
				host: container.host,
				name: container.name,
				title: this.tiddler.title
			};
		}
		return supplant(tw.routes[this._type], params);
	}
});

tw.Search = function(query, host) {
	tw.Collection.apply(this, ["search", host]);
	this.query = query;
};
tw.Search.prototype = new tw.Collection();
$.extend(tw.Search.prototype, {
	parse: function(data) {
		this.container = { // XXX: hacky
			_type: "bag",
			host: this.host
		};
		var tiddlers = tw.TiddlerCollection.prototype.parse.apply(this, arguments);
		delete this.container;
		return tiddlers;
	}
});

// title is the name of the tiddler
// container (optional) is an instance of either Bag or Recipe
// optionally accepts a single object representing tiddler attributes
tw.Tiddler = function(title, container) {
	tw.Resource.apply(this, ["tiddler", false]);
	this.title = title;
	this.bag = container &amp;&amp; container._type === "bag" ? container : null;
	this.recipe = container &amp;&amp; container._type === "recipe" ? container : null;
	var self = this;
	$.each(this.data, function(i, item) {
		self[item] = undefined; // exposes list of standard attributes for inspectability
	});
	if(title &amp;&amp; title.title) { // title is an object of tiddler attributes
		$.extend(this, title);
	}
};
tw.Tiddler.prototype = new tw.Resource();
$.extend(tw.Tiddler.prototype, {
	revisions: function() {
		return new tw.TiddlerCollection(this.bag || this.recipe, this);
	},
	route: function() {
		var container = this.bag || this.recipe;
		var params = $.extend({}, this, {
			host: container ? container.host : null,
			_type: this.bag ? "bag" : (this.recipe ? "recipe" : null),
			name: container ? container.name : null
		});
		return supplant(tw.routes[this._type], params);
	},
	parse: function(data) {
		var tiddler = new tw.Tiddler(this.title),
			container = this.bag || this.recipe;
		if(data.bag) {
			tiddler.bag = new tw.Bag(data.bag, container.host);
			delete data.bag;
		}
		delete data.recipe;
		tiddler.created = data.created ? convertTimestamp(data.created) : new Date();
		delete data.created;
		tiddler.modified = data.modified ? convertTimestamp(data.modified) : new Date();
		delete data.modified;
		if(this.recipe) {
			tiddler.recipe = this.recipe;
		}
		return $.extend(tiddler, data);
	},
	data: ["created", "creator", "modifier", "modified", "tags", "type", "text",
			"fields"],
	ajaxSetup: function(options) {
		var self = this;
		if(this.etag &amp;&amp; (options.type === "PUT" || options.type === "DELETE")) {
			options.beforeSend = function(xhr) {
				xhr.setRequestHeader("If-Match", self.etag);
			};
		}
		if(options.type === "PUT") {
			var callback = options.success;
			options.success = function(data, status, xhr) {
				var loc = xhr.getResponseHeader("Location"),
					etag = xhr.getResponseHeader("Etag");
				if(loc &amp;&amp; etag) {
					self.etag = etag;
					if(!self.bag) {
						var bag = loc.split("/bags/").pop().split("/")[0];
						self.bag = new tw.Bag(bag, self.recipe.host);
					}
					callback(self, status, xhr);
				} else { // IE
					self.get(callback, options.error);
				}
			};
		}
	}
});

tw.Revision = function(id, tiddler) {
	var container = tiddler.bag || tiddler.recipe;
	tw.Tiddler.apply(this, [tiddler.title, container]);
	this._type = "revision";
	this.revision = id;
};
tw.Revision.prototype = new tw.Tiddler();
$.extend(tw.Revision.prototype, {
	revisions: false,
	data: false,
	put: false,
	"delete": false
});

tw.Bag = function(name, host) {
	Container.apply(this, ["bag", name, host]);
};
tw.Bag.prototype = new Container();

tw.Recipe = function(name, host) {
	Container.apply(this, ["recipe", name, host]);
	this.recipe = [];
};
tw.Recipe.prototype = new Container();
$.extend(tw.Recipe.prototype, {
	data: ["recipe"].concat(Container.prototype.data)
});

tw.Policy = function(constraints) { // TODO: validation?
	var self = this;
	$.each(this.constraints, function(i, item) {
		self[item] = constraints[item];
	});
};
tw.Policy.prototype.constraints = ["read", "write", "create", "delete",
	"manage", "accept", "owner"];

/*
 * utilities
 */

tw._capitalize = function(str) {
	return str.charAt(0).toUpperCase() + str.slice(1);
};

// convert YYYYMMDDhhmmss timestamp to Date instance
convertTimestamp = function(t) {
	if (t.match(/^\d{12,17}$/)) {
		return new Date(Date.UTC(
			parseInt(t.substr(0, 4), 10),
			parseInt(t.substr(4, 2), 10) - 1,
			parseInt(t.substr(6, 2), 10),
			parseInt(t.substr(8, 2), 10),
			parseInt(t.substr(10, 2), 10),
			parseInt(t.substr(12, 2) || "0", 10),
			parseInt(t.substr(14, 3) || "0", 10)
		));
	} else {
		return new Date(Date.parse(t));
	}
};

// adapted from Crockford (http://javascript.crockford.com/remedial.html)
supplant = function(str, obj) {
	return str.replace(/{([^{}]*)}/g, function (a, b) {
		var r = obj[b];
		r = typeof r === "string" || typeof r === "number" ? r : a;
		return $.inArray(b, ["host", "query"]) !== -1 ? r : encodeURIComponent(r); // XXX: special-casing
	});
};

return tw;

}(jQuery));
//}}}</pre>
</div>
<div title="EuropeanMiddlewareInitiative" server.title="EuropeanMiddlewareInitiative" server.page.revision="364037" server.etag="&quot;willrogers_public/EuropeanMiddlewareInitiative/364037:79a05568f7350e467c41e365865a8f76e5991f46&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111018152039" created="20111017072132" tags="" _hash="438815784b840e2f6d2e72916568b2693c611cdf">
<pre>So exactly what is EMI?  

!!Introduction
After the EGEE project, which was deemed to be a success, two new projects were formed.  One was EGI, which was a more direct to successor to EGEE, involved with maintaining the grid infrastructure that had been developed, and moving it to a more sustainable (less expensive) mode of operation.

The other was EMI, designed to look after the middleware.  Here's where I start my investigation.
APEL has a foot in both camps.  The server, as a piece of operating grid stuff, falls within EGI.  This is I think 75% of APEL's funding.  The APEL client, because it is part of gLite and then subsequently the EMI release, falls within EMI and provides 25% of the funding, which is basically half of me.

The EMI project director is Alberto di Meglio.

!!First impressions
EMI doesn't appear to have a wikipedia page (not this EMI).  Its homepage is here: http://www.eu-emi.eu/.  I found out by accident that someone else had nabbed www.emi.eu.  From the front page, it presents itself as a software distribution.

!!Releases
EMI makes one major release a year.  They are named after European mountains, the first being [[Kebnekaise|http://en.wikipedia.org/wiki/Kebnekaise]], rreleased on May 12th 2011.  This release is updated regularly with patches etc. As of 17th October 2011, the latest release is update 8.  For reference, Cristina's bug fixes for the APEL parsers is released in update 8.

The second release will be Matterhorn.  Its official release date is April 30th 2012.

!!Support
Support goes via EGI, which is an example of how the two projects are linked.  I guess this is why we're involved in the EMI tickets, because it's actually a small part of the EGI GGUS ticketing system.  Two major releases will be kept up-to-date, but only the latest updates of these releases are officially supported.

The website only lists support as far as April 30th 2013, which is presumably when the project officially ends.

!!Components
Four items are listed on the EMI site as parts of EMI:
!!!ARC
ARC, as far as I understand, is a middleware distribution much like gLite.
!!!dCache 
dCache is a large-scale storage management system.
!!!gLite
We know all about that.  Well, we don't actually.
!!!Unicore
Unicore is the third rival middleware distribution.

The Unified Middleware Distribution I think aims to pull together some or all of these components so that they can work together.  I don't really know that much about this.

!!Work packages
EmiWorkPackages
</pre>
</div>
<div title="BasicCompSci" server.title="BasicCompSci" server.page.revision="665426" server.etag="&quot;willrogers_public/BasicCompSci/665426:0b433b79cd075bdf62515b4e95c52484f5750d13&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120402193741" created="20120331172306" tags="" _hash="ffe69c6a23087918c02091e3f76e3297c2fe878d">
<pre>For the moment, this is coming from my notes on ML.

!!Programming
The idea is to describe a computation so that it can be done mechanically
* expressions compute values
* commands cause effects
The difficulty comes in:
* doing it correctly - solving the right problem
* doing it efficiently - in coding and execution
* allowing easy modification
Skills required are:
* communicating requirements
* analysis of problems
* organising solutions
* estimating costs of a given approach
* using mathematics(?)

!!Types
A data type is:
* how a value is represented
* the available operations

Early languages required variables to be declared (eg as integer and real) and prevented mixing number types in calculation.  Newer languages have well-defined ways of handling this.  Usually, a compiler generates machine code, and types aren't stored during program execution.

!!Functions
Functions perform a well-defined task.

Recursive functions call themselves.

!!Efficiency
BigONotation
RecurrenceRelations

Efficiency is relevant in both time (number of operations) and space (stack slots required).  Few things can be O(1) - storing the number n requires log(n) bits.  Multiplication is one operation, but for very large n it gets more complicated.</pre>
</div>
<div title="CssPositioning" server.title="CssPositioning" server.page.revision="1469727" server.etag="&quot;willrogers_public/CssPositioning/1469727:fa40a5d237fbcf9ad17787411c4a4b8b26f4fb5c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131019195549" created="20131019193432" tags="" _hash="c9d414f15520b9f28d63df26d2bda09085364cf9">
<pre>Each HTML element lives in a box, which you can see by setting a border using the universal CSS selector.  Each box has:
* a margin - space around the element, which separates it from others
* a border - the edge of an element
* padding - spacing between the border and the content
* content - any 'stuff' within the box

| display | block | use full width of the page |
| display | inline-block | block which may sit next to other elements |
| display | inline | as above, but don't retain dimensions |
| display | none | element disappears |
| margin | auto | automatically create even margins |
| margin-top | &lt;size&gt; | exact margin (also bottom, left, right) |
| margin | &lt;1&gt; &lt;2&gt; &lt;3&gt; &lt;4&gt; | as above from top clockwise |
| padding | dimensions | works as margin |
| float | right | |
| clear | left, right, both | move out of the way of any floating elements |
| position | static | this is the default |
| position | absolute | relative to the document, or other absolute elements |
| position | relative | relative to static elements i.e. its natural position |
| position | fixed | fixed in the screen, even if you scroll |

* You can use negative values in dimensions.
</pre>
</div>
<div title="WindowsPrograms" server.title="WindowsPrograms" server.page.revision="1331885" server.etag="&quot;willrogers_public/WindowsPrograms/1331885:0037c9931014af80ec1fd96c054206d158b01b52&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130803141325" created="20130803141018" tags="" _hash="f3e4078b82b892045bf8d84009fdb579d6f8e1cc">
<pre>Some useful programs:

!!Misc
* Opera
* Chrome
* Firefox
* Google desktop 
* BBC iPlayer Desktop
* Garmin Updater
* Skype
* ~Ross-Tech VCDS Lite

!!Computing
* Putty
* ~WinSCP
* Virtuawin
* Windirstat
* Fastsum
* gVim
* notepad++
* Tunnel bear
* VirtualBox
* Dropbox

!!Photography
* Faststone Photo Resizer
* Gimp
* ~UFRaw

!!Music
* Last.fm scrobbler
* Mediamonkey
* Audacity
* Powertab editor
* Spotify
</pre>
</div>
<div title="EmiAhmBudapest" server.title="EmiAhmBudapest" server.page.revision="922437" server.etag="&quot;willrogers_public/EmiAhmBudapest/922437:18b2794e968d2bf3f8abf5039a9eefdf17674f7e&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121029164604" created="20121029121230" tags="" _hash="1880170bf6c6a3a661719a7147684b2ed8212b32">
<pre>The last EMI AHM, 28-30th October 2012

EmiSummary
EmiCollaborations
EmiSoftwareTools
EmiDevelopment
ScienceSoft</pre>
</div>
<div title="RaspBian" server.title="RaspBian" server.page.revision="1614240" server.etag="&quot;willrogers_public/RaspBian/1614240:b30c9b2156498476efef0f1e9452d3c7f0b3d3e7&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20140102165035" created="20140102165035" tags="" _hash="22a7927d848eaba5c5e39ce0cf1ae46be4cd47a7">
<pre>There's a tool in the raspi-config program which allows you to resize the partitions.

!!Getting the images
* You can get torrents from the Raspberry Pi website: http://www.raspberrypi.org/downloads
* Unzip the file
* Copy the file byte-by-byte to an SD card using dd: http://elinux.org/RPi_Easy_SD_Card_Setup#Copying_an_image_to_the_SD_Card_in_Linux_.28command_line.29

Then pop it in the Pi and off you go.  {{{raspi-config}}} will run on first boot, which allows you to change a lot of settings.

!!Setup
* {{{sudo aptitude install vim}}}
* Edit [[.vimrc]]
* Uncomment {{{alias ll= 'ls -l'}}} in {{{.bashrc}}}
* To change the amount of screen that it takes up, you need to change {{{/boot/config.txt}}}.  I have put the overscan_top and overscan_bottom settings to -20.

If the distro doesn't have wpagui, I find it easier to set up wifi using it.

I installed {{{avahi-daemon}}}.  This means that I can always SSH using {{{ssh pi@raspberrypi.local}}}.  However, the geoip-database download failed, so I went to the same directory in the URL and downloaded a newer version, which worked fine.

In order to do this with putty from Windows, you also need to install Bonjour for Windows from Apple.</pre>
</div>
<div title="AlbumsWanted" server.title="AlbumsWanted" server.page.revision="715983" server.etag="&quot;willrogers_public/AlbumsWanted/715983:9ae40e0fb3baea60295e05e75bcffb948d4f62fd&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120520145056" created="20120520113141" tags="" _hash="27e8c04420fae142d7385ff738c07ad79c2a74ef">
<pre>
!!Wanted
George Harrison - All Things Must Pass
The Orb - Metallic Spheres
CSNY - Deja Vu
Bob Dylan - Together Through Life

!!Minidisc only
Metallica - Black Album
At The Drive-In - Relationship of Command
Godspeed - Lift Yr Skinny Fists
King Crimson - The Court of The Crimson King
Pink Floyd - The Piper at the Gates of Dawn


!!Got
Bellowhead - Matachin - now on Spotify
Bob Dylan - Together Through Life - now on Spotify
The Smiths - The Smiths - now on Spotify
The Smiths - Strangeways Here We Come - now on Spotify
Mew - And the Glass Handed Kites - MP3
Apparatjik - We Are Here - MP3</pre>
</div>
<div title="FastFeedbackOpi" server.title="FastFeedbackOpi" server.page.revision="1546317" server.etag="&quot;willrogers_public/FastFeedbackOpi/1546317:9985bca8a3783af5a36ea7ca99dc87a7fc9a9ed7&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131120153231" created="20130711162337" tags="" _hash="64ee48966dcd13078805a8f1e8093f88c0364cda">
<pre>!!Overview
The basic purpose of the client-side code is to do some preparation, then start the FOFB process.  It also stops the process.  The results of this are the setting of some ~PVs, which are read by the C code in FastFeedbackSrc.  Parts of this are similar to the slow feedback code, which is also written in Python.  The variables set below are listed in FastFeedbackVariables.

!!Process
This happens when you push the 'Start' button on the gui.  The code is in {{{fofbnogui.py}}}.
* Stop FFB (caput 0 to {{{FASTART}}})
* caput 0 to {{{DISA[H,V]}}}
* Check whether the BPMs are up
** We cope with disabled (status 1) but not unreachable (status 2)
* caput 0 * 24 to {{{FMASK}}}
* call {{{distribute_rm_and_correctors}}}:
** redistribute {{{SR-DI-EBPM-01:ENABLED}}} to {{{BPMEN}}}
** then the actual work
* do a bunch of caputs, resetting state
** {{{PMODE}}}: 0
** {{{SOFTSTOP}}}: 1
** {{{TESTMODE}}}: 2 if testing else 0
** {{{AWR}}}: 1 ('enable corrector limit', something to do with the anti-windup controllers)
** {{{[B,A]TAPS[X,Y]}}} - IIR taps, specified in {{{fofb.config}}}
** {{{MABSC}}}: 1A - corrector limit, specified in {{{fofb.config}}}
** {{{MABSB}}}: 0.5*10^6nm - orbit limit, specified in {{{fofb.config}}}
** {{{APPLY}}}: 1
** {{{TRACK}}}: 4*pi - specified in {{{fofb.config}}}
** {{{ARESET}}}: 1 - reset IIR
** {{{EWRITE}}}: 0 * 8 - reset error counters
* start FOFB by caputting 1 to FASTART on all of the IOCs.

The 'Stop' button:
* caput 0 to FASTART on all of the IOCs.

!!Files

The {{{opi}}} directory contains a bit of a mix of stuff.  There is:

!!!!python logic
* {{{fofbnogui.py}}} - this is called by the 'Start' and 'Stop' buttons on the GUI.
** {{{invert.py}}} - one specific function, {{{invert()}}}, used in {{{deal_rm_sr_new.py}}}
*** here we find the Tikhonov regularisation we're adding to SOFB.
** {{{deal_rm_sr_new.py}}} - one specific function, {{{deal()}}}, used in {{{fofbnogui.py}}}
** {{{table.py}}} - simple class to read a table from a file
** {{{imc3_new.py}}} - one specific function, {{{imc()}}}, used in {{{fofbnogui.py}}}
* {{{fofb.config}}}, which is a python file containing configuration

!!!!miscellaneous
* {{{fofbdebug.py}}} - some sort of test
* three Matlab files: {{{measiq.m}}}, {{{plotiq.m}}}, {{{reshape_fofb.m}}}
* flat text files containing data: {{{bpms.txt}}} and {{{correctors.txt}}}
* {{{clearerror.sh}}} - caput 0 to a bunch of PVs
* a makefile

!!!!gui code
* {{{makepanel.py}}} - if you run this, it prints {{{fofb.edl}}}
** {{{footer.edl}}} is just the last part of {{{fofb.edl}}}
** {{{edm.py}}} is used for the generation
** {{{help.py}}} defines a simple Qt screen which comes up when you press the ? button.
* {{{fofbgen.py}}} - ?
** it seems to create another edl file, but I don't know what for
** {{{run-command}}} - helper script to run {{{fofbnogui.py}}} from the EDM panel
* {{{fofb-gui}}} - just a shell script which starts EDM with the generated panel

There are also three directories beginning {{{O}}}, created when I build the project.

</pre>
</div>
<div title="MatlabArrays" server.title="MatlabArrays" server.page.revision="1594718" server.etag="&quot;willrogers_public/MatlabArrays/1594718:645be15b214ae68f8d9716d8b226d276a0e82e83&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131213161249" created="20131213160455" tags="" _hash="532ad42eedf36ef74dd45e72d645460ac764df5d">
<pre>
Matlab handles rows and columns differently:
{{{
&gt;&gt; x = [1,2,3]
x =
     1     2     3
&gt;&gt; x = [1;2;3]
x =
     1
     2
     3
}}}

It usually handles arrays as you'd expect, piecewise where sensible:
{{{
&gt;&gt; x * 2
ans =
     2
     4
     6
&gt;&gt; x + 2
ans =
     3
     4
     5
}}}

* {{{x * x}}} raises an error because the corresponding matrix multiplication is invalid.
* {{{dot(x,x)}}} -&gt; 14 - that is, the inner product.
* {{{size(x)}}} -&gt; 3 1  - that is, the dimensions of the array
* A trailing {{{'}}} denotes the transpose:
{{{
&gt;&gt; size(x)'
ans =
     3
     1
}}}</pre>
</div>
<div title="SearchOptionsPlugin" server.title="SearchOptionsPlugin" server.page.revision="208743" server.etag="&quot;system-goto_public/SearchOptionsPlugin/208743:6d5460e0aad807b2aa1554ee8fb128b81f91b35a&quot;" modifier="pmario" creator="pmario" server.workspace="bags/system-goto_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-goto_public" server.permissions="read" server.content-type="" modified="20110409135539" created="20100805092637" tags="excludeLists excludeMissing excludeSearch systemConfig" _hash="495420bf412009caddf9597976965b0d9e154511">
<pre>/***
|Name|SearchOptionsPlugin|
|Source|http://www.TiddlyTools.com/#SearchOptionsPlugin|
|Documentation|http://www.TiddlyTools.com/#SearchOptionsPluginInfo|
|Version|3.0.10|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|extend core search function with additional user-configurable options|
Adds extra options to core search function including selecting which data items to search, enabling/disabling incremental key-by-key searches, and generating a ''list of matching tiddlers'' instead of immediately displaying all matches.  This plugin also adds syntax for rendering 'search links' within tiddler content to embed one-click searches using pre-defined 'hard-coded' search terms.
!!!!!Documentation
&gt;see [[SearchOptionsPluginInfo]]
!!!!!Configuration
&lt;&lt;&lt;
&lt;&lt;tiddler SearchOptions&gt;&gt;
&lt;&lt;option chkSearchResultsOptions&gt;&gt; Include {{{options...}}} slider in "search again" form
&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2011.04.08 3.0.10 fixed typo in CSS in formatSearchResults_buttons().  Restore missing options in Configuration section.
|please see [[SearchOptionsPluginInfo]] for additional revision details|
2005.10.18 1.0.0 Initial Release
&lt;&lt;&lt;
!!!!!Code
***/
//{{{
version.extensions.SearchOptionsPlugin= {major: 3, minor: 0, revision: 10, date: new Date(2011,3,18)};
//}}}
//{{{
var defaults={
	chkSearchTitles:	true,
	chkSearchText:		true,
	chkSearchTags:		true,
	chkSearchFields:	true,
	chkSearchTitlesFirst:	true,
	chkSearchList:		true,
	chkSearchHighlight:	true,
	chkSearchListTiddler:	false,
	chkSearchByDate:	false,
	chkIncrementalSearch:	true,
	chkSearchShadows:	true,
	chkSearchOpenTiddlers:	false,
	chkSearchResultsOptions:true,
	chkSearchExcludeTags:	true,
	txtSearchExcludeTags:	'excludeSearch',
	txtIncrementalSearchDelay:	500,
	txtIncrementalSearchMin:	3
}; for (var id in defaults) if (config.options[id]===undefined)
	config.options[id]=defaults[id];
if (config.macros.search.reportTitle==undefined)
	config.macros.search.reportTitle="SearchResults"; // note: not a cookie!
config.macros.search.label+="\xa0"; // a little bit of space just because it looks better
//}}}
// // searchLink: {{{[search[text to find]] OR [search[text to display|text to find]]}}}
//{{{
config.formatters.push( {
	name: "searchLink",
	match: "\\[search\\[",
	lookaheadRegExp: /\[search\[(.*?)(?:\|(.*?))?\]\]/mg,
	prompt: "search for: '%0'",
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
			var label=lookaheadMatch[1];
			var text=lookaheadMatch[2]||label;
			var prompt=this.prompt.format([text]);
			var btn=createTiddlyButton(w.output,label,prompt,
				function(){story.search(this.getAttribute("searchText"))},"searchLink");
			btn.setAttribute("searchText",text);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
});
//}}}
// // incremental search uses option settings instead of hard-coded delay and minimum input values
//{{{
var fn=config.macros.search.onKeyPress;
fn=fn.toString().replace(/500/g, "config.options.txtIncrementalSearchDelay||500");
fn=fn.toString().replace(/&gt; 2/g, "&gt;=(config.options.txtIncrementalSearchMin||3)");
eval("config.macros.search.onKeyPress="+fn);
//}}}
// // REPLACE story.search() for option to "show search results in a list"
//{{{
Story.prototype.search = function(text,useCaseSensitive,useRegExp)
{
	var co=config.options; // abbrev
	var re=new RegExp(useRegExp ? text : text.escapeRegExp(),useCaseSensitive ? "mg" : "img");
	if (config.options.chkSearchHighlight) highlightHack=re;
	var matches = store.search(re,co.chkSearchByDate?"modified":"title","");
	if (co.chkSearchByDate) matches=matches.reverse(); // most recent first
	var q = useRegExp ? "/" : "'";
	clearMessage();
	if (!matches.length) {
		if (co.chkSearchListTiddler) discardSearchResults();
		displayMessage(config.macros.search.failureMsg.format([q+text+q]));
	} else {
		if (co.chkSearchList||co.chkSearchListTiddler) 
			reportSearchResults(text,matches);
		else {
			var titles = []; for(var t=0; t&lt;matches.length; t++) titles.push(matches[t].title);
			this.closeAllTiddlers(); story.displayTiddlers(null,titles);
			displayMessage(config.macros.search.successMsg.format([matches.length, q+text+q]));
		}
	}
	highlightHack = null;
}
//}}}
// // REPLACE store.search() for enhanced searching/sorting options
//{{{
TiddlyWiki.prototype.search = function(searchRegExp,sortField,excludeTag,match)
{
	var co=config.options; // abbrev
	var tids = this.reverseLookup("tags",excludeTag,!!match,sortField);
	var opened=[]; story.forEachTiddler(function(tid,elem){opened.push(tid);});

	// eliminate tiddlers tagged with excluded tags
	if (co.chkSearchExcludeTags&amp;&amp;co.txtSearchExcludeTags.length) {
		var ex=co.txtSearchExcludeTags.readBracketedList();
		var temp=[]; for(var t=tids.length-1; t&gt;=0; t--)
			if (!tids[t].tags.containsAny(ex)) temp.push(tids[t]);
		tids=temp;
	}

	// scan for matching titles first...
	var results = [];
	if (co.chkSearchTitles) {
		for(var t=0; t&lt;tids.length; t++) {
			if (co.chkSearchOpenTiddlers &amp;&amp; !opened.contains(tids[t].title)) continue; 
			if(tids[t].title.search(searchRegExp)!=-1) results.push(tids[t]);
		}
		if (co.chkSearchShadows)
			for (var t in config.shadowTiddlers) {
				if (co.chkSearchOpenTiddlers &amp;&amp; !opened.contains(t)) continue; 
				if ((t.search(searchRegExp)!=-1) &amp;&amp; !store.tiddlerExists(t))
					results.push((new Tiddler()).assign(t,config.shadowTiddlers[t]));
			}
	}
	// then scan for matching text, tags, or field data
	for(var t=0; t&lt;tids.length; t++) {
		if (co.chkSearchOpenTiddlers &amp;&amp; !opened.contains(tids[t].title)) continue; 
		if (co.chkSearchText &amp;&amp; tids[t].text.search(searchRegExp)!=-1)
			results.pushUnique(tids[t]);
		if (co.chkSearchTags &amp;&amp; tids[t].tags.join(" ").search(searchRegExp)!=-1)
			results.pushUnique(tids[t]);
		if (co.chkSearchFields &amp;&amp; store.forEachField!=undefined)
			store.forEachField(tids[t],
				function(tid,field,val) {
					if (val.search(searchRegExp)!=-1) results.pushUnique(tids[t]);
				},
				true); // extended fields only
	}
	// then check for matching text in shadows
	if (co.chkSearchShadows)
		for (var t in config.shadowTiddlers) {
			if (co.chkSearchOpenTiddlers &amp;&amp; !opened.contains(t)) continue; 
			if ((config.shadowTiddlers[t].search(searchRegExp)!=-1) &amp;&amp; !store.tiddlerExists(t))
				results.pushUnique((new Tiddler()).assign(t,config.shadowTiddlers[t]));
		}

	// if not 'titles first', or sorting by modification date,
	// re-sort results to so titles, text, tag and field matches are mixed together
	if(!sortField) sortField = "title";
	var bySortField=function(a,b){
		if(a[sortField]==b[sortField])return(0);else return(a[sortField]&lt;b[sortField])?-1:+1;
	}
	if (!co.chkSearchTitlesFirst || co.chkSearchByDate) results.sort(bySortField);

	return results;
}
//}}}
// // HIJACK core {{{&lt;&lt;search&gt;&gt;}}} macro to add "report" and "simple inline" output
//{{{
config.macros.search.SOP_handler=config.macros.search.handler;
config.macros.search.handler = function(place,macroName,params)
{
	// if "report", use SearchOptionsPlugin report generator for inline output
	if (params[1]&amp;&amp;params[1].substr(0,6)=="report") {
		var keyword=params[0];
		var options=params[1].split("=")[1]; // split "report=option+option+..."
		var heading=params[2]?params[2].unescapeLineBreaks():"";
		var matches=store.search(new RegExp(keyword.escapeRegExp(),"img"),"title","excludeSearch");
		if (matches.length) wikify(heading+window.formatSearchResults(keyword,matches,options),place);
	} else if (params[1]) {
		var keyword=params[0];
		var heading=params[1]?params[1].unescapeLineBreaks():"";
		var seperator=params[2]?params[2].unescapeLineBreaks():", ";
		var matches=store.search(new RegExp(keyword.escapeRegExp(),"img"),"title","excludeSearch");
		if (matches.length) {
			var out=[];
			for (var m=0; m&lt;matches.length; m++) out.push("[["+matches[m].title+"]]");
			wikify(heading+out.join(seperator),place);
		}
	} else
		config.macros.search.SOP_handler.apply(this,arguments);
};
//}}}
// // SearchResults panel handling
//{{{
setStylesheet(".searchResults { padding:1em 1em 0 1em; }","searchResults"); // matches std tiddler padding

config.macros.search.createPanel=function(text,matches,body) {

	function getByClass(e,c) { var d=e.getElementsByTagName("div");
		for (var i=0;i&lt;d.length;i++) if (hasClass(d[i],c)) return d[i]; }
	var panel=createTiddlyElement(null,"div","searchPanel","searchPanel");
	this.renderPanel(panel,text,matches,body);
	var oldpanel=document.getElementById("searchPanel");
	if (!oldpanel) { // insert new panel just above tiddlers
		var da=document.getElementById("displayArea");
		da.insertBefore(panel,da.firstChild);
	} else { // if panel exists
		var oldwrap=getByClass(oldpanel,"searchResults");
		var newwrap=getByClass(panel,"searchResults");
		// if no prior content, just insert new content
		if (!oldwrap) oldpanel.insertBefore(newwrap,null);
		else {	// swap search results content but leave containing panel intact
			oldwrap.style.display='block'; // unfold wrapper if needed
			var i=oldwrap.getElementsByTagName("input")[0]; // get input field
			if (i) { var pos=this.getCursorPos(i); i.onblur=null; } // get cursor pos, ignore blur
			oldpanel.replaceChild(newwrap,oldwrap);
			panel=oldpanel; // use existing panel
		} 
	}
	this.showPanel(true,pos);
	return panel;
}

config.macros.search.renderPanel=function(panel,text,matches,body) {

	var wrap=createTiddlyElement(panel,"div",null,"searchResults");
	wrap.onmouseover = function(e){ addClass(this,"selected"); }
	wrap.onmouseout = function(e){ removeClass(this,"selected"); }
	// create toolbar: "open all", "fold/unfold", "close"
	var tb=createTiddlyElement(wrap,"div",null,"toolbar");
	var b=createTiddlyButton(tb, "open all", "open all matching tiddlers", function() {
		story.displayTiddlers(null,this.getAttribute("list").readBracketedList()); return false; },"button");
	var list=""; for(var t=0;t&lt;matches.length;t++) list+='[['+matches[t].title+']] ';
	b.setAttribute("list",list);
	var b=createTiddlyButton(tb, "fold", "toggle display of search results", function() {
		config.macros.search.foldPanel(this); return false; },"button");
	var b=createTiddlyButton(tb, "close", "dismiss search results",	function() {
		config.macros.search.showPanel(false); return false; },"button");
	createTiddlyText(createTiddlyElement(wrap,"div",null,"title"),"Search for: "+text); // title
	wikify(body,createTiddlyElement(wrap,"div",null,"viewer")); // report
	return panel;
}

config.macros.search.showPanel=function(show,pos) {
	var panel=document.getElementById("searchPanel");
	var i=panel.getElementsByTagName("input")[0];
	i.onfocus=show?function(){config.macros.search.stayFocused(true);}:null;
	i.onblur=show?function(){config.macros.search.stayFocused(false);}:null;
	if (show &amp;&amp; panel.style.display=="block") { // if shown, grab focus, restore cursor
		if (i&amp;&amp;this.stayFocused()) { i.focus(); this.setCursorPos(i,pos); }
		return;
	}
	if(!config.options.chkAnimate) {
		panel.style.display=show?"block":"none";
		if (!show) { removeChildren(panel); config.macros.search.stayFocused(false); }
	} else {
		var s=new Slider(panel,show,false,show?"none":"children");
		s.callback=function(e,p){e.style.overflow="visible";}
		anim.startAnimating(s);
	}
	return panel;
}

config.macros.search.foldPanel=function(button) {
	var d=document.getElementById("searchPanel").getElementsByTagName("div");
	for (var i=0;i&lt;d.length;i++) if (hasClass(d[i],"viewer")) var v=d[i]; if (!v) return;
	var show=v.style.display=="none";
	if(!config.options.chkAnimate)
		v.style.display=show?"block":"none";
	else {
		var s=new Slider(v,show,false,"none");
		s.callback=function(e,p){e.style.overflow="visible";}
		anim.startAnimating(s);
	}
	button.innerHTML=show?"fold":"unfold";
	return false;
}

config.macros.search.stayFocused=function(keep) { // TRUE/FALSE=set value, no args=get value
	if (keep===undefined) return this.keepReportInFocus;
	this.keepReportInFocus=keep;
	return keep
}	

config.macros.search.getCursorPos=function(i) {
	var s=0; var e=0; if (!i) return { start:s, end:e };
	try {
		if (i.setSelectionRange) // FF
			{ s=i.selectionStart; e=i.selectionEnd; }
		if (document.selection &amp;&amp; document.selection.createRange) { // IE
			var r=document.selection.createRange().duplicate();
			var len=r.text.length; s=0-r.moveStart('character',-100000); e=s+len;
		}
	}catch(e){};
	return { start:s, end:e };
}
config.macros.search.setCursorPos=function(i,pos) {
	if (!i||!pos) return; var s=pos.start; var e=pos.end;
	if (i.setSelectionRange) //FF
		i.setSelectionRange(s,e);
	if (i.createTextRange) // IE
		{ var r=i.createTextRange(); r.collapse(true); r.moveStart("character",s); r.select(); }
}
//}}}
// // SearchResults report generation
// note: these functions are defined globally, so they can be more easily redefined to customize report formats//
//{{{
if (!window.reportSearchResults) window.reportSearchResults=function(text,matches)
{
	var cms=config.macros.search; // abbrev
	var body=window.formatSearchResults(text,matches);
	if (!config.options.chkSearchListTiddler) // show #searchResults panel
		window.scrollTo(0,ensureVisible(cms.createPanel(text,matches,body)));
	else { // write [[SearchResults]] tiddler
		var title=cms.reportTitle;
		var who=config.options.txtUserName;
		var when=new Date();
		var tags="excludeLists excludeSearch temporary";
		var tid=store.getTiddler(title); if (!tid) tid=new Tiddler();
		tid.set(title,body,who,when,tags);
		store.addTiddler(tid);
		story.closeTiddler(title);
		story.displayTiddler(null,title);
	}
}

if (!window.formatSearchResults) window.formatSearchResults=function(text,matches,opt)
{
	var body='';
	var title=config.macros.search.reportTitle
	var q = config.options.chkRegExpSearch ? "/" : "'";
	if (!opt) var opt="all";
	var parts=opt.split("+");
	for (var i=0; i&lt;parts.length; i++) { var p=parts[i].toLowerCase();
		if (p=="again"||p=="all")   body+=window.formatSearchResults_again(text,matches);
		if (p=="summary"||p=="all") body+=window.formatSearchResults_summary(text,matches);
		if (p=="list"||p=="all")    body+=window.formatSearchResults_list(text,matches);
		if (p=="buttons"||p=="all") body+=window.formatSearchResults_buttons(text,matches);
	}
	return body;
}

if (!window.formatSearchResults_again) window.formatSearchResults_again=function(text,matches)
{
	var title=config.macros.search.reportTitle
	var body='';
	// search again
	body+='{{span{&lt;&lt;search "'+text.replace(/"/g,'&amp;#x22;')+'"&gt;&gt; /%\n';
	body+='%/&lt;html&gt;&lt;input type="button" value="search again"';
	body+=' onclick="var t=this.parentNode.parentNode.getElementsByTagName(\'input\')[0];';
	body+=' config.macros.search.doSearch(t); return false;"&gt;';
	if (!config.options.chkSearchResultsOptions) // omit "options..."
		body+='&lt;/html&gt;';
	else {
		body+=' &lt;a href="javascript:;" onclick="';
		body+=' var e=this.parentNode.nextSibling;';
		body+=' var show=e.style.display!=\'block\';';
		body+=' if(!config.options.chkAnimate) e.style.display=show?\'block\':\'none\';';
		body+=' else anim.startAnimating(new Slider(e,show,false,\'none\'));';
		body+=' return false;"&gt;options...&lt;/a&gt;';
		body+='&lt;/html&gt;@@display:none;border-left:1px dotted;margin-left:1em;padding:0;padding-left:.5em;font-size:90%;/%\n';
		body+='	%/&lt;&lt;tiddler SearchOptions&gt;&gt;@@';
	};
	body+='}}}\n\n';
	return body;
}

if (!window.formatSearchResults_summary) window.formatSearchResults_summary=function(text,matches)
{
	// summary: nn tiddlers found matching '...', options used
	var body='';
	var co=config.options; // abbrev
	var title=config.macros.search.reportTitle
	var q = co.chkRegExpSearch ? "/" : "'";
	body+="''"+config.macros.search.successMsg.format([matches.length,q+"{{{"+text+"}}}"+q])+"''\n";
	var opts=[];
	if (co.chkSearchTitles) opts.push("titles");
	if (co.chkSearchText) opts.push("text");
	if (co.chkSearchTags) opts.push("tags");
	if (co.chkSearchFields) opts.push("fields");
	if (co.chkSearchShadows) opts.push("shadows");
	if (co.chkSearchOpenTiddlers) body+="^^//search limited to displayed tiddlers only//^^\n";
	body+="~~&amp;nbsp; searched in "+opts.join(" + ")+"~~\n";
	body+=(co.chkCaseSensitiveSearch||co.chkRegExpSearch?"^^&amp;nbsp; using ":"")
		+(co.chkCaseSensitiveSearch?"case-sensitive ":"")
		+(co.chkRegExpSearch?"pattern ":"")
		+(co.chkCaseSensitiveSearch||co.chkRegExpSearch?"matching^^\n":"");
	return body;
}

if (!window.formatSearchResults_list) window.formatSearchResults_list=function(text,matches)
{
	// bullet list of links to matching tiddlers
	var body='';
	var co=config.options; // abbrev
	var pattern=co.chkRegExpSearch?text:text.escapeRegExp();
	var sensitive=co.chkCaseSensitiveSearch?"mg":"img";
	var link='{{tiddlyLinkExisting{&lt;html&gt;&lt;nowiki&gt;&lt;a href="javascript:;" onclick="'
		+'if(config.options.chkSearchHighlight)'
		+'	highlightHack=new RegExp(\x27'+pattern+'\x27.escapeRegExp(),\x27'+sensitive+'\x27);'
		+'story.displayTiddler(null,\x27%0\x27);'
		+'highlightHack = null; return false;'
		+'" title="%2"&gt;%1&lt;/a&gt;&lt;/html&gt;}}}';
	for(var t=0;t&lt;matches.length;t++) {
		body+="* ";
		if (co.chkSearchByDate)
			body+=matches[t].modified.formatString('YYYY.0MM.0DD 0hh:0mm')+" ";
		var title=matches[t].title;
		var fixup=title.replace(/'/g,"\\x27").replace(/"/g,"\\x22");
		var tid=store.getTiddler(title);
		var tip=tid?tid.getSubtitle():''; tip=tip.replace(/"/g,"&amp;quot;");
		body+=link.format([fixup,title,tip])+'\n';
	}
	return body;
}

if (!window.formatSearchResults_buttons) window.formatSearchResults_buttons=function(text,matches)
{
	// embed buttons only if writing SearchResults to tiddler
	if (!config.options.chkSearchListTiddler) return "";
	// "open all" button
	var title=config.macros.search.reportTitle;
	var body="";
	body+="@@display:block;&lt;html&gt;&lt;input type=\"button\" href=\"javascript:;\" "
		+"onclick=\"story.displayTiddlers(null,[";
	for(var t=0;t&lt;matches.length;t++)
		body+="'"+matches[t].title.replace(/\'/mg,"\\'")+"'"+((t&lt;matches.length-1)?", ":"");
	body+="],1);\" accesskey=\"O\" value=\"open all matching tiddlers\"&gt;&lt;/html&gt; ";
	// "discard SearchResults" button
	body+="&lt;html&gt;&lt;input type=\"button\" href=\"javascript:;\" "
		+"onclick=\"discardSearchResults()\" value=\"discard "+title+"\"&gt;&lt;/html&gt;";
	body+="@@\n";
	return body;
}

if (!window.discardSearchResults) window.discardSearchResults=function()
{
	// remove the tiddler
	story.closeTiddler(config.macros.search.reportTitle);
	store.deleteTiddler(config.macros.search.reportTitle);
	store.notify(config.macros.search.reportTitle,true);
}
//}}}
// // DELIVER [[SearchOptions]] shadow payload
//{{{
config.shadowTiddlers.SearchOptions = store.getTiddlerText('SearchOptionsPlugin##panel','');
config.annotations.SearchOptions    = 'created by SearchOptionsPlugin';
//}}}
/***
//{{{
!panel
search in:
  {{nowrap{&lt;&lt;option chkSearchTitles&gt;&gt;titles &lt;&lt;option chkSearchText&gt;&gt;text &lt;&lt;option chkSearchTags&gt;&gt;tags}}} /%
%/{{nowrap{&lt;&lt;option chkSearchFields&gt;&gt;fields &lt;&lt;option chkSearchShadows&gt;&gt;shadows}}}
----
  {{nowrap{&lt;&lt;option chkCaseSensitiveSearch&gt;&gt;case-sensitive}}} /%
%/{{nowrap{&lt;&lt;option chkRegExpSearch&gt;&gt;match text patterns}}}
  {{nowrap{&lt;&lt;option chkIncrementalSearch&gt;&gt;key-by-key search:}}} /%
	%/{{threechar smallform nowrap{&lt;&lt;option txtIncrementalSearchMin&gt;&gt; or more characters}}} /%
	%/{{threechar smallform nowrap{&lt;&lt;option txtIncrementalSearchDelay&gt;&gt; msec delay}}}&lt;hr&gt;
  {{nowrap{&lt;&lt;option chkSearchList&gt;&gt;show results in a list &amp;nbsp; &amp;nbsp;}}} /%
%/{{nowrap{&lt;&lt;option chkSearchListTiddler&gt;&gt;save list in ''[[SearchResults]]''}}}
  {{nowrap{&lt;&lt;option chkSearchTitlesFirst&gt;&gt;show title matches first}}} /%
%/{{nowrap{&lt;&lt;option chkSearchByDate&gt;&gt;sort results by date}}} /%
%/{{nowrap{&lt;&lt;option chkSearchHighlight&gt;&gt;highlight matching text}}}
----
{{nowrap{&lt;&lt;option chkSearchOpenTiddlers&gt;&gt;search open tiddlers only}}}
{{nowrap{&lt;&lt;option chkSearchExcludeTags&gt;&gt;exclude tiddlers tagged with:}}}
{{editor{&lt;&lt;option txtSearchExcludeTags&gt;&gt;}}}
!end
//}}}
***/
 </pre>
</div>
<div title="cancelTiddler" server.title="cancelTiddler" server.page.revision="1521931" server.etag="&quot;system-images_public/cancelTiddler/1521931:8a23fc51084383d093cb3ceef71b50cf9a7b4c5e&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-images_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-images_public" server.permissions="read" server.content-type="image/svg+xml" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="7ec49872e728041385751b4252f6baab334f44ce">
<pre>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" viewBox="72 648 70 70" 
width="30" height="30"&gt;
&lt;g stroke="none" stroke-opacity="1" stroke-dasharray="none" fill="none" fill-opacity="1"&gt;
	&lt;g&gt;
		&lt;path d="M 77.59005 669.34003 C 71.532745 681.90424 73.714462 697.4441 84.135193 707.86475 
		C 97.315445 721.0451 118.684715 721.0451 131.8649 707.86475 
		C 145.04515 694.68457 145.04515 673.31537 131.8649 660.13513 
		C 121.4441 649.7141 105.90419 647.53253 93.339905 653.5899 L 102.047455 662.2976 
		C 109.58637 660.2373 117.987976 662.16803 123.90997 668.08997 
		C 132.69673 676.8767 132.69673 691.12317 123.90997 699.90985 
		C 115.12313 708.6966 100.87699 708.6966 92.09012 699.90985 
		C 86.168266 693.98804 84.23744 685.58643 86.297653 678.04755 Z M 72 648 L 72 668.25 L 78.75 661.49957 
		L 99.00019 681.7502 L 105.750175 675.00006 L 85.50013 654.75012 L 92.249985 648 Z" fill="black"
		class="glyph"/&gt;
	&lt;/g&gt;
&lt;/g&gt;
&lt;/svg&gt;</pre>
</div>
<div title="ProjectEuler" server.title="ProjectEuler" server.page.revision="1084319" server.etag="&quot;willrogers_public/ProjectEuler/1084319:bd88734653f767e72e580dcf2aa52b69e19244b9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130216171450" created="20110522110138" tags="" _hash="c1c065217a8889aa1af863d48ab6a4c8cb39dcee">
<pre>http://projecteuler.net

I used Python and basically brute force techniques for each of these until I found that they didn't work.  I guess I'll only post ones I had problems with here.

!!Problem 3

The brute force method was very inefficient.  The final method remained slow for prime numbers, but solved composite numbers much quicker.

| Number solved | Answer | 1st version  | 2nd version |h
| 1000000 | 5 | 0.7s | |
| 10000000 | 5 | 6.4s | |
| 100000007 | 100000007 | 1m5s | |
| 600851475143 | 6857 |  | 0.031s |


!!Problem 5

My program must be extremely intensive.

| Number | Answer | 1st version  | 2nd version |h
| 1 | 1 | 0.01s | |
| 5 | 60 | 0.03s | |
| 10 | 2520 | 0.05s | |
| 12 | 27720  | 0.09s | |
| 15 | 360360 | 0.85s | |
| 16 | 720720 | 1.7s | |
| 17 | 12252240 | 29s | 1.8s |
| 18 | 12252240 | | 2.2s |
| 19 | 232792560 | | 31s |
| 20 | 232792560 | | 34s |

!!Problem 10
This took 1m18s using my straight-forward approach, which isn't really fast enough.

!!Problem 12
The weakness I have here is my divisors() function, which needs to be more efficient.

!!Problem 23
Similar to problem 12, this relies on the divisors() funcition which is too slow.

!!Problem 30
I cheated somewhat, by trying all the possibles up to 1m.  I didn't prove that numbers couldn't be higher, but it did get the right answer.
</pre>
</div>
<div title="CPrimitiveTypes" server.title="CPrimitiveTypes" server.page.revision="1612036" server.etag="&quot;willrogers_public/CPrimitiveTypes/1612036:2278ac9f62afa036910ddefe4c1282cdbeae65f9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131231172546" created="20110805142607" tags="c types" _hash="82fb80480e0c4ed1bcce627ddedab1ed3f26e7fb">
<pre>There are 6 different primitive data types in C:

| char | one-byte character | |
| short | short integer | at least 16 bits |
| int | standard-length integer | at least 16 bits, sometimes 32|
| long | long integer | at least 32 bits |
| float | floating-point number | generally 32 bits |
| double | double-precision floating-point number | seems to be 64-bit always |

* On my Ubuntu machine, {{{int}}} was 32bit and {{{long}}} was also 32bit.
* On my Red Hat 64-bit machine, {{{int}}} is 32-bit and {{{long}}} is 64-bit.
* {{{double}}} is 64 bits on both 32-bit and 64-bit compilers.
* You can find maximum and minimum constants in {{{&lt;limits.h&gt;}}}
* You can apply 'signed' or 'unsigned' to any of these.  Unsigned is either 0 or positive.  Append 'u' when writing them.
** {{{unsigned}}} by itself is a synonym for {{{unsigned int}}}
* You should write a long {{{ 4141L }}} or {{{ 4141l }}}.
** You should write a float {{{ 414.1f }}} or {{{ 4.1e2f }}}, otherwise it will be a double.
* Here's a very good blog post about how memory addresses work: http://denniskubes.com/2012/08/17/basics-of-memory-addresses-in-c/
* To convert a char {{{'6'}}} to an integer {{{6}}}, subtract {{{'0'}}}:
** {{{int a = c - '0'}}}
</pre>
</div>
<div title="SudokuPython" server.title="SudokuPython" server.page.revision="364775" server.etag="&quot;willrogers_public/SudokuPython/364775:30afff836b53e84feca3f362dbc84bbc44c46329&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110423142918" created="20110423101906" tags="gchq puzzles python" _hash="d05ea65f3aca8404f07c54aa378a13940dce4eaa">
<pre>How to do this?

We need: 
* a representation of the grid, covering starting point, possibles and saved solutions
** I'm using NumPy arrays to store the grid.
* an algorithm which covers as many iterations as necessary

One problem is how to roll back once you've discovered something doesn't work.</pre>
</div>
<div title="HtmlBasics" server.title="HtmlBasics" server.page.revision="1469489" server.etag="&quot;willrogers_public/HtmlBasics/1469489:2dbe08a4fff639859761d75c1c8dfcacd64b794c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131019154216" created="20131019120227" tags="" _hash="e2d2b88de4b8c242beb9c30aaaba89ee2eb1c099">
<pre>See also CssBasics.

!!Basic syntax
* {{{&lt;!DOCTYPE html&gt;}}} at the top
* Everything else goes inside {{{&lt;html&gt;}}} tags.
* The {{{&lt;head&gt;}}} contains {{{&lt;title&gt;}}} etc.
* The {{{&lt;body&gt;}}} contains everything else ({{{&lt;p&gt;, &lt;h1-6&gt;}}} etc).
* {{{&lt;img src="url/for/img" /&gt;}}}
* {{{&lt;a href="url/for/link&gt; &lt;img&gt; &lt;/a&gt;}}}- can surround an image
* {{{&lt;ol&gt;, &lt;ul&gt;, &lt;li&gt;}}} for ordered and unordered lists, and the items within.
* {{{&lt;strong&gt;}}} for bold, {{{&lt;em&gt;}}} for italics

!!Structure
* {{{&lt;table border="1px"&gt;, &lt;tr&gt;, &lt;td&gt;}}} for a table, rows, and cells 
** {{{&lt;thead&gt;, &lt;tbody&gt;}}} separate header and body of table
** {{{&lt;th colspan="2"&gt;}}} for cells within the header
* {{{&lt;div&gt;}}} is a general purpose 'division'
* {{{&lt;span&gt;}}} is used for styling smaller parts of a page
!!Style
This basically allows you to use CSS for single elements - see CssBasics.
Add style to a tag directly:
* {{{&lt;p style="font-size: 10px;"&gt;}}}
** Separate different style elements with semicolons.

| ''style'' | ''values'' |
| font-size | 10px |
| color | red |
| font-family | verdana |
| background-color | green |
| text-align | center, right |
</pre>
</div>
<div title="EgiCfMunich" server.title="EgiCfMunich" server.page.revision="656864" server.etag="&quot;willrogers_public/EgiCfMunich/656864:2d2167f1017f84a74b1e7d7883140660cc82360c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120328143859" created="20120327072146" tags="egi emi" _hash="de30a8c9219bd8c4588ae71374aa87e9106b54f2">
<pre>* EuropeanFunding
* EmiOutlook
* EgiSummary
* EmiQA
* TStoRM</pre>
</div>
<div title="PossibleJobs" server.title="PossibleJobs" server.page.revision="1059888" server.etag="&quot;willrogers_public/PossibleJobs/1059888:1cfe3b21ad3ad9df66655be0be2274efaa07aaca&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130204193816" created="20120401114802" tags="careers" _hash="7411e302e5e99abeadbd116e9fd71dd7f9ac3c45">
<pre>These are for analysis.  I've collected a general requirements list in PossibleRequirements.

!!Diamond
This one is remarkably suited to me
* http://www.diamond.ac.uk/Home/Jobs/Current/DIA0808_SB.html

!!Oxford Zoology
* Search for vacancy 102528
* Senior softwarer engineer
* Requirements:
** Extensive experience with Java
** Experience with RDBMS
** Excellent SQL skills
** Experience with GIS, vector, raster advantageous
* £29k - £44k depending on experience, skills

!!UKPLC, Reading
* http://careers.stackoverflow.com/jobs/17789/software-developer-ukplc?a=l15jnY4
* Software developer
* Team of 9 developers
* Requirements:
** Skilled in C#, SQL Server, XML
** Primarily looking for talented developers

!!iwoca, London
* http://careers.stackoverflow.com/jobs/17829/junior-developer-iwoca?a=l40YFdm
* Junior python developer
* No long track record required
* 'have a good understanding of computer science generally and be able to get stuff done in python'
* little detail

!!ECMWF, Reading
http://www.ecmwf.int/newsevents/employment/en/AP12-12-en.html
* taking part in projects and developments that enable external customers and researchers to access the Centre’s data and products;
* designing and developing software to enable users to embed access to ECMWF products in their applications, using standard protocols and standards for web services;&amp;nbsp;
* developing, maintaining and supporting services to allow external users remote access the Centre’s data and products, in real time and from the archive (MARS).
* A university education or equivalent is required, as well as knowledge of Python, HTTP, HTML and JavaScript. Experience in developing JSON/REST web services would be a distinct advantage. Knowledge of the Open Geospatial Consortium (OGC) standards and meteorological data standards (BUFR and GRIB) would also be advantageous.
£50k net of tax - that's ridiculously high!

!!Liquid Robotics, California
Senior Software Developer.  Working with James Gosling, so this job will be exceptionally difficult to get.  This is the job listing.
* Work on the development of cloud infrastructure software to manage telemetry from Liquid Robotics Wavegliders
* This includes receiving incoming data, storing it and serving it out to other software in a highly available manner.  
* Also, develop a variety of front-end web applications to enable access to and management of telemetry.
* Developed applications will need to be tested, deployed, documented and managed. 
* Requires: JavaEE, JavaScript, HTML.  
* Useful: experience with the manipulation of scientific datasets, NoSQL, JIRA, Jenkins, robotic systems and data visualization.

!!Oxford, highly paid python post
http://www.reed.co.uk/jobs/python-developer/22223041?WT.mc_id=indeed
"To add to your exceptional Python skills you will have basic Linux System Administration experience and skills in engineering. Skills that could assist with you standing out from the other candidates include; Ruby, Web Development skills (HTML5, CSS3, Haml, CoffeScript), Git, AWS, Ubuntu, C++ and an interest in statistics."
* £55-60k, so very competitive

!!Austin Fraser, Fleet
* c£40k
The successful Python Developer (Linux, Django, Puppet) will be tasked with providing Python programming expertise and the ability to rapidly integrate new Python tools / techniques. The successful applicant will have the ability to lead adoption and integration of new and emerging practices, trends and technologies.

Key Skills:
- Python
- Django (or other micro frameworks)
- Web Services (REST, XML, JSON and SOA)
- Distributed Version control (Git, Mercurial) 
</pre>
</div>
<div title="ProgrammingTypes" server.title="ProgrammingTypes" server.page.revision="888031" server.etag="&quot;willrogers_public/ProgrammingTypes/888031:9b6e16e91dfd85ef888b08541f07dc2708160f44&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120925201655" created="20120925201632" tags="" _hash="40fd4fb53e9b5e296ee78e8cc1e2e012ee5d6672">
<pre>Here's a very good explanation from http://www.diveintopython.net/getting_to_know_python/declaring_functions.html:

!!!!statically typed language
* A language in which types are fixed at compile time. Most statically typed languages enforce this by requiring you to declare all variables with their datatypes before using them. Java and C are statically typed languages. 
!!!!dynamically typed language
* A language in which types are discovered at execution time; the opposite of statically typed. VBScript and Python are dynamically typed, because they figure out what type a variable is when you first assign it a value. 
!!!!strongly typed language
* A language in which types are always enforced. Java and Python are strongly typed. If you have an integer, you can't treat it like a string without explicitly converting it. 
!!!!weakly typed language
*  A language in which types may be ignored; the opposite of strongly typed. VBScript is weakly typed. In VBScript, you can concatenate the string '12' and the integer 3 to get the string '123', then treat that as the integer 123, all without any explicit conversion. 

</pre>
</div>
<div title="LaptopProcessors" server.title="LaptopProcessors" server.page.revision="920111" server.etag="&quot;willrogers_public/LaptopProcessors/920111:5bccff212ba13f303ce64e134d452774f9c4c338&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121027194828" created="20120901101101" tags="" _hash="6cc33d57ea28d546e93d538c29e07598678da23c">
<pre>See NewLaptop.

The Intel Core range seems to be the best at the moment.  The scores below are taken from the Passmark site.
[[Notebookcheck.net|http://www.notebookcheck.net/Mobile-Processors-Benchmarklist.2436.0.html]] also provides a good benchmark.

!!Intel Core
1st generation processors aren't really available now.  The 2nd-generation ones begin with a 2 and the 3rd-gen ones with a 3.  M denotes mobile, Q denotes quad-core and U low power, for ultrabooks

| '''Core i7''' | | '''Core i5''' | | '''Core i3''' | |
| 3610QM | 8377 | | | | |
| 3612QM | 7618 | | | | |
| 2670QM | 6780 | | | | |
| 3520M | 4592 | | | | |
| 3517U | 3904 | | | | |
| | | 3210M | 3961 | | |
| | | 2450M | 3584 | | |
| | | 3317U | 2931 | | |
| | | | | 2350M | 2934 |
| | | | | 2330M | 2714 |
| | | | | 2310M | 2623 |

!!AMD
Few AMD laptop processors get to these numbers in the passmark ratings, but here are a couple:
* A8-4500M - 4204
* A10-4600M - 5130
</pre>
</div>
<div title="ComputingNotes" server.title="ComputingNotes" server.page.revision="1614781" server.etag="&quot;willrogers_public/ComputingNotes/1614781:c045c0461318003b6432f12c3dbc125fa56f4bb7&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20140103121600" created="20131026133228" tags="" _hash="f7878f927d939ccc4a7d2ad40d7098ab8b4249a3">
<pre>A very good Java style guide for Android: http://source.android.com/source/code-style.html.

FutureWork
HomeComputer

!!Programming
* PythonNotes
* CBasics
* AndroidDevelopment
* ProgrammingTypes
* JavaAnt
* JavaClasspath
* QtBasics

!!Linux
* LinuxCommands - will be subdivided when necessary
* LinuxFilesystem
* LinuxLocations
* BashScripting
* VimNotes
* VirtualBox
* VirtualUbuntu
* VirtualDebian
* VirtualMint
* VirtualSL6
* CloudUbuntu
* SvnUbuntu
* LocateCygwin
* StickyBit
* TtyWtf
* POSIX!
* RpmBuild
* GnuMake
* GnuDebugger

!!Web
* HtmlBasics
* JavaScript

!!Computer Science
* BasicCompSci
* MetaLang
* HaskellBasics
* MatlabBasics
* CryptographyNotes

!!Version control
* CvsNotes
* SvnNotes
* GitNotes

!!Other
* UnixDos
* DatabaseTheory
* NewComputer
* SpotifyProxy
* EclipseNotes

* RegexNotes
* WindowsNotes
* MysqlNotes
* SqlSyntax
* WorkAccounts

* MessagingPatterns
* BitwiseOperators
* MPI!
* GoogleContacts




Google contacts API: http://code.google.com/apis/contacts/docs/3.0/developers_guide.html
This looks interesting: http://www.20thingsilearned.com/en-GB/home
Scrobble any song: http://universalscrobbler.invitationstation.org/</pre>
</div>
<div title="apps" server.title="apps" server.page.revision="1521891" server.etag="&quot;tiddlyspace/apps/1521891:c04d44c66606bd35bf5bc286027991bad1381705&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="text/html" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="901ce9fdbc458a92f3643134f0bd968fc1f69cb1">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="utf-8"/&gt;
	&lt;title&gt;TiddlySpace Apps&lt;/title&gt;
	&lt;link rel="stylesheet" href="/bags/common/tiddlers/reset.css" /&gt;
	&lt;link rel="stylesheet" href="/bags/common/tiddlers/appspage.css" /&gt;
	&lt;!--[if lt IE 7 ]&gt;
	&lt;link rel="stylesheet" href="/bags/common/tiddlers/appspageie6.css" /&gt;
	&lt;![endif]--&gt;
&lt;/head&gt;
&lt;body&gt;
	
	&lt;div id="wrapper"&gt;
		&lt;div id="TSbar"&gt;&lt;/div&gt;
		&lt;div id="main-content"&gt;
			&lt;div id="space-details"&gt;
				&lt;a href="/_space"&gt;&lt;img class="siteicon"&gt;&lt;/a&gt;
				&lt;div id="title-subtitle"&gt;
					&lt;h1 class="spaceaddress"&gt;
						&lt;span class="spaceName"&gt;&lt;/span&gt;&lt;span class="hostName"&gt;&lt;/span&gt;
					&lt;/h1&gt;
					&lt;p class="tagline"&gt;&lt;span class="subTitle"&gt;&lt;/span&gt;&lt;a class="managespaces" href="/_space"&gt;manage space&lt;/a&gt;&lt;/p&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			&lt;div id="holder"&gt;
				&lt;div id="appswitcher-wrapper"&gt;
					&lt;div id="appswitcher"&gt;
						&lt;h2&gt;Your Apps&lt;/h2&gt;
						&lt;ul id="app-list"&gt;
							&lt;li class="htmlserialisation"&gt;
								&lt;a href="/tiddlers.html?select=tag:!excludeLists;sort=-modified"&gt;
									&lt;img src="/bags/common/tiddlers/browse_read_blue.png" alt="Icon for the HTML Serialisation" class="app-img" /&gt;
									BROWSE
								&lt;/a&gt;
							&lt;/li&gt;
							&lt;li class="tiddlywiki"&gt;
								&lt;a href="/tiddlers.wiki"&gt;
									&lt;img src="/bags/common/tiddlers/tiddlywiki2_blue.png" alt="Icon for TiddlyWiki" class="app-img" /&gt;
									TIDDLYWIKI
								&lt;/a&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;div id="addapp"&gt;
							&lt;button class="inactive"&gt;Add More!&lt;/button&gt;
						&lt;/div&gt;
					&lt;/div&gt;
					&lt;div id="app-desc"&gt;
						&lt;ul&gt;
							&lt;li class="htmlserialisationdesc"&gt;&lt;p&gt;an easy to understand HTML representation of your content.&lt;/p&gt;&lt;/li&gt;
							&lt;li class="tiddlywikidesc"&gt;&lt;p&gt;use TiddlyWiki to create, edit and organise your content.&lt;/p&gt;&lt;/li&gt;
						&lt;/ul&gt;
					&lt;/div&gt;
					&lt;div style="clear: both;"&gt;&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;div id="footer"&gt;&lt;!-- ie doesn't support footer tag --&gt;
			&lt;div id="footer-content"&gt;
				&lt;div class="links"&gt;
					&lt;a href="http://blog.tiddlyspace.com"&gt;blog&lt;/a&gt;
					&lt;a href="http://featured.tiddlyspace.com"&gt;featured&lt;/a&gt;
					&lt;a href="http://docs.tiddlyspace.com"&gt;documentation&lt;/a&gt;
					&lt;a href="https://github.com/TiddlySpace/tiddlyspace"&gt;source&lt;/a&gt;
				&lt;/div&gt;
				&lt;p&gt;TiddlySpace 2011, created by &lt;a href="http://osmosoft.com"&gt;Osmosoft&lt;/a&gt;&lt;/p&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	
	&lt;script type="text/javascript" src="/bags/common/tiddlers/backstage.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript" src="/bags/common/tiddlers/jquery.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript" src="/bags/tiddlyspace/tiddlers/chrjs"&gt;&lt;/script&gt;
	&lt;script type="text/javascript" src="/bags/common/tiddlers/chrjs-store.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript" src="/bags/common/tiddlers/jquery-json.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript" src="/bags/common/tiddlers/appspage.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<div title="BashSpecialCharacters" server.title="BashSpecialCharacters" server.page.revision="1427541" server.etag="&quot;willrogers_public/BashSpecialCharacters/1427541:cfc409c16e5bc25f762af386ca9de15481c49465&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130928090141" created="20111010104600" tags="bash linux" _hash="ef75c78b324f16b9641ef81d8c466258a746c60b">
<pre>* - is the last directory you were at.  So {{{ cd - }}} goes back to where you were before.

* {{{$#}}} is the number of parameters provided to the script (not including the command)
* {{{$0}}} is the command that was run
* {{{$1}}} is the first parameter
* {{{$*}}} is the string of all parameters passed (not the command run), which you can loop through with {{{for}}}
* {{{$$}}} is the PID of the current process 
* {{{$?}}} is the exit code of the last command run
* {{{\$}}} gives you a literal $.


!!Bash patterns
Bash has its own version of regular expressions:

* {{{*}}} matches any number of any characters
* {{{?}}} matches any single character
* {{{[abc]}}} matches a, b or c
* {{{[a-c]}}} matches a, b or c
* {{{[!abc]}}} matches anything but a, b or c
* {{{[^7]}}} matches anything but 7 (really?)
* {{{ls !(*,c)}}} inverts the match, in newer versions of bash</pre>
</div>
<div title="PageTemplate" server.title="PageTemplate" server.page.revision="1521914" server.etag="&quot;system-theme_public/PageTemplate/1521914:74ade64304fbde2d97ff6cd7ffadf4bb1a9b21dc&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-theme_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-theme_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="f7d57de5937a110a2d275d11eebcd4557fc34f25">
<pre>&lt;!--{{{--&gt;
&lt;div class='header'&gt;
	&lt;div id='sidebarSearch'&gt;
		&lt;span macro='search'&gt;&lt;/span&gt;
	&lt;/div&gt;
	&lt;div class='headerForeground'&gt;
		&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;
		&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
	&lt;/div&gt;
	&lt;div class='clearFloat'&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div id='menuBar'&gt;
	&lt;div id='mainMenu' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
	&lt;div id='sidebarOptions' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea'&gt;
	&lt;div id='messageArea'&gt;&lt;/div&gt;
	&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
	&lt;div id='sidebarTabs' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="BashScripting" server.title="BashScripting" server.page.revision="1580471" server.etag="&quot;willrogers_public/BashScripting/1580471:4dccc15964426fc596674110c6a03bb0c2960e4a&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131206171807" created="20111031101701" tags="bash linux" _hash="e6ecd2f482a8c3785e8547b38a20988d82cbc0ec">
<pre>This is something I find difficult.  

* BashScriptingBasics
* BashSyntax
* BashSpecialCharacters
* BashControlFlow
* BashConditions
* BashSubScripts
* BashFunctions
* BashStrings
* SedAndAwk
* LinuxCommands - the strength of bash is that it has access to all the Linux commands, and can use them as though they were part of the language.</pre>
</div>
<div title="AndroidAppBasics" server.title="AndroidAppBasics" server.page.revision="1486138" server.etag="&quot;willrogers_public/AndroidAppBasics/1486138:646eddc902645c5cc7cc8cd2b8f546e6e35734bf&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131027094227" created="20131026144544" tags="" _hash="364fddfa81e2f3303cfc411bf12ac3522cf86eb8">
<pre>There is a good introductory page here: http://developer.android.com/guide/components/fundamentals.html

!!Components
There are four basic components in an Android app:
* an {{{Activity}}} represents a single screen with a user interface
** an app typically has several activities, and other apps could open any one
* a {{{Service}}} runs in the background to perform some task
** an activity could start a service - for example, playing music in the background
* a {{{ContentProvider}}} manages a set of application data
** the data (files, SQLite database) could be private or shared
* a {{{BroadcastReceiver}}} listens for various broadcasts
** broadcasts could come from the system or other apps

* Activities, services, and broadcast receivers can be activated by an asynchronous message called an {{{Intent}}}

* You can make a hierarchy of activities within an app, which allows automatic navigation
* Every {{{Activity}}} is invoked by an {{{Intent}}}, available via {{{getIntent()}}}.

!!Context
The {{{Context}}} provides global information about the app environment.  You can retrieve it with:
* {{{getContext()}}}
* {{{getApplicationContext()}}}
* {{{getBaseContext()}}}

{{{Activity}}} is an indirect subclass of Context, so it can be used to provide a context.  This question is a good explanation: http://stackoverflow.com/questions/3572463/what-is-context-in-android</pre>
</div>
<div title="TiddlySpaceLinkPlugin" server.title="TiddlySpaceLinkPlugin" server.page.revision="1521865" server.etag="&quot;system-plugins_public/TiddlySpaceLinkPlugin/1521865:6783b6121bff172bc9419e37e4b32ed5c185880f&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="b88cfa8ccd99b328c34b54aa9371c8f9ce02ffaf">
<pre>/***
|''Name:''|TiddlySpaceLinkPlugin|
|''Description:''|Formatter to reference other spaces from wikitext |
|''Author:''|PaulDowney (psd (at) osmosoft (dot) com) |
|''Source:''|http://github.com/TiddlySpace/tiddlyspace/raw/master/src/plugins/TiddlySpaceLinkPlugin.js|
|''Version:''|1.4.2|
|''License:''|[[BSD License|http://www.opensource.org/licenses/bsd-license.php]] |
|''Comments:''|Please make comments at http://groups.google.co.uk/group/TiddlyWikiDev |
|''~CoreVersion:''|2.4|
!!Documentation
This plugin provides wikitext formatters for referencing another [[space|Space]] on the same TiddlySpace server, as in the following examples:
&lt;&lt;&lt;
  {{{@space}}} -- @space 
  {{{~@space}}} -- ~@space 
  {{{Tiddler@space}}} -- Tiddler@space
  {{{[[Tiddler Title]]@space}}} -- [[Tiddler Title]]@space 
  {{{[[Link text|Tiddler Title]]@space}}} -- [[Link text|Tiddler Title]]@space
&lt;&lt;&lt;
Links to tiddlers with a title begining with an "@" remain as tiddlyLinks:
&lt;&lt;&lt;
  {{{[[@tiddler]]}}} -- [[@tiddler]]
&lt;&lt;&lt;
and these may be changed into a space link using {{{@@}}}:
&lt;&lt;&lt;
  {{{[[@@space]]}}} -- [[@@space]]
  {{{[[Link to an another space|@@space]]}}} -- [[Link to another space|@@space]]
  {{{[[@space|@@space]]}}} -- [[@space|@@space]]
&lt;&lt;&lt;
TiddlySpace includes the [[TiddlySpaceLinkPlugin]] which provides WikiText markup for linking to other spaces on the same server. For example @glossary is a link to the {{{glossary}}} space and [[Small Trusted Group]]@glossary a link to an individual tiddler in the @glossary space. Prefixing the link with a tilde escapes the link, for example {{{~@space}}}.
Email addresses, for example joe.bloggs@example.com and mary@had.a.little.lamb.org should be unaffected.
!!Features
The plugin provides external links decorated so that other plugins may be included to add features such as the ability to dynamically pull externally linked tiddlers into the current TiddlyWiki.
Wikitext linking to a space on another server, for example from a tiddler in a space on tiddlyspace.com to a tiddler or a space on example.com, isn't currently supported. 
!!Code
***/
//{{{
/*jslint onevar: false nomen: false plusplus: false */
/*global jQuery config createTiddlyText createExternalLink createTiddlyLink */

function createSpaceLink(place, spaceName, title, alt, isBag) {
	var link, a, currentSpaceName, label;
	try {
		if (spaceName === config.extensions.tiddlyspace.currentSpace.name) {
			title = title || spaceName;
			a = createTiddlyLink(place, title, false);
			jQuery(a).text(alt || title);
			return a;
		}
	} catch (ex1) {
		currentSpaceName = false;
	}

	a = jQuery("&lt;a /&gt;").addClass('tiddlySpaceLink externalLink').appendTo(place)[0];
	if(title) {
		jQuery(a).attr('tiddler', title);
	}
	if(isBag) {
		jQuery(a).attr('bag', spaceName);
	} else {
		jQuery(a).attr('tiddlyspace', spaceName);
	}

	config.extensions.tiddlyweb.getStatus(function(status) {
		link = status.server_host.url;
		if (title) {
			label = alt || title;
			link = link + "/" + encodeURIComponent(title);
		} else {
			label = alt || spaceName;
		}
		// assumes a http URI without user:pass@ prefix
		if(!isBag) {
			link = link.replace("http://", "http://" + spaceName.toLowerCase() + ".");
		} else {
			link += "/bags/" + spaceName + "/tiddlers.wiki";
		}
		jQuery(a).attr("href", link).text(label);
	});
	return a;
}

(function ($) {

	config.textPrimitives.spaceName = "[a-zA-Z][a-zA-Z0-9-]*[a-zA-Z0-9]";
	config.textPrimitives.spaceNameStrict = "[a-z][a-z0-9-]*";
	config.textPrimitives.bareTiddlerLetter = config.textPrimitives.anyLetterStrict;

	config.formatters.splice(0, 0, {
		name: "spacenameLink",
		match: config.textPrimitives.unWikiLink + "?" + config.textPrimitives.bareTiddlerLetter + "*@" + config.textPrimitives.spaceName + "\\.?.?",
		lookaheadRegExp: new RegExp(config.textPrimitives.unWikiLink + "?(" + config.textPrimitives.bareTiddlerLetter + "*)@(" + config.textPrimitives.spaceName + ")", "mg"),
		handler: function (w) {
			if (w.matchText.substr(w.matchText.length - 2, 1) === '.' &amp;&amp; w.matchText.substr(w.matchText.length - 1, 1).match(/[a-zA-Z]/)) {
				w.outputText(w.output, w.matchStart, w.nextMatch);
				return;
			}
			if (w.matchText.substr(0, 1) === config.textPrimitives.unWikiLink) {
				w.outputText(w.output, w.matchStart + 1, w.nextMatch);
				return;
			}
			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if (lookaheadMatch &amp;&amp; lookaheadMatch.index === w.matchStart) {
				createSpaceLink(w.output, lookaheadMatch[2], lookaheadMatch[1]);
				w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
		}
	},
	{
		name: "tiddlySpaceLink",
		match: "\\[\\[[^\\|\\]]*\\|*@@" + config.textPrimitives.spaceName + "\\]",
		lookaheadRegExp: new RegExp("\\[\\[(.*?)(?:\\|@@(.*?))?\\]\\]", "mg"),
		handler: function (w) {
			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if (lookaheadMatch &amp;&amp; lookaheadMatch.index === w.matchStart) {
				var alt = lookaheadMatch[2] ? lookaheadMatch[1] : lookaheadMatch[1].replace(/^@@/, "");
				var space = lookaheadMatch[2] || alt;
				createSpaceLink(w.output, space, "", alt);
				w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
		}
	},
	{
		name: "tiddlyLinkSpacenameLink",
		match: "\\[\\[[^\\[]*\\]\\]@",
		lookaheadRegExp: new RegExp("\\[\\[(.*?)(?:\\|(.*?))?\\]\\]@(" + config.textPrimitives.spaceName + ")", "mg"),
		handler: function (w) {
			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if (lookaheadMatch &amp;&amp; lookaheadMatch.index === w.matchStart) {
				var title = lookaheadMatch[2] || lookaheadMatch[1];
				var alt = lookaheadMatch[1] || lookaheadMatch[2];
				createSpaceLink(w.output, lookaheadMatch[3], title, alt);
				w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
		}
	});

	// ensure space links don't appear as missing links
	config.textPrimitives.brackettedLink = "\\[\\[([^\\]][^@\\]][^\\]]*)\\]\\](?=[^@])";
	config.textPrimitives.titledBrackettedLink = "\\[\\[([^\\[\\]\\|]+)\\|([^\\[\\]\\|]+)\\]\\](?=[^@])";

	// reevaluate derrived expressions ..
	config.textPrimitives.tiddlerForcedLinkRegExp = new RegExp("(?:" + config.textPrimitives.titledBrackettedLink + ")|(?:" +
		config.textPrimitives.brackettedLink + ")|(?:" +
		config.textPrimitives.urlPattern + ")","mg");
	config.textPrimitives.tiddlerAnyLinkRegExp = new RegExp("("+ config.textPrimitives.wikiLink + ")|(?:" +
		config.textPrimitives.titledBrackettedLink + ")|(?:" +
		config.textPrimitives.brackettedLink + ")|(?:" +
		config.textPrimitives.urlPattern + ")","mg");

	// treat space links in titledBracketedLink as external links
	var missingTiddlySpaceLink = new RegExp("^@@" + config.textPrimitives.spaceName + "$", "");
	var isExternalLink = config.formatterHelpers.isExternalLink;
	config.formatterHelpers.isExternalLink = function(link) {
		return missingTiddlySpaceLink.test(link) || isExternalLink(link);
	};

}(jQuery));
//}}}</pre>
</div>
<div title="privateNotPublicIcon" server.title="privateNotPublicIcon" server.page.revision="1521893" server.etag="&quot;tiddlyspace/privateNotPublicIcon/1521893:52d5490772210e68a6a59c7e4bba93308cbc1f5d&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/tiddlyspace" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="tiddlyspace" server.permissions="read" server.content-type="image/png" modified="20131111192334" created="20131111192334" tags="excludeLists excludeSearch" _hash="ec84c2619af08b1c361984baa4e8e871e8ce8946">
<pre>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</pre>
</div>
<div title="CssClassesIds" server.title="CssClassesIds" server.page.revision="1469709" server.etag="&quot;willrogers_public/CssClassesIds/1469709:d191000f19c7c998d263ed0a90fce0e6e84e1d4f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131019192236" created="20131019165318" tags="" _hash="e7519a5df2e0e2a20df62877a29fd0f143fbf84f">
<pre>!!Classes
Classes allow you to style several elements in the same way.
* {{{&lt;div class="red&gt;}}}

{{{
.red {
        color: red;
}
}}}

!!~IDs
~IDs are used for only one element.  An element with an ID can also be a member of one or more classes.
* {{{&lt;div id="first"&gt;}}}
{{{
#first {
        color: blue;
}
}}}

!!Pseudoclasses
This is the name for the way certain selectors can be qualified, eg:
{{{
a:hover {
	color: #cc0000;
	font-weight: bold;
	text-decoration: none;
}
}}}
* {{{a:link, a:visited}}} for unvisited and visited links
* {{{p:first-child}}} for first child of several parallel &lt;p&gt;s.
* {{{p:nth-child(3)}}} for third child of several parallel &lt;p&gt;s.
</pre>
</div>
<div title="AndroidManifest" server.title="AndroidManifest" server.page.revision="1484122" server.etag="&quot;willrogers_public/AndroidManifest/1484122:dd00349b268929b1619407998083f96705e1749f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131026150956" created="20131026150259" tags="" _hash="e7c252549ff64ef3e29770d5a9462acb9447a1f0">
<pre>
This file contains important metadata about the app.  It has a custom view as well as raw XML.  The documentation is here: http://developer.android.com/guide/topics/manifest/manifest-intro.html

Its primary purpose is to declare the components of the app.  You must declare all the app's components in this file (except possibly broadcast receivers).

You can also declare the capabilities of your app.  This shows that your app can fulfil certain intents, and means that your app is offered when another app wants to do something.

The manifest also specifies requirements for the app, in terms of screen size and Android version.</pre>
</div>
<div title="AndroidDesign" server.title="AndroidDesign" server.page.revision="1519412" server.etag="&quot;willrogers_public/AndroidDesign/1519412:b1d23e3914eba94b7ac519b5c7a4e25aece70d70&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131110203322" created="20131110203215" tags="" _hash="b346c45bbe999d5070a660fca38104ca235106e2">
<pre>[[Design|http://developer.android.com/design/index.html]] is the first part of the Android documentation.  It has the following sections:

* Get Started
* Style
* Patterns
* Building Blocks

It also has links for Downloads and Videos.
</pre>
</div>
<div title="PythonGarbage" server.title="PythonGarbage" server.page.revision="901883" server.etag="&quot;willrogers_public/PythonGarbage/901883:4fc4fc81f9da82fcf850206cebfdd255b3d5971c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121007104948" created="20121007104948" tags="collection garbage python" _hash="aa8118c7496387feae34887fbd79c3437d0f918f">
<pre>Python garbage collection works by 'reference counting'.  When no further references to an object exist, that object can be removed.

It's possible to have a number of objects with circular references, but no references to the main program.  Python is smart enough to clean these up to.</pre>
</div>
<div title="PythonBuiltins" server.title="PythonBuiltins" server.page.revision="364541" server.etag="&quot;willrogers_public/PythonBuiltins/364541:c2c98226926a452832e4008262f6a906c646eaf2&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111220141143" created="20111220135232" tags="python" _hash="24908719bfbc17baaebaab1496f1377d40afd015">
<pre>If you run dir() at any time, one item in the list returned is {{{_builtins__}}}.  This is the module including the built-in methods available.

{{{dir(__builtins__)}}} produces the following:
{{{
['ArithmeticError', 'AssertionError', 'AttributeError', 'BaseException', 'BufferError', 'BytesWarning', 'DeprecationWarning', 'EOFError', 'Ellipsis', 'EnvironmentError', 'Exception', 'False', 'FloatingPointError', 'FutureWarning', 'GeneratorExit', 'IOError', 'ImportError', 'ImportWarning', 'IndentationError', 'IndexError', 'KeyError', 'KeyboardInterrupt', 'LookupError', 'MemoryError', 'NameError', 'None', 'NotImplemented', 'NotImplementedError', 'OSError', 'OverflowError', 'PendingDeprecationWarning', 'ReferenceError', 'RuntimeError', 'RuntimeWarning', 'StandardError', 'StopIteration', 'SyntaxError', 'SyntaxWarning', 'SystemError', 'SystemExit', 'TabError', 'True', 'TypeError', 'UnboundLocalError', 'UnicodeDecodeError', 'UnicodeEncodeError', 'UnicodeError', 'UnicodeTranslateError', 'UnicodeWarning', 'UserWarning', 'ValueError', 'Warning', 'ZeroDivisionError', '__debug__', '__doc__', '__import__', '__name__', '__package__', 'abs', 'all', 'any', 'apply', 'basestring', 'bin', 'bool', 'buffer', 'bytearray', 'bytes', 'callable', 'chr', 'classmethod', 'cmp', 'coerce', 'compile', 'complex', 'copyright', 'credits', 'delattr', 'dict', 'dir', 'divmod', 'enumerate', 'eval', 'execfile', 'exit', 'file', 'filter', 'float', 'format', 'frozenset', 'getattr', 'globals', 'hasattr', 'hash', 'help', 'hex', 'id', 'input', 'int', 'intern', 'isinstance', 'issubclass', 'iter', 'len', 'license', 'list', 'locals', 'long', 'map', 'max', 'min', 'next', 'object', 'oct', 'open', 'ord', 'pow', 'print', 'property', 'quit', 'range', 'raw_input', 'reduce', 'reload', 'repr', 'reversed', 'round', 'set', 'setattr', 'slice', 'sorted', 'staticmethod', 'str', 'sum', 'super', 'tuple', 'type', 'unichr', 'unicode', 'vars', 'xrange', 'zip']
}}}

This comprises:
* Built-in exceptions
* Built-in constants: Ellipsis, False, None, ~NotImplemented, True, {{{__debug__}}}.  These are described here: http://docs.python.org/library/constants.html.  Ellipsis has obscure uses only within numpy. 
* Meta-stuff, described in PythonSyntax under 'Bits and Pieces'
* {{{__import__()}}}, one of the built-in functions but not for everyday use
* Standard built-in functions, described here: http://docs.python.org/library/functions.html</pre>
</div>
<div title="PythonNotes" server.title="PythonNotes" server.page.revision="1592701" server.etag="&quot;willrogers_public/PythonNotes/1592701:5e2db043df13545241677dafd80bcb93c311db2b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131212144439" created="20120925201824" tags="python" _hash="cd3a920c1bf765e5983b877f0c7fcac42f8cbed2">
<pre>I am up to section 10 in Dive Into Python (I skipped the HTML chapter): http://www.diveintopython.net/regular_expressions/index.html

Python is a strongly and dynamically typed language - see ProgrammingTypes.  Basically this means that the types are determined on execution, but once they're determined they stay that way.

Everything in python is an object, so you can assign it to a variable.  A useful example of this is assigning functions to variables, including anonymous lambda functions.

* PythonSyntax
* PythonFunctions
* PythonDocumentation
* PythonExceptions
* PythonPackages
* PythonSetupTools
* PythonDocstrings
* PythonRegex
* PythonThreading
* PythonClasses
* PythonDecorators
* PythonGarbage
* PythonProfiler
* PythonDaemon
* PythonMock
* SWIG!


* MatPlotLib
* NumPy</pre>
</div>
<div title="ComputeSummary" server.title="ComputeSummary" server.page.revision="363911" server.etag="&quot;willrogers_public/ComputeSummary/363911:0edb1c9c251050c1a41582c9d29cf07e60f93a2f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111019070350" created="20111019070350" tags="" _hash="9e12c7938beaf6c90d4f3323c0d1528cdb07e416">
<pre>Marco Cecchi

* EMI-ES - common interface for submitting jobs
** Also parallel
** Type can be MPI, OpenMP, any string
** Still some troubles defining schemas for parallel jobs, like APEL
* GLUE 2.0 in ARC
* GLUE 2.0 in gLite CREAM
* GLUE 2.0 in gLite WMS
* CREAM EMI-ES implementation; Unicore EMI-ES implementation
* CAR:
** Defining an OGF UR
** Consider use cases
** Not useing the extension framweork
** Very much getting there.
** Syntax next to do - then we can get an XSD
** End of October
** APEL aggregation -&gt; XML 
** APEL submitted something to OGF, but it never particularly caught on
**  We should submit what we get to OGF in some form or other
* Does it make sense to unify CAR and StAR? 
** I don't think so...</pre>
</div>
<div title="JavaAnt" server.title="JavaAnt" server.page.revision="364214" server.etag="&quot;willrogers_public/JavaAnt/364214:3d427e6692f958b7ac1b444eef577fe5f054feb6&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111130154031" created="20111028154948" tags="ant java" _hash="578425e933776d38270d2b18433827cc2de17510">
<pre>!Ant

Ant is a Java build tool that I've never had that much experience with.  I think it would be a very good idea to get to grips with it.

!!Introduction
Ant is a Java build tool which has much the same idea as 'make' (the build tool for C).  You write an XML file called build.xml, then run 'ant' and it will do everything you've told it to - i.e. compile classes, run tests, clean, create a jar file.

It is an Apache project and so is open source.  It is written in Java and distributed as a jar file, which means that it is more-or-less platform independent.  It is designed to be flexible and extensible.

!!The basics

You write a build file called build.xml.  It includes the name of the project and a number of targets.  Each target is something you want to do, eg clean or compile.  One of the targets is the default, executed when you run the command 'ant'.  For others, run 'ant &lt;target-name&gt;'.

APEL core has the following targets: clean, init, compile, localdistbin, install, latex, runlatex, doc, compiletest, unittest.

The ant build file can substitute properties, denoted within ${...}.  In apel core, the properties come from a file {{{project/build.properties}}}.  These are all simple, but it does still reference other properties (e.g. ${log4j.location}).  Those other properties are supplied when ant is run:





</pre>
</div>
<div title="MetaTiddly" server.title="MetaTiddly" server.page.revision="1484064" server.etag="&quot;willrogers_public/MetaTiddly/1484064:c37c866cfc129903ec8f1114f715d159b47b41d9&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131026135355" created="20111010185539" tags="" _hash="2193d1adc6b4c7701888210de3c7ad157f3e1710">
<pre>Here's the GettingStarted page.  The SpaceSettings tiddler is useful.

You can find markup details here: http://wikitext.tiddlyspace.com/#Contents%20%5B%5BBasic%20formatting%5D%5D

Here's a converter from Tiddly to Twiki: http://wiki.cenkes.org/Cenkes/TiddlyWikitoTWikiMigration

This looks interesting:
* http://bengillies.net/.a/recipes/sitecontent/tiddlers/Bookmarking%20and%20TiddlySpace</pre>
</div>
<div title="SaxPython" server.title="SaxPython" server.page.revision="364667" server.etag="&quot;willrogers_public/SaxPython/364667:ecc0640e4ca892f672f145feb3923cf72a35f424&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120229160933" created="20120229160207" tags="python sax xml" _hash="8f3d96840d76870cb988456408edaa156666752c">
<pre>I'm going to experiment with sax for converting xml usage records into the apel format.

The first step is this:
{{{
import xml.sax
parser = xml.sax.make_parser()
print parser
}}}
This returns {{{&lt;xml.sax.expatreader.ExpatParser instance at 0xb723072c&gt;}}}, which is confirmation that expat is an implementation of sax.</pre>
</div>
<div title="PythonRegex" server.title="PythonRegex" server.page.revision="1000405" server.etag="&quot;willrogers_public/PythonRegex/1000405:18309cc12f25633177c0461d137ebab0b0eb5baf&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121223111807" created="20121223105546" tags="" _hash="68f4d3fb72feb34d909535bb426ffd49180030a7">
<pre>Python has quite a few built in string process libraries, which you should use if they are up to the task.  Otherwise, regexp is the way to go: http://docs.python.org/2/library/re.html.

* See also RegexNotes for standard syntax

!!Intro
Generally, you 'compile' a regular expression into an object which you can reuse.  If you're not reusing a lot, python provides shortcut functions which are less efficient but use less code.

MULTILINE mode means, for example, that $ matches the end of each line, whereas otherwise $ would only match the whole of the string.

* It can be useful to use python's raw strings {{{r'\tword\n'}}} to avoid zillions of backslashes.
* Verbose mode (a flag you need to set) allows you to comment regexes:
** whitespace is ignored (you have to escape it if you want to match)
** comments are allowed (# to the end of a line) 


!!Functions
All of these functions have flags you can pass to modify their behaviour.
* {{{re.search(pattern, string)}}} - omits compiliing; returns a ~MatchObject
* {{{re.match(pattern, string)}}} - omits compiling; returns a ~MatchObject
* {{{re.split(pattern, string)}}} - splits according to regex; returns a list
* {{{re.findall(pattern, string)}}} - finds all matches according to regex; returns a list
* {{{re.sub(pattern, string)}}} - makes substitutions
* {{{re.escape(string)}}} - leave only alphanumerics without backslashes.

!!Regex and Match objects
A ~RegexObject is returned by the re.compile() function.  A ~MatchObject is returned by the ~RegexObject's search() and match() methods:
{{{
ro = re.compile("d.")
mo = ro.search("dog")
}}}
match() only checks if the regex matches at the beginning of the string; search checks the whole string for a match.

* ~RegexObjects support the functions listed above
* ~MatchObjects support groupings in the regex.
</pre>
</div>
<div title="AddressChanges" server.title="AddressChanges" server.page.revision="1557667" server.etag="&quot;willrogers_private/AddressChanges/1557667:3ae27cea2cd6723742cdbed5a1c8355dbb4a8446&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20131124141711" created="20110711174925" tags="" _hash="322e6e9867a84a3aca60e6739ccb42ea6f548a89">
<pre>Note of different things I have to change address of when I move house:

* Work address (done)
* HSBC - easy online, but occasionally you have to send a secure message (done)
* 3 - easy online (done)
* Tesco clubcard and Tesco - now fairly easy online (done)
* Nectar card - easy online (done)
* CSSC - easy online (done)
* www.alumni.cam.ac.uk - CAM etc. (done)
* First Direct - you've got to ring.  My memorable date is Ed's birthday, and my memorable address is my uni one (done)
* Virgin Money - fairly easy online (done)
* Car insurance - have to ring and there's a fee (done)
* Paypal - easy online once HSBC address has changed? (done)
* TV licence - easy online (done)
* Tesco Bank
* Catz - there's a form here: http://www.caths.cam.ac.uk/alumni/society/home/?m=page&amp;id=479

* Specsavers? - I can do this when next there
* Car registration - best to do this: http://www.direct.gov.uk/en/Motoring/OwningAVehicle/ChangesToYourRegistrationCertificate/DG_4022055
** You have to send off the form to DVLA (done)
* Driving licence - you can change address online, but you need documents: http://www.direct.gov.uk/en/Motoring/Motoringtransactions/BeforeyouapplyC/DG_066944.  You've also got to send the old licence back to the DVLA, so I'm going to wait until we move house again before I do it.  The documents are:
** Driving licence (both parts)
** Passport 
** National insurance number

Water, electricity, gas are sort of by default.</pre>
</div>
<div title="EmiAhmHamburg" server.title="EmiAhmHamburg" server.page.revision="710488" server.etag="&quot;willrogers_public/EmiAhmHamburg/710488:df956b42484878dec2bd9cf76494a4a6bc774b2b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120515083632" created="20120515083558" tags="" _hash="a13456573adadb200a3354a47d129f6d9d6bb219">
<pre>
* EmiCanl
* MoreOnPorting
* EmiUserSupport
* EmiQualityControl
* NagiosNotes
* CREAM will support CAR via integration of APEL sensors.
* EMI Messaging guidelines - available on the EMI TWiki
* Dev tasks in tracker by end of June.
* Policies from EmiSA2 available by end of June.
* Code freeze: 
** Base components 19/10/12
** Other components 23/10/12</pre>
</div>
<div title="DiamondNotes" server.title="DiamondNotes" server.page.revision="1597246" server.etag="&quot;willrogers_public/DiamondNotes/1597246:1cf1aba37de7b597c96f75365d6b3f82f9d4ae6d&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131216092222" created="20131026132842" tags="" _hash="f6e0677f6e1019a40109c673372c47a3b465f67f">
<pre>These are things that are useful for work at Diamond.

* DiamondAde
* DiamondLauncher 
* DiamondRedirector
* DiamondSetup
* EpicsArchiver
* EpicsPython
* EpicsQt
* TopupUnitTests
* TopupTesting
* EclipseDiamond
* I10Switching
* PyQt
* DiamondPython
* DiamondModules
* EpicsEdm
* FastFeedback
* MiddleLayer
* PythonSoftIoc
* PythonMachine
* ExternalConnection
* StfcVpn

If set up correctly, ~IOCs will log to {{{/dls/ops-data/epics/logs/}}}
PV regular expression: {{{grep -E "\"[A-Z0-9]+-[A-Z]+-[A-Z]+-[0-9]+:" *.py}}}
Query people who have edited a file in SVN:
{{{
for file in *; do echo "$file:"; git log "$file" | grep 'Author' | finger `cut -d " " -f 2` | grep Name | tr -s '\t' | cut -f 2  | uniq; echo; done &gt; owners.txt
}}}
</pre>
</div>
<div title="ConcludingRemarks" server.title="ConcludingRemarks" server.page.revision="710490" server.etag="&quot;willrogers_public/ConcludingRemarks/710490:e8222861ac9de507fda7fd8f67a4c0e9af1228c8&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120515083806" created="20111019101559" tags="" _hash="781aecc66c8a23500369bebe0c75177491656fa0">
<pre>Alberto di Meglio - Technical Director

!!EmiNA1 
* Project  restructuring
** Strategic Director
** EmiNA3 created
!!EmiNA2
* Implementing review recommendations
** New website in progress
** More proactive dissemination necessary - from everyone including technical people
** More scientific papers might be encouraged - conferences and journals
!!EmiNA3
* Newly established, operational
* Focus on sustainability and long-term strategies
** Open source initiative
** Standardisation
** Cloud / virtualisation strategy
!!EmiSA1
* Release and support processes in place
* Changes necessary for SL6/Debian 6 discussed
* Steps to move to EPEL / Debian compliance discussed
* PT need to take ownership of packaging from EMI2.
!!EmiSA2
* Changes required because of multiple platforms
** Policies, dashboards, reports
** Multi-platform testbed
** 'Clarify probes on  the testbed'
** Refine metrics
!!EmiJRA1
* Dev tracker in place and used, all area tasks defined
* Unclear cross-area objectives have been clarified
* Too many tasks - some Y2 -&gt; Y3, some cut in Y3

!!Consolidation
* Major EMI objective
* Most areas have plans
* Compute area most controversial; focus is on APIs
* Reduction of SLOC not really a realistic metric
** Consolidation can be achieved by simplifying deployment and usage without reducing lines of code
* New services:  STS, info systems, security simplifications, messaging, accounting
** Good progress
** Remember that a good product right at the end of EMI may not be useful in the long term
* Platform porting:
** Start now
** You can release some packages on SL6 before EMI2, if you want to.
* Integration testing - not yet clear
** Need an integration team - PT testers with an overall leader.

!!!Virtualisation and Clouds
* We don't understand the users' interest yet
* We need to find this out before we do stuff
* We can then modify the technical plan accordingly

!!!Sustainability and Open Source
* Simply: make sure communities use EMI services and support them after EMI
* We need some structure to make this possible
* Still need to find out about this and define some plans

The next AHM is from 8-10 May 2012 in Hamburg.</pre>
</div>
<div title="AndroidUIs" server.title="AndroidUIs" server.page.revision="1486134" server.etag="&quot;willrogers_public/AndroidUIs/1486134:c68e42d2490a57cff10768ca37f329ea8ce0c661&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131027093050" created="20131027092948" tags="" _hash="b1c7b2c732ba0fbacd46f44b7c40b510135a6407">
<pre>Here's the UI page: http://developer.android.com/guide/topics/ui/overview.html

Android ~UIs are made up of {{{View}}}s and {{{ViewGroup}}}s.  Anything that you can see on the screen is a view.  View groups are invisible containers which hold views.</pre>
</div>
<div title="TiddlySpaceToolbar" server.title="TiddlySpaceToolbar" server.page.revision="1521861" server.etag="&quot;system-plugins_public/TiddlySpaceToolbar/1521861:86bb5cc57cd4874e474d8e06550dbc02a6b9c694&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="f1d6038be5d1ecd8d107d604b0f0dce76bc901da">
<pre>/***
|''Name''|TiddlySpaceToolbar|
|''Description''|augments tiddler toolbar commands with SVG icons|
|''Author''|Osmosoft|
|''Version''|0.6.6|
|''Status''|@@beta@@|
|''Source''|http://github.com/TiddlySpace/tiddlyspace/raw/master/src/plugins/TiddlySpaceToolbar.js|
|''CodeRepository''|http://github.com/TiddlySpace/tiddlyspace|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
|''CoreVersion''|2.5.0|
|''Requires''|ImageMacroPlugin|
|''Keywords''|toolbar icons SVG|
!Description
replaces tiddler toolbar commands with SVG icons if available
!Notes
requires [[ImageMacroPlugin|http://svn.tiddlywiki.org/Trunk/contributors/JonRobson/plugins/ImageMacroPlugin/plugins/ImageMacroPlugin.tid]]

SVG icons are drawn from tiddlers titled {{{&lt;command&gt;.svg}}}
In readonly mode a tiddler called {{{&lt;command&gt;ReadOnly.svg}}} will be used if it exists.
!TODO
* rename (IconToolbarPlugin?)
* support more than one more popup menu in the toolbar.
!Code
***/
//{{{
(function($) {

if(!config.macros.image) {
	throw "Missing dependency: ImageMacroPlugin";
}

var macro = config.macros.toolbar;

macro.icons = {
	cloneTiddler: "editTiddler"
};

var _handler = macro.handler;
macro.handler = function(place, macroName, params, wikifier,
		paramString, tiddler) {
	var toolbar = $(place);
	toolbar.attr({
		refresh: "macro",
		macroName: macroName
	}).data("args", arguments);
	var status = _handler.apply(this, arguments);
	if(tiddler.isReadOnly()) {
		toolbar.addClass("toolbarReadOnly");
	} else {
		toolbar.removeClass("toolbarReadOnly");
	}
	var parsedParams = paramString.parseParams("name")[0];
	if(parsedParams.icons &amp;&amp; parsedParams.icons == "yes") {
		this.augmentCommandButtons(place);
	}
	if(parsedParams.more &amp;&amp; parsedParams.more == "popup") {
		// note we must override the onclick event like in createTiddlyButton
		// otherwise the click event is the popup AND the slider
		$(".moreCommand", place).each(function(i, el) {
			el.onclick = macro.onClickMorePopUp;
		});
		// buttons that are after a less command should not be in more menu.
		$(".lessCommand ~ .button", place).appendTo(place);
		$(".lessCommand", place).remove();
	}
	return status;
};

macro.refresh = function(place, params) {
	var args = $(place).empty().data("args");
	this.handler.apply(this, args);
};

var imageMacro = config.macros.image;
macro.augmentCommandButtons = function(toolbar) {
	$(".button", toolbar).each(function(i, el) {
		var cmd = $(el).attr("commandname");
		cmd = cmd ? cmd : "moreCommand"; // XXX: special-casing of moreCommand due to ticket #1234
		var icon = store.tiddlerExists(cmd) ? cmd : macro.icons[cmd];
		var text = $(el).text();
		if(readOnly) {
			var readOnlyAlternative = "%0ReadOnly".format([icon]);
			if(store.tiddlerExists(readOnlyAlternative)) {
				icon = readOnlyAlternative;
			}
		}
		if(store.tiddlerExists(icon)) {
			$(el).css({display: "inline-block"}).empty();
			imageMacro.renderImage(el, icon, { alt: text });
		}
	});
};

// provide onClickMore to provide extra commands in a popup
macro.onClickMorePopUp = function(ev) {
	ev = ev || window.event;
	var sibling = this.nextSibling;
	if(sibling) {
		var commands = sibling.childNodes;
		var popup = Popup.create(this);
		$(popup).addClass("taggedTiddlerList");
		for(var i = 0; i &lt; commands.length; i++) {
			var li = createTiddlyElement(popup, "li", null);
			var oldCommand = commands[i];
			var command = oldCommand.cloneNode(true);
			command.onclick = oldCommand.onclick;
			li.appendChild(command);
		}
		Popup.show();
	}
	ev.cancelBubble = true;
	if(ev.stopPropagation) {
		ev.stopPropagation();
	}
	return false;
};

})(jQuery);
//}}}</pre>
</div>
<div title="CampingFrance" server.title="CampingFrance" server.page.revision="834060" server.etag="&quot;willrogers_public/CampingFrance/834060:5a06fb594fab3e14dd1b6130307b7452623ad043&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120812164532" created="20120618205717" tags="" _hash="83761365b9d4aa3576a14e64496f4dd501926b8f">
<pre>We're going to the south of France

!!Money 
I took €139 with me.

!!Flights
~EasyJet, Luton -&gt; Nice
£293

!!Car
Sixt
£313 + £43, presumably for the petrol

!!Transport
National Express
£41

!!Campsites
1st: Le Prieure


</pre>
</div>
<div title="CNumbers" server.title="CNumbers" server.page.revision="1603930" server.etag="&quot;willrogers_public/CNumbers/1603930:826363e67def111c67f06e4db9d90e6a96a277f7&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131223112327" created="20110805152207" tags="c programming" _hash="b965c37fc1e914495eb4fa3920808b7613b7447f">
<pre>See CPrimitiveTypes.

Arithmetic works as Java.  The double slash as in Python doesn't mean anything (it's a comment!)

* 7 / 2 -&gt; 3
* 7 % 2 -&gt; 1

* {{{7.0 / 2.0 -&gt; 3.5}}}
* 

{{{ atoi(char[] s) }}} converts a string to an integer.</pre>
</div>
<div title="LdapBdii" server.title="LdapBdii" server.page.revision="735046" server.etag="&quot;willrogers_public/LdapBdii/735046:84f7c86c2d31c3c4ed1aecadf0e3dadabee2a95c&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120607085617" created="20110712083911" tags="" _hash="1934c3da86b3581351fbeb57ad358e3b00a775e9">
<pre>Two things I don't know about which are related.  I've also made some notes on BerkeleyDB, which I think can underly both LDAP and BDII.

!!LDAP
LDAP stands for 'lightweight directory access protocol'.  This is a quote from Wikipedia: The Lightweight Directory Access Protocol (LDAP) is an application protocol for accessing and maintaining distributed directory information services over an Internet Protocol (IP) network.

It sort of claims that any data structure can be represented, but I definitely find it easiest to think of a tree-like structure.  Each node on the tree is an 'entry', which has a DN to refer to it ambiguously.  The entry can have a number of attributes, which are key-value pairs.  You can add and delete entries from the directory, but usually used for querying the directory.

A good way to browse LDAPs is the Softerra LDAP browser, which is free.  The python library is [[python-ldap|http://python-ldap.org/docs.shtml]], which seems to be available on both Debian and SL5.

!!!~DNs
A distinguished name (DN) in LDAP is an unambiguous way of specifying some item in the tree structure, such as the full file path on Linux.  I'm more familiar with the ~DNs in certificates, but these are just an unambiguous way of specifying uniquely my certificate in a similar tree-like structure.  Once you've specified a DN, you can use relative paths to unambiguously refer to other items.

!!!LDAP ~URLs

An LDAP URL looks like this:
{{{
ldap://host:port/DN?attributes?scope?filter?extensions
}}}



!!!Filters
[[This RfC|http://tools.ietf.org/html/rfc4515]] defines the filters, but it's not very user-friendly.
This filter is one used by the get_brokers module, starting from the DN {{{o=grid}}}.
{{{
(&amp;(objectClass=GlueService)(GlueServiceType=msg.broker.stomp))
}}}
This is another:
{{{
(&amp;(GlueServiceDataKey=cluster)(GlueChunkKey=GlueServiceUniqueID=' + broker_id + '))
}}}

Using Softerra LDAP browser, I finally made a filter work: 
{{{
(&amp;(objectClass=GlueService)(GlueServiceType=*))
}}}

!!BDII
BDII (Berkeley Database Information Index) seems to be a sort of LDAP.  It's not exactly big-time - it's only got a tiny Wikipedia page.  It's definitely a CERNy thing, and I'm not sure it's widely used.  As for what it does, it seems to store information about sites, again in a tree-like structure.  For example, there's the CERN 'top BDII' which points to individual sites' BDIIs or GIISs or GRISs.  

Here's an EGEE page about the whole thing: http://egee-uig.web.cern.ch/egee-uig/production_pages/QueryingInfoSystem.html.  It shows how the top-level ~BDIIs are more-or-less equivalent - i.e. they contain much the same data, although I don't think they are likely to be exactly the same.

The information stored in BDIIs conforms to the GLUE schema, so you can use the schema to build queries to retrieve the information you need.

Alison looks after bdii.ngs.ac.uk, which has information about the sites in the NGS.  Because of the sort-of peer-to-peer nature of the BDIIs, it also has information about other sites, but it's only the definitive source for the NGS.  Client sites need to be represented in this and will raise tickets if they're not.

!!GLUE Schema
I can't find a good page describing the GLUE schema.  It's a schema which defines what must or can be present in the BDII LDAP.  This PDF is the definition of the schema, I think, but it's not very readable to a beginner: http://www.ogf.org/documents/GFD.147.pdf.  So I'm going to have a look through the CERN top BDII to see what I can find in there, to see if it's enlightening.

When I connect using LDAP browser to connect to lcg-bdii.cern.ch:2170, it gives me the choice of certain base DNs: {{{o=grid}}}, {{{o=glue}}}, {{{o=infosys}}}, {{{o=shadow}}}.  I get results from my brokers query from {{{o=grid}}} and {{{o=shadow}}}, but not the others.  I sort of assume that the real information is under {{{o=grid}}}, but I'm not exactly sure why I think that.

Under {{{o=grid}}}, I find {{{Mds-Vo_name=local}}} and {{{Mds-Vo_name=resource}}}.  The latter seems to have information about the BDII itself, and the former seems to contain everything else.

Under {{{Mds-Vo_name=local}}}, there are lots of entries, apparently one per site.  So as an example, I looked at {{{Mds-Vo-name=RAL-LCG2}}}.  This in turn has probably 200 entries for different things such as {{{GlueServiceUniqueID=...}}} and {{{GlueCEUniqueID=...}}}.  The message brokers we're looking at have their info under ~GlueServiceUniqueID, so an example DN is:
{{{
GlueServiceUniqueID=gridmsg105.cern.ch_msg.broker.stomp_1218648947,Mds-Vo-name=CERN-PROD,Mds-Vo-name=local,o=grid
}}}

!!GRIS and GIIS 
These appear to be like BDIIs but somehow at a lower level - a CE may run a GIIS.  But don't quote me on that.
These may be like BDIIs, but with less responsibility and less information - sort of lower down in the tree.</pre>
</div>
<div title="EditTemplate" server.title="EditTemplate" server.page.revision="1521922" server.etag="&quot;system-theme_public/EditTemplate/1521922:b41d71ea453e617767c60e96f8d38b701512b92c&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-theme_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-theme_public" server.permissions="read" server.content-type="" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch" _hash="bb2ebcb9880f563a789711fbbbec5d3bfcb1b248">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar'
	macro='toolbar [[ToolbarCommands::EditToolbar]] icons:yes'&gt;
&lt;/div&gt;
&lt;div class='heading editorHeading'&gt;
	&lt;div class='editor title' macro='edit title'&gt;&lt;/div&gt;
	&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class='annotationsBox' macro='annotations'&gt;
	&lt;div class='editSpaceSiteIcon'
		macro='tiddlerOrigin height:16 width:16 label:no interactive:no'&gt;
	&lt;/div&gt;
	&lt;div class="privacyEdit" macro='setPrivacy label:no interactive:no'&gt;&lt;/div&gt;
	&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class='editor' macro='edit text'&gt;&lt;/div&gt;
&lt;div class='editorFooter'&gt;
	&lt;div class='tagTitle'&gt;tags&lt;/div&gt;
	&lt;div class='editor' macro='edit tags'&gt;&lt;/div&gt;
	&lt;div class='tagAnnotation'&gt;
		&lt;span macro='message views.editor.tagPrompt'&gt;&lt;/span&gt;
		&lt;span macro='tagChooser excludeLists'&gt;&lt;/span&gt;
	&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="PythonDocumentation" server.title="PythonDocumentation" server.page.revision="1375067" server.etag="&quot;willrogers_public/PythonDocumentation/1375067:052b1ce682241ddd6679477843bf3924f622215b&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130828124506" created="20110926124403" tags="python" _hash="b0e6a79f62c4921d8ddae3be3970881af15020ba">
<pre>The main index is here: http://docs.python.org/library/index.html.  It's the Python 2.7 documentation, but things which are new or have been removed are quite clearly labelled.

The point of this page is to give some context to what's in there, so I know how much I know and how much I don't.

In addition to these numbered chapters, there are a number of other sections.  The PythonDistutils part became relevant to me.

!!Chapters 1-8 - The core language
1. Introduction
2. Built-in functions - PythonBuiltins
3. Non-essential built-in functions
4. Built-in constants
5. Built-in types
6. Built-in exceptions
7. String services
* 7.2 Regular expresssions
* 7.4 difflib
* 7.5 ~StringIO and cStringIO - in-memory files
8. Data types
* 8.1 datetime
* 8.2 calendar
* 8.3 collections

!!Chapters 9-16 - Pretty basic libraries
9. Numerical and Mathematical Modules
* 9.6 Random numbers
* 9.9 {{{operator}}} - inbuilt operators as functions
10. File and Directory Access
* 10.6 temporary files
* 10.10 shutil - higher-level file operations, eg deleting a whole tree
11. Data Persistence
12. Data Compression and Archiving
* 12.1 zlib
* 12.2 gzip
* 12.3 bz2
* 12.4 zipfile 
* 12.5 tarfile
13. File Formats - a random selection including ~ConfigParser
14. Cryptographic Services
* Only hashlib and hmac
15. Generic Operating System Services
* 15.1 os
* 15.3 time
* 15.7 - 15.9 logging
* 15.10 getpass, for entering passwords
* 15.17 ctypes, for using C function calls and raw types
16. Optional Operating System Services - including threading

!!Chapters 17-21 - Networking + Internet
17. Interprocess Communication and Networking
18. Internet Data Handling
* 18.1 email/MIME
* 18.2 JSON
* 18.12 base64
* 18.15 quopri
19. StructuredMarkup Processing Tools (HTML and XML)
20. Internet Protocols and Support
21. Multimedia Services

!!Chapters 22-33 - Language utilities
22. Internationalization
23. Program Frameworks
24. GUIs with Tk
25. Development Tools
26. Debugging and Profiling
27. Python Runtime Services
* 27.12 Garbage collector interface
* 27.17 PythonDistutils
28. Custom Python Interpreters
29. Restricted Execution
30. Importing Modules
31. Python Language Services
32. Python Compiler Package
33. Miscellaneous Services

!!Chapters 34-39 - ~OS-specific libraries
34. Windows
35. Unix - eg users, groups
36. Mac OS X
37. ~MacPython OSA
38. SGI IRIX
39. ~SunOS

!!Chapter 40 - Undocumented modules
40. Undocumented Modules</pre>
</div>
<div title="RandomColorPalettePlugin" server.title="RandomColorPalettePlugin" server.page.revision="1521872" server.etag="&quot;system-plugins_public/RandomColorPalettePlugin/1521872:0dca2244de3f7acefedbd948641ce6cdf627c5ee&quot;" modifier="jon" creator="jon" server.workspace="bags/system-plugins_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-plugins_public" server.permissions="read" server.content-type="text/javascript" modified="20131111192330" created="20131111192330" tags="excludeLists excludeSearch systemConfig" _hash="c5b359abab5a1446d12be89e6ea608d2d73e4822">
<pre>/***
|''Name''|RandomColorPalettePlugin|
|''Description''|Adds a random color palette to TiddlyWiki|
|''Author''|Jon Robson|
|''Version''|1.4.0|
|''Status''|stable|
|''Source''|https://github.com/jdlrobson/TiddlyWikiPlugins/raw/master/plugins/RandomColorPalettePlugin/RandomColorPalettePlugin.js|
|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|
!Usage
{{{
&lt;&lt;RandomColorPalette&gt;&gt;
}}}
Sets and saves a random color palette on execution

{{{
&lt;&lt;RandomColorPaletteButton&gt;&gt;
}}}
Creates a button, which when clicked will change the color palette
More information at http://macros.tiddlyspace.com/#%5B%5BRandomColorPaletteButton%20macro%5D%5D
!Code
***/
//{{{
RGB.prototype.toRGBString = function() {
	return "rgb(%0,%1,%2)".format(parseInt(this.r * 255, 10),
		parseInt(this.g * 255, 10), parseInt(this.b * 255, 10))
}
function HSL_TO_RGB(h, s, l) { // h (hue) between 0 and 360, s (saturation) &amp; l (lightness) between 0 and 1
	var c = l &lt;= 0.5 ? 2 * l * s : ( 2 - (2 * l)) * s;
	var h1 = h / 60;
	var x = c * (1 - Math.abs((h1 % 2) - 1)); 
	var r, g, b;
	if(typeof(h) == 'undefined') {
		r = 0;
		g = 0;
		b = 0;
	} else if(0 &lt;= h1 &amp;&amp; h1 &lt; 1) {
		r = c;
		g = x;
		b = 0;
	} else if(1 &lt;= h1 &amp;&amp; h1 &lt; 2) {
		r = x;
		g = c;
		b = 0;
	} else if(2 &lt;= h1 &amp;&amp; h1 &lt; 3) {
		r = 0;
		g = c;
		b = x;
	} else if(3 &lt;= h1 &amp;&amp; h1 &lt; 4) {
		r = 0;
		g = x;
		b = c;
	} else if(4 &lt;= h1 &amp;&amp; h1 &lt; 5) {
		r = x;
		g = 0;
		b = c;
	} else if(5 &lt;= h1 &amp;&amp; h1 &lt; 6) {
		r = c;
		g = 0;
		b = x;
	}
	m = l - (0.5 * c);
	return new RGB(r + m, g + m, b + m);
}

(function($){
	var macro = config.macros.RandomColorPalette = {
		messagesOn: false, 
		changedPaletteText: "We have assigned you a random theme by adjusting the [[ColorPalette]] tiddler.\nDon't like it? Click &lt;&lt;RandomColorPalette&gt;&gt; for another one.", 
		handler: function(place, macroName, params, wikifier, paramString, tiddler) {
			paramString = paramString || "";
			var options = macro.getOptions(paramString);
			macro.generatePalette(options, true);
		},
		optionTypes: {
			floats: ["hue", "saturation", "darkest", "lightness", "huevariance", "dark", "pale", "light", "mid",
				"saturation_light", "saturation_pale", "saturation_mid", "saturation_dark"
			]
		},
		getOptions: function(paramString) {
			var args = paramString.parseParams("name", null, true, false, true)[0];
			var options = {};
			var numbers = macro.optionTypes.floats;
			for(var i in args) {
				options[i] = numbers.indexOf(i) &gt; -1 ? parseFloat(args[i][0], 10) : args[i][0];
			}
			return options;
		},
		generateRandomNumber: function(min, max, info) {
			var num = (Math.random() * 1);
			info = !info ? { attempts:0 } : info;
			info.attempts += 1;
			var good = true;
			if(min == max) {
				return max;
			}
			if(min &amp;&amp; num &lt; min) {
				good = false;
			} else if(max &amp;&amp; num &gt; max) {
				good = false;
			}
			if(!good) {
				if(info.attempts &lt; 5) {
					return macro.generateRandomNumber(min, max, info);
				} else {
					if(max) {
						return max;
					} else if(min) {
						return min;
					} else {
						return 1;
					}
				}
			}
			return num;
		},
		getExistingPalette: function(asJSON) {
			var title = "ColorPalette";
			var tiddlerText;
			if(store.tiddlerExists(title)) {
				tiddlerText = store.getTiddlerText(title);
			} else if(store.isShadowTiddler(title)){
				tiddlerText = config.shadowTiddlers[title];
			}
			if(asJSON) {
				var json = {};
				if(tiddlerText) {
					var lines = tiddlerText.split("\n");
					for(var i = 0; i &lt; lines.length; i++) {
						var definition = lines[i].split(":");
						if(definition.length == 2) {
							var name = definition[0].trim();
							var value = definition[1].trim();
							json[name] = value;
						}
					}
				}
				return json;
			} else {
				return tiddlerText;
			}
		},
		generatePalette: function(options, save) {
			var outputRGB = options.rgb;
			var palette = macro.getExistingPalette(true);
			var hue = options.hue || Math.floor(Math.random() * 359);
			var saturation = options.saturation || macro.generateRandomNumber(0.3, 0.7);
			var dark = options.dark || options.darkest || macro.generateRandomNumber(0, 0.10);
			var pale = options.pale || options.lightness || macro.generateRandomNumber(0.90, 1);
			var delta = ( ( pale - dark ) / 3 );
			var mid = options.mid || dark + delta;
			var light = options.light || dark + (delta * 2);
			var lightness_values = {Dark: dark, Mid: mid, Light: light, Pale: pale};
			var saturation_values = {};
			for(i in lightness_values) {
				if(true) {
					saturation_values[i] = options["saturation_" + i.toLowerCase()] || saturation;
				}
			}

			var opposite_hue = (hue + 180) % 360;
			var seed = options.huevariance || Math.floor((85 * Math.random()) + 5); // we want it to be at least 5 degrees
			var huetwo = (opposite_hue + seed) % 360;
			var huethree = (opposite_hue - seed) % 360;
			if(huetwo &lt; 0) {
				huetwo = 360 + huetwo;
			}
			if(huethree &lt; 0) {
				huethree = 360 + huethree;
			}
			for(var j in lightness_values) {
				if(true) {
					var saturation = saturation_values[j];
					palette["Primary" + j] = HSL_TO_RGB(hue, saturation, lightness_values[j]);
					palette["Secondary" + j] = HSL_TO_RGB(huetwo, saturation, lightness_values[j]);
					palette["Tertiary" + j] = HSL_TO_RGB(huethree, saturation, lightness_values[j]);
				}
			}
			palette.Background = HSL_TO_RGB(hue, saturation, 0.92);
			palette.Foreground = HSL_TO_RGB(hue, saturation, 0.08);
			palette.ColorPaletteParameters = ["HSL([", hue, "|", seed, "], [", saturation_values.Pale, "|",
				saturation_values.Light, "|", saturation_values.Mid, "|", saturation_values.Dark, "],",
				"[", dark, "|", mid, "|", light, "|", pale, "])"].join("");
			// construct new ColorPalette
			var text = ["/*{{{*/\n"];
			var colorcode;
			for(var id in palette) {
				if(true) {
					var color = palette[id];
					colorcode = outputRGB ? color.toRGBString() : color.toString();
					text.push("%0: %1\n".format(id, colorcode));
				}
			}
			text.push("/*}}}*/");
			text = text.join("");
			if(save) {
				macro.saveColorPalette(text);
			}
			return text;
		},
		saveColorPalette: function(text) {
			var tid = store.getTiddler("ColorPalette");
			if(!tid) {
				tid = new Tiddler("ColorPalette");
				tid.fields = merge({}, config.defaultCustomFields);
			} // TODO: detect that the ColorPalette in the space comes from outside recipe
			tid.fields["server.page.revision"] = "false"; // edit conflicts dont matter

			// save the color palette in tid
			tid = store.saveTiddler(tid.title, tid.title, text, tid.modifier, tid.modified,
				tid.tags, tid.fields, false, tid.created, tid.creator);
			// an interval is used to cope with users clicking on the palette button quickly.
			if(macro._nextSave) {
				window.clearTimeout(macro._nextSave);
			}
			macro._nextSave = window.setTimeout(function() {
					autoSaveChanges(null, [tid]);
				}, 2000);
			// temporary workaround for IE.
			$.twStylesheet.remove({ id: "StyleSheetColors" });
			$.twStylesheet.remove({ id: "StyleSheet" });
			refreshAll();
			macro.reportChange();
			return tid;
		},
		reportChange: function() {
			if(macro.messagesOn) { // only display message once..
				var msgPlace = getMessageDiv();
				if(!$(".changedPalette", msgPlace)[0]) {
					var tempPlace = document.createElement("div");
					wikify("{{changedPalette{" + macro.changedPaletteText + "}}}", tempPlace);
					msgPlace.appendChild(tempPlace);
				}
			}
		}
	};
	var btnMacro = config.macros.RandomColorPaletteButton = {
			text: "New ColorPalette",
			tooltip: "Generate a random colour scheme for your TiddlyWiki",
			makeButton: function(place, options) {
				var btnHandler = function(ev) {
					var t = $(ev.target);
					var options = t.data("options");
					macro.generatePalette(options, true);
					ev.preventDefault();
					return false;
				};
				var btn = createTiddlyButton(place, this.text, this.tooltip, btnHandler);
				$(btn).data("options", options);
				return btn;
			},
			handler: function(place, macroName, params, wikifier, paramString, tiddler) {
				var options = macro.getOptions(paramString);
				btnMacro.makeButton(place, options);
			}
	};
})(jQuery);
//}}}</pre>
</div>
<div title="VirtualDebian" server.title="VirtualDebian" server.page.revision="961334" server.etag="&quot;willrogers_public/VirtualDebian/961334:7816e0f9cf428cf501683ceae8c0d971cbbd01c4&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121123094013" created="20111020131514" tags="" _hash="9df963a310b4afc9c643317c71257569abca8778">
<pre>See VirtualBox on how to install any virtual machine.

See the notes for VirtualUbuntu - there'll be a lot of relevant stuff.  If anything's the same, I'll put it there so as not to duplicate.

!!Installation 
* I chose the minimal (but not super-minimal) ISO file which installs the updates via the internet
* I chose regular (rather than graphical) install
* The menu options seemed straight-forward enough
* I chose root password *******9 and user password ********8
* I accepted the default options for disk formatting
* I entered the proxy and port

!!Configuration
I installed the Guest Additions, but I couldn't autorun the (virtual) CD.
** I don't really know why, but I can do this with the following command:
{{{
sh /media/cdrom/autorun.sh
}}}
* To start a root session, type {{{su}}} or {{{su -}}}.  I then added will to the sudoers file by following the instructions [[here|http://www.pendrivelinux.com/how-to-add-a-user-to-the-sudoers-list/]].
* In order to wget things, you need to:
{{{
will@debianvm:~$ export http_proxy=wwwcache.rl.ac.uk:8080
}}}
* To add ~Ctrl-Alt-T as a terminal shortcut, go to System -&gt; Preferences -&gt; Keyboard Shortcuts...
** It's an option but disabled.

!!Programming
See EclipseNotes
!!!!Kerberos
* {{{sudo aptitude install krb5-user}}}
* Ignore the config set up, and use the standard ~KrbConf file from Trac.


</pre>
</div>
<div title="RecurrenceRelations" server.title="RecurrenceRelations" server.page.revision="671422" server.etag="&quot;willrogers_public/RecurrenceRelations/671422:ac86eac16c1ee5a635005f46b364c5193d3cfe35&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20120407095307" created="20120402200043" tags="" _hash="218f7e2b99754236016c29946d3ef41a26ebe689">
<pre>These are often useful for figuring out a function's efficiency in BigONotation.

To analyse a function, you've got to look at the declaration.

Use T(n) and T(0) or T(1) to narrow down the relationship.   T(n) is the time taken for input n.

* If T(n + 1) = T(n) + 1 -&gt; linear
* If T(n + 1) = T(n) + n -&gt; quadratic
* If T(n + 1) = T(n/2) + 1 -&gt; logarithmic 

There's still some work to be done here - it's complex.  It's in chapter 3 of the ML notes.</pre>
</div>
<div title="saveDraft" server.title="saveDraft" server.page.revision="1521925" server.etag="&quot;system-images_public/saveDraft/1521925:074f48fff2925628df5dead7e70fa9f7259f5d9d&quot;" modifier="osmosoft" creator="osmosoft" server.workspace="bags/system-images_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-images_public" server.permissions="read" server.content-type="image/svg+xml" modified="20131111192332" created="20131111192332" tags="excludeLists excludeSearch" _hash="8b5516d12e2aafb4aecd48f696fcb276e61ac468">
<pre>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" viewBox="364 157 64 51" width="30" height="30"&gt;&lt;g stroke="none" stroke-opacity="1" stroke-dasharray="none" fill="none" fill-opacity="1"&gt;&lt;g&gt;&lt;path class="glyph" d="M 364.50006 184.50061 L 386.99985 207.00037 L 396 198.00002 L 373.50003 175.50066 Z M 403.02295 181.97704 C 400.38693 179.34099 396.11307 179.34099 393.47702 181.97704 C 390.841 184.61307 390.841 188.88695 393.47702 191.52298 C 396.11307 194.15903 400.38693 194.15903 403.02295 191.52298 C 405.65906 188.88695 405.65906 184.61307 403.02295 181.97704 M 414.27298 170.72704 C 411.63693 168.091 407.36307 168.091 404.72702 170.72704 C 402.091 173.36308 402.091 177.63693 404.72702 180.27296 C 407.36307 182.90901 411.63693 182.90901 414.27298 180.27296 C 416.90903 177.63693 416.90903 173.36308 414.27298 170.72704 M 425.523 159.47705 C 422.88696 156.841 418.6131 156.841 415.97705 159.47705 C 413.341 162.11308 413.341 166.38695 415.97705 169.02295 C 418.6131 171.65903 422.88696 171.65903 425.523 169.02295 C 428.15906 166.38695 428.15906 162.11308 425.523 159.47705" fill="#020202"/&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;</pre>
</div>
<div title="robots" server.title="robots" server.page.revision="1521875" server.etag="&quot;system-info_public/robots/1521875:508615008e70fee5b1d4a0a1d4a3846a8aa7167b&quot;" modifier="None" creator="None" server.workspace="bags/system-info_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="system-info_public" server.permissions="read" server.content-type="text/plain" modified="20130530195018" created="20130530195018" tags="excludeLists excludeSearch" _hash="35333958a4be1e71dffd5f713170f41c5785914a">
<pre>User-agent: *
Disallow: /bags
Disallow: /recipes</pre>
</div>
<div title="CLinking" server.title="CLinking" server.page.revision="1311150" server.etag="&quot;willrogers_public/CLinking/1311150:bb0c86fc058e45103be515bd3741b769547f3d02&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20130717142614" created="20120609211834" tags="c programming" _hash="f6b874681a7326a6aab010fa4079bce5dcbb0bcf">
<pre>!!Include

One way to define an interface is for {{{local.h}}} to contain the declarations for the functions defined in {{{local.c}}}.  You don't have to include both.
* {{{ #include "local.h" }}}
* {{{ #include "local.c" }}}
* {{{ #include &lt;library.h&gt; }}}

In order to use a function in a different file, its 'prototype' has to be declared at the top of the file (also known as a 'forward declaration').  This is a bit like an interface in Java.  Alternatively, you can list these prototypes in a file of the same name but with an h extension.  The names of .c and .h files don't have to match.

The {{{#include}}} directive has the effect of putting the prototypes (generally declared in a header file) at the top of the file, rather than typing out all the prototypes at the the top of the file that uses them.  It also means that a change to the API can be changed in the header file, and not everywhere that the functions are used.

A frequent risk of using header files is that one program may include a certain file more than once.  Defining a function twice causes an error.  This is why you often see {{{#ifndef}}} at the start of a file - it's a trick to make sure that each file is included once.

If you put the header file in angle brackets, the system paths are searched.  Putting it in quotes also adds the current directory.</pre>
</div>
<div title="EpicsQt" server.title="EpicsQt" server.page.revision="1574093" server.etag="&quot;willrogers_public/EpicsQt/1574093:93ec52eb07e3a840cf65a746201ea3502cfebf6f&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20131203153537" created="20131202135539" tags="" _hash="c8d35efa5f30af455ea92572d873982bc56d8e97">
<pre>See QtBasics.

EpicsQt is a GUI framework for EPICS, originally developed at the Australian Light Source.  It is a potential rival for CSS.

Its homepage seems to be on Sourceforge: http://sourceforge.net/projects/epicsqt.

!!Building
The documentation (in the {{{documentation}}} directory) is pretty sketchy.  It says we need Qwt - we've got a version of Qwt built against our version of Qt inside the ~PyQwt build.  Michael thinks we should be able to use it.

!!!!From the tarball
It is not immediately obvious how to build:
* cannot find ~QtXml: add {{{QT += xml}}} to {{{.pro}}} file
* cannot find QNetwork: add {{{QT += network}}} to {{{.pro}}} file
* cannot find {{{alarm.h}}} - is this the epics bit?

!!!!From the exported makefile
This seemed to work a bit better.  It insisted on the definition of Qwt:
{{{
export QWT_INCLUDE_PATH=/dls_sw/prod/tools/RHEL6-x86_64/PyQwt/5-2-0/prefix/include
}}}

I then get the error:
{{{
data/src/QCaObject.cpp: In member function ‘void qcaobject::QCaObject::processData(void*)’:
data/src/QCaObject.cpp:868: error: ‘class QVariantList’ has no member named ‘reserve’
}}}
This is strange, because it definitely seems to have, including in version 4.8.  [QVariantList is just another name for QList&lt;QVariant&gt;, and QList.reserve() exists.]
* http://qt-project.org/doc/qt-4.8/qlist.html
* http://qt-project.org/doc/qt-4.8/qvariant.html
!!Prebuilt
Matt has a prebuilt copy in {{{software/epicsqt}}}.</pre>
</div>
<div title="BuyingACar" server.title="BuyingACar" server.page.revision="363770" server.etag="&quot;willrogers_public/BuyingACar/363770:31da276ffea7f1bf6f8379e60fde84fe90e3c650&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20111010213014" created="20111010202008" tags="" _hash="4427ebcfa250ec0127e41e17af405ebc4a618036">
<pre>When I bought the Polo, I wasn't really very sure how to do it.

Having done so, with hindsight I can see a lot of things I could have done differently, mainly because of the disadvantages of the car once I got it.

So:

!!Check everything works
It really wouldn't take very long.  I didn't check:
* Aircon (fine)
* Lights (fine)
* Central locking (fine, though there's no remote central locking.
* Interior lights (fine)
* Mirror motors (fine)
* Dials (fine, I think)
** I noticed that it needed a service
** She told me about the airbag light
* Check the mileage

I checked the electric windows, but she did warn me about them.

!!Check the bodywork carefully
* I saw damage to the corner
* I missed damage to the driver's mirror
* I missed the damage to the mesh

!!Think about modifications
* The gearstick was obvious
* The alloy should have been
* The spoiler should have been too really

</pre>
</div>
<div title="AllCosts" server.title="AllCosts" server.page.revision="995638" server.etag="&quot;willrogers_private/AllCosts/995638:a92941b8cd522271d528fb8d25c03d79ba3810b8&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_private" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_private" server.permissions="read, write, create, delete" server.content-type="" modified="20121216135258" created="20120103195610" tags="" _hash="bd777b8440064c9cf6a17420ab163f83afc47f26">
<pre>I'm going to try and keep track of all my expenditure for a while.

For the car, see PoloCosts and Google Docs.
For skiing, see SkiingCosts.
For rent, bills and food we're keeping track on paper.
Mobile is about £15 a month.
Spotify is £10 a month.

!!Cash
15/1 £50
5/2 £50
7/3 £50 (7/3 Indian Dream £15, 10/3 Trichy Dosa £15, 11/3 Mario's pizza £8)
18/3 £50 (18/3 £5 car wash)
30/3 £30 (£20 swimming)
14/4 £50 (£25 Alex's party, £11.50 takeaway at John's)
19/4 £50 (£10 Red Star, £13 pub lunch, £6 swimming)
1/5 £50
12/5 £40
25/5 £50 (+£2 fee)
8/6 £50
21/6 £50
28/7 £20
8/8 £50 (£15 Med meal w/ Ben Mc)
17/8 £50
19/8 £50
28/8 £50
15/9 £50
30/9 £50
13/10 £50
19/10 £50
28/10 £50

!!Clothes
1/1 £8 boxers * 3
2/2 £30 Musto trousers
4/2 £16 Puma trainers
4/2 £25 Tog24 top
26/2 £6.75 boxers * 3
26/2 £3.75 t-shirt
24/3 £15 polo shirt
6/4 £4 boxers * 3
7/5 £5 t-shirt
7/5 £17 Craghoppers fleece
9/6 £25 Gap chinos
9/6 £2.50 t-shirt
16/6 £12 Primark cargos
3/7 £40 smart shoes
3/7 £25 smart shirt
30/9 £20 Brown fleece
1/10 £10 Merrell t-shirt
1/10 £30 Merrell fleece
1/10 £9 Karrimor shirt
3/10 £18 Gola shoes
3/10 £16.50 Berghaus t-shirt
4/10 £7 Sprayway trousers
11/10 £4 football shorts
17/11 £33 Gap jeans
17/11 £9 H&amp;M t-shirts * 2
17/11 £10 pyjama bottoms
17/11 £13 Craghoppers fleece
17/11 £8 H&amp;M boxers * 3


!!Holidays
£200 for the windmill, but we paid in 2011
£830 for skiing, lots of which was in 2011.  See SkiingCosts.
CampingFrance

!!!Stuff
2/1 £5 car mount for phone
4/1 £40 radio (reduced from £80)
4/1 £35 32GB microsd card
5/1 £85 running shoes
7/1 £6 4GB microsd card w/adapter
11/2 £14 fan heater
24/3 £4 wallet
1/4 £4 half a float
9/6 £15 TV aerial
9/6 £4 Free, card games book
29/6 £15 X-Mini speaker
16/8 £5 Humble Bundle
14/8 £5 Paddington
14/8 £17 Liz food presents
12/9 £10 16GB SD card
17/9 £17 pillow
1/10 £10 new travel towel
11/10 £25 football boots
11/10 £5 boot bag
11/10 £4 goggles mk. 2
29/10 £5 GT85 + bike bell
2/11 £400 laptop
5/11 £15 Windows 8
17/11 £5 Humble Bundle

!!!Other
2/1 £5.30 M6 Toll 
3/1 £33.50 half marathon
15/1 £8 cinema
10/2 £12.50 Action for blind people
10/2 £12.50 Oxfam
17/2 £6 sending sat-nav home
8/3 Extra £5 phone credit for leaving internet on
24/3 £25 crossword club
Mar £68 food while Liz was away
21/4 £15 sailing
24/4 £10 Oxfam
15/5 £76 Olympics tickets
15/6 £6 Chambers android app
6/8 £30 Hyde park Olympics trip
10/8 £8 pub lunch
11/8 £16.50 Olympics train
3/9 £25 30 contact lenses
5/10 £50 Alan Davies tickets
17/10 £33.50 half marathon mk. 2
18/10 £30 eye test + contact lens check
19/10 £14 return train to Oxford
16/12 £3 Chambers Thesaurus App

17/1 2nd half of tooth £350
</pre>
</div>
<div title="LocateCygwin" server.title="LocateCygwin" server.page.revision="364288" server.etag="&quot;willrogers_public/LocateCygwin/364288:caabe6d49cfbfdcfcf838b6f9cb827f2186ba982&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110524142533" created="20110524142409" tags="" _hash="f03f5e7edbdb1468721de07ee149f9d563b1351e">
<pre>Can you use updatedb and locate in Cygwin to search for things in Windows?

This is the command I used:
{{{
hgs15624@esclt041 ~
$ updatedb --localpaths='/ /cygdrive/c' --prunepaths='/cygdrive/c/cygwin /cygdrive/z'
}}}
</pre>
</div>
<div title="IfcfgEth0" server.title="IfcfgEth0" server.page.revision="937559" server.etag="&quot;willrogers_public/IfcfgEth0/937559:9d2514bbb17896ee0c1f1d4221b3aa4deec59faa&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20121110115404" created="20121110115404" tags="" _hash="b8c079c0b10b8c024633047c1b2dd2d94446e484">
<pre>{{{
DEVICE="eth0"
BOOTPROTO="static"
HWADDR="00:15:5D:01:E0:05"
NM_CONTROLLED="yes"
ONBOOT="yes"
DNS1="192.168.1.254"
IPADDR="192.168.1.10"
TYPE="Ethernet"
UUID="b282b7e4-ca5a-4316-8d3d-92fdcd04d19a"
}}}</pre>
</div>
<div title="ToothIssue" server.title="ToothIssue" server.page.revision="364816" server.etag="&quot;willrogers_public/ToothIssue/364816:32d6aafa2d33e543f21d00c904ce56e7f7a220b4&quot;" modifier="willrogers" creator="willrogers" server.workspace="bags/willrogers_public" server.type="tiddlyweb" server.host="http://willrogers.tiddlyspace.com" server.recipe="willrogers_private" server.bag="willrogers_public" server.permissions="read, write, create, delete" server.content-type="" modified="20110927120658" created="20110927120658" tags="" _hash="b2e745995bf717de9c02ca3d0f6eeccde9fec9a2">
<pre>
I saw Laura a couple of months ago.  She presented me with a number of options:

* Refilling or whatever it requires to save the tooth - ~50% chance of success
** May or may not be on the NHS; if not maybe £700
* Bridge - £2-300
* Implant - expensive

I just rang up to see how referrals would work.  I got a slightly different message.

* I should probably come and have a review anyway
* A referral to the NHS would cost £47
** The treatment then should be free
* A referral to a private practice would be free, but then the procedure might cost £800
** I should be seen within a week</pre>
</div>
</div>
<!--POST-STOREAREA-->
<!--POST-BODY-START-->

<!--POST-BODY-END-->
<script id="jsArea" type="text/javascript">
//<![CDATA[

//
// Please note:
//
// * This code is designed to be readable but for compactness it only includes brief comments. You can see fuller comments
//   in the project repository at https://github.com/TiddlyWiki/tiddlywiki
//
// * You should never need to modify this source code directly. TiddlyWiki is carefully designed to allow deep customisation
//   without changing the core code. Please consult the development group at http://groups.google.com/group/TiddlyWikiDev
//
// JSLint directives
/*global jQuery:false, version:false */
/*jslint bitwise:true, browser:true, confusion:true, eqeq:true, evil:true, forin:true, maxerr:100, plusplus:true, regexp:true, sloppy:true, sub:true, undef:true, unparam:true, vars:true, white:true */
//--
//-- Configuration repository
//--

// Miscellaneous options
var config = {
	numRssItems: 20, // Number of items in the RSS feed
	animDuration: 400, // Duration of UI animations in milliseconds
	cascadeFast: 20, // Speed for cascade animations (higher == slower)
	cascadeSlow: 60, // Speed for EasterEgg cascade animations
	cascadeDepth: 5, // Depth of cascade animation
	locale: "en" // W3C language tag
};

// Hashmap of alternative parsers for the wikifier
config.parsers = {};

// Adaptors
config.adaptors = {};
config.defaultAdaptor = null;

// Backstage tasks
config.tasks = {};

// Annotations
config.annotations = {};

// Custom fields to be automatically added to new tiddlers
config.defaultCustomFields = {};

// Messages
config.messages = {
	messageClose: {},
	dates: {},
	tiddlerPopup: {}
};

// Options that can be set in the options panel and/or cookies
config.options = {
	chkRegExpSearch: false,
	chkCaseSensitiveSearch: false,
	chkIncrementalSearch: true,
	chkAnimate: true,
	chkSaveBackups: true,
	chkAutoSave: false,
	chkGenerateAnRssFeed: false,
	chkSaveEmptyTemplate: false,
	chkOpenInNewWindow: true,
	chkToggleLinks: false,
	chkHttpReadOnly: true,
	chkForceMinorUpdate: false,
	chkConfirmDelete: true,
	chkInsertTabs: false,
	chkUsePreForStorage: true, // Whether to use <pre> format for storage
	chkDisplayInstrumentation: false,
	txtBackupFolder: "",
	txtEditorFocus: "text",
	txtMainTab: "tabTimeline",
	txtMoreTab: "moreTabAll",
	txtMaxEditRows: "30",
	txtFileSystemCharSet: "UTF-8",
	txtTheme: ""
	};
config.optionsDesc = {};

config.optionsSource = {};

// Default tiddler templates
var DEFAULT_VIEW_TEMPLATE = 1;
var DEFAULT_EDIT_TEMPLATE = 2;
config.tiddlerTemplates = {
	1: "ViewTemplate",
	2: "EditTemplate"
};

// More messages (rather a legacy layout that should not really be like this)
config.views = {
	wikified: {
		tag: {}
	},
	editor: {
		tagChooser: {}
	}
};

// Backstage tasks
config.backstageTasks = ["save","importTask","tweak","upgrade","plugins"];

// Extensions
config.extensions = {};

// Macros; each has a 'handler' member that is inserted later
config.macros = {
	today: {},
	version: {},
	search: {sizeTextbox: 15},
	tiddler: {},
	tag: {},
	tags: {},
	tagging: {},
	timeline: {},
	allTags: {},
	list: {
		all: {},
		missing: {},
		orphans: {},
		shadowed: {},
		touched: {},
		filter: {}
	},
	closeAll: {},
	permaview: {},
	saveChanges: {},
	slider: {},
	option: {},
	options: {},
	newTiddler: {},
	newJournal: {},
	tabs: {},
	gradient: {},
	message: {},
	view: {defaultView: "text"},
	edit: {},
	tagChooser: {},
	toolbar: {},
	plugins: {},
	refreshDisplay: {},
	importTiddlers: {},
	upgrade: {
		source: "http://tiddlywiki-releases.tiddlyspace.com/upgrade",
		backupExtension: "pre.core.upgrade"
	},
	sync: {},
	annotations: {}
};

// Commands supported by the toolbar macro
config.commands = {
	closeTiddler: {},
	closeOthers: {},
	editTiddler: {},
	saveTiddler: {hideReadOnly: true},
	cancelTiddler: {},
	deleteTiddler: {hideReadOnly: true},
	permalink: {},
	references: {type: "popup"},
	jump: {type: "popup"},
	syncing: {type: "popup"},
	fields: {type: "popup"}
};

// Control of macro parameter evaluation
config.evaluateMacroParameters = "all";

// Basic regular expressions
config.textPrimitives = {
	upperLetter: "[A-Z\u00c0-\u00de\u0150\u0170]",
	lowerLetter: "[a-z0-9_\\-\u00df-\u00ff\u0151\u0171]",
	anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]",
	anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]"
};
if(!((new RegExp("[\u0150\u0170]","g")).test("\u0150"))) {
	config.textPrimitives = {
		upperLetter: "[A-Z\u00c0-\u00de]",
		lowerLetter: "[a-z0-9_\\-\u00df-\u00ff]",
		anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff]",
		anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff]"
	};
}
config.textPrimitives.sliceSeparator = "::";
config.textPrimitives.sectionSeparator = "##";
config.textPrimitives.urlPattern = "(?:file|http|https|mailto|ftp|irc|news|data):[^\\s'\"]+(?:/|\\b)";
config.textPrimitives.unWikiLink = "~";
config.textPrimitives.wikiLink = "(?:(?:" + config.textPrimitives.upperLetter + "+" +
	config.textPrimitives.lowerLetter + "+" +
	config.textPrimitives.upperLetter +
	config.textPrimitives.anyLetter + "*)|(?:" +
	config.textPrimitives.upperLetter + "{2,}" +
	config.textPrimitives.lowerLetter + "+))";

config.textPrimitives.cssLookahead = "(?:(" + config.textPrimitives.anyLetter + "+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:(" + config.textPrimitives.anyLetter + "+):([^;\\|\\n]+);)";
config.textPrimitives.cssLookaheadRegExp = new RegExp(config.textPrimitives.cssLookahead,"mg");

config.textPrimitives.brackettedLink = "\\[\\[([^\\]]+)\\]\\]";
config.textPrimitives.titledBrackettedLink = "\\[\\[([^\\[\\]\\|]+)\\|([^\\[\\]\\|]+)\\]\\]";
config.textPrimitives.tiddlerForcedLinkRegExp = new RegExp("(?:" + config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")","mg");
config.textPrimitives.tiddlerAnyLinkRegExp = new RegExp("("+ config.textPrimitives.wikiLink + ")|(?:" +
	config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")","mg");

config.glyphs = {
	currBrowser: null,
	browsers: [],
	codes: {}
};

//--
//-- Shadow tiddlers
//--

config.shadowTiddlers = {
	StyleSheet: "",
	MarkupPreHead: "",
	MarkupPostHead: "",
	MarkupPreBody: "",
	MarkupPostBody: "",
	TabTimeline: '<<timeline>>',
	TabAll: '<<list all>>',
	TabTags: '<<allTags excludeLists>>',
	TabMoreMissing: '<<list missing>>',
	TabMoreOrphans: '<<list orphans>>',
	TabMoreShadowed: '<<list shadowed>>',
	AdvancedOptions: '<<options>>',
	PluginManager: '<<plugins>>',
	SystemSettings: '',
	ToolbarCommands: '|~ViewToolbar|closeTiddler closeOthers +editTiddler > fields syncing permalink references jump|\n|~EditToolbar|+saveTiddler -cancelTiddler deleteTiddler|',
	WindowTitle: '<<tiddler SiteTitle>> - <<tiddler SiteSubtitle>>'
};

// Browser detection... In a very few places, there's nothing else for it but to know what browser we're using.
config.userAgent = navigator.userAgent.toLowerCase();
config.browser = {
	isIE: config.userAgent.indexOf("msie") != -1 && config.userAgent.indexOf("opera") == -1,
	isGecko: navigator.product == "Gecko" && config.userAgent.indexOf("WebKit") == -1,
	ieVersion: /MSIE (\d{1,2}.\d)/i.exec(config.userAgent), // config.browser.ieVersion[1], if it exists, will be the IE version string, eg "6.0"
	isSafari: config.userAgent.indexOf("applewebkit") != -1,
	isBadSafari: !((new RegExp("[\u0150\u0170]","g")).test("\u0150")),
	firefoxDate: /gecko\/(\d{8})/i.exec(config.userAgent), // config.browser.firefoxDate[1], if it exists, will be Firefox release date as "YYYYMMDD"
	isOpera: config.userAgent.indexOf("opera") != -1,
	isChrome: config.userAgent.indexOf('chrome') > -1,
	isLinux: config.userAgent.indexOf("linux") != -1,
	isUnix: config.userAgent.indexOf("x11") != -1,
	isMac: config.userAgent.indexOf("mac") != -1,
	isWindows: config.userAgent.indexOf("win") != -1
};

merge(config.glyphs,{
	browsers: [
		function() {return config.browser.isIE;},
		function() {return true;}
		],
	codes: {
		downTriangle: ["\u25BC","\u25BE"],
		downArrow: ["\u2193","\u2193"],
		bentArrowLeft: ["\u2190","\u21A9"],
		bentArrowRight: ["\u2192","\u21AA"]
	}
});

//--
//-- Translateable strings
//--

// Strings in "double quotes" should be translated; strings in 'single quotes' should be left alone

merge(config.options,{
	txtUserName: "YourName"});

merge(config.tasks,{
	save: {text: "save", tooltip: "Save your changes to this TiddlyWiki"},
	importTask: {text: "import", tooltip: "Import tiddlers and plugins from other TiddlyWiki files and servers", content: '<<importTiddlers>>'},
	tweak: {text: "tweak", tooltip: "Tweak the appearance and behaviour of TiddlyWiki", content: '<<options>>'},
	upgrade: {text: "upgrade", tooltip: "Upgrade TiddlyWiki core code", content: '<<upgrade>>'},
	plugins: {text: "plugins", tooltip: "Manage installed plugins", content: '<<plugins>>'}
});

// Options that can be set in the options panel and/or cookies
merge(config.optionsDesc,{
	txtUserName: "Username for signing your edits",
	chkRegExpSearch: "Enable regular expressions for searches",
	chkCaseSensitiveSearch: "Case-sensitive searching",
	chkIncrementalSearch: "Incremental key-by-key searching",
	chkAnimate: "Enable animations",
	chkSaveBackups: "Keep backup file when saving changes",
	chkAutoSave: "Automatically save changes",
	chkGenerateAnRssFeed: "Generate an RSS feed when saving changes",
	chkSaveEmptyTemplate: "Generate an empty template when saving changes",
	chkOpenInNewWindow: "Open external links in a new window",
	chkToggleLinks: "Clicking on links to open tiddlers causes them to close",
	chkHttpReadOnly: "Hide editing features when viewed over HTTP",
	chkForceMinorUpdate: "Don't update modifier username and date when editing tiddlers",
	chkConfirmDelete: "Require confirmation before deleting tiddlers",
	chkInsertTabs: "Use the tab key to insert tab characters instead of moving between fields",
	txtBackupFolder: "Name of folder to use for backups",
	txtMaxEditRows: "Maximum number of rows in edit boxes",
	txtTheme: "Name of the theme to use",
	txtFileSystemCharSet: "Default character set for saving changes (Firefox/Mozilla only)"});

merge(config.messages,{
	customConfigError: "Problems were encountered loading plugins. See PluginManager for details",
	pluginError: "Error: %0",
	pluginDisabled: "Not executed because disabled via 'systemConfigDisable' tag",
	pluginForced: "Executed because forced via 'systemConfigForce' tag",
	pluginVersionError: "Not executed because this plugin needs a newer version of TiddlyWiki",
	nothingSelected: "Nothing is selected. You must select one or more items first",
	savedSnapshotError: "It appears that this TiddlyWiki has been incorrectly saved. Please see http://www.tiddlywiki.com/#Download for details",
	subtitleUnknown: "(unknown)",
	undefinedTiddlerToolTip: "The tiddler '%0' doesn't yet exist",
	shadowedTiddlerToolTip: "The tiddler '%0' doesn't yet exist, but has a pre-defined shadow value",
	tiddlerLinkTooltip: "%0 - %1, %2",
	externalLinkTooltip: "External link to %0",
	noTags: "There are no tagged tiddlers",
	notFileUrlError: "You need to save this TiddlyWiki to a file before you can save changes",
	cantSaveError: "It's not possible to save changes. Possible reasons include:\n- your browser doesn't support saving (Firefox, Internet Explorer, Safari and Opera all work if properly configured)\n- the pathname to your TiddlyWiki file contains illegal characters\n- the TiddlyWiki HTML file has been moved or renamed",
	invalidFileError: "The original file '%0' does not appear to be a valid TiddlyWiki",
	backupSaved: "Backup saved",
	backupFailed: "Failed to save backup file",
	rssSaved: "RSS feed saved",
	rssFailed: "Failed to save RSS feed file",
	emptySaved: "Empty template saved",
	emptyFailed: "Failed to save empty template file",
	mainSaved: "Main TiddlyWiki file saved",
	mainDownload: "Downloading/saving main TiddlyWiki file",
	mainDownloadManual: "RIGHT CLICK HERE to download/save main TiddlyWiki file",
	mainFailed: "Failed to save main TiddlyWiki file. Your changes have not been saved",
	macroError: "Error in macro <<%0>>",
	macroErrorDetails: "Error while executing macro <<%0>>:\n%1",
	missingMacro: "No such macro",
	overwriteWarning: "A tiddler named '%0' already exists. Choose OK to overwrite it",
	unsavedChangesWarning: "WARNING! There are unsaved changes in TiddlyWiki\n\nChoose OK to save\nChoose CANCEL to discard",
	confirmExit: "--------------------------------\n\nThere are unsaved changes in TiddlyWiki. If you continue you will lose those changes\n\n--------------------------------",
	saveInstructions: "SaveChanges",
	unsupportedTWFormat: "Unsupported TiddlyWiki format '%0'",
	tiddlerSaveError: "Error when saving tiddler '%0'",
	tiddlerLoadError: "Error when loading tiddler '%0'",
	wrongSaveFormat: "Cannot save with storage format '%0'. Using standard format for save.",
	invalidFieldName: "Invalid field name %0",
	fieldCannotBeChanged: "Field '%0' cannot be changed",
	loadingMissingTiddler: "Attempting to retrieve the tiddler '%0' from the '%1' server at:\n\n'%2' in the workspace '%3'",
	upgradeDone: "The upgrade to version %0 is now complete\n\nClick 'OK' to reload the newly upgraded TiddlyWiki",
	invalidCookie: "Invalid cookie '%0'"});

merge(config.messages.messageClose,{
	text: "close",
	tooltip: "close this message area"});

config.messages.backstage = {
	open: {text: "backstage", tooltip: "Open the backstage area to perform authoring and editing tasks"},
	close: {text: "close", tooltip: "Close the backstage area"},
	prompt: "backstage: ",
	decal: {
		edit: {text: "edit", tooltip: "Edit the tiddler '%0'"}
	}
};

config.messages.listView = {
	tiddlerTooltip: "Click for the full text of this tiddler",
	previewUnavailable: "(preview not available)"
};

config.messages.dates.months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"];
config.messages.dates.days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
config.messages.dates.shortMonths = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
config.messages.dates.shortDays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
// suffixes for dates, eg "1st","2nd","3rd"..."30th","31st"
config.messages.dates.daySuffixes = ["st","nd","rd","th","th","th","th","th","th","th",
		"th","th","th","th","th","th","th","th","th","th",
		"st","nd","rd","th","th","th","th","th","th","th",
		"st"];
config.messages.dates.am = "am";
config.messages.dates.pm = "pm";

merge(config.messages.tiddlerPopup,{
	});

merge(config.views.wikified.tag,{
	labelNoTags: "no tags",
	labelTags: "tags: ",
	openTag: "Open tag '%0'",
	tooltip: "Show tiddlers tagged with '%0'",
	openAllText: "Open all",
	openAllTooltip: "Open all of these tiddlers",
	popupNone: "No other tiddlers tagged with '%0'"});

merge(config.views.wikified,{
	defaultText: "The tiddler '%0' doesn't yet exist. Double-click to create it",
	defaultModifier: "(missing)",
	shadowModifier: "(built-in shadow tiddler)",
	dateFormat: "DD MMM YYYY",
	createdPrompt: "created"});

merge(config.views.editor,{
	tagPrompt: "Type tags separated with spaces, [[use double square brackets]] if necessary, or add existing",
	defaultText: "Type the text for '%0'"});

merge(config.views.editor.tagChooser,{
	text: "tags",
	tooltip: "Choose existing tags to add to this tiddler",
	popupNone: "There are no tags defined",
	tagTooltip: "Add the tag '%0'"});

merge(config.messages,{
	sizeTemplates:
		[
		{unit: 1024*1024*1024, template: "%0\u00a0GB"},
		{unit: 1024*1024, template: "%0\u00a0MB"},
		{unit: 1024, template: "%0\u00a0KB"},
		{unit: 1, template: "%0\u00a0B"}
		]});

merge(config.macros.search,{
	label: "search",
	prompt: "Search this TiddlyWiki",
	placeholder: "",
	accessKey: "F",
	successMsg: "%0 tiddlers found matching %1",
	failureMsg: "No tiddlers found matching %0"});

merge(config.macros.tagging,{
	label: "tagging: ",
	labelNotTag: "not tagging",
	tooltip: "List of tiddlers tagged with '%0'"});

merge(config.macros.timeline,{
	dateFormat: "DD MMM YYYY"});

merge(config.macros.allTags,{
	tooltip: "Show tiddlers tagged with '%0'",
	noTags: "There are no tagged tiddlers"});

config.macros.list.all.prompt = "All tiddlers in alphabetical order";
config.macros.list.missing.prompt = "Tiddlers that have links to them but are not defined";
config.macros.list.orphans.prompt = "Tiddlers that are not linked to from any other tiddlers";
config.macros.list.shadowed.prompt = "Tiddlers shadowed with default contents";
config.macros.list.touched.prompt = "Tiddlers that have been modified locally";

merge(config.macros.closeAll,{
	label: "close all",
	prompt: "Close all displayed tiddlers (except any that are being edited)"});

merge(config.macros.permaview,{
	label: "permaview",
	prompt: "Link to an URL that retrieves all the currently displayed tiddlers"});

merge(config.macros.saveChanges,{
	label: "save changes",
	prompt: "Save all tiddlers to create a new TiddlyWiki",
	accessKey: "S"});

merge(config.macros.newTiddler,{
	label: "new tiddler",
	prompt: "Create a new tiddler",
	title: "New Tiddler",
	accessKey: "N"});

merge(config.macros.newJournal,{
	label: "new journal",
	prompt: "Create a new tiddler from the current date and time",
	accessKey: "J"});

merge(config.macros.options,{
	wizardTitle: "Tweak advanced options",
	step1Title: "These options are saved in cookies in your browser",
	step1Html: "<input type='hidden' name='markList'></input><br><input type='checkbox' checked='false' name='chkUnknown'>Show unknown options</input>",
	unknownDescription: "//(unknown)//",
	listViewTemplate: {
		columns: [
			{name: 'Option', field: 'option', title: "Option", type: 'String'},
			{name: 'Description', field: 'description', title: "Description", type: 'WikiText'},
			{name: 'Name', field: 'name', title: "Name", type: 'String'}
			],
		rowClasses: [
			{className: 'lowlight', field: 'lowlight'}
			]}
	});

merge(config.macros.plugins,{
	wizardTitle: "Manage plugins",
	step1Title: "Currently loaded plugins",
	step1Html: "<input type='hidden' name='markList'></input>", // DO NOT TRANSLATE
	skippedText: "(This plugin has not been executed because it was added since startup)",
	noPluginText: "There are no plugins installed",
	confirmDeleteText: "Are you sure you want to delete these plugins:\n\n%0",
	removeLabel: "remove systemConfig tag",
	removePrompt: "Remove systemConfig tag",
	deleteLabel: "delete",
	deletePrompt: "Delete these tiddlers forever",
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Description', field: 'Description', title: "Description", type: 'String'},
			{name: 'Version', field: 'Version', title: "Version", type: 'String'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Forced', field: 'forced', title: "Forced", tag: 'systemConfigForce', type: 'TagCheckbox'},
			{name: 'Disabled', field: 'disabled', title: "Disabled", tag: 'systemConfigDisable', type: 'TagCheckbox'},
			{name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No"},
			{name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String'},
			{name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK"},
			{name: 'Log', field: 'log', title: "Log", type: 'StringList'}
			],
		rowClasses: [
			{className: 'error', field: 'error'},
			{className: 'warning', field: 'warning'}
			]},
	listViewTemplateReadOnly: {
		columns: [
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Description', field: 'Description', title: "Description", type: 'String'},
			{name: 'Version', field: 'Version', title: "Version", type: 'String'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No"},
			{name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String'},
			{name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK"},
			{name: 'Log', field: 'log', title: "Log", type: 'StringList'}
			],
		rowClasses: [
			{className: 'error', field: 'error'},
			{className: 'warning', field: 'warning'}
			]}
	});

merge(config.macros.toolbar,{
	moreLabel: "more",
	morePrompt: "Show additional commands",
	lessLabel: "less",
	lessPrompt: "Hide additional commands",
	separator: "|"
	});

merge(config.macros.refreshDisplay,{
	label: "refresh",
	prompt: "Redraw the entire TiddlyWiki display"
	});

merge(config.macros.importTiddlers,{
	readOnlyWarning: "You cannot import into a read-only TiddlyWiki file. Try opening it from a file:// URL",
	wizardTitle: "Import tiddlers from another file or server",
	step1Title: "Step 1: Locate the server or TiddlyWiki file",
	step1Html: "Specify the type of the server: <select name='selTypes'><option value=''>Choose...</option></select><br>Enter the URL or pathname here: <input type='text' size=50 name='txtPath'><br>...or browse for a file: <input type='file' size=50 name='txtBrowse'><br><hr>...or select a pre-defined feed: <select name='selFeeds'><option value=''>Choose...</option></select>",
	openLabel: "open",
	openPrompt: "Open the connection to this file or server",
	statusOpenHost: "Opening the host",
	statusGetWorkspaceList: "Getting the list of available workspaces",
	step2Title: "Step 2: Choose the workspace",
	step2Html: "Enter a workspace name: <input type='text' size=50 name='txtWorkspace'><br>...or select a workspace: <select name='selWorkspace'><option value=''>Choose...</option></select>",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel this import",
	statusOpenWorkspace: "Opening the workspace",
	statusGetTiddlerList: "Getting the list of available tiddlers",
	errorGettingTiddlerList: "Error getting list of tiddlers, click Cancel to try again",
	errorGettingTiddlerListHttp404: "Error retrieving tiddlers from url, please ensure the url exists. Click Cancel to try again.",
	errorGettingTiddlerListHttp: "Error retrieving tiddlers from url, please ensure this url exists and is <a href='http://enable-cors.org/'>CORS</a> enabled",
	errorGettingTiddlerListFile: "Error retrieving tiddlers from local file, please make sure the file is in the same directory as your TiddlyWiki. Click Cancel to try again.",
	step3Title: "Step 3: Choose the tiddlers to import",
	step3Html: "<input type='hidden' name='markList'></input><br><input type='checkbox' checked='true' name='chkSync'>Keep these tiddlers linked to this server so that you can synchronise subsequent changes</input><br><input type='checkbox' name='chkSave'>Save the details of this server in a 'systemServer' tiddler called:</input> <input type='text' size=25 name='txtSaveTiddler'>",
	importLabel: "import",
	importPrompt: "Import these tiddlers",
	confirmOverwriteText: "Are you sure you want to overwrite these tiddlers:\n\n%0",
	step4Title: "Step 4: Importing %0 tiddler(s)",
	step4Html: "<input type='hidden' name='markReport'></input>", // DO NOT TRANSLATE
	doneLabel: "done",
	donePrompt: "Close this wizard",
	statusDoingImport: "Importing tiddlers",
	statusDoneImport: "All tiddlers imported",
	systemServerNamePattern: "%2 on %1",
	systemServerNamePatternNoWorkspace: "%1",
	confirmOverwriteSaveTiddler: "The tiddler '%0' already exists. Click 'OK' to overwrite it with the details of this server, or 'Cancel' to leave it unchanged",
	serverSaveTemplate: "|''Type:''|%0|\n|''URL:''|%1|\n|''Workspace:''|%2|\n\nThis tiddler was automatically created to record the details of this server",
	serverSaveModifier: "(System)",
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Tags', field: 'tags', title: "Tags", type: 'Tags'}
			],
		rowClasses: [
			]}
	});

merge(config.macros.upgrade,{
	wizardTitle: "Upgrade TiddlyWiki core code",
	step1Title: "Update or repair this TiddlyWiki to the latest release",
	step1Html: "You are about to upgrade to the latest release of the TiddlyWiki core code (from <a href='%0' class='externalLink' target='_blank'>%1</a>). Your content will be preserved across the upgrade.<br><br>Note that core upgrades have been known to interfere with older plugins. If you run into problems with the upgraded file, see <a href='http://www.tiddlywiki.org/wiki/CoreUpgrades' class='externalLink' target='_blank'>http://www.tiddlywiki.org/wiki/CoreUpgrades</a>",
	errorCantUpgrade: "Unable to upgrade this TiddlyWiki. You can only perform upgrades on TiddlyWiki files stored locally",
	errorNotSaved: "You must save changes before you can perform an upgrade",
	step2Title: "Confirm the upgrade details",
	step2Html_downgrade: "You are about to downgrade to TiddlyWiki version %0 from %1.<br><br>Downgrading to an earlier version of the core code is not recommended",
	step2Html_restore: "This TiddlyWiki appears to be already using the latest version of the core code (%0).<br><br>You can continue to upgrade anyway to ensure that the core code hasn't been corrupted or damaged",
	step2Html_upgrade: "You are about to upgrade to TiddlyWiki version %0 from %1",
	upgradeLabel: "upgrade",
	upgradePrompt: "Prepare for the upgrade process",
	statusPreparingBackup: "Preparing backup",
	statusSavingBackup: "Saving backup file",
	errorSavingBackup: "There was a problem saving the backup file",
	statusLoadingCore: "Loading core code",
	errorLoadingCore: "Error loading the core code",
	errorCoreFormat: "Error with the new core code",
	statusSavingCore: "Saving the new core code",
	statusReloadingCore: "Reloading the new core code",
	startLabel: "start",
	startPrompt: "Start the upgrade process",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel the upgrade process",
	step3Title: "Upgrade cancelled",
	step3Html: "You have cancelled the upgrade process"
	});

merge(config.macros.annotations,{
	});

merge(config.commands.closeTiddler,{
	text: "close",
	tooltip: "Close this tiddler"});

merge(config.commands.closeOthers,{
	text: "close others",
	tooltip: "Close all other tiddlers"});

merge(config.commands.editTiddler,{
	text: "edit",
	tooltip: "Edit this tiddler",
	readOnlyText: "view",
	readOnlyTooltip: "View the source of this tiddler"});

merge(config.commands.saveTiddler,{
	text: "done",
	tooltip: "Save changes to this tiddler"});

merge(config.commands.cancelTiddler,{
	text: "cancel",
	tooltip: "Undo changes to this tiddler",
	warning: "Are you sure you want to abandon your changes to '%0'?",
	readOnlyText: "done",
	readOnlyTooltip: "View this tiddler normally"});

merge(config.commands.deleteTiddler,{
	text: "delete",
	tooltip: "Delete this tiddler",
	warning: "Are you sure you want to delete '%0'?"});

merge(config.commands.permalink,{
	text: "permalink",
	tooltip: "Permalink for this tiddler"});

merge(config.commands.references,{
	text: "references",
	tooltip: "Show tiddlers that link to this one",
	popupNone: "No references"});

merge(config.commands.jump,{
	text: "jump",
	tooltip: "Jump to another open tiddler"});

merge(config.commands.fields,{
	text: "fields",
	tooltip: "Show the extended fields of this tiddler",
	emptyText: "There are no extended fields for this tiddler",
	listViewTemplate: {
		columns: [
			{name: 'Field', field: 'field', title: "Field", type: 'String'},
			{name: 'Value', field: 'value', title: "Value", type: 'String'}
			],
		rowClasses: [
			],
		buttons: [
			]}});

merge(config.shadowTiddlers,{
	DefaultTiddlers: "[[GettingStarted]]",
	MainMenu: "[[GettingStarted]]",
	SiteTitle: "My TiddlyWiki",
	SiteSubtitle: "a reusable non-linear personal web notebook",
	SiteUrl: "",
	SideBarOptions: '<<search>><<closeAll>><<permaview>><<newTiddler>><<newJournal "DD MMM YYYY" "journal">><<saveChanges>><<slider chkSliderOptionsPanel OptionsPanel "options \u00bb" "Change TiddlyWiki advanced options">>',
	SideBarTabs: '<<tabs txtMainTab "Timeline" "Timeline" TabTimeline "All" "All tiddlers" TabAll "Tags" "All tags" TabTags "More" "More lists" TabMore>>',
	TabMore: '<<tabs txtMoreTab "Missing" "Missing tiddlers" TabMoreMissing "Orphans" "Orphaned tiddlers" TabMoreOrphans "Shadowed" "Shadowed tiddlers" TabMoreShadowed>>'
	});

merge(config.annotations,{
	AdvancedOptions: "This shadow tiddler provides access to several advanced options",
	ColorPalette: "These values in this shadow tiddler determine the colour scheme of the ~TiddlyWiki user interface",
	DefaultTiddlers: "The tiddlers listed in this shadow tiddler will be automatically displayed when ~TiddlyWiki starts up",
	EditTemplate: "The HTML template in this shadow tiddler determines how tiddlers look while they are being edited",
	GettingStarted: "This shadow tiddler provides basic usage instructions",
	ImportTiddlers: "This shadow tiddler provides access to importing tiddlers",
	MainMenu: "This shadow tiddler is used as the contents of the main menu in the left-hand column of the screen",
	MarkupPreHead: "This tiddler is inserted at the top of the <head> section of the TiddlyWiki HTML file",
	MarkupPostHead: "This tiddler is inserted at the bottom of the <head> section of the TiddlyWiki HTML file",
	MarkupPreBody: "This tiddler is inserted at the top of the <body> section of the TiddlyWiki HTML file",
	MarkupPostBody: "This tiddler is inserted at the end of the <body> section of the TiddlyWiki HTML file immediately after the script block",
	OptionsPanel: "This shadow tiddler is used as the contents of the options panel slider in the right-hand sidebar",
	PageTemplate: "The HTML template in this shadow tiddler determines the overall ~TiddlyWiki layout",
	PluginManager: "This shadow tiddler provides access to the plugin manager",
	SideBarOptions: "This shadow tiddler is used as the contents of the option panel in the right-hand sidebar",
	SideBarTabs: "This shadow tiddler is used as the contents of the tabs panel in the right-hand sidebar",
	SiteSubtitle: "This shadow tiddler is used as the second part of the page title",
	SiteTitle: "This shadow tiddler is used as the first part of the page title",
	SiteUrl: "This shadow tiddler should be set to the full target URL for publication",
	StyleSheetColors: "This shadow tiddler contains CSS definitions related to the color of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheet: "This tiddler can contain custom CSS definitions",
	StyleSheetLayout: "This shadow tiddler contains CSS definitions related to the layout of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheetLocale: "This shadow tiddler contains CSS definitions related to the translation locale",
	StyleSheetPrint: "This shadow tiddler contains CSS definitions for printing",
	SystemSettings: "This tiddler is used to store configuration options for this TiddlyWiki document",
	TabAll: "This shadow tiddler contains the contents of the 'All' tab in the right-hand sidebar",
	TabMore: "This shadow tiddler contains the contents of the 'More' tab in the right-hand sidebar",
	TabMoreMissing: "This shadow tiddler contains the contents of the 'Missing' tab in the right-hand sidebar",
	TabMoreOrphans: "This shadow tiddler contains the contents of the 'Orphans' tab in the right-hand sidebar",
	TabMoreShadowed: "This shadow tiddler contains the contents of the 'Shadowed' tab in the right-hand sidebar",
	TabTags: "This shadow tiddler contains the contents of the 'Tags' tab in the right-hand sidebar",
	TabTimeline: "This shadow tiddler contains the contents of the 'Timeline' tab in the right-hand sidebar",
	ToolbarCommands: "This shadow tiddler determines which commands are shown in tiddler toolbars",
	ViewTemplate: "The HTML template in this shadow tiddler determines how tiddlers look"
	});
//--
//-- Main
//--

var params = null; // Command line parameters
var store = null; // TiddlyWiki storage
var story = null; // Main story
var formatter = null; // Default formatters for the wikifier
var anim = typeof Animator == "function" ? new Animator() : null; // Animation engine
var readOnly = false; // Whether we're in readonly mode
var highlightHack = null; // Embarrassing hack department...
var hadConfirmExit = false; // Don't warn more than once
var safeMode = false; // Disable all plugins and cookies
var showBackstage; // Whether to include the backstage area
var installedPlugins = []; // Information filled in when plugins are executed
var startingUp = false; // Whether we're in the process of starting up
var pluginInfo,tiddler; // Used to pass information to plugins in loadPlugins()

// Whether this file can be saved back to the same location [Preemption]
window.allowSave = window.allowSave || function(l)
{
	return true;
}

// Whether this file is being viewed locally
window.isLocal = function()
{
	return (document.location.protocol == "file:");
}

// Whether to use the JavaSaver applet
var useJavaSaver = window.isLocal() && (config.browser.isSafari || config.browser.isOpera);

// Allow preemption code a chance to tweak config and useJavaSaver [Preemption]
if (window.tweakConfig) window.tweakConfig();

if(!window || !window.console) {
	console = {tiddlywiki:true,log:function(message) {displayMessage(message);}};
}

// Starting up
function main()
{
	window.originalHTML=recreateOriginal();

	var t10,t9,t8,t7,t6,t5,t4,t3,t2,t1,t0 = new Date();
	startingUp = true;
	var doc = jQuery(document);
	jQuery.noConflict();
	window.onbeforeunload = function(e) {if(window.confirmExit) return confirmExit();};
	params = getParameters();
	if(params)
		params = params.parseParams("open",null,false);
	store = new TiddlyWiki({config:config});
	invokeParamifier(params,"oninit");
	story = new Story("tiddlerDisplay","tiddler");
	addEvent(document,"click",Popup.onDocumentClick);
	saveTest();
	var s;
	for(s=0; s<config.notifyTiddlers.length; s++)
		store.addNotification(config.notifyTiddlers[s].name,config.notifyTiddlers[s].notify);
	t1 = new Date();
	loadShadowTiddlers();
	doc.trigger("loadShadows");
	t2 = new Date();
	store.loadFromDiv("storeArea","store",true);
	doc.trigger("loadTiddlers");
	loadOptions();
	t3 = new Date();
	invokeParamifier(params,"onload");
	t4 = new Date();
	readOnly = window.isLocal() ? false : config.options.chkHttpReadOnly;
	var pluginProblem = loadPlugins("systemConfig");
	doc.trigger("loadPlugins");
	t5 = new Date();
	formatter = new Formatter(config.formatters);
	invokeParamifier(params,"onconfig");
	story.switchTheme(config.options.txtTheme);
	showBackstage = showBackstage !== undefined ? showBackstage : !readOnly;
	t6 = new Date();
	var m;
	for(m in config.macros) {
		if(config.macros[m].init)
			config.macros[m].init();
	}
	t7 = new Date();
	store.notifyAll();
	t8 = new Date();
	restart();
	refreshDisplay();
	t9 = new Date();
	if(pluginProblem) {
		story.displayTiddler(null,"PluginManager");
		displayMessage(config.messages.customConfigError);
	}
	if(showBackstage)
		backstage.init();
	t10 = new Date();
	if(config.options.chkDisplayInstrumentation) {
		displayMessage("LoadShadows " + (t2-t1) + " ms");
		displayMessage("LoadFromDiv " + (t3-t2) + " ms");
		displayMessage("LoadPlugins " + (t5-t4) + " ms");
		displayMessage("Macro init " + (t7-t6) + " ms");
		displayMessage("Notify " + (t8-t7) + " ms");
		displayMessage("Restart " + (t9-t8) + " ms");
		displayMessage("Total: " + (t10-t0) + " ms");
	}
	startingUp = false;
	doc.trigger("startup");
}

// Called on unload. All functions called conditionally since they themselves may have been unloaded.
function unload()
{
	if(window.checkUnsavedChanges)
		checkUnsavedChanges();
	if(window.scrubNodes)
		scrubNodes(document.body);
}

// Restarting
function restart()
{
	invokeParamifier(params,"onstart");
	if(story.isEmpty()) {
		story.displayDefaultTiddlers();
	}
	window.scrollTo(0,0);
}

function saveTest()
{
	var s = document.getElementById("saveTest");
	if(s.hasChildNodes())
		alert(config.messages.savedSnapshotError);
	s.appendChild(document.createTextNode("savetest"));
}

function loadShadowTiddlers()
{
	var shadows = new TiddlyWiki();
	shadows.loadFromDiv("shadowArea","shadows",true);
	shadows.forEachTiddler(function(title,tiddler){config.shadowTiddlers[title] = tiddler.text;});
}

function loadPlugins(tag)
{
	if(safeMode)
		return false;
	var tiddlers = store.getTaggedTiddlers(tag);
	tiddlers.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : 1);});
	var toLoad = [];
	var nLoaded = 0;
	var map = {};
	var nPlugins = tiddlers.length;
	installedPlugins = [];
	var i;
	for(i=0; i<nPlugins; i++) {
		var p = getPluginInfo(tiddlers[i]);
		installedPlugins[i] = p;
		var n = p.Name || p.title;
		if(n)
			map[n] = p;
		n = p.Source;
		if(n)
			map[n] = p;
	}
	var visit = function(p) {
		if(!p || p.done)
			return;
		p.done = 1;
		var reqs = p.Requires;
		if(reqs) {
			reqs = reqs.readBracketedList();
			var i;
			for(i=0; i<reqs.length; i++)
				visit(map[reqs[i]]);
		}
		toLoad.push(p);
	};
	for(i=0; i<nPlugins; i++)
		visit(installedPlugins[i]);
	for(i=0; i<toLoad.length; i++) {
		p = toLoad[i];
		pluginInfo = p;
		tiddler = p.tiddler;
		if(isPluginExecutable(p)) {
			if(isPluginEnabled(p)) {
				p.executed = true;
				var startTime = new Date();
				try {
					if(tiddler.text)
						window.eval(tiddler.text);
					nLoaded++;
				} catch(ex) {
					p.log.push(config.messages.pluginError.format([exceptionText(ex)]));
					p.error = true;
					if(!console.tiddlywiki) {
						console.log("error evaluating " + tiddler.title, ex);
					}
				}
				pluginInfo.startupTime = String((new Date()) - startTime) + "ms";
			} else {
				nPlugins--;
			}
		} else {
			p.warning = true;
		}
	}
	return nLoaded != nPlugins;
}

function getPluginInfo(tiddler)
{
	var p = store.getTiddlerSlices(tiddler.title,["Name","Description","Version","Requires","CoreVersion","Date","Source","Author","License","Browsers"]);
	p.tiddler = tiddler;
	p.title = tiddler.title;
	p.log = [];
	return p;
}

// Check that a particular plugin is valid for execution
function isPluginExecutable(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigForce")) {
		plugin.log.push(config.messages.pluginForced);
		return true;
	}
	if(plugin["CoreVersion"]) {
		var coreVersion = plugin["CoreVersion"].split(".");
		var w = parseInt(coreVersion[0],10) - version.major;
		if(w == 0 && coreVersion[1])
			w = parseInt(coreVersion[1],10) - version.minor;
		if(w == 0 && coreVersion[2])
			w = parseInt(coreVersion[2],10) - version.revision;
		if(w > 0) {
			plugin.log.push(config.messages.pluginVersionError);
			return false;
		}
	}
	return true;
}

function isPluginEnabled(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigDisable")) {
		plugin.log.push(config.messages.pluginDisabled);
		return false;
	}
	return true;
}

//--
//-- Paramifiers
//--

function getParameters()
{
	var p = null;
	if(window.location.hash) {
		p = decodeURIComponent(window.location.hash.substr(1));
		if(config.browser.firefoxDate != null && config.browser.firefoxDate[1] < "20051111")
			p = convertUTF8ToUnicode(p);
	}
	return p;
}

function invokeParamifier(params,handler)
{
	if(!params || params.length == undefined || params.length <= 1)
		return;
	var i;
	for(i=1; i<params.length; i++) {
		var p = config.paramifiers[params[i].name];
		if(p && p[handler] instanceof Function)
			p[handler](params[i].value);
		else {
			var h = config.optionHandlers[params[i].name.substr(0,3)];
			if(h && h.set instanceof Function)
				h.set(params[i].name,params[i].value);
		}
	}
}

config.paramifiers = {};

config.paramifiers.start = {
	oninit: function(v) {
		safeMode = v.toLowerCase() == "safe";
	}
};

config.paramifiers.open = {
	onstart: function(v) {
		if(!readOnly || store.tiddlerExists(v) || store.isShadowTiddler(v))
			story.displayTiddler("bottom",v,null,false,null);
	}
};

config.paramifiers.story = {
	onstart: function(v) {
		var list = store.getTiddlerText(v,"").parseParams("open",null,false);
		invokeParamifier(list,"onstart");
	}
};

config.paramifiers.search = {
	onstart: function(v) {
		story.search(v,false,false);
	}
};

config.paramifiers.searchRegExp = {
	onstart: function(v) {
		story.prototype.search(v,false,true);
	}
};

config.paramifiers.tag = {
	onstart: function(v) {
		story.displayTiddlers(null,store.filterTiddlers("[tag["+v+"]]"),null,false,null);
	}
};

config.paramifiers.newTiddler = {
	onstart: function(v) {
		var args = v.parseParams("anon", null, null)[0];
		var title = args.title ? args.title[0] : v;
		var customFields = args.fields ? args.fields[0] : null;
		if(!readOnly) {
			story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,customFields);
			story.focusTiddler(title,"text");
			var i,tags = args.tag || [];
			for(i=0;i<tags.length;i++) {
				story.setTiddlerTag(title,tags[i],+1);
			}
		}
	}
};

config.paramifiers.newJournal = {
	onstart: function(v) {
		if(!readOnly) {
			var now = new Date();
			var title = now.formatString(v.trim());
			story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE);
			story.focusTiddler(title,"text");
		}
	}
};

config.paramifiers.readOnly = {
	onconfig: function(v) {
		var p = v.toLowerCase();
		readOnly = p == "yes" ? true : (p == "no" ? false : readOnly);
	}
};

config.paramifiers.theme = {
	onconfig: function(v) {
		story.switchTheme(v);
	}
};

config.paramifiers.upgrade = {
	onstart: function(v) {
		upgradeFrom(v);
	}
};

config.paramifiers.recent= {
	onstart: function(v) {
		var titles=[];
		var i,tiddlers=store.getTiddlers("modified","excludeLists").reverse();
		for(i=0; i<v && i<tiddlers.length; i++)
			titles.push(tiddlers[i].title);
		story.displayTiddlers(null,titles);
	}
};

config.paramifiers.filter = {
	onstart: function(v) {
		story.displayTiddlers(null,store.filterTiddlers(v),null,false);
	}
};

//--
//-- Formatter helpers
//--

function Formatter(formatters)
{
	var n;
	this.formatters = [];
	var pattern = [];
	for(n=0; n<formatters.length; n++) {
		pattern.push("(" + formatters[n].match + ")");
		this.formatters.push(formatters[n]);
	}
	this.formatterRegExp = new RegExp(pattern.join("|"),"mg");
}

config.formatterHelpers = {

	createElementAndWikify: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,this.element),this.termRegExp);
	},

	inlineCssHelper: function(w)
	{
		var styles = [];
		config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			var s,v;
			if(lookaheadMatch[1]) {
				s = lookaheadMatch[1].unDash();
				v = lookaheadMatch[2];
			} else {
				s = lookaheadMatch[3].unDash();
				v = lookaheadMatch[4];
			}
			if(s=="bgcolor")
				s = "backgroundColor";
			if(s=="float")
				s = "cssFloat";
			styles.push({style: s, value: v});
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
			config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		}
		return styles;
	},

	applyCssHelper: function(e,styles)
	{
		var t;
		for(t=0; t< styles.length; t++) {
			try {
				e.style[styles[t].style] = styles[t].value;
			} catch (ex) {
			}
		}
	},

	enclosedTextHelper: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var text = lookaheadMatch[1];
			if(config.browser.isIE && (config.browser.ieVersion[1] < 10))
				text = text.replace(/\n/g,"\r");
			createTiddlyElement(w.output,this.element,null,null,text);
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
		}
	},

	isExternalLink: function(link)
	{
		if(store.tiddlerExists(link) || store.isShadowTiddler(link)) {
			return false;
		}
		var urlRegExp = new RegExp(config.textPrimitives.urlPattern,"mg");
		if(urlRegExp.exec(link)) {
			return true;
		}
		if(link.indexOf(".")!=-1 || link.indexOf("\\")!=-1 || link.indexOf("/")!=-1 || link.indexOf("#")!=-1) {
			return true;
		}
		return false;
	}

};

//--
//-- Standard formatters
//--

config.formatters = [
{
	name: "table",
	match: "^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",
	lookaheadRegExp: /^\|([^\n]*)\|([fhck]?)$/mg,
	rowTermRegExp: /(\|(?:[fhck]?)$\n?)/mg,
	cellRegExp: /(?:\|([^\n\|]*)\|)|(\|[fhck]?$\n?)/mg,
	cellTermRegExp: /((?:\x20*)\|)/mg,
	rowTypes: {"c":"caption", "h":"thead", "":"tbody", "f":"tfoot"},
	handler: function(w)
	{
		var table = createTiddlyElement(w.output,"table",null,"twtable");
		var prevColumns = [];
		var currRowType = null;
		var rowContainer;
		var rowCount = 0;
		var onmouseover = function() {jQuery(this).addClass("hoverRow");};
		var onmouseout = function() {jQuery(this).removeClass("hoverRow");};
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			var nextRowType = lookaheadMatch[2];
			if(nextRowType == "k") {
				table.className = lookaheadMatch[1];
				w.nextMatch += lookaheadMatch[0].length+1;
			} else {
				if(nextRowType != currRowType) {
					rowContainer = createTiddlyElement(table,this.rowTypes[nextRowType]);
					currRowType = nextRowType;
				}
				if(currRowType == "c") {
					// Caption
					w.nextMatch++;
					if(rowContainer != table.firstChild)
						table.insertBefore(rowContainer,table.firstChild);
					rowContainer.setAttribute("align",rowCount == 0?"top":"bottom");
					w.subWikifyTerm(rowContainer,this.rowTermRegExp);
				} else {
					var theRow = createTiddlyElement(rowContainer,"tr",null,rowCount%2?"oddRow":"evenRow");
					theRow.onmouseover = onmouseover;
					theRow.onmouseout = onmouseout;
					this.rowHandler(w,theRow,prevColumns);
					rowCount++;
				}
			}
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
	},
	rowHandler: function(w,e,prevColumns)
	{
		var col = 0;
		var colSpanCount = 1;
		var prevCell = null;
		this.cellRegExp.lastIndex = w.nextMatch;
		var cellMatch = this.cellRegExp.exec(w.source);
		while(cellMatch && cellMatch.index == w.nextMatch) {
			if(cellMatch[1] == "~") {
				// Rowspan
				var last = prevColumns[col];
				if(last) {
					last.rowSpanCount++;
					last.element.setAttribute("rowspan",last.rowSpanCount);
					last.element.setAttribute("rowSpan",last.rowSpanCount); // Needed for IE
					last.element.valign = "center";
					if(colSpanCount > 1) {
						last.element.setAttribute("colspan",colSpanCount);
						last.element.setAttribute("colSpan",colSpanCount); // Needed for IE
						colSpanCount = 1;
					}
				}
				w.nextMatch = this.cellRegExp.lastIndex-1;
			} else if(cellMatch[1] == ">") {
				// Colspan
				colSpanCount++;
				w.nextMatch = this.cellRegExp.lastIndex-1;
			} else if(cellMatch[2]) {
				// End of row
				if(prevCell && colSpanCount > 1) {
					prevCell.setAttribute("colspan",colSpanCount);
					prevCell.setAttribute("colSpan",colSpanCount); // Needed for IE
				}
				w.nextMatch = this.cellRegExp.lastIndex;
				break;
			} else {
				// Cell
				w.nextMatch++;
				var styles = config.formatterHelpers.inlineCssHelper(w);
				var spaceLeft = false;
				var chr = w.source.substr(w.nextMatch,1);
				while(chr == " ") {
					spaceLeft = true;
					w.nextMatch++;
					chr = w.source.substr(w.nextMatch,1);
				}
				var cell;
				if(chr == "!") {
					cell = createTiddlyElement(e,"th");
					w.nextMatch++;
				} else {
					cell = createTiddlyElement(e,"td");
				}
				prevCell = cell;
				prevColumns[col] = {rowSpanCount:1,element:cell};
				if(colSpanCount > 1) {
					cell.setAttribute("colspan",colSpanCount);
					cell.setAttribute("colSpan",colSpanCount); // Needed for IE
					colSpanCount = 1;
				}
				config.formatterHelpers.applyCssHelper(cell,styles);
				w.subWikifyTerm(cell,this.cellTermRegExp);
				if(w.matchText.substr(w.matchText.length-2,1) == " ") // spaceRight
					cell.align = spaceLeft ? "center" : "left";
				else if(spaceLeft)
					cell.align = "right";
				w.nextMatch--;
			}
			col++;
			this.cellRegExp.lastIndex = w.nextMatch;
			cellMatch = this.cellRegExp.exec(w.source);
		}
	}
},

{
	name: "heading",
	match: "^!{1,6}",
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,"h" + w.matchLength),this.termRegExp);
	}
},

{
	name: "list",
	match: "^(?:[\\*#;:]+)",
	lookaheadRegExp: /^(?:(?:(\*)|(#)|(;)|(:))+)/mg,
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		var stack = [w.output];
		var currLevel = 0, currType = null;
		var listLevel, listType, itemType, baseType;
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			if(lookaheadMatch[1]) {
				listType = "ul";
				itemType = "li";
			} else if(lookaheadMatch[2]) {
				listType = "ol";
				itemType = "li";
			} else if(lookaheadMatch[3]) {
				listType = "dl";
				itemType = "dt";
			} else if(lookaheadMatch[4]) {
				listType = "dl";
				itemType = "dd";
			}
			if(!baseType)
				baseType = listType;
			listLevel = lookaheadMatch[0].length;
			w.nextMatch += lookaheadMatch[0].length;
			var t;
			if(listLevel > currLevel) {
				for(t=currLevel; t<listLevel; t++) {
					var target = (currLevel == 0) ? stack[stack.length-1] : stack[stack.length-1].lastChild;
					stack.push(createTiddlyElement(target,listType));
				}
			} else if(listType!=baseType && listLevel==1) {
				w.nextMatch -= lookaheadMatch[0].length;
				return;
			} else if(listLevel < currLevel) {
				for(t=currLevel; t>listLevel; t--)
					stack.pop();
			} else if(listLevel == currLevel && listType != currType) {
				stack.pop();
				stack.push(createTiddlyElement(stack[stack.length-1].lastChild,listType));
			}
			currLevel = listLevel;
			currType = listType;
			var e = createTiddlyElement(stack[stack.length-1],itemType);
			w.subWikifyTerm(e,this.termRegExp);
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
	}
},

{
	name: "quoteByBlock",
	match: "^<<<\\n",
	termRegExp: /(^<<<(\n|$))/mg,
	element: "blockquote",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "quoteByLine",
	match: "^>+",
	lookaheadRegExp: /^>+/mg,
	termRegExp: /(\n)/mg,
	element: "blockquote",
	handler: function(w)
	{
		var stack = [w.output];
		var currLevel = 0;
		var newLevel = w.matchLength;
		var t,matched;
		do {
			if(newLevel > currLevel) {
				for(t=currLevel; t<newLevel; t++)
					stack.push(createTiddlyElement(stack[stack.length-1],this.element));
			} else if(newLevel < currLevel) {
				for(t=currLevel; t>newLevel; t--)
					stack.pop();
			}
			currLevel = newLevel;
			w.subWikifyTerm(stack[stack.length-1],this.termRegExp);
			createTiddlyElement(stack[stack.length-1],"br");
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			matched = lookaheadMatch && lookaheadMatch.index == w.nextMatch;
			if(matched) {
				newLevel = lookaheadMatch[0].length;
				w.nextMatch += lookaheadMatch[0].length;
			}
		} while(matched);
	}
},

{
	name: "rule",
	match: "^----+$\\n?|<hr ?/?>\\n?",
	handler: function(w)
	{
		createTiddlyElement(w.output,"hr");
	}
},

{
	name: "monospacedByLine",
	match: "^(?:/\\*\\{\\{\\{\\*/|\\{\\{\\{|//\\{\\{\\{|<!--\\{\\{\\{-->)\\n",
	element: "pre",
	handler: function(w)
	{
		switch(w.matchText) {
		case "/*{{{*/\n": // CSS
			this.lookaheadRegExp = /\/\*\{\{\{\*\/\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\*\}\}\}\*\/$\n?)/mg;
			break;
		case "{{{\n": // monospaced block
			this.lookaheadRegExp = /^\{\{\{\n((?:^[^\n]*\n)+?)(^\f*\}\}\}$\n?)/mg;
			break;
		case "//{{{\n": // plugin
			this.lookaheadRegExp = /^\/\/\{\{\{\n\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\/\}\}\}$\n?)/mg;
			break;
		case "<!--{{{-->\n": //template
			this.lookaheadRegExp = /<!--\{\{\{-->\n*((?:^[^\n]*\n)+?)(\n*^\f*<!--\}\}\}-->$\n?)/mg;
			break;
		default:
			break;
		}
		config.formatterHelpers.enclosedTextHelper.call(this,w);
	}
},

{
	name: "wikifyComment",
	match: "^(?:/\\*\\*\\*|<!---)\\n",
	handler: function(w)
	{
		var termRegExp = (w.matchText == "/***\n") ? (/(^\*\*\*\/\n)/mg) : (/(^--->\n)/mg);
		w.subWikifyTerm(w.output,termRegExp);
	}
},

{
	name: "macro",
	match: "<<",
	lookaheadRegExp: /<<([^>\s]+)(?:\s*)((?:[^>]|(?:>(?!>)))*)>>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart && lookaheadMatch[1]) {
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			invokeMacro(w.output,lookaheadMatch[1],lookaheadMatch[2],w,w.tiddler);
		}
	}
},

{
	name: "prettyLink",
	match: "\\[\\[",
	lookaheadRegExp: /\[\[(.*?)(?:\|(~)?(.*?))?\]\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var e;
			var text = lookaheadMatch[1];
			if(lookaheadMatch[3]) {
				// Pretty bracketted link
				var link = lookaheadMatch[3];
				e = (!lookaheadMatch[2] && config.formatterHelpers.isExternalLink(link)) ?
						createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);
			} else {
				// Simple bracketted link
				e = createTiddlyLink(w.output,text,false,null,w.isStatic,w.tiddler);
			}
			createTiddlyText(e,text);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "wikiLink",
	match: config.textPrimitives.unWikiLink+"?"+config.textPrimitives.wikiLink,
	handler: function(w)
	{
		if(w.matchText.substr(0,1) == config.textPrimitives.unWikiLink) {
			w.outputText(w.output,w.matchStart+1,w.nextMatch);
			return;
		}
		if(w.matchStart > 0) {
			var preRegExp = new RegExp(config.textPrimitives.anyLetterStrict,"mg");
			preRegExp.lastIndex = w.matchStart-1;
			var preMatch = preRegExp.exec(w.source);
			if(preMatch.index == w.matchStart-1) {
				w.outputText(w.output,w.matchStart,w.nextMatch);
				return;
			}
		}
		if(w.autoLinkWikiWords || store.isShadowTiddler(w.matchText)) {
			var link = createTiddlyLink(w.output,w.matchText,false,null,w.isStatic,w.tiddler);
			w.outputText(link,w.matchStart,w.nextMatch);
		} else {
			w.outputText(w.output,w.matchStart,w.nextMatch);
		}
	}
},

{
	name: "urlLink",
	match: config.textPrimitives.urlPattern,
	handler: function(w)
	{
		w.outputText(createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch);
	}
},

{
	name: "image",
	match: "\\[[<>]?[Ii][Mm][Gg]\\[",
	lookaheadRegExp: /\[([<]?)(>?)[Ii][Mm][Gg]\[(?:([^\|\]]+)\|)?([^\[\]\|]+)\](?:\[([^\]]*)\])?\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var e = w.output;
			if(lookaheadMatch[5]) {
				var link = lookaheadMatch[5];
				e = config.formatterHelpers.isExternalLink(link) ? createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);
				jQuery(e).addClass("imageLink");
			}
			var img = createTiddlyElement(e,"img");
			if(lookaheadMatch[1])
				img.align = "left";
			else if(lookaheadMatch[2])
				img.align = "right";
			if(lookaheadMatch[3]) {
				img.title = lookaheadMatch[3];
				img.setAttribute("alt",lookaheadMatch[3]);
			}
			img.src = lookaheadMatch[4];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "html",
	match: "<[Hh][Tt][Mm][Ll]>",
	lookaheadRegExp: /<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			createTiddlyElement(w.output,"span").innerHTML = lookaheadMatch[1];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "commentByBlock",
	match: "/%",
	lookaheadRegExp: /\/%((?:.|\n)*?)%\//mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
			w.nextMatch = this.lookaheadRegExp.lastIndex;
	}
},

{
	name: "characterFormat",
	match: "''|//|__|\\^\\^|~~|--(?!\\s|$)|\\{\\{\\{",
	handler: function(w)
	{
		switch(w.matchText) {
		case "''":
			w.subWikifyTerm(w.output.appendChild(document.createElement("strong")),/('')/mg);
			break;
		case "//":
			w.subWikifyTerm(createTiddlyElement(w.output,"em"),/(\/\/)/mg);
			break;
		case "__":
			w.subWikifyTerm(createTiddlyElement(w.output,"u"),/(__)/mg);
			break;
		case "^^":
			w.subWikifyTerm(createTiddlyElement(w.output,"sup"),/(\^\^)/mg);
			break;
		case "~~":
			w.subWikifyTerm(createTiddlyElement(w.output,"sub"),/(~~)/mg);
			break;
		case "--":
			w.subWikifyTerm(createTiddlyElement(w.output,"strike"),/(--)/mg);
			break;
		case "{{{":
			var lookaheadRegExp = /\{\{\{((?:.|\n)*?)\}\}\}/mg;
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source);
			if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
				createTiddlyElement(w.output,"code",null,null,lookaheadMatch[1]);
				w.nextMatch = lookaheadRegExp.lastIndex;
			}
			break;
		}
	}
},

{
	name: "customFormat",
	match: "@@|\\{\\{",
	handler: function(w)
	{
		switch(w.matchText) {
		case "@@":
			var e = createTiddlyElement(w.output,"span");
			var styles = config.formatterHelpers.inlineCssHelper(w);
			if(styles.length == 0)
				e.className = "marked";
			else
				config.formatterHelpers.applyCssHelper(e,styles);
			w.subWikifyTerm(e,/(@@)/mg);
			break;
		case "{{":
			var lookaheadRegExp = /\{\{[\s]*([\w]+[\s\w]*)[\s]*\{(\n?)/mg;
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source);
			if(lookaheadMatch) {
				w.nextMatch = lookaheadRegExp.lastIndex;
				e = createTiddlyElement(w.output,lookaheadMatch[2] == "\n" ? "div" : "span",null,lookaheadMatch[1]);
				w.subWikifyTerm(e,/(\}\}\})/mg);
			}
			break;
		}
	}
},

{
	name: "mdash",
	match: "--",
	handler: function(w)
	{
		createTiddlyElement(w.output,"span").innerHTML = "&mdash;";
	}
},

{
	name: "lineBreak",
	match: "\\n|<br ?/?>",
	handler: function(w)
	{
		createTiddlyElement(w.output,"br");
	}
},

{
	name: "rawText",
	match: "\"{3}|<nowiki>",
	lookaheadRegExp: /(?:\"{3}|<nowiki>)((?:.|\n)*?)(?:\"{3}|<\/nowiki>)/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			createTiddlyElement(w.output,"span",null,null,lookaheadMatch[1]);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "htmlEntitiesEncoding",
	match: "(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)",
	handler: function(w)
	{
		createTiddlyElement(w.output,"span").innerHTML = w.matchText;
	}
}

];

//--
//-- Wikifier
//--

function getParser(tiddler,format)
{
	if(tiddler) {
		if(!format)
			format = tiddler.fields["wikiformat"];
		var i;
		if(format) {
			for(i in config.parsers) {
				if(format == config.parsers[i].format)
					return config.parsers[i];
			}
		} else {
			for(i in config.parsers) {
				if(tiddler.isTagged(config.parsers[i].formatTag))
					return config.parsers[i];
			}
		}
	}
	return formatter;
}

function Wikifier(source,formatter,highlightRegExp,tiddler)
{
	this.source = source;
	this.output = null;
	this.formatter = formatter;
	this.nextMatch = 0;
	this.autoLinkWikiWords = tiddler && tiddler.autoLinkWikiWords() == false ? false : true;
	this.highlightRegExp = highlightRegExp;
	this.highlightMatch = null;
	this.isStatic = false;
	if(highlightRegExp) {
		highlightRegExp.lastIndex = 0;
		this.highlightMatch = highlightRegExp.exec(source);
	}
	this.tiddler = tiddler;
}

Wikifier.prototype.wikifyPlain = function()
{
	var e = createTiddlyElement(document.body,"div");
	e.style.display = "none";
	this.subWikify(e);
	var text = jQuery(e).text();
	jQuery(e).remove();
	return text;
};

Wikifier.prototype.subWikify = function(output,terminator)
{
	try {
		if(terminator)
			this.subWikifyTerm(output,new RegExp("(" + terminator + ")","mg"));
		else
			this.subWikifyUnterm(output);
	} catch(ex) {
		showException(ex);
	}
};

Wikifier.prototype.subWikifyUnterm = function(output)
{
	var oldOutput = this.output;
	this.output = output;
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(this.source);
	while(formatterMatch) {
		// Output any text before the match
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		// Set the match parameters for the handler
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		var t;
		for(t=1; t<formatterMatch.length; t++) {
			if(formatterMatch[t]) {
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
		formatterMatch = this.formatter.formatterRegExp.exec(this.source);
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.subWikifyTerm = function(output,terminatorRegExp)
{
	var oldOutput = this.output;
	this.output = output;
	terminatorRegExp.lastIndex = this.nextMatch;
	var terminatorMatch = terminatorRegExp.exec(this.source);
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
	while(terminatorMatch || formatterMatch) {
		if(terminatorMatch && (!formatterMatch || terminatorMatch.index <= formatterMatch.index)) {
			if(terminatorMatch.index > this.nextMatch)
				this.outputText(this.output,this.nextMatch,terminatorMatch.index);
			this.matchText = terminatorMatch[1];
			this.matchLength = terminatorMatch[1].length;
			this.matchStart = terminatorMatch.index;
			this.nextMatch = this.matchStart + this.matchLength;
			this.output = oldOutput;
			return;
		}
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		var t;
		for(t=1; t<formatterMatch.length; t++) {
			if(formatterMatch[t]) {
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
		terminatorRegExp.lastIndex = this.nextMatch;
		terminatorMatch = terminatorRegExp.exec(this.source);
		formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.outputText = function(place,startPos,endPos)
{
	while(this.highlightMatch && (this.highlightRegExp.lastIndex > startPos) && (this.highlightMatch.index < endPos) && (startPos < endPos)) {
		if(this.highlightMatch.index > startPos) {
			createTiddlyText(place,this.source.substring(startPos,this.highlightMatch.index));
			startPos = this.highlightMatch.index;
		}
		var highlightEnd = Math.min(this.highlightRegExp.lastIndex,endPos);
		createTiddlyElement(place,"span",null,"highlight",this.source.substring(startPos,highlightEnd));
		startPos = highlightEnd;
		if(startPos >= this.highlightRegExp.lastIndex)
			this.highlightMatch = this.highlightRegExp.exec(this.source);
	}
	if(startPos < endPos) {
		createTiddlyText(place,this.source.substring(startPos,endPos));
	}
};

function wikify(source,output,highlightRegExp,tiddler)
{
	if(source) {
		var wikifier = new Wikifier(source,getParser(tiddler),highlightRegExp,tiddler);
		var t0 = new Date();
		wikifier.subWikify(output);
		if(tiddler && config.options.chkDisplayInstrumentation)
			displayMessage("wikify:" +tiddler.title+ " in " + (new Date()-t0) + " ms");
	}
}

function wikifyStatic(source,highlightRegExp,tiddler,format)
{
	var e = createTiddlyElement(document.body,"pre");
	e.style.display = "none";
	var html = "";
	if(source && source != "") {
		if(!tiddler)
			tiddler = new Tiddler("temp");
		var wikifier = new Wikifier(source,getParser(tiddler,format),highlightRegExp,tiddler);
		wikifier.isStatic = true;
		wikifier.subWikify(e);
		html = e.innerHTML;
		jQuery(e).remove();
	}
	return html;
}

function wikifyPlainText(text,limit,tiddler)
{
	if(limit > 0)
		text = text.substr(0,limit);
	var wikifier = new Wikifier(text,formatter,null,tiddler);
	return wikifier.wikifyPlain();
}

function highlightify(source,output,highlightRegExp,tiddler)
{
	if(source) {
		var wikifier = new Wikifier(source,formatter,highlightRegExp,tiddler);
		wikifier.outputText(output,0,source.length);
	}
}

//--
//-- Macro definitions
//--

function invokeMacro(place,macro,params,wikifier,tiddler)
{
	try {
		var m = config.macros[macro];
		if(m && m.handler) {
			var tiddlerElem = story.findContainingTiddler(place);
			window.tiddler = tiddlerElem ? store.getTiddler(tiddlerElem.getAttribute("tiddler")) : null;
			window.place = place;
			var allowEval = true;
			if(config.evaluateMacroParameters=="system") {
				if(!tiddler || tiddler.tags.indexOf("systemAllowEval") == -1) {
					allowEval = false;
				}
			}
			m.handler(place,macro,m.noPreParse?null:params.readMacroParams(!allowEval),wikifier,params,tiddler);
		} else {
			createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,config.messages.missingMacro]));
		}
	} catch(ex) {
		createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,ex.toString()]));
	}
}

config.macros.version.handler = function(place)
{
	jQuery("<span/>").text(formatVersion()).appendTo(place);
};

config.macros.today.handler = function(place,macroName,params)
{
	var now = new Date();
	var text = params[0] ? now.formatString(params[0].trim()) : now.toLocaleString();
	jQuery("<span/>").text(text).appendTo(place);
};

config.macros.list.template = "<<view title link>>";
config.macros.list.handler = function(place,macroName,params,wikifier,paramString)
{
	var list = document.createElement("ul");
	jQuery(list).attr({ refresh: "macro", macroName: macroName }).data("params", paramString);
	place.appendChild(list);
	this.refresh(list);
};

config.macros.list.refresh = function(list) {
	var paramString = jQuery(list).data("params");
	var params = paramString.readMacroParams();
	var args = paramString.parseParams("anon", null, null)[0];
	var type = args.anon ? args.anon[0] : "all";
	jQuery(list).empty().addClass("list list-" + type);
	var template = args.template ? store.getTiddlerText(args.template[0]) : false;
	if(!template) {
		template = config.macros.list.template;
	}
	if(this[type].prompt)
		createTiddlyElement(list,"li",null,"listTitle",this[type].prompt);
	var results;
	if(this[type].handler)
		results = this[type].handler(params);
	var t;
	for(t = 0; t < results.length; t++) {
		var li = document.createElement("li");
		list.appendChild(li);
		var tiddler = results[t];
		if(typeof(tiddler) == 'string') { // deal with missing etc..
				tiddler = store.getTiddler(tiddler) || new Tiddler(tiddler);
		}
		wikify(template, li, null, tiddler);
	}
	if(results.length === 0 && args.emptyMessage) {
		jQuery(list).addClass("emptyList");
		jQuery("<li />").text(args.emptyMessage[0]).appendTo(list);
	}
};

config.macros.list.all.handler = function(params)
{
	return store.reverseLookup("tags","excludeLists",false,"title");
};

config.macros.list.missing.handler = function(params)
{
	return store.getMissingLinks();
};

config.macros.list.orphans.handler = function(params)
{
	return store.getOrphans();
};

config.macros.list.shadowed.handler = function(params)
{
	return store.getShadowed();
};

config.macros.list.touched.handler = function(params)
{
	return store.getTouched();
};

config.macros.list.filter.handler = function(params)
{
	var filter = params[1];
	var results = [];
	if(filter) {
		var tiddlers = store.filterTiddlers(filter);
		var t;
		for(t=0; t<tiddlers.length; t++)
			results.push(tiddlers[t].title);
	}
	return results;
};

config.macros.allTags.handler = function(place,macroName,params)
{
	var tags = store.getTags(params[0]);
	var ul = createTiddlyElement(place,"ul");
	if(tags.length == 0)
		createTiddlyElement(ul,"li",null,"listTitle",this.noTags);
	var t;
	for(t=0; t<tags.length; t++) {
		var title = tags[t][0];
		var info = getTiddlyLinkInfo(title);
		var li = createTiddlyElement(ul,"li");
		var btn = createTiddlyButton(li,title + " (" + tags[t][1] + ")",this.tooltip.format([title]),onClickTag,info.classes);
		btn.setAttribute("tag",title);
		btn.setAttribute("refresh","link");
		btn.setAttribute("tiddlyLink",title);
		if(params[1]) {
			btn.setAttribute("sortby",params[1]);
		}
	}
};

var macro = config.macros.timeline;
merge(macro, {
	handler: function(place,macroName,params, wikifier, paramString, tiddler) {
		var container = jQuery("<div />").attr("params", paramString).
			attr("macroName", macroName).appendTo(place)[0];
		macro.refresh(container);
	},
	refresh: function(container) {
		jQuery(container).attr("refresh", "macro").empty();
		var paramString = jQuery(container).attr("params");
		var args = paramString.parseParams("anon", null, null)[0];
		var params = args.anon || [];

		var field = params[0] || "modified";
		var prefix = field.charAt(0);
		var no_prefix_field = prefix === "-" || prefix === "+" ? field.substr(1, field.length) : field;
		var dateFormat = params[2] || this.dateFormat;
		var groupTemplate = macro.groupTemplate.format(no_prefix_field, dateFormat);
		groupTemplate = args.groupTemplate ? store.getTiddlerText(args.groupTemplate[0]) || groupTemplate :
			groupTemplate;

		var itemTemplate = macro.itemTemplate;
		itemTemplate = args.template ? store.getTiddlerText(args.template[0]) || itemTemplate :
			itemTemplate;

		var tiddlers = args.filter ? store.sortTiddlers(store.filterTiddlers(args.filter[0]), field) :
			store.reverseLookup("tags", "excludeLists", false, field);
		var lastGroup = "", ul;
		var last = params[1] ? tiddlers.length-Math.min(tiddlers.length,parseInt(params[1],10)) : 0;
		var t;
		for(t=tiddlers.length-1; t>=last; t--) {
			var tiddler = tiddlers[t];
			var theGroup = wikifyPlainText(groupTemplate,0,tiddler);
			if(typeof(ul) == "undefined" || theGroup != lastGroup) {
				ul = document.createElement("ul");
				jQuery(ul).addClass("timeline");
				container.appendChild(ul);
				createTiddlyElement(ul,"li",null,"listTitle",theGroup);
				lastGroup = theGroup;
			}
			var item = createTiddlyElement(ul,"li",null,"listLink");
			wikify(itemTemplate,item,null,tiddler);
		}
	},
	groupTemplate: "<<view %0 date '%1'>>", 
	itemTemplate: "<<view title link>>"
});

config.macros.tiddler.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var allowEval = true;
	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.length > 0 && config.evaluateMacroParameters == "system") {
		// included tiddler and "system" evaluation required, so check tiddler tagged appropriately
		var title = stack[stack.length-1];
		var pos = title.indexOf(config.textPrimitives.sectionSeparator);
		if(pos != -1) {
			title = title.substr(0,pos); // get the base tiddler title
		}
		var t = store.getTiddler(title);
		if(!t || t.tags.indexOf("systemAllowEval") == -1) {
			allowEval = false;
		}
	}
	params = paramString.parseParams("name",null,allowEval,false,true);
	var names = params[0]["name"];
	var tiddlerName = names[0];
	var className = names[1] || null;
	var args = params[0]["with"];
	var wrapper = createTiddlyElement(place,"span",null,className,null,{
		refresh: "content", tiddler: tiddlerName
	});
	if(args!==undefined)
		wrapper.setAttribute("args","[["+args.join("]] [[")+"]]");
	this.transclude(wrapper,tiddlerName,args);
};

config.macros.tiddler.transclude = function(wrapper,tiddlerName,args)
{
	var text = store.getTiddlerText(tiddlerName);
	if(!text)
		return;
	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.indexOf(tiddlerName) !== -1)
		return;
	stack.push(tiddlerName);
	try {
		if(typeof args == "string")
			args = args.readBracketedList();
		var n = args ? Math.min(args.length,9) : 0;
		var i;
		for(i=0; i<n; i++) {
			var placeholderRE = new RegExp("\\$" + (i + 1),"mg");
			text = text.replace(placeholderRE,args[i]);
		}
		config.macros.tiddler.renderText(wrapper,text,tiddlerName);
	} finally {
		stack.pop();
	}
};

config.macros.tiddler.renderText = function(place,text,tiddlerName)
{
	wikify(text,place,null,store.getTiddler(tiddlerName));
};

config.macros.tiddler.tiddlerStack = [];

config.macros.tag.handler = function(place,macroName,params)
{
	var btn = createTagButton(place,params[0],null,params[1],params[2]);
	if(params[3]) {
		btn.setAttribute('sortby',params[3]);
	}
};

config.macros.tags.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var ul = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title && store.tiddlerExists(title))
		tiddler = store.getTiddler(title);
	var sep = getParam(params,"sep"," ");
	var lingo = config.views.wikified.tag;
	var label = null;
	var t;
	for(t=0; t<tiddler.tags.length; t++) {
		var tag = store.getTiddler(tiddler.tags[t]);
		if(!tag || !tag.tags.contains("excludeLists")) {
			if(!label)
				label = createTiddlyElement(ul,"li",null,"listTitle",lingo.labelTags.format([tiddler.title]));
			createTagButton(createTiddlyElement(ul,"li"),tiddler.tags[t],tiddler.title);
			if(t<tiddler.tags.length-1)
				createTiddlyText(ul,sep);
		}
	}
	if(!label)
		createTiddlyElement(ul,"li",null,"listTitle",lingo.labelNoTags.format([tiddler.title]));
};

config.macros.tagging.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var ul = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title == "" && tiddler instanceof Tiddler)
		title = tiddler.title;
	var sep = getParam(params,"sep"," ");
	ul.setAttribute("title",this.tooltip.format([title]));
	var sortby = getParam(params,"sortBy",false);
	var tagged = store.getTaggedTiddlers(title,sortby);
	var prompt = tagged.length == 0 ? this.labelNotTag : this.label;
	createTiddlyElement(ul,"li",null,"listTitle",prompt.format([title,tagged.length]));
	var t;
	for(t=0; t<tagged.length; t++) {
		createTiddlyLink(createTiddlyElement(ul,"li"),tagged[t].title,true);
		if(t<tagged.length-1)
			createTiddlyText(ul,sep);
	}
};

config.macros.closeAll.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.closeAll.onClick = function(e)
{
	story.closeAllTiddlers();
	return false;
};

config.macros.permaview.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.permaview.onClick = function(e)
{
	story.permaView();
	return false;
};

config.macros.saveChanges.handler = function(place,macroName,params)
{
	if(!readOnly)
		createTiddlyButton(place,params[0] || this.label,params[1] || this.prompt,this.onClick,null,null,this.accessKey);
};

config.macros.saveChanges.onClick = function(e)
{
	saveChanges();
	return false;
};

config.macros.slider.onClickSlider = function(ev)
{
	var n = this.nextSibling;
	var cookie = n.getAttribute("cookie");
	var isOpen = n.style.display != "none";
	if(config.options.chkAnimate && anim && typeof Slider == "function")
		anim.startAnimating(new Slider(n,!isOpen,null,"none"));
	else
		n.style.display = isOpen ? "none" : "block";
	config.options[cookie] = !isOpen;
	saveOption(cookie);
	return false;
};

config.macros.slider.createSlider = function(place,cookie,title,tooltip)
{
	var c = cookie || "";
	createTiddlyButton(place,title,tooltip,this.onClickSlider);
	var panel = createTiddlyElement(null,"div",null,"sliderPanel");
	panel.setAttribute("cookie",c);
	panel.style.display = config.options[c] ? "block" : "none";
	place.appendChild(panel);
	return panel;
};

config.macros.slider.handler = function(place,macroName,params)
{
	var panel = this.createSlider(place,params[0],params[2],params[3]);
	var text = store.getTiddlerText(params[1]);
	panel.setAttribute("refresh","content");
	panel.setAttribute("tiddler",params[1]);
	if(text)
		wikify(text,panel,null,store.getTiddler(params[1]));
};

// <<gradient [[tiddler name]] vert|horiz rgb rgb rgb rgb... >>
config.macros.gradient.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var panel = wikifier ? createTiddlyElement(place,"div",null,"gradient") : place;
	panel.style.position = "relative";
	panel.style.overflow = "hidden";
	panel.style.zIndex = "0";
	if(wikifier) {
		var styles = config.formatterHelpers.inlineCssHelper(wikifier);
		config.formatterHelpers.applyCssHelper(panel,styles);
	}
	params = paramString.parseParams("color");
	var locolors = [], hicolors = [];
	var t;
	for(t=2; t<params.length; t++) {
		var c = params[t].value;
		if(params[t].name == "snap") {
			hicolors[hicolors.length-1] = c;
		} else {
			locolors.push(c);
			hicolors.push(c);
		}
	}
	drawGradient(panel,params[1].value != "vert",locolors,hicolors);
	if(wikifier)
		wikifier.subWikify(panel,">>");
	if(document.all) {
		panel.style.height = "100%";
		panel.style.width = "100%";
	}
};

config.macros.message.handler = function(place,macroName,params)
{
	if(params[0]) {
		var names = params[0].split(".");
		var lookupMessage = function(root,nameIndex) {
				if(root[names[nameIndex]]) {
					if(nameIndex < names.length-1)
						return (lookupMessage(root[names[nameIndex]],nameIndex+1));
					else
						return root[names[nameIndex]];
				} else
					return null;
			};
		var m = lookupMessage(config,0);
		if(m == null)
			m = lookupMessage(window,0);
		createTiddlyText(place,m.toString().format(params.splice(1)));
	}
};


config.macros.view.depth = 0;
config.macros.view.values = [];
config.macros.view.views = {
	text: function(value,place,params,wikifier,paramString,tiddler) {
		highlightify(value,place,highlightHack,tiddler);
	},
	link: function(value,place,params,wikifier,paramString,tiddler) {
		createTiddlyLink(place,value,true);
	},
	wikified: function(value,place,params,wikifier,paramString,tiddler) {
		if(config.macros.view.depth>50)
			return;
		if(config.macros.view.depth>0) {
			if (value==config.macros.view.values[config.macros.view.depth-1]) {
				return;
			}
		}
		config.macros.view.values[config.macros.view.depth] = value;
		config.macros.view.depth++;
		if(params[2])
			value=params[2].unescapeLineBreaks().format([value]);
		wikify(value,place,highlightHack,tiddler);
		config.macros.view.depth--;
		config.macros.view.values[config.macros.view.depth] = null;
	},
	date: function(value,place,params,wikifier,paramString,tiddler) {
		value = Date.convertFromYYYYMMDDHHMM(value);
		createTiddlyText(place,value.formatString(params[2] || config.views.wikified.dateFormat));
	}
};

config.macros.view.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if((tiddler instanceof Tiddler) && params[0]) {
		var value = store.getValue(tiddler,params[0]);
		if(value) {
			var type = params[1] || config.macros.view.defaultView;
			var handler = config.macros.view.views[type];
			if(handler)
				handler(value,place,params,wikifier,paramString,tiddler);
		}
	}
};

config.macros.edit.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var field = params[0];
	var rows = params[1] || 0;
	var defVal = params[2] || '';
	if((tiddler instanceof Tiddler) && field) {
		story.setDirty(tiddler.title,true);
		var e,v;
		if(field != "text" && !rows) {
			e = createTiddlyElement(null,"input",null,null,null,{
				type: "text", edit: field, size: "40", autocomplete: "off"
			});
			e.value = store.getValue(tiddler,field) || defVal;
			place.appendChild(e);
		} else {
			var wrapper1 = createTiddlyElement(null,"fieldset",null,"fieldsetFix");
			var wrapper2 = createTiddlyElement(wrapper1,"div");
			e = createTiddlyElement(wrapper2,"textarea");
			e.value = v = store.getValue(tiddler,field) || defVal;
			rows = rows || 10;
			var lines = v.match(/\n/mg);
			var maxLines = Math.max(parseInt(config.options.txtMaxEditRows,10),5);
			if(lines != null && lines.length > rows)
				rows = lines.length + 5;
			rows = Math.min(rows,maxLines);
			e.setAttribute("rows",rows);
			e.setAttribute("edit",field);
			place.appendChild(wrapper1);
		}
		if(tiddler.isReadOnly()) {
			e.setAttribute("readOnly","readOnly");
			jQuery(e).addClass("readOnly");
		}
		return e;
	}
};

config.macros.tagChooser.onClick = function(ev)
{
	var e = ev || window.event;
	var lingo = config.views.editor.tagChooser;
	var popup = Popup.create(this);
	var tags = store.getTags(this.getAttribute("tags"));
	if(tags.length == 0)
		jQuery("<li/>").text(lingo.popupNone).appendTo(popup);
	var t;
	for(t=0; t<tags.length; t++) {
		var tag = createTiddlyButton(createTiddlyElement(popup,"li"),tags[t][0],lingo.tagTooltip.format([tags[t][0]]),config.macros.tagChooser.onTagClick);
		tag.setAttribute("tag",tags[t][0]);
		tag.setAttribute("tiddler",this.getAttribute("tiddler"));
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
};

config.macros.tagChooser.onTagClick = function(ev)
{
	var e = ev || window.event;
	if(e.metaKey || e.ctrlKey) stopEvent(e); //# keep popup open on CTRL-click
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(!readOnly)
		story.setTiddlerTag(title,tag,0);
	return false;
};

config.macros.tagChooser.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(tiddler instanceof Tiddler) {
		var lingo = config.views.editor.tagChooser;
		var btn = createTiddlyButton(place,lingo.text,lingo.tooltip,this.onClick);
		btn.setAttribute("tiddler",tiddler.title);
		btn.setAttribute("tags",params[0]);
	}
};

config.macros.refreshDisplay.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.refreshDisplay.onClick = function(e)
{
	refreshAll();
	return false;
};

config.macros.annotations.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var title = tiddler ? tiddler.title : null;
	var a = title ? config.annotations[title] : null;
	if(!tiddler || !title || !a)
		return;
	var text = a.format([title]);
	wikify(text,createTiddlyElement(place,"div",null,"annotation"),null,tiddler);
};
//--
//-- NewTiddler and NewJournal macros
//--

config.macros.newTiddler.createNewTiddlerButton = function(place,title,params,label,prompt,accessKey,newFocus,isJournal)
{
	var tags = [];
	var t;
	for(t=1; t<params.length; t++) {
		if((params[t].name == "anon" && t != 1) || (params[t].name == "tag"))
			tags.push(params[t].value);
	}
	label = getParam(params,"label",label);
	prompt = getParam(params,"prompt",prompt);
	accessKey = getParam(params,"accessKey",accessKey);
	newFocus = getParam(params,"focus",newFocus);
	var customFields = getParam(params,"fields","");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);
	var btn = createTiddlyButton(place,label,prompt,this.onClickNewTiddler,null,null,accessKey);
	btn.setAttribute("newTitle",title);
	btn.setAttribute("isJournal",isJournal ? "true" : "false");
	if(tags.length > 0)
		btn.setAttribute("params",tags.join("|"));
	btn.setAttribute("newFocus",newFocus);
	btn.setAttribute("newTemplate",getParam(params,"template",DEFAULT_EDIT_TEMPLATE));
	if(customFields !== "")
		btn.setAttribute("customFields",customFields);
	var text = getParam(params,"text");
	if(text !== undefined)
		btn.setAttribute("newText",text);
	return btn;
};

config.macros.newTiddler.onClickNewTiddler = function()
{
	var title = this.getAttribute("newTitle");
	if(this.getAttribute("isJournal") == "true") {
		title = new Date().formatString(title.trim());
	}
	var params = this.getAttribute("params");
	var tags = params ? params.split("|") : [];
	var focus = this.getAttribute("newFocus");
	var template = this.getAttribute("newTemplate");
	var customFields = this.getAttribute("customFields");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);
	story.displayTiddler(null,title,template,false,null,null);
	var tiddlerElem = story.getTiddler(title);
	if(customFields)
		story.addCustomFields(tiddlerElem,customFields);
	var text = this.getAttribute("newText");
	if(typeof text == "string" && story.getTiddlerField(title,"text"))
		story.getTiddlerField(title,"text").value = text.format([title]);
	var t;
	for(t=0;t<tags.length;t++)
		story.setTiddlerTag(title,tags[t],+1);
	story.focusTiddler(title,focus);
	return false;
};

config.macros.newTiddler.handler = function(place,macroName,params,wikifier,paramString)
{
	if(!readOnly) {
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : this.title;
		title = getParam(params,"title",title);
		this.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"title",false);
	}
};

config.macros.newJournal.handler = function(place,macroName,params,wikifier,paramString)
{
	if(!readOnly) {
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : config.macros.timeline.dateFormat;
		title = getParam(params,"title",title);
		config.macros.newTiddler.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"text",true);
	}
};

//--
//-- Search macro
//--

config.macros.search.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,false,false,false);
	createTiddlyButton(place,this.label,this.prompt,this.onClick,"searchButton");
	var txt = createTiddlyElement(null,"input",null,"txtOptionInput searchField");
	txt.value = getParam(params,"anon","");
	if(config.browser.isSafari) {
		txt.setAttribute("type","search");
		txt.setAttribute("results","5");
	} else {
		txt.setAttribute("type","text");
	}
	place.appendChild(txt);
	txt.onkeyup = this.onKeyPress;
	txt.onfocus = this.onFocus;
	txt.setAttribute("size",this.sizeTextbox);
	txt.setAttribute("accessKey",getParam(params,"accesskey",this.accessKey));
	txt.setAttribute("autocomplete","off");
	txt.setAttribute("lastSearchText","");
	txt.setAttribute("placeholder",getParam(params,"placeholder",this.placeholder));
};

// Global because there's only ever one outstanding incremental search timer
config.macros.search.timeout = null;

config.macros.search.doSearch = function(txt)
{
	if(txt.value.length > 0) {
		story.search(txt.value,config.options.chkCaseSensitiveSearch,config.options.chkRegExpSearch);
		txt.setAttribute("lastSearchText",txt.value);
	}
};

config.macros.search.onClick = function(e)
{
	config.macros.search.doSearch(this.nextSibling);
	return false;
};

config.macros.search.onKeyPress = function(ev)
{
	var me = config.macros.search;
	var e = ev || window.event;
	switch(e.keyCode) {
		case 9: // Tab
			return;
		case 13: // Ctrl-Enter
		case 10: // Ctrl-Enter on IE PC
			me.doSearch(this);
			break;
		case 27: // Escape
			this.value = "";
			clearMessage();
			break;
	}
	if(config.options.chkIncrementalSearch) {
		if(this.value.length > 2) {
			if(this.value != this.getAttribute("lastSearchText")) {
				if(me.timeout) {
					clearTimeout(me.timeout);
				}
				var txt = this;
				me.timeout = setTimeout(function() {me.doSearch(txt);},500);
			}
		} else {
			if(me.timeout) {
				clearTimeout(me.timeout);
			}
		}
	}
};

config.macros.search.onFocus = function(e)
{
	this.select();
};

//--
//-- Tabs macro
//--

config.macros.tabs.handler = function(place,macroName,params)
{
	var cookie = params[0];
	var numTabs = (params.length-1)/3;
	var wrapper = createTiddlyElement(null,"div",null,"tabsetWrapper " + cookie);
	var tabset = createTiddlyElement(wrapper,"div",null,"tabset");
	tabset.setAttribute("cookie",cookie);
	var validTab = false;
	var t;
	for(t=0; t<numTabs; t++) {
		var label = params[t*3+1];
		var prompt = params[t*3+2];
		var content = params[t*3+3];
		var tab = createTiddlyButton(tabset,label,prompt,this.onClickTab,"tab tabUnselected");
		createTiddlyElement(tab,"span",null,null," ",{style:"font-size:0pt;line-height:0px"});
		tab.setAttribute("tab",label);
		tab.setAttribute("content",content);
		tab.title = prompt;
		if(config.options[cookie] == label)
			validTab = true;
	}
	if(!validTab)
		config.options[cookie] = params[1];
	place.appendChild(wrapper);
	this.switchTab(tabset,config.options[cookie]);
};

config.macros.tabs.onClickTab = function(e)
{
	config.macros.tabs.switchTab(this.parentNode,this.getAttribute("tab"));
	return false;
};

config.macros.tabs.switchTab = function(tabset,tab)
{
	var cookie = tabset.getAttribute("cookie");
	var theTab = null;
	var nodes = tabset.childNodes;
	var t;
	for(t=0; t<nodes.length; t++) {
		if(nodes[t].getAttribute && nodes[t].getAttribute("tab") == tab) {
			theTab = nodes[t];
			theTab.className = "tab tabSelected";
		} else {
			nodes[t].className = "tab tabUnselected";
		}
	}
	if(theTab) {
		if(tabset.nextSibling && tabset.nextSibling.className == "tabContents")
			jQuery(tabset.nextSibling).remove();
		var tabContent = createTiddlyElement(null,"div",null,"tabContents");
		tabset.parentNode.insertBefore(tabContent,tabset.nextSibling);
		var contentTitle = theTab.getAttribute("content");
		wikify(store.getTiddlerText(contentTitle),tabContent,null,store.getTiddler(contentTitle));
		if(cookie) {
			config.options[cookie] = tab;
			saveOption(cookie);
		}
	}
};

//--
//-- Tiddler toolbar
//--

// Create a toolbar command button
config.macros.toolbar.createCommand = function(place,commandName,tiddler,className)
{
	if(typeof commandName != "string") {
		var c = null;
		var t;
		for(t in config.commands) {
			if(config.commands[t] == commandName)
				c = t;
		}
		commandName = c;
	}
	if((tiddler instanceof Tiddler) && (typeof commandName == "string")) {
		var command = config.commands[commandName];
		if(command.isEnabled ? command.isEnabled(tiddler) : this.isCommandEnabled(command,tiddler)) {
			var text = command.getText ? command.getText(tiddler) : this.getCommandText(command,tiddler);
			var tooltip = command.getTooltip ? command.getTooltip(tiddler) : this.getCommandTooltip(command,tiddler);
			var cmd = command.type == "popup" ? this.onClickPopup : this.onClickCommand;
			var btn = createTiddlyButton(null,text,tooltip,cmd);
			btn.setAttribute("commandName",commandName);
			btn.setAttribute("tiddler",tiddler.title);
			jQuery(btn).addClass("command_" + commandName);
			if(className)
				jQuery(btn).addClass(className);
			place.appendChild(btn);
		}
	}
};

config.macros.toolbar.isCommandEnabled = function(command,tiddler)
{
	var title = tiddler.title;
	var ro = tiddler.isReadOnly();
	var shadow = store.isShadowTiddler(title) && !store.tiddlerExists(title);
	return (!ro || (ro && !command.hideReadOnly)) && !(shadow && command.hideShadow);
};

config.macros.toolbar.getCommandText = function(command,tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyText) || command.text;
};

config.macros.toolbar.getCommandTooltip = function(command,tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyTooltip) || command.tooltip;
};

config.macros.toolbar.onClickCommand = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var command = config.commands[this.getAttribute("commandName")];
	return command.handler(e,this,this.getAttribute("tiddler"));
};

config.macros.toolbar.onClickPopup = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var popup = Popup.create(this);
	var command = config.commands[this.getAttribute("commandName")];
	var title = this.getAttribute("tiddler");
	popup.setAttribute("tiddler",title);
	command.handlePopup(popup,title);
	Popup.show();
	return false;
};

// Invoke the first command encountered from a given place that is tagged with a specified class
config.macros.toolbar.invokeCommand = function(place,className,event)
{
	var children = place.getElementsByTagName("a");
	var t;
	for(t=0; t<children.length; t++) {
		var c = children[t];
		if(jQuery(c).hasClass(className) && c.getAttribute && c.getAttribute("commandName")) {
			if(c.onclick instanceof Function)
				c.onclick.call(c,event);
			break;
		}
	}
};

config.macros.toolbar.onClickMore = function(ev)
{
	var e = this.nextSibling;
	e.style.display = "inline";
	this.style.display = "none";
	return false;
};

config.macros.toolbar.onClickLess = function(ev)
{
	var e = this.parentNode;
	var m = e.previousSibling;
	e.style.display = "none";
	m.style.display = "inline";
	return false;
};

config.macros.toolbar.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var t;
	for(t=0; t<params.length; t++) {
		var btn;
		var c = params[t];
		switch(c) {
		case "!":
			createTiddlyText(place,this.separator);
			break;
		case "*":
			createTiddlyElement(place,"br");
			break;
		case "<":
			btn = createTiddlyButton(place,this.lessLabel,this.lessPrompt,config.macros.toolbar.onClickLess);
			jQuery(btn).addClass("lessCommand");
			break;
		case ">":
			btn = createTiddlyButton(place,this.moreLabel,this.morePrompt,config.macros.toolbar.onClickMore);
			jQuery(btn).addClass("moreCommand");
			var e = createTiddlyElement(place,"span",null,"moreCommand");
			e.style.display = "none";
			place = e;
			break;
		default:
			var className = "";
			switch(c.substr(0,1)) {
			case "+":
				className = "defaultCommand";
				c = c.substr(1);
				break;
			case "-":
				className = "cancelCommand";
				c = c.substr(1);
				break;
			}
			if(config.commands[c]) {
				this.createCommand(place,c,tiddler,className);
			} else {
				this.customCommand(place,c,wikifier,tiddler);
			}
			break;
		}
	}
};

// Overrideable function to extend toolbar handler
config.macros.toolbar.customCommand = function(place,command,wikifier,tiddler)
{
};

//--
//-- Menu and toolbar commands
//--

config.commands.closeTiddler.handler = function(event,src,title)
{
	if(story.isDirty(title) && !readOnly) {
		if(!confirm(config.commands.cancelTiddler.warning.format([title])))
			return false;
	}
	story.setDirty(title,false);
	story.closeTiddler(title,true);
	return false;
};

config.commands.closeOthers.handler = function(event,src,title)
{
	story.closeAllTiddlers(title);
	return false;
};

config.commands.editTiddler.handler = function(event,src,title)
{
	clearMessage();
	var tiddlerElem = story.getTiddler(title);
	var fields = tiddlerElem.getAttribute("tiddlyFields");
	story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,fields);
	var e = story.getTiddlerField(title,config.options.txtEditorFocus||"text");
	if(e) {
		setCaretPosition(e,0);
	}
	return false;
};

config.commands.saveTiddler.handler = function(event,src,title)
{
	var newTitle = story.saveTiddler(title,event.shiftKey);
	if(newTitle)
		story.displayTiddler(null,newTitle);
	return false;
};

config.commands.cancelTiddler.handler = function(event,src,title)
{
	if(story.hasChanges(title) && !readOnly) {
		if(!confirm(this.warning.format([title])))
			return false;
	}
	story.setDirty(title,false);
	story.displayTiddler(null,title);
	return false;
};

config.commands.deleteTiddler.handler = function(event,src,title)
{
	var deleteIt = true;
	if(config.options.chkConfirmDelete)
		deleteIt = confirm(this.warning.format([title]));
	if(deleteIt) {
		store.removeTiddler(title);
		story.closeTiddler(title,true);
		autoSaveChanges();
	}
	return false;
};

config.commands.permalink.handler = function(event,src,title)
{
	var t = encodeURIComponent(String.encodeTiddlyLink(title));
	if(window.location.hash != t)
		window.location.hash = t;
	return false;
};

config.commands.references.handlePopup = function(popup,title)
{
	var references = store.getReferringTiddlers(title);
	var c = false;
	var r;
	for(r=0; r<references.length; r++) {
		if(references[r].title != title && !references[r].isTagged("excludeLists")) {
			createTiddlyLink(createTiddlyElement(popup,"li"),references[r].title,true);
			c = true;
		}
	}
	if(!c)
		createTiddlyElement(popup,"li",null,"disabled",this.popupNone);
};

config.commands.jump.handlePopup = function(popup,title)
{
	story.forEachTiddler(function(title,element) {
		createTiddlyLink(createTiddlyElement(popup,"li"),title,true,null,false,null,true);
		});
};

config.commands.fields.handlePopup = function(popup,title)
{
	var tiddler = store.fetchTiddler(title);
	if(!tiddler)
		return;
	var items = [];
	store.forEachField(tiddler,function(tiddler,fieldName,value){items.push({field:fieldName,value:value});},true);
	items.sort(function(a,b) {return a.field < b.field ? -1 : (a.field == b.field ? 0 : +1);});
	if(items.length > 0)
		ListView.create(popup,items,this.listViewTemplate);
	else
		createTiddlyElement(popup,"div",null,null,this.emptyText);
};

//--
//-- Tiddler() object
//--

function Tiddler(title)
{
	this.title = title;
	this.text = "";
	this.creator = null;
	this.modifier = null;
	this.created = new Date();
	this.modified = this.created;
	this.links = [];
	this.linksUpdated = false;
	this.tags = [];
	this.fields = {};
	return this;
}

Tiddler.prototype.getLinks = function()
{
	if(this.linksUpdated==false)
		this.changed();
	return this.links;
};

// Returns the fields that are inherited in string field:"value" field2:"value2" format
Tiddler.prototype.getInheritedFields = function()
{
	var f = {};
	var i;
	for(i in this.fields) {
		if(i=="server.host" || i=="server.workspace" || i=="wikiformat"|| i=="server.type") {
			f[i] = this.fields[i];
		}
	}
	return String.encodeHashMap(f);
};

// Increment the changeCount of a tiddler
Tiddler.prototype.incChangeCount = function()
{
	var c = this.fields['changecount'];
	c = c ? parseInt(c,10) : 0;
	this.fields['changecount'] = String(c+1);
};

// Clear the changeCount of a tiddler
Tiddler.prototype.clearChangeCount = function()
{
	if(this.fields['changecount']) {
		delete this.fields['changecount'];
	}
};

Tiddler.prototype.doNotSave = function()
{
	return this.fields['doNotSave'];
};

// Returns true if the tiddler has been updated since the tiddler was created or downloaded
Tiddler.prototype.isTouched = function()
{
	var changecount = this.fields.changecount || 0;
	return changecount > 0;
};

// Change the text and other attributes of a tiddler
Tiddler.prototype.set = function(title,text,modifier,modified,tags,created,fields,creator)
{
	this.assign(title,text,modifier,modified,tags,created,fields,creator);
	this.changed();
	return this;
};

// Change the text and other attributes of a tiddler without triggered a tiddler.changed() call
Tiddler.prototype.assign = function(title,text,modifier,modified,tags,created,fields,creator)
{
	if(title != undefined)
		this.title = title;
	if(text != undefined)
		this.text = text;
	if(modifier != undefined)
		this.modifier = modifier;
	if(modified != undefined)
		this.modified = modified;
	if(creator != undefined)
		this.creator = creator;
	if(created != undefined)
		this.created = created;
	if(fields != undefined)
		this.fields = fields;
	if(tags != undefined)
		this.tags = (typeof tags == "string") ? tags.readBracketedList() : tags;
	else if(this.tags == undefined)
		this.tags = [];
	return this;
};

// Get the tags for a tiddler as a string (space delimited, using [[brackets]] for tags containing spaces)
Tiddler.prototype.getTags = function()
{
	return String.encodeTiddlyLinkList(this.tags);
};

// Test if a tiddler carries a tag
Tiddler.prototype.isTagged = function(tag)
{
	return this.tags.indexOf(tag) != -1;
};

// Static method to convert "\n" to newlines, "\s" to "\"
Tiddler.unescapeLineBreaks = function(text)
{
	return text ? text.unescapeLineBreaks() : "";
};

// Convert newlines to "\n", "\" to "\s"
Tiddler.prototype.escapeLineBreaks = function()
{
	return this.text.escapeLineBreaks();
};

// Updates the secondary information (like links[] array) after a change to a tiddler
Tiddler.prototype.changed = function()
{
	this.links = [];
	var text = this.text;
	// remove 'quoted' text before scanning tiddler source
	text = text.replace(/\/%((?:.|\n)*?)%\//g,"").
		replace(/\{{3}((?:.|\n)*?)\}{3}/g,"").
		replace(/"""((?:.|\n)*?)"""/g,"").
		replace(/<nowiki\>((?:.|\n)*?)<\/nowiki\>/g,"").
		replace(/<html\>((?:.|\n)*?)<\/html\>/g,"").
		replace(/<script((?:.|\n)*?)<\/script\>/g,"");
	var t = this.autoLinkWikiWords() ? 0 : 1;
	var tiddlerLinkRegExp = t==0 ? config.textPrimitives.tiddlerAnyLinkRegExp : config.textPrimitives.tiddlerForcedLinkRegExp;
	tiddlerLinkRegExp.lastIndex = 0;
	var formatMatch = tiddlerLinkRegExp.exec(text);
	while(formatMatch) {
		var lastIndex = tiddlerLinkRegExp.lastIndex;
		if(t==0 && formatMatch[1] && formatMatch[1] != this.title) {
			// wikiWordLink
			if(formatMatch.index > 0) {
				var preRegExp = new RegExp(config.textPrimitives.unWikiLink+"|"+config.textPrimitives.anyLetter,"mg");
				preRegExp.lastIndex = formatMatch.index-1;
				var preMatch = preRegExp.exec(text);
				if(preMatch.index != formatMatch.index-1)
					this.links.pushUnique(formatMatch[1]);
			} else {
				this.links.pushUnique(formatMatch[1]);
			}
		}
		else if(formatMatch[2-t] && !config.formatterHelpers.isExternalLink(formatMatch[3-t])) // titledBrackettedLink
			this.links.pushUnique(formatMatch[3-t]);
		else if(formatMatch[4-t] && formatMatch[4-t] != this.title) // brackettedLink
			this.links.pushUnique(formatMatch[4-t]);
		tiddlerLinkRegExp.lastIndex = lastIndex;
		formatMatch = tiddlerLinkRegExp.exec(text);
	}
	this.linksUpdated = true;
};

Tiddler.prototype.getSubtitle = function()
{
	var modifier = this.modifier;
	if(!modifier)
		modifier = config.messages.subtitleUnknown || "";
	var modified = this.modified;
	if(modified)
		modified = modified.toLocaleString();
	else
		modified = config.messages.subtitleUnknown || "";
	var f = config.messages.tiddlerLinkTooltip || "%0 - %1, %2";
	return f.format([this.title,modifier,modified]);
};

Tiddler.prototype.isReadOnly = function()
{
	return readOnly;
};

Tiddler.prototype.autoLinkWikiWords = function()
{
	return !(this.isTagged("systemConfig") || this.isTagged("excludeMissing"));
};

Tiddler.prototype.getServerType = function()
{
	var serverType = null;
	if(this.fields['server.type'])
		serverType = this.fields['server.type'];
	if(!serverType)
		serverType = this.fields['wikiformat'];
	if(serverType && !config.adaptors[serverType])
		serverType = null;
	return serverType;
};

Tiddler.prototype.getAdaptor = function()
{
	var serverType = this.getServerType();
	return serverType ? new config.adaptors[serverType]() : null;
};

//--
//-- TiddlyWiki instance contains TiddlerS
//--

function TiddlyWiki(params)
{
	var tiddlers = {}; // Hashmap by name of tiddlers
	if(params && params.config) {
		this.config = config;
	}
	this.tiddlersUpdated = false;
	this.namedNotifications = []; // Array of {name:,notify:} of notification functions
	this.notificationLevel = 0;
	this.slices = {}; // map tiddlerName->(map sliceName->sliceValue). Lazy.
	this.clear = function() {
		tiddlers = {};
		this.setDirty(false);
	};
	this.fetchTiddler = function(title) {
		var t = tiddlers[title];
		return t instanceof Tiddler ? t : null;
	};
	this.deleteTiddler = function(title) {
		delete this.slices[title];
		delete tiddlers[title];
	};
	this.addTiddler = function(tiddler) {
		delete this.slices[tiddler.title];
		tiddlers[tiddler.title] = tiddler;
	};
	this.forEachTiddler = function(callback) {
		var t;
		for(t in tiddlers) {
			var tiddler = tiddlers[t];
			if(tiddler instanceof Tiddler)
				callback.call(this,t,tiddler);
		}
	};
}

TiddlyWiki.prototype.setDirty = function(dirty)
{
	this.dirty = dirty;
};

TiddlyWiki.prototype.isDirty = function()
{
	return this.dirty;
};

TiddlyWiki.prototype.tiddlerExists = function(title)
{
	var t = this.fetchTiddler(title);
	return t != undefined;
};

TiddlyWiki.prototype.isShadowTiddler = function(title)
{
	return config.shadowTiddlers[title] === undefined ? false : true;
};

TiddlyWiki.prototype.isAvailable = function(title) {
	if (!title)
		return false;
	var s = title ? title.indexOf(config.textPrimitives.sectionSeparator) : -1;
	if(s!=-1)
		title = title.substr(0,s);
	return this.tiddlerExists(title) || this.isShadowTiddler(title);
};

TiddlyWiki.prototype.createTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler) {
		tiddler = new Tiddler(title);
		this.addTiddler(tiddler);
		this.setDirty(true);
	}
	return tiddler;
};

TiddlyWiki.prototype.getTiddler = function(title)
{
	var t = this.fetchTiddler(title);
	if(t != undefined)
		return t;
	else
		return null;
};

TiddlyWiki.prototype.getShadowTiddlerText = function(title)
{
	if(typeof config.shadowTiddlers[title] == "string")
		return config.shadowTiddlers[title];
	else
		return "";
};

// Retrieve tiddler contents
TiddlyWiki.prototype.getTiddlerText = function(title,defaultText)
{
	if(!title)
		return defaultText;
	var pos = title.indexOf(config.textPrimitives.sectionSeparator);
	var section = null;
	if(pos != -1) {
		section = title.substr(pos + config.textPrimitives.sectionSeparator.length);
		title = title.substr(0,pos);
	}
	pos = title.indexOf(config.textPrimitives.sliceSeparator);
	if(pos != -1) {
		var slice = this.getTiddlerSlice(title.substr(0,pos),title.substr(pos + config.textPrimitives.sliceSeparator.length));
		if(slice)
			return slice;
	}
	var tiddler = this.fetchTiddler(title);
	var text = tiddler ? tiddler.text : null;
	if(!tiddler && this.isShadowTiddler(title)) {
		text = this.getShadowTiddlerText(title);
	}
	if(text) {
		if(!section)
			return text;
		var re = new RegExp("(^!{1,6}[ \t]*" + section.escapeRegExp() + "[ \t]*\n)","mg");
		re.lastIndex = 0;
		var match = re.exec(text);
		if(match) {
			var t = text.substr(match.index+match[1].length);
			var re2 = /^!/mg;
			re2.lastIndex = 0;
			match = re2.exec(t); //# search for the next heading
			if(match)
				t = t.substr(0,match.index-1);//# don't include final \n
			return t;
		}
		return defaultText;
	}
	if(defaultText != undefined)
		return defaultText;
	return null;
};

TiddlyWiki.prototype.getRecursiveTiddlerText = function(title,defaultText,depth)
{
	var bracketRegExp = new RegExp("(?:\\[\\[([^\\]]+)\\]\\])","mg");
	var text = this.getTiddlerText(title,null);
	if(text == null)
		return defaultText;
	var textOut = [];
	var match,lastPos = 0;
	do {
		match = bracketRegExp.exec(text);
		if(match) {
			textOut.push(text.substr(lastPos,match.index-lastPos));
			if(match[1]) {
				if(depth <= 0)
					textOut.push(match[1]);
				else
					textOut.push(this.getRecursiveTiddlerText(match[1],"",depth-1));
			}
			lastPos = match.index + match[0].length;
		} else {
			textOut.push(text.substr(lastPos));
		}
	} while(match);
	return textOut.join("");
};

//TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]+)[\t\x20]*$)|(?:^\|([\'\/]{0,2})~?([\.\w]+)\:?\4\|[\t\x20]*([^\n]+)[\t\x20]*\|$)/gm;
TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]*)[\t\x20]*$)|(?:^\|([\'\/]{0,2})~?([\.\w]+)\:?\4\|[\t\x20]*([^\|\n]*)[\t\x20]*\|$)/gm;
// @internal
TiddlyWiki.prototype.calcAllSlices = function(title)
{
	var slices = {};
	var text = this.getTiddlerText(title,"");
	this.slicesRE.lastIndex = 0;
	var m = this.slicesRE.exec(text);
	while(m) {
		if(m[2])
			slices[m[2]] = m[3];
		else
			slices[m[5]] = m[6];
		m = this.slicesRE.exec(text);
	}
	return slices;
};

// Returns the slice of text of the given name
TiddlyWiki.prototype.getTiddlerSlice = function(title,sliceName)
{
	var slices = this.slices[title];
	if(!slices) {
		slices = this.calcAllSlices(title);
		this.slices[title] = slices;
	}
	return slices[sliceName];
};

// Build an hashmap of the specified named slices of a tiddler
TiddlyWiki.prototype.getTiddlerSlices = function(title,sliceNames)
{
	var t,r = {};
	for(t=0; t<sliceNames.length; t++) {
		var slice = this.getTiddlerSlice(title,sliceNames[t]);
		if(slice)
			r[sliceNames[t]] = slice;
	}
	return r;
};

TiddlyWiki.prototype.suspendNotifications = function()
{
	this.notificationLevel--;
};

TiddlyWiki.prototype.resumeNotifications = function()
{
	this.notificationLevel++;
};

// Invoke the notification handlers for a particular tiddler
TiddlyWiki.prototype.notify = function(title,doBlanket)
{
	if(!this.notificationLevel) {
	    var t;
		for(t=0; t<this.namedNotifications.length; t++) {
			var n = this.namedNotifications[t];
			if((n.name == null && doBlanket) || (n.name == title))
				n.notify(title);
		}
	}
};

// Invoke the notification handlers for all tiddlers
TiddlyWiki.prototype.notifyAll = function()
{
	if(!this.notificationLevel) {
	    var t;
		for(t=0; t<this.namedNotifications.length; t++) {
			var n = this.namedNotifications[t];
			if(n.name)
				n.notify(n.name);
		}
	}
};

// Add a notification handler to a tiddler
TiddlyWiki.prototype.addNotification = function(title,fn)
{
	var i;
	for(i=0; i<this.namedNotifications.length; i++) {
		if((this.namedNotifications[i].name == title) && (this.namedNotifications[i].notify == fn))
			return this;
	}
	this.namedNotifications.push({name: title, notify: fn});
	return this;
};

TiddlyWiki.prototype.removeTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		this.deleteTiddler(title);
		this.notify(title,true);
		this.setDirty(true);
	}
};

// Reset the sync status of a freshly synced tiddler
TiddlyWiki.prototype.resetTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		tiddler.clearChangeCount();
		this.notify(title,true);
		this.setDirty(true);
	}
};

TiddlyWiki.prototype.setTiddlerTag = function(title,status,tag)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		var t = tiddler.tags.indexOf(tag);
		if(t != -1)
			tiddler.tags.splice(t,1);
		if(status)
			tiddler.tags.push(tag);
		tiddler.changed();
		tiddler.incChangeCount();
		this.notify(title,true);
		this.setDirty(true);
	}
};

TiddlyWiki.prototype.addTiddlerFields = function(title,fields)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler)
		return;
	merge(tiddler.fields,fields);
	tiddler.changed();
	tiddler.incChangeCount();
	this.notify(title,true);
	this.setDirty(true);
};

// Store tiddler in TiddlyWiki instance
TiddlyWiki.prototype.saveTiddler = function(title,newTitle,newBody,modifier,modified,tags,fields,clearChangeCount,created,creator)
{
	var tiddler;
	if(title instanceof Tiddler) {
		tiddler = title;
		tiddler.fields = merge(merge({},tiddler.fields),config.defaultCustomFields,true);
		title = tiddler.title;
		newTitle = title;
	} else {
		tiddler = this.fetchTiddler(title);
		if(tiddler) {
			created = created || tiddler.created; // Preserve created date
			creator = creator || tiddler.creator;
			this.deleteTiddler(title);
		} else {
			created = created || modified;
			tiddler = new Tiddler();
		}
		fields = merge(merge({},fields),config.defaultCustomFields,true);
		tiddler.set(newTitle,newBody,modifier,modified,tags,created,fields,creator);
	}
	this.addTiddler(tiddler);
	if(clearChangeCount)
		tiddler.clearChangeCount();
	else
		tiddler.incChangeCount();
	if(title != newTitle)
		this.notify(title,true);
	this.notify(newTitle,true);
	this.setDirty(true);
	return tiddler;
};

TiddlyWiki.prototype.incChangeCount = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler)
		tiddler.incChangeCount();
};

TiddlyWiki.prototype.getLoader = function()
{
	if(!this.loader)
		this.loader = new TW21Loader();
	return this.loader;
};

TiddlyWiki.prototype.getSaver = function()
{
	if(!this.saver)
		this.saver = new TW21Saver();
	return this.saver;
};

// Return all tiddlers formatted as an HTML string
TiddlyWiki.prototype.allTiddlersAsHtml = function()
{
	return this.getSaver().externalize(store);
};

// Load contents of a TiddlyWiki from an HTML DIV
TiddlyWiki.prototype.loadFromDiv = function(src,idPrefix,noUpdate)
{
	this.idPrefix = idPrefix;
	var storeElem = (typeof src == "string") ? document.getElementById(src) : src;
	if(!storeElem)
		return;
	var tiddlers = this.getLoader().loadTiddlers(this,storeElem.childNodes);
	this.setDirty(false);
	if(!noUpdate) {
		var i;
		for(i = 0;i<tiddlers.length; i++)
			tiddlers[i].changed();
	}
	jQuery(document).trigger("loadTiddlers");
};

// Load contents of a TiddlyWiki from a string
// Returns null if there's an error
TiddlyWiki.prototype.importTiddlyWiki = function(text)
{
	var posDiv = locateStoreArea(text);
	if(!posDiv)
		return null;
	var content = "<" + "html><" + "body>" + text.substring(posDiv[0],posDiv[1] + endSaveArea.length) + "<" + "/body><" + "/html>";
	// Create the iframe
	var iframe = document.createElement("iframe");
	iframe.style.display = "none";
	document.body.appendChild(iframe);
	var doc = iframe.document;
	if(iframe.contentDocument)
		doc = iframe.contentDocument; // For NS6
	else if(iframe.contentWindow)
		doc = iframe.contentWindow.document; // For IE5.5 and IE6
	// Put the content in the iframe
	doc.open();
	doc.writeln(content);
	doc.close();
	// Load the content into a TiddlyWiki() object
	var storeArea = doc.getElementById("storeArea");
	this.loadFromDiv(storeArea,"store");
	// Get rid of the iframe
	iframe.parentNode.removeChild(iframe);
	return this;
};

TiddlyWiki.prototype.updateTiddlers = function()
{
	this.tiddlersUpdated = true;
	this.forEachTiddler(function(title,tiddler) {
		tiddler.changed();
	});
};

// Return an array of tiddlers matching a search regular expression
TiddlyWiki.prototype.search = function(searchRegExp,sortField,excludeTag,match)
{
	var candidates = this.reverseLookup("tags",excludeTag,!!match);
	var t,results = [];
	for(t=0; t<candidates.length; t++) {
		if((candidates[t].title.search(searchRegExp) != -1) || (candidates[t].text.search(searchRegExp) != -1))
			results.push(candidates[t]);
	}
	if(!sortField)
		sortField = "title";
	results.sort(function(a,b) {return a[sortField] < b[sortField] ? -1 : (a[sortField] == b[sortField] ? 0 : +1);});
	return results;
};

// Returns a list of all tags in use
//   excludeTag - if present, excludes tags that are themselves tagged with excludeTag
// Returns an array of arrays where [tag][0] is the name of the tag and [tag][1] is the number of occurances
TiddlyWiki.prototype.getTags = function(excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
	    var g,c;
		for(g=0; g<tiddler.tags.length; g++) {
			var tag = tiddler.tags[g];
			var n = true;
			for(c=0; c<results.length; c++) {
				if(results[c][0] == tag) {
					n = false;
					results[c][1]++;
				}
			}
			if(n && excludeTag) {
				var t = this.fetchTiddler(tag);
				if(t && t.isTagged(excludeTag))
					n = false;
			}
			if(n)
				results.push([tag,1]);
		}
	});
	results.sort(function(a,b) {return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : (a[0].toLowerCase() == b[0].toLowerCase() ? 0 : +1);});
	return results;
};

// Return an array of the tiddlers that are tagged with a given tag
TiddlyWiki.prototype.getTaggedTiddlers = function(tag,sortField)
{
	return this.reverseLookup("tags",tag,true,sortField);
};

TiddlyWiki.prototype.getValueTiddlers = function(field,value,sortField)
{
	return this.reverseLookup(field,value,true,sortField);
};

// Return an array of the tiddlers that link to a given tiddler
TiddlyWiki.prototype.getReferringTiddlers = function(title,unusedParameter,sortField)
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	return this.reverseLookup("links",title,true,sortField);
};

// Return an array of the tiddlers that do or do not have a specified entry in the specified storage array (ie, "links" or "tags")
// lookupMatch == true to match tiddlers, false to exclude tiddlers
TiddlyWiki.prototype.reverseLookup = function(lookupField,lookupValue,lookupMatch,sortField)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		var f = !lookupMatch;
		var values;
		if(["links", "tags"].contains(lookupField)) {
			values = tiddler[lookupField];
		} else {
			var accessor = TiddlyWiki.standardFieldAccess[lookupField];
			if(accessor) {
				values = [ accessor.get(tiddler) ];
			} else {
				values = tiddler.fields[lookupField] ? [tiddler.fields[lookupField]] : [];
			}
		}
		var lookup;
		for(lookup=0; lookup<values.length; lookup++) {
			if(values[lookup] == lookupValue)
				f = lookupMatch;
		}
		if(f)
			results.push(tiddler);
	});
	if(!sortField)
		sortField = "title";
	return this.sortTiddlers(results,sortField);
};

// Return the tiddlers as a sorted array
TiddlyWiki.prototype.getTiddlers = function(field,excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		if(excludeTag == undefined || !tiddler.isTagged(excludeTag))
			results.push(tiddler);
	});
	if(field)
		results.sort(function(a,b) {return a[field] < b[field] ? -1 : (a[field] == b[field] ? 0 : +1);});
	return results;
};

// Return array of names of tiddlers that are referred to but not defined
TiddlyWiki.prototype.getMissingLinks = function()
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		if(tiddler.isTagged("excludeMissing") || tiddler.isTagged("systemConfig"))
			return;
		var n;
		for(n=0; n<tiddler.links.length;n++) {
			var link = tiddler.links[n];
			if(this.getTiddlerText(link,null) == null && !this.isShadowTiddler(link) && !config.macros[link])
				results.pushUnique(link);
		}
	});
	results.sort();
	return results;
};

// Return an array of names of tiddlers that are defined but not referred to
TiddlyWiki.prototype.getOrphans = function()
{
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		if(this.getReferringTiddlers(title).length == 0 && !tiddler.isTagged("excludeLists"))
			results.push(title);
	});
	results.sort();
	return results;
};

// Return an array of names of all the shadow tiddlers
TiddlyWiki.prototype.getShadowed = function()
{
	var t,results = [];
	for(t in config.shadowTiddlers) {
		if(this.isShadowTiddler(t))
			results.push(t);
	}
	results.sort();
	return results;
};

// Return an array of tiddlers that have been touched since they were downloaded or created
TiddlyWiki.prototype.getTouched = function()
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		if(tiddler.isTouched())
			results.push(tiddler);
		});
	results.sort();
	return results;
};

// Resolves a Tiddler reference or tiddler title into a Tiddler object, or null if it doesn't exist
TiddlyWiki.prototype.resolveTiddler = function(tiddler)
{
	var t = (typeof tiddler == "string") ? this.getTiddler(tiddler) : tiddler;
	return t instanceof Tiddler ? t : null;
};

// Sort a list of tiddlers
TiddlyWiki.prototype.sortTiddlers = function(tiddlers,field)
{
	var asc = +1;
	switch(field.substr(0,1)) {
	case "-":
		asc = -1;
		field = field.substr(1);
		break;
	case "+":
		field = field.substr(1);
		break;
	}
	if(TiddlyWiki.standardFieldAccess[field]) {
		if(field=="title") {
			tiddlers.sort(function(a,b) {return a[field].toLowerCase() < b[field].toLowerCase() ? -asc : (a[field].toLowerCase() == b[field].toLowerCase() ? 0 : asc);});
		} else {
			tiddlers.sort(function(a,b) {return a[field] < b[field] ? -asc : (a[field] == b[field] ? 0 : asc);});
		}
	} else {
		tiddlers.sort(function(a,b) {return a.fields[field] < b.fields[field] ? -asc : (a.fields[field] == b.fields[field] ? 0 : +asc);});
	}
	return tiddlers;
};

//--
//-- Filter a list of tiddlers
//--

config.filters = {
	tiddler: function(results,match) {
		var title = match[1]||match[4];
		var tiddler = this.fetchTiddler(title);
		if(tiddler) {
			results.pushUnique(tiddler);
		} else if(this.isShadowTiddler(title)) {
			tiddler = new Tiddler();
			tiddler.set(title,this.getTiddlerText(title));
			results.pushUnique(tiddler);
		} else {
			results.pushUnique(new Tiddler(title));
		}
		return results;
	},
	tag: function(results,match) {
		var m,matched = this.getTaggedTiddlers(match[3]);
		for(m=0; m<matched.length; m++) {
			results.pushUnique(matched[m]);
		}
		return results;
	},
	sort: function(results,match) {
		return this.sortTiddlers(results,match[3]);
	},
	limit: function(results,match) {
		return results.slice(0,parseInt(match[3],10));
	},
	field: function(results,match) {
		var m,matched = this.getValueTiddlers(match[2],match[3]);
		for (m = 0; m < matched.length; m++) {
			results.pushUnique(matched[m]);
		}
		return results;
	}
};

// Filter a list of tiddlers
TiddlyWiki.prototype.filterTiddlers = function(filter)
{
	var re = /([^\s\[\]]+)|(?:\[([ \w\.\-]+)\[([^\]]+)\]\])|(?:\[\[([^\]]+)\]\])/mg;

	var results = [];
	if(filter) {
		var match = re.exec(filter);
		while(match) {
			var handler = (match[1]||match[4])?'tiddler':config.filters[match[2]]?match[2]:'field';
			results = config.filters[handler].call(this,results,match);
			match = re.exec(filter);
		}
	}
	return results;
};
// Returns true if path is a valid field name (path),
// i.e. a sequence of identifiers, separated by "."
TiddlyWiki.isValidFieldName = function(name)
{
	var match = /[a-zA-Z_]\w*(\.[a-zA-Z_]\w*)*/.exec(name);
	return match && (match[0] == name);
};

// Throws an exception when name is not a valid field name.
TiddlyWiki.checkFieldName = function(name)
{
	if(!TiddlyWiki.isValidFieldName(name))
		throw config.messages.invalidFieldName.format([name]);
};

function StringFieldAccess(n,readOnly)
{
	this.set = readOnly ?
			function(t,v) {if(v != t[n]) throw config.messages.fieldCannotBeChanged.format([n]);} :
			function(t,v) {if(v != t[n]) {t[n] = v; return true;}};
	this.get = function(t) {return t[n];};
}

function DateFieldAccess(n)
{
	this.set = function(t,v) {
		var d = v instanceof Date ? v : Date.convertFromYYYYMMDDHHMM(v);
		if(d != t[n]) {
			t[n] = d; return true;
		}
	};
	this.get = function(t) {return t[n].convertToYYYYMMDDHHMM();};
}

function LinksFieldAccess(n)
{
	this.set = function(t,v) {
		var s = (typeof v == "string") ? v.readBracketedList() : v;
		if(s.toString() != t[n].toString()) {
			t[n] = s; return true;
		}
	};
	this.get = function(t) {return String.encodeTiddlyLinkList(t[n]);};
}

TiddlyWiki.standardFieldAccess = {
	// The set functions return true when setting the data has changed the value.
	"title":    new StringFieldAccess("title",true),
	// Handle the "tiddler" field name as the title
	"tiddler":  new StringFieldAccess("title",true),
	"text":     new StringFieldAccess("text"),
	"modifier": new StringFieldAccess("modifier"),
	"modified": new DateFieldAccess("modified"),
	"creator":  new StringFieldAccess("creator"),
	"created":  new DateFieldAccess("created"),
	"tags":     new LinksFieldAccess("tags")
};

TiddlyWiki.isStandardField = function(name)
{
	return TiddlyWiki.standardFieldAccess[name] != undefined;
};

// Sets the value of the given field of the tiddler to the value.
// Setting an ExtendedField's value to null or undefined removes the field.
// Setting a namespace to undefined removes all fields of that namespace.
// The fieldName is case-insensitive.
// All values will be converted to a string value.
TiddlyWiki.prototype.setValue = function(tiddler,fieldName,value)
{
	TiddlyWiki.checkFieldName(fieldName);
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return;
	fieldName = fieldName.toLowerCase();
	var isRemove = (value === undefined) || (value === null);
	var accessor = TiddlyWiki.standardFieldAccess[fieldName];
	if(accessor) {
		if(isRemove)
			// don't remove StandardFields
			return;
		var h = TiddlyWiki.standardFieldAccess[fieldName];
		if(!h.set(t,value))
			return;
	} else {
		var oldValue = t.fields[fieldName];
		if(isRemove) {
			if(oldValue !== undefined) {
				// deletes a single field
				delete t.fields[fieldName];
			} else {
				// no concrete value is defined for the fieldName
				// so we guess this is a namespace path.
				// delete all fields in a namespace
				var re = new RegExp("^"+fieldName+"\\.");
				var dirty = false;
				var n;
				for(n in t.fields) {
					if(n.match(re)) {
						delete t.fields[n];
						dirty = true;
					}
				}
				if(!dirty)
					return;
			}
		} else {
			// the "normal" set case. value is defined (not null/undefined)
			// For convenience provide a nicer conversion Date->String
			value = value instanceof Date ? value.convertToYYYYMMDDHHMMSSMMM() : String(value);
			if(oldValue == value)
				return;
			t.fields[fieldName] = value;
		}
	}
	// When we are here the tiddler/store really was changed.
	this.notify(t.title,true);
	if(!fieldName.match(/^temp\./))
		this.setDirty(true);
};

// Returns the value of the given field of the tiddler.
// The fieldName is case-insensitive.
// Will only return String values (or undefined).
TiddlyWiki.prototype.getValue = function(tiddler,fieldName)
{
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return undefined;
	if(fieldName.indexOf(config.textPrimitives.sectionSeparator) === 0 || fieldName.indexOf(config.textPrimitives.sliceSeparator) === 0) {
		var sliceType = fieldName.substr(0, 2);
		var sliceName = fieldName.substring(2);
		return store.getTiddlerText("%0%1%2".format(t.title,sliceType,sliceName));
	} else {
		fieldName = fieldName.toLowerCase();
		var accessor = TiddlyWiki.standardFieldAccess[fieldName];
		if(accessor) {
			return accessor.get(t);
		}
	}
	return t.fields[fieldName];
};

// Calls the callback function for every field in the tiddler.
// When callback function returns a non-false value the iteration stops
// and that value is returned.
// The order of the fields is not defined.
// @param callback a function(tiddler,fieldName,value).
TiddlyWiki.prototype.forEachField = function(tiddler,callback,onlyExtendedFields)
{
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return undefined;
	var n,result;
	for(n in t.fields) {
		result = callback(t,n,t.fields[n]);
		if(result)
			return result;
		}
	if(onlyExtendedFields)
		return undefined;
	for(n in TiddlyWiki.standardFieldAccess) {
		if(n != "tiddler") {
			// even though the "title" field can also be referenced through the name "tiddler"
			// we only visit this field once.
			result = callback(t,n,TiddlyWiki.standardFieldAccess[n].get(t));
			if(result)
				return result;
		}
	}
	return undefined;
};

//--
//-- Story functions
//--

function Story(containerId,idPrefix)
{
	this.container = containerId;
	this.idPrefix = idPrefix;
	this.highlightRegExp = null;
	this.tiddlerId = function(title) {
		title = title.replace(/_/g, "__").replace(/ /g, "_");
		var id = this.idPrefix + title;
		return id==this.container ? this.idPrefix + "_" + title : id;
	};
	this.containerId = function() {
		return this.container;
	};
}

Story.prototype.getTiddler = function(title)
{
	return document.getElementById(this.tiddlerId(title));
};

Story.prototype.getContainer = function()
{
	return document.getElementById(this.containerId());
};

Story.prototype.forEachTiddler = function(fn)
{
	var place = this.getContainer();
	if(!place)
		return;
	var e = place.firstChild;
	while(e) {
		var n = e.nextSibling;
		var title = e.getAttribute("tiddler");
		if(title) {
			fn.call(this,title,e);
		}
		e = n;
	}
};

Story.prototype.displayDefaultTiddlers = function()
{
	this.displayTiddlers(null,store.filterTiddlers(store.getTiddlerText("DefaultTiddlers")));
};

Story.prototype.displayTiddlers = function(srcElement,titles,template,animate,unused,customFields,toggle)
{
	var t;
	for(t = titles.length-1;t>=0;t--)
		this.displayTiddler(srcElement,titles[t],template,animate,unused,customFields);
};

Story.prototype.displayTiddler = function(srcElement,tiddler,template,animate,unused,customFields,toggle,animationSrc)
{
	var title = (tiddler instanceof Tiddler) ? tiddler.title : tiddler;
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		if(toggle) {
			if(tiddlerElem.getAttribute("dirty") != "true")
				this.closeTiddler(title,true);
		} else {
			this.refreshTiddler(title,template,false,customFields);
		}
	} else {
		var place = this.getContainer();
		var before = this.positionTiddler(srcElement);
		tiddlerElem = this.createTiddler(place,before,title,template,customFields);
	}
	if(animationSrc && typeof animationSrc !== "string") {
		srcElement = animationSrc;
	}
	if(srcElement && typeof srcElement !== "string") {
		if(config.options.chkAnimate && (animate == undefined || animate == true) && anim && typeof Zoomer == "function" && typeof Scroller == "function")
			anim.startAnimating(new Zoomer(title,srcElement,tiddlerElem),new Scroller(tiddlerElem));
		else
			window.scrollTo(0,ensureVisible(tiddlerElem));
	}
	return tiddlerElem;
};

Story.prototype.positionTiddler = function(srcElement)
{
	var place = this.getContainer();
	var before = null;
	if(typeof srcElement == "string") {
		switch(srcElement) {
		case "top":
			before = place.firstChild;
			break;
		case "bottom":
			before = null;
			break;
		}
	} else {
		var after = this.findContainingTiddler(srcElement);
		if(after == null) {
			before = place.firstChild;
		} else if(after.nextSibling) {
			before = after.nextSibling;
			if(before.nodeType != 1)
				before = null;
		}
	}
	return before;
};

Story.prototype.createTiddler = function(place,before,title,template,customFields)
{
	var tiddlerElem = createTiddlyElement(null,"div",this.tiddlerId(title),"tiddler");
	tiddlerElem.setAttribute("refresh","tiddler");
	if(customFields)
		tiddlerElem.setAttribute("tiddlyFields",customFields);
	place.insertBefore(tiddlerElem,before);
	var defaultText = null;
	if(!store.tiddlerExists(title) && !store.isShadowTiddler(title))
		defaultText = this.loadMissingTiddler(title,customFields);
	this.refreshTiddler(title,template,false,customFields,defaultText);
	return tiddlerElem;
};

Story.prototype.loadMissingTiddler = function(title,fields,callback)
{
	var getTiddlerCallback = function(context)
	{
		if(context.status) {
			var t = context.tiddler;
			if(!t.created)
				t.created = new Date();
			if(!t.modified)
				t.modified = t.created;
			var dirty = store.isDirty();
			context.tiddler = store.saveTiddler(t.title,t.title,t.text,t.modifier,t.modified,t.tags,t.fields,true,t.created,t.creator);
			if(!window.allowSave())
				store.setDirty(dirty);
			autoSaveChanges();
		} else {
			story.refreshTiddler(context.title,null,true);
		}
		context.adaptor.close();
		if(callback) {
			callback(context);
		}
	};
	var tiddler = new Tiddler(title);
	tiddler.fields = typeof fields == "string" ? fields.decodeHashMap() : fields||{};
	var context = {serverType:tiddler.getServerType()};
	if(!context.serverType)
		return "";
	context.host = tiddler.fields['server.host'];
	context.workspace = tiddler.fields['server.workspace'];
	var adaptor = new config.adaptors[context.serverType]();
	adaptor.getTiddler(title,context,null,getTiddlerCallback);
	return config.messages.loadingMissingTiddler.format([title,context.serverType,context.host,context.workspace]);
};

Story.prototype.chooseTemplateForTiddler = function(title,template)
{
	if(!template)
		template = DEFAULT_VIEW_TEMPLATE;
	if(template == DEFAULT_VIEW_TEMPLATE || template == DEFAULT_EDIT_TEMPLATE)
		template = config.tiddlerTemplates[template];
	return template;
};

Story.prototype.getTemplateForTiddler = function(title,template,tiddler)
{
	return store.getRecursiveTiddlerText(template,null,10);
};

Story.prototype.refreshTiddler = function(title,template,force,customFields,defaultText)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		if(tiddlerElem.getAttribute("dirty") == "true" && !force)
			return tiddlerElem;
		template = this.chooseTemplateForTiddler(title,template);
		var currTemplate = tiddlerElem.getAttribute("template");
		if((template != currTemplate) || force) {
			var tiddler = store.getTiddler(title);
			if(!tiddler) {
				tiddler = new Tiddler();
				if(store.isShadowTiddler(title)) {
					var tags = [];
					tiddler.set(title,store.getTiddlerText(title),config.views.wikified.shadowModifier,version.date,tags,version.date);
				} else {
					var text = template=="EditTemplate" ?
								config.views.editor.defaultText.format([title]) :
								config.views.wikified.defaultText.format([title]);
					text = defaultText || text;
					var fields = customFields ? customFields.decodeHashMap() : null;
					tiddler.set(title,text,config.views.wikified.defaultModifier,version.date,[],version.date,fields);
				}
			}
			tiddlerElem.setAttribute("tags",tiddler.tags.join(" "));
			tiddlerElem.setAttribute("tiddler",title);
			tiddlerElem.setAttribute("template",template);
			tiddlerElem.onmouseover = this.onTiddlerMouseOver;
			tiddlerElem.onmouseout = this.onTiddlerMouseOut;
			tiddlerElem.ondblclick = this.onTiddlerDblClick;
			tiddlerElem[window.event?"onkeydown":"onkeypress"] = this.onTiddlerKeyPress;
			tiddlerElem.innerHTML = this.getTemplateForTiddler(title,template,tiddler);
			applyHtmlMacros(tiddlerElem,tiddler);
			if(store.getTaggedTiddlers(title).length > 0)
				jQuery(tiddlerElem).addClass("isTag");
			else
				jQuery(tiddlerElem).removeClass("isTag");
			if(store.tiddlerExists(title)) {
				jQuery(tiddlerElem).removeClass("shadow");
				jQuery(tiddlerElem).removeClass("missing");
			} else {
				jQuery(tiddlerElem).addClass(store.isShadowTiddler(title) ? "shadow" : "missing");
			}
			if(customFields)
				this.addCustomFields(tiddlerElem,customFields);
		}
	}
	return tiddlerElem;
};

Story.prototype.addCustomFields = function(place,customFields)
{
	var fields = customFields.decodeHashMap();
	var w = createTiddlyElement(place,"div",null,"customFields");
	w.style.display = "none";
	var t;
	for(t in fields) {
		var e = document.createElement("input");
		e.setAttribute("type","text");
		e.setAttribute("value",fields[t]);
		w.appendChild(e);
		e.setAttribute("edit",t);
	}
};

Story.prototype.refreshAllTiddlers = function(force)
{
	var e = this.getContainer().firstChild;
	while(e) {
		var template = e.getAttribute("template");
		if(template && e.getAttribute("dirty") != "true") {
			this.refreshTiddler(e.getAttribute("tiddler"),force ? null : template,true);
		}
		e = e.nextSibling;
	}
};

Story.prototype.onTiddlerMouseOver = function(e)
{
	jQuery(this).addClass("selected");
};

Story.prototype.onTiddlerMouseOut = function(e)
{
	jQuery(this).removeClass("selected");
};

Story.prototype.onTiddlerDblClick = function(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	if(target && target.nodeName.toLowerCase() != "input" && target.nodeName.toLowerCase() != "textarea") {
		if(document.selection && document.selection.empty)
			document.selection.empty();
		config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
		e.cancelBubble = true;
		if(e.stopPropagation) e.stopPropagation();
		return true;
	}
	return false;
};

Story.prototype.onTiddlerKeyPress = function(ev)
{
	var e = ev || window.event;
	clearMessage();
	var consume = false;
	var title = this.getAttribute("tiddler");
	var target = resolveTarget(e);
	switch(e.keyCode) {
	case 9: // Tab
		var ed = story.getTiddlerField(title,"text");
		if(target.tagName.toLowerCase() == "input" && ed.value==config.views.editor.defaultText.format([title])) {
			// moving from input field and editor still contains default text, so select it
			ed.focus();
			ed.select();
			consume = true;
		}
		if(config.options.chkInsertTabs && target.tagName.toLowerCase() == "textarea") {
			replaceSelection(target,String.fromCharCode(9));
			consume = true;
		}
		if(config.isOpera) {
			target.onblur = function() {
				this.focus();
				this.onblur = null;
			};
		}
		break;
	case 13: // Ctrl-Enter
	case 10: // Ctrl-Enter on IE PC
	case 77: // Ctrl-Enter is "M" on some platforms
		if(e.ctrlKey) {
			blurElement(this);
			config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
			consume = true;
		}
		break;
	case 27: // Escape
		blurElement(this);
		config.macros.toolbar.invokeCommand(this,"cancelCommand",e);
		consume = true;
		break;
	}
	e.cancelBubble = consume;
	if(consume) {
		if(e.stopPropagation) e.stopPropagation(); // Stop Propagation
		e.returnValue = true; // Cancel The Event in IE
		if(e.preventDefault ) e.preventDefault(); // Cancel The Event in Moz
	}
	return !consume;
};

Story.prototype.getTiddlerField = function(title,field)
{
	var tiddlerElem = this.getTiddler(title);
	var e = null;
	if(tiddlerElem) {
		var t,children = tiddlerElem.getElementsByTagName("*");
		for(t=0; t<children.length; t++) {
			var c = children[t];
			if(c.tagName.toLowerCase() == "input" || c.tagName.toLowerCase() == "textarea") {
				if(!e)
					e = c;
				if(c.getAttribute("edit") == field)
					e = c;
			}
		}
	}
	return e;
};

Story.prototype.focusTiddler = function(title,field)
{
	var e = this.getTiddlerField(title,field);
	if(e) {
		e.focus();
		e.select();
	}
};

Story.prototype.blurTiddler = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem && tiddlerElem.focus && tiddlerElem.blur) {
		tiddlerElem.focus();
		tiddlerElem.blur();
	}
};

Story.prototype.setTiddlerField = function(title,tag,mode,field)
{
	var c = this.getTiddlerField(title,field);
	var tags = c.value.readBracketedList();
	tags.setItem(tag,mode);
	c.value = String.encodeTiddlyLinkList(tags);
};

Story.prototype.setTiddlerTag = function(title,tag,mode)
{
	this.setTiddlerField(title,tag,mode,"tags");
};

Story.prototype.closeTiddler = function(title,animate,unused)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		clearMessage();
		this.scrubTiddler(tiddlerElem);
		if(config.options.chkAnimate && animate && anim && typeof Slider == "function")
			anim.startAnimating(new Slider(tiddlerElem,false,null,"all"));
		else {
			jQuery(tiddlerElem).remove();
		}
	}
};

Story.prototype.scrubTiddler = function(tiddlerElem)
{
	tiddlerElem.id = null;
};

Story.prototype.setDirty = function(title,dirty)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem)
		tiddlerElem.setAttribute("dirty",dirty ? "true" : "false");
};

Story.prototype.isDirty = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem)
		return tiddlerElem.getAttribute("dirty") == "true";
	return null;
};

Story.prototype.areAnyDirty = function()
{
	var r = false;
	this.forEachTiddler(function(title,element) {
		if(this.isDirty(title))
			r = true;
	});
	return r;
};

Story.prototype.closeAllTiddlers = function(exclude)
{
	clearMessage();
	this.forEachTiddler(function(title,element) {
		if((title != exclude) && element.getAttribute("dirty") != "true")
			this.closeTiddler(title);
	});
	window.scrollTo(0,ensureVisible(this.container));
};

Story.prototype.isEmpty = function()
{
	var place = this.getContainer();
	return place && place.firstChild == null;
};

Story.prototype.search = function(text,useCaseSensitive,useRegExp)
{
	this.closeAllTiddlers();
	highlightHack = new RegExp(useRegExp ? text : text.escapeRegExp(),useCaseSensitive ? "mg" : "img");
	var matches = store.search(highlightHack,"title","excludeSearch");
	this.displayTiddlers(null,matches);
	highlightHack = null;
	var q = useRegExp ? "/" : "'";
	if(matches.length > 0)
		displayMessage(config.macros.search.successMsg.format([matches.length.toString(),q + text + q]));
	else
		displayMessage(config.macros.search.failureMsg.format([q + text + q]));
};

Story.prototype.findContainingTiddler = function(e)
{
	while(e && !jQuery(e).hasClass("tiddler")) {
		e = jQuery(e).hasClass("popup") && Popup.stack[0] ? Popup.stack[0].root : e.parentNode;
	}
	return e;
};

Story.prototype.gatherSaveFields = function(e,fields)
{
	if(e && e.getAttribute) {
		var f = e.getAttribute("edit");
		if(f)
			fields[f] = e.value.replace(/\r/mg,"");
		if(e.hasChildNodes()) {
			var t,c = e.childNodes;
			for(t=0; t<c.length; t++)
				this.gatherSaveFields(c[t],fields);
		}
	}
};

Story.prototype.hasChanges = function(title)
{
	var e = this.getTiddler(title);
	if(e) {
		var fields = {};
		this.gatherSaveFields(e,fields);
		if(store.fetchTiddler(title)) {
		    var n;
			for(n in fields) {
				if(store.getValue(title,n) != fields[n]) //# tiddler changed
					return true;
			}
		} else {
			if(store.isShadowTiddler(title) && store.getShadowTiddlerText(title) == fields.text) { //# not checking for title or tags
				return false;
			} else { //# changed shadow or new tiddler
				return true;
			}
		}
	}
	return false;
};

Story.prototype.saveTiddler = function(title,minorUpdate)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		var fields = {};
		this.gatherSaveFields(tiddlerElem,fields);
		var newTitle = fields.title || title;
		if(!store.tiddlerExists(newTitle)) {
			newTitle = newTitle.trim();
			var creator = config.options.txtUserName;
		}
		if(store.tiddlerExists(newTitle) && newTitle != title) {
			if(!confirm(config.messages.overwriteWarning.format([newTitle.toString()])))
				return null;
				title = newTitle;
		}
		if(newTitle != title)
			this.closeTiddler(newTitle,false);
		tiddlerElem.id = this.tiddlerId(newTitle);
		tiddlerElem.setAttribute("tiddler",newTitle);
		tiddlerElem.setAttribute("template",DEFAULT_VIEW_TEMPLATE);
		tiddlerElem.setAttribute("dirty","false");
		if(config.options.chkForceMinorUpdate)
			minorUpdate = !minorUpdate;
		if(!store.tiddlerExists(newTitle))
			minorUpdate = false;
		var newDate = new Date();
		if(store.tiddlerExists(title)) {
			var t = store.fetchTiddler(title);
			var extendedFields = t.fields;
			creator = t.creator;
		} else {
			extendedFields = merge({},config.defaultCustomFields);
		}
		var n;
		for(n in fields) {
			if(!TiddlyWiki.isStandardField(n))
				extendedFields[n] = fields[n];
		}
		var tiddler = store.saveTiddler(title,newTitle,fields.text,minorUpdate ? undefined : config.options.txtUserName,minorUpdate ? undefined : newDate,fields.tags,extendedFields,null,null,creator);
		autoSaveChanges(null,[tiddler]);
		return newTitle;
	}
	return null;
};

Story.prototype.permaView = function()
{
	var links = [];
	this.forEachTiddler(function(title,element) {
		links.push(String.encodeTiddlyLink(title));
	});
	var t = encodeURIComponent(links.join(" "));
	if(t == "")
		t = "#";
	if(window.location.hash != t)
		window.location.hash = t;
};

Story.prototype.switchTheme = function(theme)
{
	if(safeMode)
		return;

	var getSlice = function(theme,slice) {
		var r;
		if(readOnly)
			r = store.getTiddlerSlice(theme,slice+"ReadOnly") || store.getTiddlerSlice(theme,"Web"+slice);
		r = r || store.getTiddlerSlice(theme,slice);
		if(r && r.indexOf(config.textPrimitives.sectionSeparator)==0)
			r = theme + r;
		return store.isAvailable(r) ? r : slice;
	};

	var replaceNotification = function(i,name,theme,slice) {
		var newName = getSlice(theme,slice);
		if(name!=newName && store.namedNotifications[i].name==name) {
			store.namedNotifications[i].name = newName;
			return newName;
		}
		return name;
	};

	var pt = config.refresherData.pageTemplate;
	var vi = DEFAULT_VIEW_TEMPLATE;
	var vt = config.tiddlerTemplates[vi];
	var ei = DEFAULT_EDIT_TEMPLATE;
	var et = config.tiddlerTemplates[ei];

	var i;
	for(i=0; i<config.notifyTiddlers.length; i++) {
		var name = config.notifyTiddlers[i].name;
		switch(name) {
		case "PageTemplate":
			config.refresherData.pageTemplate = replaceNotification(i,config.refresherData.pageTemplate,theme,name);
			break;
		case "StyleSheet":
			removeStyleSheet(config.refresherData.styleSheet);
			config.refresherData.styleSheet = replaceNotification(i,config.refresherData.styleSheet,theme,name);
			break;
		case "ColorPalette":
			config.refresherData.colorPalette = replaceNotification(i,config.refresherData.colorPalette,theme,name);
			break;
		default:
			break;
		}
	}
	config.tiddlerTemplates[vi] = getSlice(theme,"ViewTemplate");
	config.tiddlerTemplates[ei] = getSlice(theme,"EditTemplate");
	if(!startingUp) {
		if(config.refresherData.pageTemplate!=pt || config.tiddlerTemplates[vi]!=vt || config.tiddlerTemplates[ei]!=et) {
			refreshAll();
			this.refreshAllTiddlers(true);
		} else {
			setStylesheet(store.getRecursiveTiddlerText(config.refresherData.styleSheet,"",10),config.refreshers.styleSheet);
		}
		config.options.txtTheme = theme;
		saveOption("txtTheme");
	}
};

//--
//-- Backstage
//--
// Backstage tasks
config.tasks.save.action = saveChanges;

var backstage = {
	area: null,
	toolbar: null,
	button: null,
	showButton: null,
	hideButton: null,
	cloak: null,
	panel: null,
	panelBody: null,
	panelFooter: null,
	currTabName: null,
	currTabElem: null,
	content: null,

	init: function() {
		var cmb = config.messages.backstage;
		this.area = document.getElementById("backstageArea");
		this.toolbar = jQuery("#backstageToolbar").empty()[0];
		this.button = jQuery("#backstageButton").empty()[0];
		this.button.style.display = "block";
		var t = cmb.open.text + " " + glyph("bentArrowLeft");
		this.showButton = createTiddlyButton(this.button,t,cmb.open.tooltip,
						function(e) {backstage.show(); return false;},null,"backstageShow");
		t = glyph("bentArrowRight") + " " + cmb.close.text;
		this.hideButton = createTiddlyButton(this.button,t,cmb.close.tooltip,
						function(e) {backstage.hide(); return false;},null,"backstageHide");
		this.cloak = document.getElementById("backstageCloak");
		this.panel = document.getElementById("backstagePanel");
		this.panelFooter = createTiddlyElement(this.panel,"div",null,"backstagePanelFooter");
		this.panelBody = createTiddlyElement(this.panel,"div",null,"backstagePanelBody");
		this.cloak.onmousedown = function(e) {backstage.switchTab(null);};
		createTiddlyText(this.toolbar,cmb.prompt);
		for(t=0; t<config.backstageTasks.length; t++) {
			var taskName = config.backstageTasks[t];
			var task = config.tasks[taskName];
			var handler = task.action ? this.onClickCommand : this.onClickTab;
			var text = task.text + (task.action ? "" : glyph("downTriangle"));
			var btn = createTiddlyButton(this.toolbar,text,task.tooltip,handler,"backstageTab");
			jQuery(btn).addClass(task.action ? "backstageAction" : "backstageTask");
			btn.setAttribute("task", taskName);
			}
		this.content = document.getElementById("contentWrapper");
		if(config.options.chkBackstage)
			this.show();
		else
			this.hide();
	},

	isVisible: function() {
		return this.area ? this.area.style.display == "block" : false;
	},

	show: function() {
		this.area.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.toolbar.style.left = findWindowWidth() + "px";
			var p = [{style: "left", start: findWindowWidth(), end: 0, template: "%0px"}];
			anim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p));
		} else {
			backstage.area.style.left = "0px";
		}
		jQuery(this.showButton).hide();
		jQuery(this.hideButton).show();
		config.options.chkBackstage = true;
		saveOption("chkBackstage");
		jQuery(this.content).addClass("backstageVisible");
	},

	hide: function() {
		if(this.currTabElem) {
			this.switchTab(null);
		} else {
			backstage.toolbar.style.left = "0px";
			if(anim && config.options.chkAnimate) {
				var p = [{style: "left", start: 0, end: findWindowWidth(), template: "%0px"}];
				var c = function(element,properties) {backstage.area.style.display = "none";};
				anim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p,c));
			} else {
				this.area.style.display = "none";
			}
			this.showButton.style.display = "block";
			this.hideButton.style.display = "none";
			config.options.chkBackstage = false;
			saveOption("chkBackstage");
			jQuery(this.content).removeClass("backstageVisible");
		}
	},

	onClickCommand: function(e) {
		var task = config.tasks[this.getAttribute("task")];
		if(task.action) {
			backstage.switchTab(null);
			task.action();
		}
		return false;
	},

	onClickTab: function(e) {
		backstage.switchTab(this.getAttribute("task"));
		return false;
	},

	// Switch to a given tab, or none if null is passed
	switchTab: function(tabName) {
		var tabElem = null;
		var e = this.toolbar.firstChild;
		while(e) {
			if(e.getAttribute && e.getAttribute("task") == tabName)
				tabElem = e;
			e = e.nextSibling;
		}
		if(tabName == backstage.currTabName) {
			backstage.hidePanel();
			return;
		}
		if(backstage.currTabElem) {
			jQuery(this.currTabElem).removeClass("backstageSelTab");
		}
		if(tabElem && tabName) {
			backstage.preparePanel();
			jQuery(tabElem).addClass("backstageSelTab");
			var task = config.tasks[tabName];
			wikify(task.content,backstage.panelBody,null,null);
			backstage.showPanel();
		} else if(backstage.currTabElem) {
			backstage.hidePanel();
		}
		backstage.currTabName = tabName;
		backstage.currTabElem = tabElem;
	},

	isPanelVisible: function() {
		return backstage.panel ? backstage.panel.style.display == "block" : false;
	},

	preparePanel: function() {
		backstage.cloak.style.height = findDocHeight() + "px";
		backstage.cloak.style.display = "block";
		jQuery(backstage.panelBody).empty();
		return backstage.panelBody;
	},

	showPanel: function() {
		backstage.panel.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.panel.style.top = (-backstage.panel.offsetHeight) + "px";
			var p = [{style: "top", start: -backstage.panel.offsetHeight, end: 0, template: "%0px"}];
			anim.startAnimating(new Morpher(backstage.panel,config.animDuration,p),new Scroller(backstage.panel,false));
		} else {
			backstage.panel.style.top = "0px";
		}
		return backstage.panelBody;
	},

	hidePanel: function() {
		if(backstage.currTabElem)
			jQuery(backstage.currTabElem).removeClass("backstageSelTab");
		backstage.currTabElem = null;
		backstage.currTabName = null;
		if(anim && config.options.chkAnimate) {
			var p = [
				{style: "top", start: 0, end: -(backstage.panel.offsetHeight), template: "%0px"},
				{style: "display", atEnd: "none"}
			];
			var c = function(element,properties) {backstage.cloak.style.display = "none";};
			anim.startAnimating(new Morpher(backstage.panel,config.animDuration,p,c));
		} else {
			jQuery([backstage.panel,backstage.cloak]).hide();
		}
	}
};

config.macros.backstage = {};

config.macros.backstage.handler = function(place,macroName,params)
{
	var backstageTask = config.tasks[params[0]];
	if(backstageTask)
		createTiddlyButton(place,backstageTask.text,backstageTask.tooltip,function(e) {backstage.switchTab(params[0]); return false;});
};

//--
//-- ImportTiddlers macro
//--

config.macros.importTiddlers.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(readOnly) {
		createTiddlyElement(place,"div",null,"marked",this.readOnlyWarning);
		return;
	}
	var w = new Wizard();
	w.createWizard(place,this.wizardTitle);
	this.restart(w);
};

config.macros.importTiddlers.onCancel = function(e)
{
	var wizard = new Wizard(this);
	wizard.clear();
	config.macros.importTiddlers.restart(wizard);
	return false;
};

config.macros.importTiddlers.onClose = function(e)
{
	backstage.hidePanel();
	return false;
};

config.macros.importTiddlers.restart = function(wizard)
{
	var me = config.macros.importTiddlers;
	wizard.addStep(this.step1Title,this.step1Html);
	var t,s = wizard.getElement("selTypes");
	for(t in config.adaptors) {
		var e = createTiddlyElement(s,"option",null,null,config.adaptors[t].serverLabel || t);
		e.value = t;
	}
	if(config.defaultAdaptor)
		s.value = config.defaultAdaptor;
	s = wizard.getElement("selFeeds");
	var feeds = this.getFeeds();
	for(t in feeds) {
		e = createTiddlyElement(s,"option",null,null,t);
		e.value = t;
	}
	wizard.setValue("feeds",feeds);
	s.onchange = me.onFeedChange;
	var fileInput = wizard.getElement("txtBrowse");
	fileInput.onchange = me.onBrowseChange;
	fileInput.onkeyup = me.onBrowseChange;
	wizard.setButtons([{caption: this.openLabel, tooltip: this.openPrompt, onClick: me.onOpen}]);
	wizard.formElem.action = "javascript:;";
	wizard.formElem.onsubmit = function() {
		if(!this.txtPath || this.txtPath.value.length) //# check for manually entered path in first step
			this.lastChild.firstChild.onclick();
	};
};

config.macros.importTiddlers.getFeeds = function()
{
	var feeds = {};
	var t,tagged = store.getTaggedTiddlers("systemServer","title");
	for(t=0; t<tagged.length; t++) {
		var title = tagged[t].title;
		var serverType = store.getTiddlerSlice(title,"Type");
		if(!serverType)
			serverType = "file";
		feeds[title] = {title: title,
						url: store.getTiddlerSlice(title,"URL"),
						workspace: store.getTiddlerSlice(title,"Workspace"),
						workspaceList: store.getTiddlerSlice(title,"WorkspaceList"),
						tiddlerFilter: store.getTiddlerSlice(title,"TiddlerFilter"),
						serverType: serverType,
						description: store.getTiddlerSlice(title,"Description")};
	}
	return feeds;
};

config.macros.importTiddlers.onFeedChange = function(e)
{
	var wizard = new Wizard(this);
	var selTypes = wizard.getElement("selTypes");
	var fileInput = wizard.getElement("txtPath");
	var feeds = wizard.getValue("feeds");
	var f = feeds[this.value];
	if(f) {
		selTypes.value = f.serverType;
		fileInput.value = f.url;
		wizard.setValue("feedName",f.serverType);
		wizard.setValue("feedHost",f.url);
		wizard.setValue("feedWorkspace",f.workspace);
		wizard.setValue("feedWorkspaceList",f.workspaceList);
		wizard.setValue("feedTiddlerFilter",f.tiddlerFilter);
	}
	return false;
};

config.macros.importTiddlers.onBrowseChange = function(e)
{
	var wizard = new Wizard(this);
	var file = this.value;
	file = file.replace(/^C:\\fakepath\\/i,''); // remove fakepath (chrome/opera/safari)
	if(this.files && this.files[0]) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalFileRead");
			file = this.files[0].fileName; // REQUIRES PRIVILEGES.. NULL otherwise
		} catch (ex) {
			// non-priv fallback: combine filename with path to current document
			var path=getLocalPath(document.location.href);
			var slashpos=path.lastIndexOf('/'); if (slashpos==-1) slashpos=path.lastIndexOf('\\'); 
			if (slashpos!=-1) path=path.substr(0,slashpos+1); // remove filename, leave trailing 	slash
			file=path+file;
		}
	}
	var fileInput = wizard.getElement("txtPath");
	fileInput.value = config.macros.importTiddlers.getURLFromLocalPath(file);
	var serverType = wizard.getElement("selTypes");
	serverType.value = "file";
	return true;
};

config.macros.importTiddlers.getURLFromLocalPath = function(v)
{
	if(!v || !v.length)
		return v;
	v = v.replace(/\\/g,"/"); // use "/" for cross-platform consistency
	var u;
	var t = v.split(":");
	var p = t[1] || t[0]; // remove drive letter (if any)
	if(t[1] && (t[0] == "http" || t[0] == "https" || t[0] == "file")) {
		u = v;
	} else if(p.substr(0,1)=="/") {
		u = document.location.protocol + "//" + document.location.hostname + (t[1] ? "/" : "") + v;
	} else {
		var c = document.location.href.replace(/\\/g,"/");
		var pos = c.lastIndexOf("/");
		if(pos!=-1)
			c = c.substr(0,pos); // remove filename
		u = c + "/" + p;
	}
	return u;
};

config.macros.importTiddlers.onOpen = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var fileInput = wizard.getElement("txtPath");
	var url = fileInput.value;
	var serverType = wizard.getElement("selTypes").value || config.defaultAdaptor;
	var adaptor = new config.adaptors[serverType]();
	wizard.setValue("adaptor",adaptor);
	wizard.setValue("serverType",serverType);
	wizard.setValue("host",url);
	adaptor.openHost(url,null,wizard,me.onOpenHost);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenHost);
	return false;
};

config.macros.importTiddlers.onOpenHost = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	var adaptor = wizard.getValue("adaptor");
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenHost: " + context.statusText);
	adaptor.getWorkspaceList(context,wizard,me.onGetWorkspaceList);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusGetWorkspaceList);
};

config.macros.importTiddlers.onGetWorkspaceList = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onGetWorkspaceList: " + context.statusText);
	wizard.setValue("context",context);
	var workspace = wizard.getValue("feedWorkspace");
	if(!workspace && context.workspaces.length==1)
		workspace = context.workspaces[0].title;
	if(workspace) {
		context.adaptor.openWorkspace(workspace,context,wizard,me.onOpenWorkspace);
		wizard.setValue("workspace",workspace);
		wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenWorkspace);
		return;
	}
	wizard.addStep(me.step2Title,me.step2Html);
	var t,s = wizard.getElement("selWorkspace");
	s.onchange = me.onWorkspaceChange;
	for(t=0; t<context.workspaces.length; t++) {
		var e = createTiddlyElement(s,"option",null,null,context.workspaces[t].title);
		e.value = context.workspaces[t].title;
	}
	var workspaceList = wizard.getValue("feedWorkspaceList");
	if(workspaceList) {
		var n,list = workspaceList.parseParams("workspace",null,false,true);
		for(n=1; n<list.length; n++) {
			if(context.workspaces.findByField("title",list[n].value) == null) {
				e = createTiddlyElement(s,"option",null,null,list[n].value);
				e.value = list[n].value;
			}
		}
	}
	if(workspace) {
		t = wizard.getElement("txtWorkspace");
		t.value = workspace;
	}
	wizard.setButtons([{caption: me.openLabel, tooltip: me.openPrompt, onClick: me.onChooseWorkspace}]);
};

config.macros.importTiddlers.onWorkspaceChange = function(e)
{
	var wizard = new Wizard(this);
	var t = wizard.getElement("txtWorkspace");
	t.value = this.value;
	this.selectedIndex = 0;
	return false;
};

config.macros.importTiddlers.onChooseWorkspace = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var adaptor = wizard.getValue("adaptor");
	var workspace = wizard.getElement("txtWorkspace").value;
	wizard.setValue("workspace",workspace);
	var context = wizard.getValue("context");
	adaptor.openWorkspace(workspace,context,wizard,me.onOpenWorkspace);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenWorkspace);
	return false;
};

config.macros.importTiddlers.onOpenWorkspace = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenWorkspace: " + context.statusText);
	var adaptor = wizard.getValue("adaptor");
	var browse=wizard.getElement("txtBrowse");
	if (browse.files) context.file=browse.files[0]; // for HTML5 FileReader
	adaptor.getTiddlerList(context,wizard,me.onGetTiddlerList,wizard.getValue("feedTiddlerFilter"));
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusGetTiddlerList);
};

config.macros.importTiddlers.onGetTiddlerList = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true) {
		var error = context.statusText||me.errorGettingTiddlerList;
		if(context.host.indexOf("file://") === 0) {
			error = me.errorGettingTiddlerListFile;
		} else {
			error = context.xhr && context.xhr.status == 404 ? me.errorGettingTiddlerListHttp404 :
				me.errorGettingTiddlerListHttp;
		}
		wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],"");
		jQuery("span.status", wizard.footerEl).html(error); // so error message can be html
		return;
	}
	// Extract data for the listview
	var listedTiddlers = [];
	if(context.tiddlers) {
		var n;
		for(n=0; n<context.tiddlers.length; n++) {
			var tiddler = context.tiddlers[n];
			listedTiddlers.push({
				title: tiddler.title,
				modified: tiddler.modified,
				modifier: tiddler.modifier,
				text: tiddler.text ? wikifyPlainText(tiddler.text,100) : "",
				tags: tiddler.tags,
				size: tiddler.text ? tiddler.text.length : 0,
				tiddler: tiddler
			});
		}
	}
	listedTiddlers.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : +1);});
	// Display the listview
	wizard.addStep(me.step3Title,me.step3Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	var listView = ListView.create(listWrapper,listedTiddlers,me.listViewTemplate);
	wizard.setValue("listView",listView);
	wizard.setValue("context",context);
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler");
	txtSaveTiddler.value = me.generateSystemServerName(wizard);
	wizard.setButtons([
			{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel},
			{caption: me.importLabel, tooltip: me.importPrompt, onClick: me.doImport}
		]);
};

config.macros.importTiddlers.generateSystemServerName = function(wizard)
{
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var pattern = config.macros.importTiddlers[workspace ? "systemServerNamePattern" : "systemServerNamePatternNoWorkspace"];
	return pattern.format([serverType,host,workspace]);
};

config.macros.importTiddlers.saveServerTiddler = function(wizard)
{
	var me = config.macros.importTiddlers;
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler").value;
	if(store.tiddlerExists(txtSaveTiddler)) {
		if(!confirm(me.confirmOverwriteSaveTiddler.format([txtSaveTiddler])))
			return;
		store.suspendNotifications();
		store.removeTiddler(txtSaveTiddler);
		store.resumeNotifications();
	}
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var text = me.serverSaveTemplate.format([serverType,host,workspace]);
	store.saveTiddler(txtSaveTiddler,txtSaveTiddler,text,me.serverSaveModifier,new Date(),["systemServer"]);
};

config.macros.importTiddlers.doImport = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	if(wizard.getElement("chkSave").checked)
		me.saveServerTiddler(wizard);
	var chkSync = wizard.getElement("chkSync").checked;
	wizard.setValue("sync",chkSync);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	var adaptor = wizard.getValue("adaptor");
	var overwrite = [];
	var t;
	for(t=0; t<rowNames.length; t++) {
		if(store.tiddlerExists(rowNames[t]))
			overwrite.push(rowNames[t]);
	}
	if(overwrite.length > 0) {
		if(!confirm(me.confirmOverwriteText.format([overwrite.join(", ")])))
			return false;
	}
	wizard.addStep(me.step4Title.format([rowNames.length]),me.step4Html);
	for(t=0; t<rowNames.length; t++) {
		var link = document.createElement("div");
		createTiddlyLink(link,rowNames[t],true);
		var place = wizard.getElement("markReport");
		place.parentNode.insertBefore(link,place);
	}
	wizard.setValue("remainingImports",rowNames.length);
	wizard.setButtons([
			{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}
		],me.statusDoingImport);
	var wizardContext = wizard.getValue("context");
	var tiddlers = wizardContext ? wizardContext.tiddlers : [];
	for(t=0; t<rowNames.length; t++) {
		var context = {
			allowSynchronous:true,
			tiddler:tiddlers[tiddlers.findByField("title",rowNames[t])]
		};
		adaptor.getTiddler(rowNames[t],context,wizard,me.onGetTiddler);
	}
	return false;
};

config.macros.importTiddlers.onGetTiddler = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(!context.status)
		displayMessage("Error in importTiddlers.onGetTiddler: " + context.statusText);
	var tiddler = context.tiddler;
	store.suspendNotifications();
	store.saveTiddler(tiddler.title, tiddler.title, tiddler.text, tiddler.modifier, tiddler.modified, tiddler.tags, tiddler.fields, true, tiddler.created);
	if(!wizard.getValue("sync")) {
		store.setValue(tiddler.title,'server',null);
	}
	store.resumeNotifications();
	if(!context.isSynchronous)
		store.notify(tiddler.title,true);
	var remainingImports = wizard.getValue("remainingImports")-1;
	wizard.setValue("remainingImports",remainingImports);
	if(remainingImports == 0) {
		if(context.isSynchronous) {
			store.notifyAll();
			refreshDisplay();
		}
		wizard.setButtons([
				{caption: me.doneLabel, tooltip: me.donePrompt, onClick: me.onClose}
			],me.statusDoneImport);
		autoSaveChanges();
	}
};

//--
//-- Upgrade macro
//--

config.macros.upgrade.handler = function(place)
{
	var w = new Wizard();
	w.createWizard(place,this.wizardTitle);
	w.addStep(this.step1Title,this.step1Html.format([this.source,this.source]));
	w.setButtons([{caption: this.upgradeLabel, tooltip: this.upgradePrompt, onClick: this.onClickUpgrade}]);
};

config.macros.upgrade.onClickUpgrade = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	if(!window.allowSave()) {
		alert(me.errorCantUpgrade);
		return false;
	}
	if(story.areAnyDirty() || store.isDirty()) {
		alert(me.errorNotSaved);
		return false;
	}
	var localPath = getLocalPath(document.location.toString());
	var backupPath = getBackupPath(localPath,me.backupExtension);
	w.setValue("backupPath",backupPath);
	w.setButtons([],me.statusPreparingBackup);
	var original = loadOriginal(localPath);
	w.setButtons([],me.statusSavingBackup);
	var backup = copyFile(backupPath,localPath);
	if(!backup)
		backup = saveFile(backupPath,original);
	if(!backup) {
		w.setButtons([],me.errorSavingBackup);
		alert(me.errorSavingBackup);
		return false;
	}
	w.setButtons([],me.statusLoadingCore);
	var options = {
		type:"GET",
		url:me.source,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			me.onLoadCore(true,w,jqXHR.responseText,me.source,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			me.onLoadCore(false,w,null,me.source,jqXHR);
		}
	};
	ajaxReq(options);
	return false;
};

config.macros.upgrade.onLoadCore = function(status,params,responseText,url,xhr)
{
	var me = config.macros.upgrade;
	var w = params;
	var errMsg;
	if(!status)
		errMsg = me.errorLoadingCore;
	var newVer = me.extractVersion(responseText);
	if(!newVer)
		errMsg = me.errorCoreFormat;
	if(errMsg) {
		w.setButtons([],errMsg);
		alert(errMsg);
		return;
	}
	var onStartUpgrade = function(e) {
		w.setButtons([],me.statusSavingCore);
		var localPath = getLocalPath(document.location.toString());
		saveFile(localPath,responseText);
		w.setButtons([],me.statusReloadingCore);
		var backupPath = w.getValue("backupPath");
		var newLoc = document.location.toString() + "?time=" + new Date().convertToYYYYMMDDHHMM() + "#upgrade:[[" + encodeURI(backupPath) + "]]";
		window.setTimeout(function () {window.location = newLoc;},10);
	};
	var step2 = [me.step2Html_downgrade,me.step2Html_restore,me.step2Html_upgrade][compareVersions(version,newVer) + 1];
	w.addStep(me.step2Title,step2.format([formatVersion(newVer),formatVersion(version)]));
	w.setButtons([{caption: me.startLabel, tooltip: me.startPrompt, onClick: onStartUpgrade},{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}]);
};

config.macros.upgrade.onCancel = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	w.addStep(me.step3Title,me.step3Html);
	w.setButtons([]);
	return false;
};

config.macros.upgrade.extractVersion = function(upgradeFile)
{
	var re = /^var version = \{title: "([^"]+)", major: (\d+), minor: (\d+), revision: (\d+)(, beta: (\d+)){0,1}, date: new Date\("([^"]+)"\)/mg;
	var m = re.exec(upgradeFile);
	return m ? {title: m[1], major: m[2], minor: m[3], revision: m[4], beta: m[6], date: new Date(m[7])} : null;
};

function upgradeFrom(path)
{
	var importStore = new TiddlyWiki();
	var tw = loadFile(path);
	if(window.netscape !== undefined)
		tw = convertUTF8ToUnicode(tw);
	importStore.importTiddlyWiki(tw);
	importStore.forEachTiddler(function(title,tiddler) {
		if(!store.getTiddler(title)) {
			store.addTiddler(tiddler);
		}
	});
	refreshDisplay();
	saveChanges(); //# To create appropriate Markup* sections
	alert(config.messages.upgradeDone.format([formatVersion()]));
	window.location = window.location.toString().substr(0,window.location.toString().lastIndexOf("?"));
}

//--
//-- Manager UI for groups of tiddlers
//--

config.macros.plugins.handler = function(place,macroName,params,wikifier,paramString)
{
	var wizard = new Wizard();
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	listWrapper.setAttribute("refresh","macro");
	listWrapper.setAttribute("macroName","plugins");
	listWrapper.setAttribute("params",paramString);
	this.refresh(listWrapper,paramString);
};

config.macros.plugins.refresh = function(listWrapper,params)
{
	var me = config.macros.plugins;
	var wizard = new Wizard(listWrapper);
	var selectedRows = [];
	ListView.forEachSelector(listWrapper,function(e,rowName) {
			if(e.checked)
				selectedRows.push(e.getAttribute("rowName"));
		});
	jQuery(listWrapper).empty();
	params = params.parseParams("anon");
	var plugins = installedPlugins.slice(0);
	var t,tiddler,p;
	var configTiddlers = store.getTaggedTiddlers("systemConfig");
	for(t=0; t<configTiddlers.length; t++) {
		tiddler = configTiddlers[t];
		if(plugins.findByField("title",tiddler.title) == null) {
			p = getPluginInfo(tiddler);
			p.executed = false;
			p.log.splice(0,0,this.skippedText);
			plugins.push(p);
		}
	}
	for(t=0; t<plugins.length; t++) {
		p = plugins[t];
		p.size = p.tiddler.text ? p.tiddler.text.length : 0;
		p.forced = p.tiddler.isTagged("systemConfigForce");
		p.disabled = p.tiddler.isTagged("systemConfigDisable");
		p.Selected = selectedRows.indexOf(plugins[t].title) != -1;
	}
	if(plugins.length == 0) {
		createTiddlyElement(listWrapper,"em",null,null,this.noPluginText);
		wizard.setButtons([]);
	} else {
		var template = readOnly ? this.listViewTemplateReadOnly : this.listViewTemplate;
		var listView = ListView.create(listWrapper,plugins,template,this.onSelectCommand);
		wizard.setValue("listView",listView);
		if(!readOnly) {
			wizard.setButtons([
				{caption: me.removeLabel, tooltip: me.removePrompt, onClick: me.doRemoveTag},
				{caption: me.deleteLabel, tooltip: me.deletePrompt, onClick: me.doDelete}
			]);
		}
	}
};

config.macros.plugins.doRemoveTag = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		var t;
		for(t=0; t<rowNames.length; t++) {
			store.setTiddlerTag(rowNames[t],false,"systemConfig");
		}
		autoSaveChanges();
	}
};

config.macros.plugins.doDelete = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		if(confirm(config.macros.plugins.confirmDeleteText.format([rowNames.join(", ")]))) {
			var t;
			for(t=0; t<rowNames.length; t++) {
				store.removeTiddler(rowNames[t]);
				story.closeTiddler(rowNames[t],true);
			}
		}
		autoSaveChanges();
	}
};

//--
//-- Message area
//--

function getMessageDiv()
{
	var msgArea = document.getElementById("messageArea");
	if(!msgArea)
		return null;
	if(!msgArea.hasChildNodes())
		createTiddlyButton(createTiddlyElement(msgArea,"div",null,"messageToolbar"),
			config.messages.messageClose.text,
			config.messages.messageClose.tooltip,
			clearMessage);
	msgArea.style.display = "block";
	return createTiddlyElement(msgArea,"div");
}

function displayMessage(text,linkText)
{
	var e = getMessageDiv();
	if(!e) {
		alert(text);
		return;
	}
	if(linkText) {
		var link = createTiddlyElement(e,"a",null,null,text);
		link.href = linkText;
		link.target = "_blank";
	} else {
		e.appendChild(document.createTextNode(text));
	}
}

function clearMessage()
{
	var msgArea = document.getElementById("messageArea");
	if(msgArea) {
		jQuery(msgArea).empty();
		msgArea.style.display = "none";
	}
	return false;
}

//--
//-- Refresh mechanism
//--

config.notifyTiddlers = [
	{name: "SystemSettings", notify: onSystemSettingsChange},
	{name: "StyleSheetLayout", notify: refreshStyles},
	{name: "StyleSheetColors", notify: refreshStyles},
	{name: "StyleSheet", notify: refreshStyles},
	{name: "StyleSheetPrint", notify: refreshStyles},
	{name: "PageTemplate", notify: refreshPageTemplate},
	{name: "SiteTitle", notify: refreshPageTitle},
	{name: "SiteSubtitle", notify: refreshPageTitle},
	{name: "WindowTitle", notify: refreshPageTitle},
	{name: "ColorPalette", notify: refreshColorPalette},
	{name: null, notify: refreshDisplay}
];

config.refreshers = {
	link: function(e,changeList)
		{
		var title = e.getAttribute("tiddlyLink");
		refreshTiddlyLink(e,title);
		return true;
		},

	tiddler: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var template = e.getAttribute("template");
		if(changeList && (changeList.indexOf && changeList.indexOf(title) != -1) && !story.isDirty(title))
			story.refreshTiddler(title,template,true);
		else
			refreshElements(e,changeList);
		return true;
		},

	content: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var force = e.getAttribute("force");
		var args = e.getAttribute("args");
		if(force != null || changeList == null || (changeList.indexOf && changeList.indexOf(title) != -1)) {
			jQuery(e).empty();
			config.macros.tiddler.transclude(e,title,args);
			return true;
		} else
			return false;
		},

	macro: function(e,changeList)
		{
		var macro = e.getAttribute("macroName");
		var params = e.getAttribute("params");
		if(macro)
			macro = config.macros[macro];
		if(macro && macro.refresh)
			macro.refresh(e,params);
		return true;
		}
};

config.refresherData = {
	styleSheet: "StyleSheet",
	defaultStyleSheet: "StyleSheet",
	pageTemplate: "PageTemplate",
	defaultPageTemplate: "PageTemplate",
	colorPalette: "ColorPalette",
	defaultColorPalette: "ColorPalette"
};

function refreshElements(root,changeList)
{
	var c,nodes = root.childNodes;
	for(c=0; c<nodes.length; c++) {
		var e = nodes[c], type = null;
		if(e.getAttribute && (e.tagName ? e.tagName != "IFRAME" : true))
			type = e.getAttribute("refresh");
		var refresher = config.refreshers[type];
		var refreshed = false;
		if(refresher != undefined)
			refreshed = refresher(e,changeList);
		if(e.hasChildNodes() && !refreshed)
			refreshElements(e,changeList);
	}
}

function applyHtmlMacros(root,tiddler)
{
	var e = root.firstChild;
	while(e) {
		var nextChild = e.nextSibling;
		if(e.getAttribute) {
			var macro = e.getAttribute("macro");
			if(macro) {
				e.removeAttribute("macro");
				var params = "";
				var p = macro.indexOf(" ");
				if(p != -1) {
					params = macro.substr(p+1);
					macro = macro.substr(0,p);
				}
				invokeMacro(e,macro,params,null,tiddler);
			}
		}
		if(e.hasChildNodes())
			applyHtmlMacros(e,tiddler);
		e = nextChild;
	}
}

function refreshPageTemplate(title)
{
	var stash = jQuery("<div/>").appendTo("body").hide()[0];
	var display = story.getContainer();
	var nodes,t;
	if(display) {
		nodes = display.childNodes;
		for(t=nodes.length-1; t>=0; t--)
			stash.appendChild(nodes[t]);
	}
	var wrapper = document.getElementById("contentWrapper");

	if(!title || !store.isAvailable(title))
		title = config.refresherData.pageTemplate;
	if(!store.isAvailable(title))
		title = config.refresherData.defaultPageTemplate; //# this one is always avaialable
	wrapper.innerHTML = store.getRecursiveTiddlerText(title,null,10);
	applyHtmlMacros(wrapper);
	refreshElements(wrapper);
	display = story.getContainer();
	jQuery(display).empty();
	if(!display)
		display = createTiddlyElement(wrapper,"div",story.containerId());
	nodes = stash.childNodes;
	for(t=nodes.length-1; t>=0; t--)
		display.appendChild(nodes[t]);
	jQuery(stash).remove();
}

function refreshDisplay(hint)
{
	if(typeof hint == "string")
		hint = [hint];
	var e = document.getElementById("contentWrapper");
	refreshElements(e,hint);
	if(backstage.isPanelVisible()) {
		e = document.getElementById("backstage");
		refreshElements(e,hint);
	}
}

function refreshPageTitle()
{
	document.title = getPageTitle();
}

function getPageTitle()
{
	return wikifyPlainText(store.getTiddlerText("WindowTitle",""),null,tiddler);
}

function refreshStyles(title,doc)
{
	setStylesheet(title == null ? "" : store.getRecursiveTiddlerText(title,"",10),title,doc || document);
}

function refreshColorPalette(title)
{
	if(!startingUp)
		refreshAll();
}

function refreshAll()
{
	refreshPageTemplate();
	refreshDisplay();
	refreshStyles("StyleSheetLayout");
	refreshStyles("StyleSheetColors");
	refreshStyles(config.refresherData.styleSheet);
	refreshStyles("StyleSheetPrint");
}

//--
//-- Option handling
//--

config.optionHandlers = {
	'txt': {
		get: function(name) {return encodeCookie(config.options[name].toString());},
		set: function(name,value) {config.options[name] = decodeCookie(value);}
	},
	'chk': {
		get: function(name) {return config.options[name] ? 'true' : 'false';},
		set: function(name,value) {config.options[name] = value == 'true';}
	}
};

function setOption(name,value)
{
	var optType = name.substr(0,3);
	if(config.optionHandlers[optType] && config.optionHandlers[optType].set)
		config.optionHandlers[optType].set(name,value);
}

// Gets the value of an option as a string. Most code should just read from config.options.* directly
function getOption(name)
{
	var optType = name.substr(0,3);
	return config.optionHandlers[optType] && config.optionHandlers[optType].get ? config.optionHandlers[optType].get(name) : null;
}

function loadOptions()
{
	if(safeMode)
		return;
	loadCookies();
	loadSystemSettings();
}
// @Deprecated; retained for backwards compatibility
var loadOptionsCookie = loadOptions;

function getCookies()
{
	var cookieList = document.cookie.split(';');
	var i,cookies = {};
	for(i=0; i<cookieList.length; i++) {
		var p = cookieList[i].indexOf('=');
		if(p != -1) {
			var name = cookieList[i].substr(0,p).trim();
			var value = cookieList[i].substr(p+1).trim();
			cookies[name] = value;
		}
	}
	return cookies;
}

function loadCookies()
{
	var i,cookies = getCookies();
	if(cookies['TiddlyWiki']) {
		cookies = cookies['TiddlyWiki'].decodeHashMap();
	}
	for(i in cookies) {
		if(config.optionsSource[i] != 'setting') {
			setOption(i,cookies[i]);
		}
	}
}

function loadSystemSettings()
{
	var key,settings = store.calcAllSlices('SystemSettings');
	config.optionsSource = {};
	for(key in settings) {
		setOption(key,settings[key]);
		config.optionsSource[key] = 'setting';
	}
}

function onSystemSettingsChange()
{
	if(!startingUp) {
		loadSystemSettings();
	}
}

function saveOption(name)
{
	if(safeMode)
		return;
	if(name.match(/[()\s]/g, '_')) {
		alert(config.messages.invalidCookie.format([name]));
		return;
	}
	saveCookie(name);
	if(config.optionsSource[name] == 'setting') {
		saveSystemSetting(name,true);
	}
}
// @Deprecated; retained for backwards compatibility
var saveOptionCookie = saveOption;

function removeCookie(name)
{
	document.cookie = name + '=; expires=Thu, 01-Jan-1970 00:00:01 UTC; path=/;';
}

function saveCookie(name)
{
	var key,cookies = {};
	for(key in config.options) {
		var value = getOption(key);
		value = value == null ? 'false' : value;
		cookies[key] = value;
	}
	document.cookie = 'TiddlyWiki=' + String.encodeHashMap(cookies) + '; expires=Fri, 1 Jan 2038 12:00:00 UTC; path=/';
	cookies = getCookies();
	var c;
	for(c in cookies) {
		var optType = c.substr(0,3);
		if(config.optionHandlers[optType])
			removeCookie(c);
	}
}

var systemSettingSave;
function commitSystemSettings(storeWasDirty)
{
	if(systemSettingSave) {
		window.clearTimeout(systemSettingSave);
	}
	systemSettingSave = window.setTimeout(function() {
		var tiddler = store.getTiddler('SystemSettings');
		autoSaveChanges(null,[tiddler]);
	}, 1000);
}

function saveSystemSetting(name,saveFile)
{
	var title = 'SystemSettings';
	var slice = store.getTiddlerSlice(title,name);
	if(readOnly || slice === getOption(name)) {
		return; //# don't save if read-only or the option hasn't changed
	}
	var slices = store.calcAllSlices(title);
	var key;
	for(key in config.optionsSource) {
		var value = getOption(key) || '';
		if(slices[key] !== value) {
			slices[key] = value;
		}
	}
	var text = [];
	for(key in slices) {
		text.push('%0: %1'.format([key,slices[key]]));
	}
	text = text.sort().join('\n');
	var storeWasDirty = store.isDirty();
	var tiddler = store.getTiddler(title);
	if(tiddler) {
		tiddler.text = text;
		tiddler = store.saveTiddler(tiddler);
	} else {
		tiddler = store.saveTiddler(title,title,text,'System',new Date(),['excludeLists'],config.defaultCustomFields);
	}
	if(saveFile) {
		commitSystemSettings(storeWasDirty);
	}
}

function encodeCookie(s)
{
	return escape(convertUnicodeToHtmlEntities(s));
}

function decodeCookie(s)
{
	s = unescape(s);
	var re = /&#[0-9]{1,5};/g;
	return s.replace(re,function($0) {return String.fromCharCode(eval($0.replace(/[&#;]/g,'')));});
}

config.macros.option.genericCreate = function(place,type,opt,className,desc)
{
	var typeInfo = config.macros.option.types[type];
	var c = document.createElement(typeInfo.elementType);
	if(typeInfo.typeValue)
		c.setAttribute('type',typeInfo.typeValue);
	c[typeInfo.eventName] = typeInfo.onChange;
	c.setAttribute('option',opt);
	c.className = className || typeInfo.className;
	if(config.optionsDesc[opt])
		c.setAttribute('title',config.optionsDesc[opt]);
	place.appendChild(c);
	if(desc != 'no')
		createTiddlyText(place,config.optionsDesc[opt] || opt);
	c[typeInfo.valueField] = config.options[opt];
	return c;
};

config.macros.option.genericOnChange = function(e)
{
	var opt = this.getAttribute('option');
	if(opt) {
		var optType = opt.substr(0,3);
		var handler = config.macros.option.types[optType];
		if(handler.elementType && handler.valueField)
			config.macros.option.propagateOption(opt,handler.valueField,this[handler.valueField],handler.elementType,this);
	}
	return true;
};

config.macros.option.types = {
	'txt': {
		elementType: 'input',
		valueField: 'value',
		eventName: 'onchange',
		className: 'txtOptionInput',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	},
	'chk': {
		elementType: 'input',
		valueField: 'checked',
		eventName: 'onclick',
		className: 'chkOptionInput',
		typeValue: 'checkbox',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	}
};

config.macros.option.propagateOption = function(opt,valueField,value,elementType,elem)
{
	config.options[opt] = value;
	saveOption(opt);
	var t,nodes = document.getElementsByTagName(elementType);
	for(t=0; t<nodes.length; t++) {
		var optNode = nodes[t].getAttribute('option');
		if(opt == optNode && nodes[t]!=elem)
			nodes[t][valueField] = value;
	}
};

config.macros.option.handler = function(place,macroName,params,wikifier,paramString)
{
	params = paramString.parseParams('anon',null,true,false,false);
	var opt = (params[1] && params[1].name == 'anon') ? params[1].value : getParam(params,'name',null);
	var className = (params[2] && params[2].name == 'anon') ? params[2].value : getParam(params,'class',null);
	var desc = getParam(params,'desc','no');
	var type = opt.substr(0,3);
	var h = config.macros.option.types[type];
	if(h && h.create)
		h.create(place,type,opt,className,desc);
};

config.macros.options.handler = function(place,macroName,params,wikifier,paramString)
{
	params = paramString.parseParams('anon',null,true,false,false);
	var showUnknown = getParam(params,'showUnknown','no');
	var wizard = new Wizard();
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement('markList');
	var chkUnknown = wizard.getElement('chkUnknown');
	chkUnknown.checked = showUnknown == 'yes';
	chkUnknown.onchange = this.onChangeUnknown;
	var listWrapper = document.createElement('div');
	markList.parentNode.insertBefore(listWrapper,markList);
	wizard.setValue('listWrapper',listWrapper);
	this.refreshOptions(listWrapper,showUnknown == 'yes');
};

config.macros.options.refreshOptions = function(listWrapper,showUnknown)
{
	var n,opts = [];
	for(n in config.options) {
		var opt = {};
		opt.option = '';
		opt.name = n;
		opt.lowlight = !config.optionsDesc[n];
		opt.description = opt.lowlight ? this.unknownDescription : config.optionsDesc[n];
		if(!opt.lowlight || showUnknown)
			opts.push(opt);
	}
	opts.sort(function(a,b) {return a.name.substr(3) < b.name.substr(3) ? -1 : (a.name.substr(3) == b.name.substr(3) ? 0 : +1);});
	ListView.create(listWrapper,opts,this.listViewTemplate);
	for(n=0; n<opts.length; n++) {
		var type = opts[n].name.substr(0,3);
		var h = config.macros.option.types[type];
		if(h && h.create) {
			h.create(opts[n].colElements['option'],type,opts[n].name,null,'no');
		}
	}
};

config.macros.options.onChangeUnknown = function(e)
{
	var wizard = new Wizard(this);
	var listWrapper = wizard.getValue('listWrapper');
	jQuery(listWrapper).empty();
	config.macros.options.refreshOptions(listWrapper,this.checked);
	return false;
};

//--
//-- Saving
//--

var saveUsingSafari = false;

var startSaveArea = '<div id="' + 'storeArea">'; // Split up into two so that indexOf() of this source doesn't find it
var startSaveAreaRE = /<((div)|(DIV)) ((id)|(ID))=["']?storeArea['"]?>/; // Used for IE6
var endSaveArea = '</d' + 'iv>';
var endSaveAreaCaps = '</D' + 'IV>';

// If there are unsaved changes, force the user to confirm before exitting
function confirmExit()
{
	hadConfirmExit = true;
	if((store && store.isDirty && store.isDirty()) || (story && story.areAnyDirty && story.areAnyDirty()))
		return config.messages.confirmExit;
}

// Give the user a chance to save changes before exitting
function checkUnsavedChanges()
{
	if(store && store.isDirty && store.isDirty() && window.hadConfirmExit === false) {
		if(confirm(config.messages.unsavedChangesWarning))
			saveChanges();
	}
}

function updateLanguageAttribute(s)
{
	if(config.locale) {
		var mRE = /(<html(?:.*?)?)(?: xml:lang\="([a-z]+)")?(?: lang\="([a-z]+)")?>/;
		var m = mRE.exec(s);
		if(m) {
			var t = m[1];
			if(m[2])
				t += ' xml:lang="' + config.locale + '"';
			if(m[3])
				t += ' lang="' + config.locale + '"';
			t += ">";
			s = s.substr(0,m.index) + t + s.substr(m.index+m[0].length);
		}
	}
	return s;
}

function updateMarkupBlock(s,blockName,tiddlerName)
{
	return s.replaceChunk(
			"<!--%0-START-->".format([blockName]),
			"<!--%0-END-->".format([blockName]),
			"\n" + convertUnicodeToFileFormat(store.getRecursiveTiddlerText(tiddlerName,"")) + "\n");
}

function updateOriginal(original,posDiv,localPath)
{
	if(!posDiv)
		posDiv = locateStoreArea(original);
	if(!posDiv) {
		alert(config.messages.invalidFileError.format([localPath]));
		return null;
	}
	var revised = original.substr(0,posDiv[0] + startSaveArea.length) + "\n" +
				convertUnicodeToFileFormat(store.allTiddlersAsHtml()) + "\n" +
				original.substr(posDiv[1]);
	var newSiteTitle = convertUnicodeToFileFormat(getPageTitle()).htmlEncode();
	revised = revised.replaceChunk("<title"+">","</title"+">"," " + newSiteTitle + " ");
	revised = updateLanguageAttribute(revised);
	revised = updateMarkupBlock(revised,"PRE-HEAD","MarkupPreHead");
	revised = updateMarkupBlock(revised,"POST-HEAD","MarkupPostHead");
	revised = updateMarkupBlock(revised,"PRE-BODY","MarkupPreBody");
	revised = updateMarkupBlock(revised,"POST-SCRIPT","MarkupPostBody");
	return revised;
}

function locateStoreArea(original)
{
	// Locate the storeArea divs
	if(!original)
		return null;
	var posOpeningDiv = original.search(startSaveAreaRE);
	var limitClosingDiv = original.indexOf("<"+"!--POST-STOREAREA--"+">");
	if(limitClosingDiv == -1)
		limitClosingDiv = original.indexOf("<"+"!--POST-BODY-START--"+">");
	var start = limitClosingDiv == -1 ? original.length : limitClosingDiv;
	var posClosingDiv = original.lastIndexOf(endSaveArea,start);
	if(posClosingDiv == -1)
		posClosingDiv = original.lastIndexOf(endSaveAreaCaps,start);
	return (posOpeningDiv != -1 && posClosingDiv != -1) ? [posOpeningDiv,posClosingDiv] : null;
}

function autoSaveChanges(onlyIfDirty,tiddlers)
{
	if(config.options.chkAutoSave)
		saveChanges(onlyIfDirty,tiddlers);
}

function loadOriginal(localPath)
{
	var content=loadFile(localPath);
	if (!content) content=window.originalHTML||recreateOriginal();
	return content;
}

function recreateOriginal()
{
	// construct doctype
	var content = "<!DOCTYPE ";
	var t=document.doctype;
	if (!t) 
		content+="html"
	else {
		content+=t.name;
		if      (t.publicId)		content+=' PUBLIC "'+t.publicId+'"';
		else if (t.systemId)		content+=' SYSTEM "'+t.systemId+'"';
	}
	content+=' "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"';
	content+='>\n';

	// append current document content
	content+=document.documentElement.outerHTML;

	content=content.replace(/<div id="saveTest">savetest<\/div>/,'<div id="saveTest"></div>');
	content=content.replace(/script><applet [^\>]*><\/applet>/g,'script>');
	content=content.replace(/><head>/,'>\n<head>');
	content=content.replace(/\n\n<\/body><\/html>$/,'</body>\n</html>\n');
	content=content.replace(/(<(meta) [^\>]*[^\/])>/g,'$1 />');
	content=content.replace(/<noscript>[^\<]*<\/noscript>/,
		function(m){return m.replace(/&lt;/g,'<').replace(/&gt;/g,'>');});
	content=content.replace(/<div id="copyright">[^\<]*<\/div>/,
		function(m){return m.replace(/\xA9/g,'&copy;');});

	return content;
}

// Save this tiddlywiki with the pending changes
function saveChanges(onlyIfDirty,tiddlers)
{
	if(onlyIfDirty && !store.isDirty())
		return;
	clearMessage();
	var t0 = new Date();
	var msg = config.messages;
	var originalPath = document.location.toString();
	if(!window.allowSave()) {
		alert(msg.notFileUrlError);
		if(store.tiddlerExists(msg.saveInstructions))
			story.displayTiddler(null,msg.saveInstructions);
		return;
	}
	var localPath = getLocalPath(originalPath);
	var original = loadOriginal(localPath);
	if(original == null) {
		alert(msg.cantSaveError);
		if(store.tiddlerExists(msg.saveInstructions))
			story.displayTiddler(null,msg.saveInstructions);
		return;
	}
	var posDiv = locateStoreArea(original);
	if(!posDiv) {
		alert(msg.invalidFileError.format([localPath]));
		return;
	}
	var co=config.options; //# abbreviation
	config.saveByDownload=false;
	config.saveByManualDownload=false;
	saveMain(localPath,original,posDiv);
	if (!config.saveByDownload && !config.saveByManualDownload) {
		if(co.chkSaveBackups)
			saveBackup(localPath,original);
		if(co.chkSaveEmptyTemplate)
			saveEmpty(localPath,original,posDiv);
		if(co.chkGenerateAnRssFeed && saveRss instanceof Function)
			saveRss(localPath);
	}
	if(co.chkDisplayInstrumentation)
		displayMessage("saveChanges " + (new Date()-t0) + " ms");
}


function saveMain(localPath,original,posDiv)
{
	var save;
	try {
		var revised = updateOriginal(original,posDiv,localPath);
		save = saveFile(localPath,revised);
	} catch (ex) {
		showException(ex);
	}
	if(save) {
		if (!config.saveByManualDownload) {
			if (config.saveByDownload) { //# set by HTML5DownloadSaveFile()
				var link = getDataURI(revised);
				var msg  = config.messages.mainDownload;
			} else {
				var link = "file://" + localPath;
				var msg  = config.messages.mainSaved;
			}
			displayMessage(msg,link);
		}
		store.setDirty(false);
	} else {
		alert(config.messages.mainFailed);
	}
}

function saveBackup(localPath,original)
{
	var backupPath = getBackupPath(localPath);
	var backup = copyFile(backupPath,localPath);
	if(!backup)
		backup = saveFile(backupPath,original);
	if(backup)
		displayMessage(config.messages.backupSaved,"file://" + backupPath);
	else
		alert(config.messages.backupFailed);
}

function saveEmpty(localPath,original,posDiv)
{
	var emptyPath,p;
	if((p = localPath.lastIndexOf("/")) != -1)
		emptyPath = localPath.substr(0,p) + "/";
	else if((p = localPath.lastIndexOf("\\")) != -1)
		emptyPath = localPath.substr(0,p) + "\\";
	else
		emptyPath = localPath + ".";
	emptyPath += "empty.html";
	var empty = original.substr(0,posDiv[0] + startSaveArea.length) + original.substr(posDiv[1]);
	var emptySave = saveFile(emptyPath,empty);
	if(emptySave)
		displayMessage(config.messages.emptySaved,"file://" + emptyPath);
	else
		alert(config.messages.emptyFailed);
}

// Translate URL to local path [Preemption]
window.getLocalPath = window.getLocalPath || function(origPath)
{
	var originalPath = convertUriToUTF8(origPath,config.options.txtFileSystemCharSet);
	// Remove any location or query part of the URL
	var argPos = originalPath.indexOf("?");
	if(argPos != -1)
		originalPath = originalPath.substr(0,argPos);
	var hashPos = originalPath.indexOf("#");
	if(hashPos != -1)
		originalPath = originalPath.substr(0,hashPos);
	// Convert file://localhost/ to file:///
	if(originalPath.indexOf("file://localhost/") == 0)
		originalPath = "file://" + originalPath.substr(16);
	// Convert to a native file format
	var localPath;
	if(originalPath.charAt(9) == ":") // pc local file
		localPath = unescape(originalPath.substr(8)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file://///") == 0) // FireFox pc network file
		localPath = "\\\\" + unescape(originalPath.substr(10)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file:///") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(7));
	else if(originalPath.indexOf("file:/") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(5));
	else // pc network file
		localPath = "\\\\" + unescape(originalPath.substr(7)).replace(new RegExp("/","g"),"\\");
	return localPath;
}

function getBackupPath(localPath,title,extension)
{
	var slash = "\\";
	var dirPathPos = localPath.lastIndexOf("\\");
	if(dirPathPos == -1) {
		dirPathPos = localPath.lastIndexOf("/");
		slash = "/";
	}
	var backupFolder = config.options.txtBackupFolder;
	if(!backupFolder || backupFolder == "")
		backupFolder = ".";
	var backupPath = localPath.substr(0,dirPathPos) + slash + backupFolder + localPath.substr(dirPathPos);
	backupPath = backupPath.substr(0,backupPath.lastIndexOf(".")) + ".";
	if(title)
		backupPath += title.replace(/[\\\/\*\?\":<> ]/g,"_") + ".";
	backupPath += (new Date()).convertToYYYYMMDDHHMMSSMMM() + "." + (extension || "html");
	return backupPath;
}

//--
//-- RSS Saving
//--

function saveRss(localPath)
{
	var rssPath = localPath.substr(0,localPath.lastIndexOf(".")) + ".xml";
	if(saveFile(rssPath,convertUnicodeToFileFormat(generateRss())))
		displayMessage(config.messages.rssSaved,"file://" + rssPath);
	else
		alert(config.messages.rssFailed);
}

tiddlerToRssItem = function(tiddler,uri)
{
	var s = "<title" + ">" + tiddler.title.htmlEncode() + "</title" + ">\n";
	s += "<description>" + wikifyStatic(tiddler.text,null,tiddler).htmlEncode() + "</description>\n";
	var i;
	for(i=0; i<tiddler.tags.length; i++)
		s += "<category>" + tiddler.tags[i] + "</category>\n";
	s += "<link>" + uri + "#" + encodeURIComponent(String.encodeTiddlyLink(tiddler.title)) + "</link>\n";
	s +="<pubDate>" + tiddler.modified.toGMTString() + "</pubDate>\n";
	return s;
};

function generateRss()
{
	var s = [];
	var d = new Date();
	var u = store.getTiddlerText("SiteUrl");
	// Assemble the header
	s.push("<" + "?xml version=\"1.0\"?" + ">");
	s.push("<rss version=\"2.0\">");
	s.push("<channel>");
	s.push("<title" + ">" + wikifyPlainText(store.getTiddlerText("SiteTitle",""),null,tiddler).htmlEncode() + "</title" + ">");
	if(u)
		s.push("<link>" + u.htmlEncode() + "</link>");
	s.push("<description>" + wikifyPlainText(store.getTiddlerText("SiteSubtitle",""),null,tiddler).htmlEncode() + "</description>");
	s.push("<language>" + config.locale + "</language>");
	s.push("<copyright>Copyright " + d.getFullYear() + " " + config.options.txtUserName.htmlEncode() + "</copyright>");
	s.push("<pubDate>" + d.toGMTString() + "</pubDate>");
	s.push("<lastBuildDate>" + d.toGMTString() + "</lastBuildDate>");
	s.push("<docs>http://blogs.law.harvard.edu/tech/rss</docs>");
	s.push("<generator>TiddlyWiki " + formatVersion() + "</generator>");
	// The body
	var tiddlers = store.getTiddlers("modified","excludeLists");
	var i,n = config.numRssItems > tiddlers.length ? 0 : tiddlers.length-config.numRssItems;
	for(i=tiddlers.length-1; i>=n; i--) {
		s.push("<item>\n" + tiddlerToRssItem(tiddlers[i],u) + "\n</item>");
	}
	// And footer
	s.push("</channel>");
	s.push("</rss>");
	// Save it all
	return s.join("\n");
}

//--
//-- Filesystem code
//--

// Copy a file in filesystem [Preemption]
window.copyFile = window.copyFile || function(dest,source)
{
	return config.browser.isIE ? ieCopyFile(dest,source) : false;
}


// Save a file in filesystem [Preemption]
window.saveFile = window.saveFile || function(fileUrl,content)
{
	var r = mozillaSaveFile(fileUrl,content);
	if(!r)
		r = ieSaveFile(fileUrl,content);
	if(!r)
		r = javaSaveFile(fileUrl,content);
	if(!r)
		r = HTML5DownloadSaveFile(fileUrl,content);
	if(!r)
		r = manualSaveFile(fileUrl,content);
	return r;
}

// Load a file from filesystem [Preemption]
window.loadFile = window.loadFile || function(fileUrl)
{
	var r = mozillaLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = ieLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = javaLoadFile(fileUrl);
	return r;
}

function ieCreatePath(path)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}

	var pos = path.lastIndexOf("\\");
	if(pos==-1)
		pos = path.lastIndexOf("/");
	if(pos!=-1)
		path = path.substring(0,pos+1);

	var scan = [path];
	var parent = fso.GetParentFolderName(path);
	while(parent && !fso.FolderExists(parent)) {
		scan.push(parent);
		parent = fso.GetParentFolderName(parent);
	}

	for(i=scan.length-1;i>=0;i--) {
		if(!fso.FolderExists(scan[i])) {
			fso.CreateFolder(scan[i]);
		}
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function ieSaveFile(filePath,content)
{
	ieCreatePath(filePath);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}
	var file = fso.OpenTextFile(filePath,2,-1,0);
	file.Write(content);
	file.Close();
	return true;
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function ieLoadFile(filePath)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		var file = fso.OpenTextFile(filePath,1);
		var content = file.ReadAll();
		file.Close();
	} catch(ex) {
		return null;
	}
	return content;
}

function ieCopyFile(dest,source)
{
	ieCreatePath(dest);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		fso.GetFile(source).Copy(dest);
	} catch(ex) {
		return false;
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function mozillaSaveFile(filePath,content)
{
	if(window.Components) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if(!file.exists())
				file.create(0,0x01B4);// 0x01B4 = 0664
			var out = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);
			out.init(file,0x22,0x04,null);
			out.write(content,content.length);
			out.flush();
			out.close();
			return true;
		} catch(ex) {
			return false;
		}
	}
	return null;
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function mozillaLoadFile(filePath)
{
	if(window.Components) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if(!file.exists())
				return null;
			var inputStream = Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream);
			inputStream.init(file,0x01,0x04,null);
			var sInputStream = Components.classes["@mozilla.org/scriptableinputstream;1"].createInstance(Components.interfaces.nsIScriptableInputStream);
			sInputStream.init(inputStream);
			var contents = sInputStream.read(sInputStream.available());
			sInputStream.close();
			inputStream.close();
			return contents;
		} catch(ex) {
			return false;
		}
	}
	return null;
}

function javaUrlToFilename(url)
{
	var f = "//localhost";
	if(url.indexOf(f) == 0)
		return url.substring(f.length);
	var i = url.indexOf(":");
	return i > 0 ? url.substring(i-1) : url;
}

/*
 *
 * in between when the applet has been started
 * and the user has given permission to run the applet
 * we get an applet object, but it doesn't have the methods
 * we expect yet.
 *
 */
var LOG_TIDDLYSAVER = true;
function logTiddlySaverException(msg, ex) {
	var applet = document.applets['TiddlySaver'];
	console.log(msg + ": " + ex);
	if (LOG_TIDDLYSAVER && applet) {
		try {
			console.log(msg + ": " + applet.getLastErrorMsg());
			console.log(msg + ": " + applet.getLastErrorStackTrace());
		} catch (ex) {}
	}
}

function javaDebugInformation () {
	var applet = document.applets['TiddlySaver'];
	var what = [
		["Java Version", applet.getJavaVersion],
		["Last Exception", applet.getLastErrorMessage],
		["Last Exception Stack Trace", applet.getLastErrorStackTrace],
		["System Properties", applet.getSystemProperties] ];

	function formatItem (description, method) {
		try {
			 result = String(method.call(applet));
		} catch (ex) {
			 result = String(ex)
		}
		return description + ": " + result
	}

	return jQuery.map(what, function (item) { return formatItem.apply(this, item) })
			.join('\n\n')
}

function javaSaveFile(filePath,content)
{
	var applet = document.applets['TiddlySaver'];
	try {
		if (applet && filePath) 
			return applet.saveFile(javaUrlToFilename(filePath), "UTF-8", content);
	} catch(ex) {
		logTiddlySaverException("javaSaveFile", ex);
	}
	// is this next block working anywhere ? -- grmble
	try {
		var s = new java.io.PrintStream(new java.io.FileOutputStream(javaUrlToFilename(filePath)));
		s.print(content);
		s.close();
	} catch(ex2) {
		return null;
	}
	return true;
}

function javaLoadFile(filePath)
{
	var applet = document.applets['TiddlySaver'];
	try {
		if (applet && filePath) {
			var ret = applet.loadFile(javaUrlToFilename(filePath),"UTF-8");
			if(!ret)
				return null;
			return String(ret);
		}
	} catch(ex) {
		logTiddlySaverException("javaLoadFile", ex);
	}
	// is this next block working anywhere ? -- grmble
	var content = [];
	try {
		var r = new java.io.BufferedReader(new java.io.FileReader(javaUrlToFilename(filePath)));
		var line;
		while((line = r.readLine()) != null)
			content.push(String(line));
		r.close();
	} catch(ex2) {
		return null;
	}
	return content.join("\n");
}

function HTML5DownloadSaveFile(filePath,content)
{
	if(document.createElement("a").download !== undefined) {
		config.saveByDownload=true;
		var slashpos=filePath.lastIndexOf("/");
		if (slashpos==-1) slashpos=filePath.lastIndexOf("\\"); 
		var filename=filePath.substr(slashpos+1);
		var uri = getDataURI(content);
		var link = document.createElement("a");
		link.setAttribute("target","_blank");
		link.setAttribute("href",uri);
		link.setAttribute("download",filename);
		document.body.appendChild(link); link.click(); document.body.removeChild(link);
		return true;
	}
	return null;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function manualSaveFile(filePath,content)
{
	// FALLBACK for showing a link to data: URI
	config.saveByManualDownload=true;
	var slashpos=filePath.lastIndexOf("/");
	if (slashpos==-1) slashpos=filePath.lastIndexOf("\\"); 
	var filename=filePath.substr(slashpos+1);
	var uri = getDataURI(content);
	displayMessage(config.messages.mainDownloadManual,uri);
	return true;
}

// construct data URI (using base64 encoding to preserve multi-byte encodings)
function getDataURI(data) {
	if (config.browser.isIE)
		return "data:text/html,"+encodeURIComponent(data);
	else
		return "data:text/html;base64,"+encodeBase64(data);
}

function encodeBase64(data) {
	if (!data) return "";
	var keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
	var out = "";
	var chr1,chr2,chr3="";
	var enc1,enc2,enc3,enc4="";
	for (var count=0,i=0; i<data.length; ) {
		chr1=data.charCodeAt(i++);
		chr2=data.charCodeAt(i++);
		chr3=data.charCodeAt(i++);
		enc1=chr1 >> 2;
		enc2=((chr1 & 3) << 4) | (chr2 >> 4);
		enc3=((chr2 & 15) << 2) | (chr3 >> 6);
		enc4=chr3 & 63;
		if (isNaN(chr2)) enc3=enc4=64;
		else if (isNaN(chr3)) enc4=64;
		out+=keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4);
		chr1=chr2=chr3=enc1=enc2=enc3=enc4="";
	}
	return out;
}//--
//-- Filesystem utilities
//--

function convertUTF8ToUnicode(u)
{
	return config.browser.isOpera || !window.netscape ? manualConvertUTF8ToUnicode(u) : mozConvertUTF8ToUnicode(u);
}


function manualConvertUTF8ToUnicode(utf)
{
	var uni = utf;
	var src = 0;
	var dst = 0;
	var b1, b2, b3;
	var c;
	while(src < utf.length) {
		b1 = utf.charCodeAt(src++);
		if(b1 < 0x80) {
			dst++;
		} else if(b1 < 0xE0) {
			b2 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0x1F) << 6) | (b2 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
		} else {
			b2 = utf.charCodeAt(src++);
			b3 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0xF) << 12) | ((b2 & 0x3F) << 6) | (b3 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
		}
	}
	return uni;
}

function mozConvertUTF8ToUnicode(u)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUTF8ToUnicode(u);
	} // fallback
	var s = converter.ConvertToUnicode(u);
	var fin = converter.Finish();
	return fin.length > 0 ? s+fin : s;
}

function convertUnicodeToFileFormat(s)
{
	return config.browser.isOpera || !window.netscape ? (config.browser.isIE ? convertUnicodeToHtmlEntities(s) : s) : mozConvertUnicodeToUTF8(s);
}

function convertUnicodeToHtmlEntities(s)
{
	var re = /[^\u0000-\u007F]/g;
	return s.replace(re,function($0) {return "&#" + $0.charCodeAt(0).toString() + ";";});
}

function convertUnicodeToUTF8(s)
{
// return convertUnicodeToFileFormat to allow plugin migration
	return convertUnicodeToFileFormat(s);
}

function manualConvertUnicodeToUTF8(s)
{
	return unescape(encodeURIComponent(s));
}

function mozConvertUnicodeToUTF8(s)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUnicodeToUTF8(s);
	} // fallback
	var u = converter.ConvertFromUnicode(s);
	var fin = converter.Finish();
	return fin.length > 0 ? u + fin : u;
}

function convertUriToUTF8(uri,charSet)
{
	if(window.netscape == undefined || charSet == undefined || charSet == "")
		return uri;
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/utf8converterservice;1"].getService(Components.interfaces.nsIUTF8ConverterService);
	} catch(ex) {
		return uri;
	}
	return converter.convertURISpecToUTF8(uri,charSet);
}
//--
//-- Server adaptor base class
//--

function AdaptorBase()
{
	this.host = null;
	this.store = null;
	return this;
}

AdaptorBase.prototype.close = function()
{
	return true;
};

AdaptorBase.prototype.fullHostName = function(host)
{
	if(!host)
		return '';
	host = host.trim();
	if(!host.match(/:\/\//))
		host = 'http://' + host;
	if(host.substr(host.length-1) == '/')
		host = host.substr(0,host.length-1);
	return host;
};

AdaptorBase.minHostName = function(host)
{
	return host;
};

AdaptorBase.prototype.setContext = function(context,userParams,callback)
{
	if(!context) context = {};
	context.userParams = userParams;
	if(callback) context.callback = callback;
	context.adaptor = this;
	if(!context.host)
		context.host = this.host;
	context.host = this.fullHostName(context.host);
	if(!context.workspace)
		context.workspace = this.workspace;
	return context;
};

// Open the specified host
AdaptorBase.prototype.openHost = function(host,context,userParams,callback)
{
	this.host = host;
	context = this.setContext(context,userParams,callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() {context.callback(context,userParams);},10);
	return true;
};

// Open the specified workspace
AdaptorBase.prototype.openWorkspace = function(workspace,context,userParams,callback)
{
	this.workspace = workspace;
	context = this.setContext(context,userParams,callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() {callback(context,userParams);},10);
	return true;
};

//--
//-- Server adaptor for talking to static TiddlyWiki files
//--

function FileAdaptor()
{
}

FileAdaptor.prototype = new AdaptorBase();

FileAdaptor.serverType = 'file';
FileAdaptor.serverLabel = 'TiddlyWiki';

FileAdaptor.loadTiddlyWikiSuccess = function(context,jqXHR)
{
	context.status = true;
	context.adaptor.store = new TiddlyWiki();
	if(!context.adaptor.store.importTiddlyWiki(jqXHR.responseText)) {
		context.statusText = config.messages.invalidFileError.format([context.host]);
		context.status = false;
	}
	context.complete(context,context.userParams);
};

FileAdaptor.loadTiddlyWikiError = function(context,jqXHR)
{
	context.status = false;
	context.statusText = jqXHR.message;
	context.complete(context,context.userParams);
};

// Get the list of workspaces on a given server
FileAdaptor.prototype.getWorkspaceList = function(context,userParams,callback)
{
	context = this.setContext(context,userParams,callback);
	context.workspaces = [{title:"(default)"}];
	context.status = true;
	if(callback)
		window.setTimeout(function() {callback(context,userParams);},10);
	return true;
};

// Gets the list of tiddlers within a given workspace
FileAdaptor.prototype.getTiddlerList = function(context,userParams,callback,filter)
{
	context = this.setContext(context,userParams,callback);
	if(!context.filter)
		context.filter = filter;
	context.complete = FileAdaptor.getTiddlerListComplete;
	if(this.store) {
		return context.complete(context,context.userParams);
	}
	var options = {
		type:"GET",
		url:context.host,
		file:context.file, // for HTML5 FileReader
		processData:false,
		success:function(data,textStatus,jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			context.xhr = jqXHR;
			FileAdaptor.loadTiddlyWikiError(context,jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerListComplete = function(context,userParams)
{
	if(context.status) {
		if(context.filter) {
			context.tiddlers = context.adaptor.store.filterTiddlers(context.filter);
		} else {
			context.tiddlers = [];
			context.adaptor.store.forEachTiddler(function(title,tiddler) {context.tiddlers.push(tiddler);});
		}
		var i;
		for(i=0; i<context.tiddlers.length; i++) {
			context.tiddlers[i].fields['server.type'] = FileAdaptor.serverType;
			context.tiddlers[i].fields['server.host'] = AdaptorBase.minHostName(context.host);
			context.tiddlers[i].fields['server.page.revision'] = context.tiddlers[i].modified.convertToYYYYMMDDHHMM();
		}
		context.status = true;
	}
	if(context.callback) {
		window.setTimeout(function() {context.callback(context,userParams);},10);
	}
	return true;
};

FileAdaptor.prototype.generateTiddlerInfo = function(tiddler)
{
	var info = {};
	info.uri = tiddler.fields['server.host'] + "#" + tiddler.title;
	return info;
};

// Retrieve a tiddler from a given workspace on a given server
FileAdaptor.prototype.getTiddler = function(title,context,userParams,callback)
{
	context = this.setContext(context,userParams,callback);
	context.title = title;
	context.complete = FileAdaptor.getTiddlerComplete;
	if(context.adaptor.store) {
		return context.complete(context,context.userParams);
	}
	var options = {
		type:"GET",
		url:context.host,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			FileAdaptor.loadTiddlyWikiError(context,jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerComplete = function(context,userParams)
{
	var t = context.adaptor.store.fetchTiddler(context.title);
	if(t) {
		t.fields['server.type'] = FileAdaptor.serverType;
		t.fields['server.host'] = AdaptorBase.minHostName(context.host);
		t.fields['server.page.revision'] = t.modified.convertToYYYYMMDDHHMM();
		context.tiddler = t;
		context.status = true;
	} else { //# tiddler does not exist in document
		context.status = false;
	}
	if(context.allowSynchronous) {
		context.isSynchronous = true;
		context.callback(context,userParams);
	} else {
		window.setTimeout(function() {context.callback(context,userParams);},10);
	}
	return true;
};

FileAdaptor.prototype.close = function()
{
	this.store = null;
};

config.adaptors[FileAdaptor.serverType] = FileAdaptor;

config.defaultAdaptor = FileAdaptor.serverType;

//--
//-- HTTP request code
//--

function ajaxReq(args)
{
	if (args.file || args.url.startsWith("file"))  // LOCAL FILE
		return localAjax(args);
	return jQuery.ajax(args);
}

function localAjax(args)
{
	var success=function(data)
		{ args.success(data,"success",{ responseText:data }); }
	var failure=function(who)
		{ args.error({ message:who+": cannot read local file" },"error",0); }

	if (args.file) try { // HTML5 FileReader (Chrome, FF20+, Safari, etc.)
		var reader=new FileReader();
		reader.onload=function(e)  { success(e.target.result); }
		reader.onerror=function(e) { failure("FileReader"); }
		reader.readAsText(args.file);
		return true;
	} catch (ex) { ; }

	try { // local file I/O (IE, FF with TiddlyFox, Chrome/Safari with TiddlySaver, etc.)
		var data=loadFile(getLocalPath(args.url));
		if (data) success(data);
		else failure("loadFile");
		return true;
	} catch (ex) { ; }

	return true;
}

function httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache)
{
	var httpSuccess = function(xhr) {
		try {
			// IE error sometimes returns 1223 when it should be 204 so treat it as success, see #1450
			return (!xhr.status && location.protocol === "file:") ||
				(xhr.status >= 200 && xhr.status < 300) ||
				xhr.status === 304 || xhr.status === 1223;
		} catch(e) {}
		return false;
	};

	var options = {
		type:type,
		url:url,
		processData:false,
		data:data,
		cache:!!allowCache,
		beforeSend: function(xhr) {
			var i;
			for(i in headers)
				xhr.setRequestHeader(i,headers[i]);
		}
	};

	if(callback) {
		options.complete = function(xhr,textStatus) {
			if(httpSuccess(xhr))
				callback(true,params,xhr.responseText,url,xhr);
			else
				callback(false,params,null,url,xhr);
		};
	}
	if(contentType)
		options.contentType = contentType;
	if(username)
		options.username = username;
	if(password)
		options.password = password;
	try {
		if(window.Components && window.netscape && window.netscape.security && document.location.protocol.indexOf("http") == -1)
			window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
	} catch (ex) {
	}
	return jQuery.ajax(options);
}
//--
//-- TiddlyWiki-specific utility functions
//--

// Returns TiddlyWiki version string
function formatVersion(v)
{
	v = v || version;
	return v.major + "." + v.minor + "." + v.revision +
		(v.alpha ? " (alpha " + v.alpha + ")" : "") +
		(v.beta ? " (beta " + v.beta + ")" : "");
}

function compareVersions(v1,v2)
{
	var x1,x2,i,a = ["major","minor","revision"];
	for(i = 0; i<a.length; i++) {
		x1 = v1[a[i]] || 0;
		x2 = v2[a[i]] || 0;
		if(x1<x2)
			return 1;
		if(x1>x2)
			return -1;
	}
	x1 = v1.beta || 9999;
	x2 = v2.beta || 9999;
	if(x1<x2)
		return 1;
	return x1 > x2 ? -1 : 0;
}

function merge(dst,src,preserveExisting)
{
	var i;
	for(i in src) {
		if(!preserveExisting || dst[i] === undefined)
			dst[i] = src[i];
	}
	return dst;
}

// Resolve the target object of an event
function resolveTarget(e)
{
	var obj;
	if(e.target)
		obj = e.target;
	else if(e.srcElement)
		obj = e.srcElement;
	if(obj.nodeType == 3) // defeat Safari bug
		obj = obj.parentNode;
	return obj;
}

// Returns a string containing the description of an exception, optionally prepended by a message
function exceptionText(e,message)
{
	var s = e.description || e.toString();
	return message ? "%0:\n%1".format([message,s]) : s;
}

// Displays an alert of an exception description with optional message
function showException(e,message)
{
	alert(exceptionText(e,message));
}

function alertAndThrow(m)
{
	alert(m);
	throw(m);
}

function glyph(name)
{
	var g = config.glyphs;
	var b = g.currBrowser;
	if(b == null) {
		b = 0;
		while(b < g.browsers.length-1 && !g.browsers[b]())
			b++;
		g.currBrowser = b;
	}
	if(!g.codes[name])
		return "";
	return g.codes[name][b];
}

function createTiddlyText(parent,text)
{
	return parent.appendChild(document.createTextNode(text));
}

function createTiddlyCheckbox(parent,caption,checked,onChange)
{
	var cb = document.createElement("input");
	cb.setAttribute("type","checkbox");
	cb.onclick = onChange;
	parent.appendChild(cb);
	cb.checked = checked;
	cb.className = "chkOptionInput";
	if(caption)
		wikify(caption,parent);
	return cb;
}

function createTiddlyElement(parent,element,id,className,text,attribs)
{
	var n,e = document.createElement(element);
	if(className != null)
		e.className = className;
	if(id != null)
		e.setAttribute("id",id);
	if(text != null)
		e.appendChild(document.createTextNode(text));
	if(attribs) {
		for(n in attribs) {
			e.setAttribute(n,attribs[n]);
		}
	}
	if(parent != null)
		parent.appendChild(e);
	return e;
}

function createTiddlyButton(parent,text,tooltip,action,className,id,accessKey,attribs)
{
	var i,btn = document.createElement("a");
	btn.setAttribute("href","javascript:;");
	if(action) {
		btn.onclick = action;
	}
	if(tooltip)
		btn.setAttribute("title",tooltip);
	if(text)
		btn.appendChild(document.createTextNode(text));
	btn.className = className || "button";
	if(id)
		btn.id = id;
	if(attribs) {
		for(i in attribs) {
			btn.setAttribute(i,attribs[i]);
		}
	}
	if(parent)
		parent.appendChild(btn);
	if(accessKey)
		btn.setAttribute("accessKey",accessKey);
	return btn;
}

function createExternalLink(place,url,label)
{
	var link = document.createElement("a");
	link.className = "externalLink";
	link.href = url;
	var f = config.messages.externalLinkTooltip;
	link.title = f ? f.format([url]) : url;
	if(config.options.chkOpenInNewWindow)
		link.target = "_blank";
	place.appendChild(link);
	if(label)
		createTiddlyText(link, label);
	return link;
}

function getTiddlyLinkInfo(title,currClasses)
{
	var classes = currClasses ? currClasses.split(" ") : [];
	classes.pushUnique("tiddlyLink");
	var tiddler = store.fetchTiddler(title);
	var subTitle;
	if(tiddler) {
		subTitle = tiddler.getSubtitle();
		classes.pushUnique("tiddlyLinkExisting");
		classes.remove("tiddlyLinkNonExisting");
		classes.remove("shadow");
	} else {
	    var f;
		classes.remove("tiddlyLinkExisting");
		classes.pushUnique("tiddlyLinkNonExisting");
		if(store.isShadowTiddler(title)) {
			f = config.messages.shadowedTiddlerToolTip;
			classes.pushUnique("shadow");
		} else {
			f = config.messages.undefinedTiddlerToolTip;
			classes.remove("shadow");
		}
		subTitle = f ? f.format([title]) : "";
	}
	if(typeof config.annotations[title]=="string")
		subTitle = config.annotations[title];
	return {classes: classes.join(" "),subTitle: subTitle};
}

// Event handler for clicking on a tiddly link
function onClickTiddlerLink(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	var link = target;
	var title = null;
	var fields = null;
	var noToggle = null;
	do {
		title = link.getAttribute("tiddlyLink");
		fields = link.getAttribute("tiddlyFields");
		noToggle = link.getAttribute("noToggle");
		link = link.parentNode;
	} while(title == null && link != null);
	if(!store.isShadowTiddler(title)) {
		var f = fields ? fields.decodeHashMap() : {};
		fields = String.encodeHashMap(merge(f,config.defaultCustomFields,true));
	}
	if(title) {
		var toggling = e.metaKey || e.ctrlKey;
		if(config.options.chkToggleLinks)
			toggling = !toggling;
		if(noToggle)
			toggling = false;
		if(store.getTiddler(title))
			fields = null;
		story.displayTiddler(target,title,null,true,null,fields,toggling);
	}
	clearMessage();
	return false;
}

function createTiddlyLink(place,title,includeText,className,isStatic,linkedFromTiddler,noToggle)
{
	var title = jQuery.trim(title);
	var text = includeText ? title : null;
	var i = getTiddlyLinkInfo(title,className);
	var btn = isStatic ? createExternalLink(place,store.getTiddlerText("SiteUrl",null) + "#" + title) : createTiddlyButton(place,text,i.subTitle,onClickTiddlerLink,i.classes);
	if(isStatic)
		btn.className += ' ' + className;
	btn.setAttribute("refresh","link");
	btn.setAttribute("tiddlyLink",title);
	if(noToggle)
		btn.setAttribute("noToggle","true");
	if(linkedFromTiddler) {
		var fields = linkedFromTiddler.getInheritedFields();
		if(fields)
			btn.setAttribute("tiddlyFields",fields);
	}
	return btn;
}

function refreshTiddlyLink(e,title)
{
	var i = getTiddlyLinkInfo(title,e.className);
	e.className = i.classes;
	e.title = i.subTitle;
}

function createTiddlyDropDown(place,onchange,options,defaultValue)
{
	var sel = createTiddlyElement(place,"select");
	sel.onchange = onchange;
	var t;
	for(t=0; t<options.length; t++) {
		var e = createTiddlyElement(sel,"option",null,null,options[t].caption);
		e.value = options[t].name;
		if(options[t].name == defaultValue)
			e.selected = true;
	}
	return sel;
}

//--
//-- TiddlyWiki-specific popup utility functions
//--

// Event handler for 'open all' on a tiddler popup
function onClickTagOpenAll(ev)
{
	var tiddlers = store.getTaggedTiddlers(this.getAttribute("tag"));
	var sortby = this.getAttribute("sortby");
	if(sortby&&sortby.length) {
		store.sortTiddlers(tiddlers,sortby);
	}
	story.displayTiddlers(this,tiddlers);
	return false;
}

// Event handler for clicking on a tiddler tag
function onClickTag(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	jQuery(popup).addClass("taggedTiddlerList");
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(popup && tag) {
		var tagged = tag.indexOf("[")==-1 ? store.getTaggedTiddlers(tag) : store.filterTiddlers(tag);
		var sortby = this.getAttribute("sortby");
		if(sortby&&sortby.length) {
			store.sortTiddlers(tagged,sortby);
		}
		var titles = [];
		var r;
		for(r=0;r<tagged.length;r++) {
			if(tagged[r].title != title)
				titles.push(tagged[r].title);
		}
		var lingo = config.views.wikified.tag;
		if(titles.length > 0) {
			var openAll = createTiddlyButton(createTiddlyElement(popup,"li"),lingo.openAllText.format([tag]),lingo.openAllTooltip,onClickTagOpenAll);
			openAll.setAttribute("tag",tag);
			openAll.setAttribute("sortby",sortby);
			createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
			for(r=0; r<titles.length; r++) {
				createTiddlyLink(createTiddlyElement(popup,"li"),titles[r],true);
			}
		} else {
			createTiddlyElement(popup,"li",null,"disabled",lingo.popupNone.format([tag]));
		}
		createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
		var h = createTiddlyLink(createTiddlyElement(popup,"li"),tag,false);
		createTiddlyText(h,lingo.openTag.format([tag]));
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

// Create a button for a tag with a popup listing all the tiddlers that it tags
function createTagButton(place,tag,excludeTiddler,title,tooltip)
{
	var btn = createTiddlyButton(place,title||tag,(tooltip||config.views.wikified.tag.tooltip).format([tag]),onClickTag);
	btn.setAttribute("tag",tag);
	if(excludeTiddler)
		btn.setAttribute("tiddler",excludeTiddler);
	return btn;
}

function onClickTiddlyPopup(ev)
{
	var e = ev || window.event;
	var tiddler = this.tiddler;
	if(tiddler.text) {
		var popup = Popup.create(this,"div","popupTiddler");
		wikify(tiddler.text,popup,null,tiddler);
		Popup.show();
	}
	if(e) e.cancelBubble = true;
	if(e && e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyPopup(place,caption,tooltip,tiddler)
{
	if(tiddler.text) {
		createTiddlyLink(place,caption,true);
		var btn = createTiddlyButton(place,glyph("downArrow"),tooltip,onClickTiddlyPopup,"tiddlerPopupButton");
		btn.tiddler = tiddler;
	} else {
		createTiddlyText(place,caption);
	}
}

function onClickError(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	var lines = this.getAttribute("errorText").split("\n");
	var t;
	for(t=0; t<lines.length; t++)
		createTiddlyElement(popup,"li",null,null,lines[t]);
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyError(place,title,text)
{
	var btn = createTiddlyButton(place,title,null,onClickError,"errorButton");
	if(text) btn.setAttribute("errorText",text);
}
//-
//- Animation engine
//-

function Animator()
{
	this.running = 0; // Incremented at start of each animation, decremented afterwards. If zero, the interval timer is disabled
	this.timerID = 0; // ID of the timer used for animating
	this.animations = []; // List of animations in progress
	return this;
}

// Start animation engine
Animator.prototype.startAnimating = function() //# Variable number of arguments
{
	var t;
	for(t=0; t<arguments.length; t++)
		this.animations.push(arguments[t]);
	if(this.running == 0) {
		var me = this;
		this.timerID = window.setInterval(function() {me.doAnimate(me);},10);
	}
	this.running += arguments.length;
};

// Perform an animation engine tick, calling each of the known animation modules
Animator.prototype.doAnimate = function(me)
{
	var a = 0;
	while(a < me.animations.length) {
		var animation = me.animations[a];
		if(animation.tick()) {
			a++;
		} else {
			me.animations.splice(a,1);
			if(--me.running == 0)
				window.clearInterval(me.timerID);
		}
	}
};

Animator.slowInSlowOut = function(progress)
{
	return(1-((Math.cos(progress * Math.PI)+1)/2));
};

//--
//-- Morpher animation
//--

// Animate a set of properties of an element
function Morpher(element,duration,properties,callback)
{
	this.element = element;
	this.duration = duration;
	this.properties = properties;
	this.startTime = new Date();
	this.endTime = Number(this.startTime) + duration;
	this.callback = callback;
	this.tick();
	return this;
}

Morpher.prototype.assignStyle = function(element,style,value)
{
	switch(style) {
	case "-tw-vertScroll":
		window.scrollTo(findScrollX(),value);
		break;
	case "-tw-horizScroll":
		window.scrollTo(value,findScrollY());
		break;
	default:
		element.style[style] = value;
		break;
	}
};

Morpher.prototype.stop = function()
{
	var t;
	for(t=0; t<this.properties.length; t++) {
		var p = this.properties[t];
		if(p.atEnd !== undefined) {
			this.assignStyle(this.element,p.style,p.atEnd);
		}
	}
	if(this.callback)
		this.callback(this.element,this.properties);
};

Morpher.prototype.tick = function()
{
	var currTime = Number(new Date());
	var t,progress = Animator.slowInSlowOut(Math.min(1,(currTime-this.startTime)/this.duration));
	for(t=0; t<this.properties.length; t++) {
		var p = this.properties[t];
		if(p.start !== undefined && p.end !== undefined) {
			var template = p.template || "%0";
			switch(p.format) {
			case undefined:
			case "style":
				var v = p.start + (p.end-p.start) * progress;
				this.assignStyle(this.element,p.style,template.format([v]));
				break;
			case "color":
				break;
			}
		}
	}
	if(currTime >= this.endTime) {
		this.stop();
		return false;
	}
	return true;
};

//--
//-- Zoomer animation
//--

function Zoomer(text,startElement,targetElement,unused)
{
	var e = createTiddlyElement(document.body,"div",null,"zoomer");
	createTiddlyElement(e,"div",null,null,text);
	var winWidth = findWindowWidth();
	var winHeight = findWindowHeight();
	var p = [
		{style: 'left', start: findPosX(startElement), end: findPosX(targetElement), template: '%0px'},
		{style: 'top', start: findPosY(startElement), end: findPosY(targetElement), template: '%0px'},
		{style: 'width', start: Math.min(startElement.scrollWidth,winWidth), end: Math.min(targetElement.scrollWidth,winWidth), template: '%0px', atEnd: 'auto'},
		{style: 'height', start: Math.min(startElement.scrollHeight,winHeight), end: Math.min(targetElement.scrollHeight,winHeight), template: '%0px', atEnd: 'auto'},
		{style: 'fontSize', start: 8, end: 24, template: '%0pt'}
	];
	var c = function(element,properties) {jQuery(element).remove();};
	return new Morpher(e,config.animDuration,p,c);
}

//--
//-- Scroller animation
//--

function Scroller(targetElement)
{
	var p = [{style: '-tw-vertScroll', start: findScrollY(), end: ensureVisible(targetElement)}];
	return new Morpher(targetElement,config.animDuration,p);
}

//--
//-- Slider animation
//--

// deleteMode - "none", "all" [delete target element and it's children], [only] "children" [but not the target element]
function Slider(element,opening,unused,deleteMode)
{
	element.style.overflow = 'hidden';
	if(opening)
		element.style.height = '0px'; // Resolves a Firefox flashing bug
	element.style.display = 'block';
	var height = element.scrollHeight;
	var p = [];
	var c = null;
	if(opening) {
		p.push({style: 'height', start: 0, end: height, template: '%0px', atEnd: 'auto'});
		p.push({style: 'opacity', start: 0, end: 1, template: '%0'});
		p.push({style: 'filter', start: 0, end: 100, template: 'alpha(opacity:%0)'});
	} else {
		p.push({style: 'height', start: height, end: 0, template: '%0px'});
		p.push({style: 'display', atEnd: 'none'});
		p.push({style: 'opacity', start: 1, end: 0, template: '%0'});
		p.push({style: 'filter', start: 100, end: 0, template: 'alpha(opacity:%0)'});
		switch(deleteMode) {
		case "all":
			c = function(element,properties) {jQuery(element).remove();};
			break;
		case "children":
			c = function(element,properties) {jQuery(element).empty();};
			break;
		}
	}
	return new Morpher(element,config.animDuration,p,c);
}

//--
//-- Popup menu
//--

var Popup = {
	stack: [] // Array of objects with members root: and popup:
	};

Popup.create = function(root,elem,className)
{
	var stackPosition = this.find(root,"popup");
	Popup.remove(stackPosition+1);
	var popup = createTiddlyElement(document.body,elem || "ol","popup",className || "popup");
	popup.stackPosition = stackPosition;
	Popup.stack.push({root: root, popup: popup});
	return popup;
};

Popup.onDocumentClick = function(ev)
{
	var e = ev || window.event;
	if(e.eventPhase == undefined)
		Popup.remove();
	else if(e.eventPhase == Event.BUBBLING_PHASE || e.eventPhase == Event.AT_TARGET)
		Popup.remove();
	return true;
};

Popup.show = function(valign,halign,offset)
{
	var curr = Popup.stack[Popup.stack.length-1];
	this.place(curr.root,curr.popup,valign,halign,offset);
	jQuery(curr.root).addClass("highlight");
	if(config.options.chkAnimate && anim && typeof Scroller == "function")
		anim.startAnimating(new Scroller(curr.popup));
	else
		window.scrollTo(0,ensureVisible(curr.popup));
};

Popup.place = function(root,popup,valign,halign,offset)
{
	if(!offset)
		offset = {x:0,y:0};
	if(popup.stackPosition >= 0 && !valign && !halign) {
		offset.x = offset.x + root.offsetWidth;
	} else {
		offset.x = (halign == "right") ? offset.x + root.offsetWidth : offset.x;
		offset.y = (valign == "top") ? offset.y : offset.y + root.offsetHeight;
	}
	var rootLeft = findPosX(root);
	var rootTop = findPosY(root);
	var popupLeft = rootLeft + offset.x;
	var popupTop = rootTop + offset.y;
	var winWidth = findWindowWidth();
	if(popup.offsetWidth > winWidth*0.75)
		popup.style.width = winWidth*0.75 + "px";
	var popupWidth = popup.offsetWidth;
	var scrollWidth = winWidth - document.body.offsetWidth;
	if(popupLeft + popupWidth > winWidth - scrollWidth - 1) {
		if(halign == "right")
			popupLeft = popupLeft - root.offsetWidth - popupWidth;
		else
			popupLeft = winWidth - popupWidth - scrollWidth - 1;
	}
	popup.style.left = popupLeft + "px";
	popup.style.top = popupTop + "px";
	popup.style.display = "block";
};

Popup.find = function(e)
{
	var t,pos = -1;
	for(t=this.stack.length-1; t>=0; t--) {
		if(isDescendant(e,this.stack[t].popup))
			pos = t;
	}
	return pos;
};

Popup.remove = function(pos)
{
	if(!pos) pos = 0;
	if(Popup.stack.length > pos) {
		Popup.removeFrom(pos);
	}
};

Popup.removeFrom = function(from)
{
	var t;
	for(t=Popup.stack.length-1; t>=from; t--) {
		var p = Popup.stack[t];
		jQuery(p.root).removeClass("highlight");
		jQuery(p.popup).remove();
	}
	Popup.stack = Popup.stack.slice(0,from);
};

//--
//-- Wizard support
//--

function Wizard(elem)
{
	if(elem) {
		this.formElem = findRelated(elem,"wizard","className");
		this.bodyElem = findRelated(this.formElem.firstChild,"wizardBody","className","nextSibling");
		this.footElem = findRelated(this.formElem.firstChild,"wizardFooter","className","nextSibling");
	} else {
		this.formElem = null;
		this.bodyElem = null;
		this.footElem = null;
	}
}

Wizard.prototype.setValue = function(name,value)
{
	jQuery(this.formElem).data(name, value);
};

Wizard.prototype.getValue = function(name)
{
	return this.formElem ? jQuery(this.formElem).data(name) : null;
};

Wizard.prototype.createWizard = function(place,title)
{
	this.formElem = createTiddlyElement(place,"form",null,"wizard");
	createTiddlyElement(this.formElem,"h1",null,null,title);
	this.bodyElem = createTiddlyElement(this.formElem,"div",null,"wizardBody");
	this.footElem = createTiddlyElement(this.formElem,"div",null,"wizardFooter");
	return this.formElem;
};

Wizard.prototype.clear = function()
{
	jQuery(this.bodyElem).empty();
};

Wizard.prototype.setButtons = function(buttonInfo,status)
{
	jQuery(this.footElem).empty();
	var t;
	for(t=0; t<buttonInfo.length; t++) {
		createTiddlyButton(this.footElem,buttonInfo[t].caption,buttonInfo[t].tooltip,buttonInfo[t].onClick);
		insertSpacer(this.footElem);
		}
	if(typeof status == "string") {
		createTiddlyElement(this.footElem,"span",null,"status",status);
	}
};

Wizard.prototype.addStep = function(stepTitle,html)
{
	jQuery(this.bodyElem).empty();
	var w = createTiddlyElement(this.bodyElem,"div");
	createTiddlyElement(w,"h2",null,null,stepTitle);
	var step = createTiddlyElement(w,"div",null,"wizardStep");
	step.innerHTML = html;
	applyHtmlMacros(step,tiddler);
};

Wizard.prototype.getElement = function(name)
{
	return this.formElem.elements[name];
};

//--
//-- ListView gadget
//--

var ListView = {};

// Create a listview
ListView.create = function(place,listObject,listTemplate,callback,className)
{
	var table = createTiddlyElement(place,"table",null,className || "listView twtable");
	var thead = createTiddlyElement(table,"thead");
	var t,r = createTiddlyElement(thead,"tr");
	for(t=0; t<listTemplate.columns.length; t++) {
		var columnTemplate = listTemplate.columns[t];
		var c = createTiddlyElement(r,"th");
		var colType = ListView.columnTypes[columnTemplate.type];
		if(colType && colType.createHeader) {
			colType.createHeader(c,columnTemplate,t);
			if(columnTemplate.className)
				jQuery(c).addClass(columnTemplate.className);
		}
	}
	var rc,tbody = createTiddlyElement(table,"tbody");
	for(rc=0; rc<listObject.length; rc++) {
		var rowObject = listObject[rc];
		r = createTiddlyElement(tbody,"tr");
		for(c=0; c<listTemplate.rowClasses.length; c++) {
			if(rowObject[listTemplate.rowClasses[c].field])
				jQuery(r).addClass(listTemplate.rowClasses[c].className);
		}
		rowObject.rowElement = r;
		rowObject.colElements = {};
		var cc;
		for(cc=0; cc<listTemplate.columns.length; cc++) {
			c = createTiddlyElement(r,"td");
			columnTemplate = listTemplate.columns[cc];
			var field = columnTemplate.field;
			colType = ListView.columnTypes[columnTemplate.type];
			if(colType && colType.createItem) {
				colType.createItem(c,rowObject,field,columnTemplate,cc,rc);
				if(columnTemplate.className)
					jQuery(c).addClass(columnTemplate.className);
			}
			rowObject.colElements[field] = c;
		}
	}
	if(callback && listTemplate.actions)
		createTiddlyDropDown(place,ListView.getCommandHandler(callback),listTemplate.actions);
	if(callback && listTemplate.buttons) {
		for(t=0; t<listTemplate.buttons.length; t++) {
			var a = listTemplate.buttons[t];
			if(a && a.name != "")
				createTiddlyButton(place,a.caption,null,ListView.getCommandHandler(callback,a.name,a.allowEmptySelection));
		}
	}
	return table;
};

ListView.getCommandHandler = function(callback,name,allowEmptySelection)
{
	return function(e) {
		var view = findRelated(this,"TABLE",null,"previousSibling");
		var tiddlers = [];
		ListView.forEachSelector(view,function(e,rowName) {
					if(e.checked)
						tiddlers.push(rowName);
					});
		if(tiddlers.length == 0 && !allowEmptySelection) {
			alert(config.messages.nothingSelected);
		} else {
			if(this.nodeName.toLowerCase() == "select") {
				callback(view,this.value,tiddlers);
				this.selectedIndex = 0;
			} else {
				callback(view,name,tiddlers);
			}
		}
	};
};

// Invoke a callback for each selector checkbox in the listview
ListView.forEachSelector = function(view,callback)
{
	var checkboxes = view.getElementsByTagName("input");
	var t,hadOne = false;
	for(t=0; t<checkboxes.length; t++) {
		var cb = checkboxes[t];
		if(cb.getAttribute("type") == "checkbox") {
			var rn = cb.getAttribute("rowName");
			if(rn) {
				callback(cb,rn);
				hadOne = true;
			}
		}
	}
	return hadOne;
};

ListView.getSelectedRows = function(view)
{
	var rowNames = [];
	ListView.forEachSelector(view,function(e,rowName) {
				if(e.checked)
					rowNames.push(rowName);
				});
	return rowNames;
};

ListView.columnTypes = {};

ListView.columnTypes.String = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyText(place,columnTemplate.title);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v);
		}
};

ListView.columnTypes.WikiText = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				wikify(v,place,null,null);
		}
};

ListView.columnTypes.Tiddler = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined && v.title)
				createTiddlyPopup(place,v.title,config.messages.listView.tiddlerTooltip,v);
		}
};

ListView.columnTypes.Size = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var msg = config.messages.sizeTemplates;
			var v = listObject[field];
			if(v != undefined) {
				var t = 0;
				while(t<msg.length-1 && v<msg[t].unit)
					t++;
				createTiddlyText(place,msg[t].template.format([Math.round(v/msg[t].unit)]));
			}
		}
};

ListView.columnTypes.Link = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			var c = columnTemplate.text;
			if(v != undefined)
				createExternalLink(place,v,c || v);
		}
};

ListView.columnTypes.Date = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v.formatString(columnTemplate.dateFormat));
		}
};

ListView.columnTypes.StringList = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined) {
				var t;
				for(t=0; t<v.length; t++) {
					createTiddlyText(place,v[t]);
					createTiddlyElement(place,"br");
				}
			}
		}
};

ListView.columnTypes.Selector = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyCheckbox(place,null,false,this.onHeaderChange);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],null);
			e.setAttribute("rowName",listObject[columnTemplate.rowName]);
		},
	onHeaderChange: function(e)
		{
			var state = this.checked;
			var view = findRelated(this,"TABLE");
			if(!view)
				return;
			ListView.forEachSelector(view,function(e,rowName) {
								e.checked = state;
							});
		}
};

ListView.columnTypes.Tags = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var tags = listObject[field];
			createTiddlyText(place,String.encodeTiddlyLinkList(tags));
		}
};

ListView.columnTypes.Boolean = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			if(listObject[field] == true)
				createTiddlyText(place,columnTemplate.trueText);
			if(listObject[field] == false)
				createTiddlyText(place,columnTemplate.falseText);
		}
};

ListView.columnTypes.TagCheckbox = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],this.onChange);
			e.setAttribute("tiddler",listObject.title);
			e.setAttribute("tag",columnTemplate.tag);
		},
	onChange : function(e)
		{
			var tag = this.getAttribute("tag");
			var tiddler = this.getAttribute("tiddler");
			store.setTiddlerTag(tiddler,this.checked,tag);
		}
};

ListView.columnTypes.TiddlerLink = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined) {
				var link = createTiddlyLink(place,listObject[columnTemplate.tiddlerLink],false,null);
				createTiddlyText(link,listObject[field]);
			}
		}
};

//--
//-- Augmented methods for the JavaScript Array() object
//--

// Add indexOf function if browser does not support it
if(!Array.indexOf) {
Array.prototype.indexOf = function(item,from)
{
	if(!from)
		from = 0;
	var i;
	for(i=from; i<this.length; i++) {
		if(this[i] === item)
			return i;
	}
	return -1;
};}

// Find an entry in a given field of the members of an array
Array.prototype.findByField = function(field,value)
{
	var t;
	for(t=0; t<this.length; t++) {
		if(this[t][field] === value)
			return t;
	}
	return null;
};

// Return whether an entry exists in an array
Array.prototype.contains = function(item)
{
	return this.indexOf(item) != -1;
};

// Adds, removes or toggles a particular value within an array
//  value - value to add
//  mode - +1 to add value, -1 to remove value, 0 to toggle it
Array.prototype.setItem = function(value,mode)
{
	var p = this.indexOf(value);
	if(mode == 0)
		mode = (p == -1) ? +1 : -1;
	if(mode == +1) {
		if(p == -1)
			this.push(value);
	} else if(mode == -1) {
		if(p != -1)
			this.splice(p,1);
	}
};

// Return whether one of a list of values exists in an array
Array.prototype.containsAny = function(items)
{
	var i;
	for(i=0; i<items.length; i++) {
		if(this.indexOf(items[i]) != -1)
			return true;
	}
	return false;
};

// Return whether all of a list of values exists in an array
Array.prototype.containsAll = function(items)
{
	var i;
	for(i = 0; i<items.length; i++) {
		if(this.indexOf(items[i]) == -1)
			return false;
	}
	return true;
};

// Push a new value into an array only if it is not already present in the array. If the optional unique parameter is false, it reverts to a normal push
Array.prototype.pushUnique = function(item,unique)
{
	if(unique === false) {
		this.push(item);
	} else {
		if(this.indexOf(item) == -1)
			this.push(item);
	}
};

Array.prototype.remove = function(item)
{
	var p = this.indexOf(item);
	if(p != -1)
		this.splice(p,1);
};

if(!Array.prototype.map) {
Array.prototype.map = function(fn,thisObj)
{
	var scope = thisObj || window;
	var i,j,a = [];
	for(i=0, j=this.length; i < j; ++i) {
		a.push(fn.call(scope,this[i],i,this));
	}
	return a;
};}

//--
//-- Augmented methods for the JavaScript String() object
//--

// Get characters from the right end of a string
String.prototype.right = function(n)
{
	return n < this.length ? this.slice(this.length-n) : this;
};

// Trim whitespace from both ends of a string
String.prototype.trim = function()
{
	return this.replace(/^\s*|\s*$/g,"");
};

// Convert a string from a CSS style property name to a JavaScript style name ("background-color" -> "backgroundColor")
String.prototype.unDash = function()
{
	var t,s = this.split("-");
	if(s.length > 1) {
		for(t=1; t<s.length; t++)
			s[t] = s[t].substr(0,1).toUpperCase() + s[t].substr(1);
	}
	return s.join("");
};

// Substitute substrings from an array into a format string that includes '%1'-type specifiers
String.prototype.format = function(s)
{
	var substrings = s && s.constructor == Array ? s : arguments;
	var subRegExp = /(?:%(\d+))/mg;
	var currPos = 0;
	var match,r = [];
	do {
		match = subRegExp.exec(this);
		if(match && match[1]) {
			if(match.index > currPos)
				r.push(this.substring(currPos,match.index));
			r.push(substrings[parseInt(match[1],10)]);
			currPos = subRegExp.lastIndex;
		}
	} while(match);
	if(currPos < this.length)
		r.push(this.substring(currPos,this.length));
	return r.join("");
};

// Escape any special RegExp characters with that character preceded by a backslash
String.prototype.escapeRegExp = function()
{
	var s = "\\^$*+?()=!|,{}[].";
	var t,c = this;
	for(t=0; t<s.length; t++)
		c = c.replace(new RegExp("\\" + s.substr(t,1),"g"),"\\" + s.substr(t,1));
	return c;
};

// Convert "\" to "\s", newlines to "\n" (and remove carriage returns)
String.prototype.escapeLineBreaks = function()
{
	return this.replace(/\\/mg,"\\s").replace(/\n/mg,"\\n").replace(/\r/mg,"");
};

// Convert "\n" to newlines, "\b" to " ", "\s" to "\" (and remove carriage returns)
String.prototype.unescapeLineBreaks = function()
{
	return this.replace(/\\n/mg,"\n").replace(/\\b/mg," ").replace(/\\s/mg,"\\").replace(/\r/mg,"");
};

// Convert & to "&amp;", < to "&lt;", > to "&gt;" and " to "&quot;"
String.prototype.htmlEncode = function()
{
	return this.replace(/&/mg,"&amp;").replace(/</mg,"&lt;").replace(/>/mg,"&gt;").replace(/\"/mg,"&quot;");
};

// Convert "&amp;" to &, "&lt;" to <, "&gt;" to > and "&quot;" to "
String.prototype.htmlDecode = function()
{
	return this.replace(/&lt;/mg,"<").replace(/&gt;/mg,">").replace(/&quot;/mg,"\"").replace(/&amp;/mg,"&");
};

// Parse a space-separated string of name:value parameters
// The result is an array of objects:
//   result[0] = object with a member for each parameter name, value of that member being an array of values
//   result[1..n] = one object for each parameter, with 'name' and 'value' members
String.prototype.parseParams = function(defaultName,defaultValue,allowEval,noNames,cascadeDefaults)
{
	var parseToken = function(match,p) {
		var n;
		if(match[p]) // Double quoted
			n = match[p];
		else if(match[p+1]) // Single quoted
			n = match[p+1];
		else if(match[p+2]) // Double-square-bracket quoted
			n = match[p+2];
		else if(match[p+3]) // Double-brace quoted
			try {
				n = match[p+3];
				if(allowEval && config.evaluateMacroParameters != "none") {
					if(config.evaluateMacroParameters == "restricted") {
						if(window.restrictedEval) {
							n = window.restrictedEval(n);
						}
					} else {
						n = window.eval(n);
					}
				}
			} catch(ex) {
				throw "Unable to evaluate {{" + match[p+3] + "}}: " + exceptionText(ex);
			}
		else if(match[p+4]) // Unquoted
			n = match[p+4];
		else if(match[p+5]) // empty quote
			n = "";
		return n;
	};
	var r = [{}];
	var dblQuote = "(?:\"((?:(?:\\\\\")|[^\"])+)\")";
	var sngQuote = "(?:'((?:(?:\\\\\')|[^'])+)')";
	var dblSquare = "(?:\\[\\[((?:\\s|\\S)*?)\\]\\])";
	var dblBrace = "(?:\\{\\{((?:\\s|\\S)*?)\\}\\})";
	var unQuoted = noNames ? "([^\"'\\s]\\S*)" : "([^\"':\\s][^\\s:]*)";
	var emptyQuote = "((?:\"\")|(?:''))";
	var skipSpace = "(?:\\s*)";
	var token = "(?:" + dblQuote + "|" + sngQuote + "|" + dblSquare + "|" + dblBrace + "|" + unQuoted + "|" + emptyQuote + ")";
	var re = noNames ? new RegExp(token,"mg") : new RegExp(skipSpace + token + skipSpace + "(?:(\\:)" + skipSpace + token + ")?","mg");
	var match;
	do {
		match = re.exec(this);
		if(match) {
			var n = parseToken(match,1);
			if(noNames) {
				r.push({name:"",value:n});
			} else {
				var v = parseToken(match,8);
				if(v == null && defaultName) {
					v = n;
					n = defaultName;
				} else if(v == null && defaultValue) {
					v = defaultValue;
				}
				r.push({name:n,value:v});
				if(cascadeDefaults) {
					defaultName = n;
					defaultValue = v;
				}
			}
		}
	} while(match);
	// Summarise parameters into first element
	var t;
	for(t=1; t<r.length; t++) {
		if(r[0][r[t].name])
			r[0][r[t].name].push(r[t].value);
		else
			r[0][r[t].name] = [r[t].value];
	}
	return r;
};

// Process a string list of macro parameters into an array. Parameters can be quoted with "", '',
// [[]], {{ }} or left unquoted (and therefore space-separated). Double-braces {{}} results in
// an *evaluated* parameter: e.g. {{config.options.txtUserName}} results in the current user's name.
String.prototype.readMacroParams = function(notAllowEval)
{
	var p = this.parseParams("list",null,!notAllowEval,true);
	var t,n = [];
	for(t=1; t<p.length; t++)
		n.push(p[t].value);
	return n;
};

// Process a string list of unique tiddler names into an array. Tiddler names that have spaces in them must be [[bracketed]]
String.prototype.readBracketedList = function(unique)
{
	var p = this.parseParams("list",null,false,true);
	var t,n = [];
	for(t=1; t<p.length; t++) {
		if(p[t].value)
			n.pushUnique(p[t].value,unique);
	}
	return n;
};

// Returns array with start and end index of chunk between given start and end marker, or undefined.
String.prototype.getChunkRange = function(start,end)
{
	var s = this.indexOf(start);
	if(s != -1) {
		s += start.length;
		var e = this.indexOf(end,s);
		if(e != -1)
			return [s,e];
	}
};

// Replace a chunk of a string given start and end markers
String.prototype.replaceChunk = function(start,end,sub)
{
	var r = this.getChunkRange(start,end);
	return r ? this.substring(0,r[0]) + sub + this.substring(r[1]) : this;
};

// Returns a chunk of a string between start and end markers, or undefined
String.prototype.getChunk = function(start,end)
{
	var r = this.getChunkRange(start,end);
	if(r)
		return this.substring(r[0],r[1]);
};


// Static method to bracket a string with double square brackets if it contains a space
String.encodeTiddlyLink = function(title)
{
	return title.indexOf(" ") == -1 ? title : "[[" + title + "]]";
};

// Static method to encodeTiddlyLink for every item in an array and join them with spaces
String.encodeTiddlyLinkList = function(list)
{
	if(list) {
		var t,results = [];
		for(t=0; t<list.length; t++)
			results.push(String.encodeTiddlyLink(list[t]));
		return results.join(" ");
	} else {
		return "";
	}
};

// Convert a string as a sequence of name:"value" pairs into a hashmap
String.prototype.decodeHashMap = function()
{
	var fields = this.parseParams("anon","",false);
	var t,r = {};
	for(t=1; t<fields.length; t++)
		r[fields[t].name] = fields[t].value;
	return r;
};

// Static method to encode a hashmap into a name:"value"... string
String.encodeHashMap = function(hashmap)
{
	var t,r = [];
	for(t in hashmap)
		r.push(t + ':"' + hashmap[t] + '"');
	return r.join(" ");
};

// Static method to left-pad a string with 0s to a certain width
String.zeroPad = function(n,d)
{
	var s = n.toString();
	if(s.length < d)
		s = "000000000000000000000000000".substr(0,d-s.length) + s;
	return s;
};

String.prototype.startsWith = function(prefix)
{
	return !prefix || this.substring(0,prefix.length) == prefix;
};

// Returns the first value of the given named parameter.
function getParam(params,name,defaultValue)
{
	if(!params)
		return defaultValue;
	var p = params[0][name];
	return p ? p[0] : defaultValue;
}

// Returns the first value of the given boolean named parameter.
function getFlag(params,name,defaultValue)
{
	return !!getParam(params,name,defaultValue);
}

//--
//-- Augmented methods for the JavaScript Date() object
//--

// Substitute date components into a string
Date.prototype.formatString = function(template)
{
	var t = template.replace(/0hh12/g,String.zeroPad(this.getHours12(),2));
	t = t.replace(/hh12/g,this.getHours12());
	t = t.replace(/0hh/g,String.zeroPad(this.getHours(),2));
	t = t.replace(/hh/g,this.getHours());
	t = t.replace(/mmm/g,config.messages.dates.shortMonths[this.getMonth()]);
	t = t.replace(/0mm/g,String.zeroPad(this.getMinutes(),2));
	t = t.replace(/mm/g,this.getMinutes());
	t = t.replace(/0ss/g,String.zeroPad(this.getSeconds(),2));
	t = t.replace(/ss/g,this.getSeconds());
	t = t.replace(/[ap]m/g,this.getAmPm().toLowerCase());
	t = t.replace(/[AP]M/g,this.getAmPm().toUpperCase());
	t = t.replace(/wYYYY/g,this.getYearForWeekNo());
	t = t.replace(/wYY/g,String.zeroPad(this.getYearForWeekNo()-2000,2));
	t = t.replace(/YYYY/g,this.getFullYear());
	t = t.replace(/YY/g,String.zeroPad(this.getFullYear()-2000,2));
	t = t.replace(/MMM/g,config.messages.dates.months[this.getMonth()]);
	t = t.replace(/0MM/g,String.zeroPad(this.getMonth()+1,2));
	t = t.replace(/MM/g,this.getMonth()+1);
	t = t.replace(/0WW/g,String.zeroPad(this.getWeek(),2));
	t = t.replace(/WW/g,this.getWeek());
	t = t.replace(/DDD/g,config.messages.dates.days[this.getDay()]);
	t = t.replace(/ddd/g,config.messages.dates.shortDays[this.getDay()]);
	t = t.replace(/0DD/g,String.zeroPad(this.getDate(),2));
	t = t.replace(/DDth/g,this.getDate()+this.daySuffix());
	t = t.replace(/DD/g,this.getDate());
	var tz = this.getTimezoneOffset();
	var atz = Math.abs(tz);
	t = t.replace(/TZD/g,(tz < 0 ? '+' : '-') + String.zeroPad(Math.floor(atz / 60),2) + ':' + String.zeroPad(atz % 60,2));
	t = t.replace(/\\/g,"");
	return t;
};

Date.prototype.getWeek = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if(d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week to calculate weekNo
	var n = Math.floor((dt.getTime()-new Date(dt.getFullYear(),0,1)+3600000)/86400000);
	return Math.floor(n/7)+1;
};

Date.prototype.getYearForWeekNo = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if(d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week
	return dt.getFullYear();
};

Date.prototype.getHours12 = function()
{
	var h = this.getHours();
	return h > 12 ? h-12 : ( h > 0 ? h : 12 );
};

Date.prototype.getAmPm = function()
{
	return this.getHours() >= 12 ? config.messages.dates.pm : config.messages.dates.am;
};

Date.prototype.daySuffix = function()
{
	return config.messages.dates.daySuffixes[this.getDate()-1];
};

// Convert a date to local YYYYMMDDHHMM string format
Date.prototype.convertToLocalYYYYMMDDHHMM = function()
{
	return this.getFullYear() + String.zeroPad(this.getMonth()+1,2) + String.zeroPad(this.getDate(),2) + String.zeroPad(this.getHours(),2) + String.zeroPad(this.getMinutes(),2);
};

// Convert a date to UTC YYYYMMDDHHMM string format
Date.prototype.convertToYYYYMMDDHHMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2);
};

// Convert a date to UTC YYYYMMDD.HHMMSSMMM string format
Date.prototype.convertToYYYYMMDDHHMMSSMMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + "." + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2) + String.zeroPad(this.getUTCSeconds(),2) + String.zeroPad(this.getUTCMilliseconds(),3) +"0";
};

// Static method to create a date from a UTC YYYYMMDDHHMM format string
Date.convertFromYYYYMMDDHHMM = function(d)
{
	d = d?d.replace(/[^0-9]/g, ""):"";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,12));
};

// Static method to create a date from a UTC YYYYMMDDHHMMSS format string
Date.convertFromYYYYMMDDHHMMSS = function(d)
{
	d = d?d.replace(/[^0-9]/g, ""):"";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,14));
};

// Static method to create a date from a UTC YYYYMMDDHHMMSSMMM format string
Date.convertFromYYYYMMDDHHMMSSMMM = function(d)
{
	d = d ? d.replace(/[^0-9]/g, "") : "";
	return new Date(Date.UTC(parseInt(d.substr(0,4),10),
			parseInt(d.substr(4,2),10)-1,
			parseInt(d.substr(6,2),10),
			parseInt(d.substr(8,2)||"00",10),
			parseInt(d.substr(10,2)||"00",10),
			parseInt(d.substr(12,2)||"00",10),
			parseInt(d.substr(14,3)||"000",10)));
};

//--
//-- RGB colour object
//--

// Construct an RGB colour object from a '#rrggbb', '#rgb' or 'rgb(n,n,n)' string or from separate r,g,b values
function RGB(r,g,b)
{
	this.r = 0;
	this.g = 0;
	this.b = 0;
	if(typeof r == "string") {
		if(r.substr(0,1) == "#") {
			if(r.length == 7) {
				this.r = parseInt(r.substr(1,2),16)/255;
				this.g = parseInt(r.substr(3,2),16)/255;
				this.b = parseInt(r.substr(5,2),16)/255;
			} else {
				this.r = parseInt(r.substr(1,1),16)/15;
				this.g = parseInt(r.substr(2,1),16)/15;
				this.b = parseInt(r.substr(3,1),16)/15;
			}
		} else {
			var rgbPattern = /rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/;
			var c = r.match(rgbPattern);
			if(c) {
				this.r = parseInt(c[1],10)/255;
				this.g = parseInt(c[2],10)/255;
				this.b = parseInt(c[3],10)/255;
			}
		}
	} else {
		this.r = r;
		this.g = g;
		this.b = b;
	}
	return this;
}

// Mixes this colour with another in a specified proportion
// c = other colour to mix
// f = 0..1 where 0 is this colour and 1 is the new colour
// Returns an RGB object
RGB.prototype.mix = function(c,f)
{
	return new RGB(this.r + (c.r-this.r) * f,this.g + (c.g-this.g) * f,this.b + (c.b-this.b) * f);
};

// Return an rgb colour as a #rrggbb format hex string
RGB.prototype.toString = function()
{
	var clamp = function(x,min,max) {
		return x < min ? min : (x > max ? max : x);
	};
	return "#" +
			("0" + Math.floor(clamp(this.r,0,1) * 255).toString(16)).right(2) +
			("0" + Math.floor(clamp(this.g,0,1) * 255).toString(16)).right(2) +
			("0" + Math.floor(clamp(this.b,0,1) * 255).toString(16)).right(2);
};

//--
//-- DOM utilities - many derived from www.quirksmode.org
//--

function drawGradient(place,horiz,locolors,hicolors)
{
	if(!hicolors)
		hicolors = locolors;
	var t;
	for(t=0; t<= 100; t+=2) {
		var bar = document.createElement("div");
		place.appendChild(bar);
		bar.style.position = "absolute";
		bar.style.left = horiz ? t + "%" : 0;
		bar.style.top = horiz ? 0 : t + "%";
		bar.style.width = horiz ? (101-t) + "%" : "100%";
		bar.style.height = horiz ? "100%" : (101-t) + "%";
		bar.style.zIndex = -1;
		var p = t/100*(locolors.length-1);
		var hc = hicolors[Math.floor(p)];
		if(typeof hc == "string")
			hc = new RGB(hc);
		var lc = locolors[Math.ceil(p)];
		if(typeof lc == "string")
			lc = new RGB(lc);
		bar.style.backgroundColor = hc.mix(lc,p-Math.floor(p)).toString();
	}
}

function addEvent(obj,type,fn)
{
	if(obj.attachEvent) {
		obj["e"+type+fn] = fn;
		obj[type+fn] = function(){obj["e"+type+fn](window.event);};
		obj.attachEvent("on"+type,obj[type+fn]);
	} else {
		obj.addEventListener(type,fn,false);
	}
}

function removeEvent(obj,type,fn)
{
	if(obj.detachEvent) {
		obj.detachEvent("on"+type,obj[type+fn]);
		obj[type+fn] = null;
	} else {
		obj.removeEventListener(type,fn,false);
	}
}

// Find the closest relative with a given property value (property defaults to tagName, relative defaults to parentNode)
function findRelated(e,value,name,relative)
{
	name = name || "tagName";
	relative = relative || "parentNode";
	if(name == "className") {
		while(e && !jQuery(e).hasClass(value)) {
			e = e[relative];
		}
	} else {
		while(e && e[name] != value) {
			e = e[relative];
		}
	}
	return e;
}

// Get the scroll position for window.scrollTo necessary to scroll a given element into view
function ensureVisible(e)
{
	var posTop = findPosY(e);
	var posBot = posTop + e.offsetHeight;
	var winTop = findScrollY();
	var winHeight = findWindowHeight();
	var winBot = winTop + winHeight;
	if(posTop < winTop) {
		return posTop;
	} else if(posBot > winBot) {
		if(e.offsetHeight < winHeight)
			return posTop - (winHeight - e.offsetHeight);
		else
			return posTop;
	} else {
		return winTop;
	}
}

// Get the current width of the display window
function findWindowWidth()
{
	return window.innerWidth || document.documentElement.clientWidth;
}

// Get the current height of the display window
function findWindowHeight()
{
	return window.innerHeight || document.documentElement.clientHeight;
}

// Get the current height of the document
function findDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}

// Get the current horizontal page scroll position
function findScrollX()
{
	return window.scrollX || document.documentElement.scrollLeft;
}

// Get the current vertical page scroll position
function findScrollY()
{
	return window.scrollY || document.documentElement.scrollTop;
}

function findPosX(obj)
{
	var curleft = 0;
	while(obj.offsetParent) {
		curleft += obj.offsetLeft;
		obj = obj.offsetParent;
	}
	return curleft;
}

function findPosY(obj)
{
	var curtop = 0;
	while(obj.offsetParent) {
		curtop += obj.offsetTop;
		obj = obj.offsetParent;
	}
	return curtop;
}

// Blur a particular element
function blurElement(e)
{
	if(e && e.focus && e.blur) {
		e.focus();
		e.blur();
	}
}

// Create a non-breaking space
function insertSpacer(place)
{
	var e = document.createTextNode(String.fromCharCode(160));
	if(place)
		place.appendChild(e);
	return e;
}

// Replace the current selection of a textarea or text input and scroll it into view
function replaceSelection(e,text)
{
	if(e.setSelectionRange) {
		var oldpos = e.selectionStart;
		var isRange = e.selectionEnd > e.selectionStart;
		e.value = e.value.substr(0,e.selectionStart) + text + e.value.substr(e.selectionEnd);
		e.setSelectionRange(isRange ? oldpos : oldpos + text.length,oldpos + text.length);
		var linecount = e.value.split("\n").length;
		var thisline = e.value.substr(0,e.selectionStart).split("\n").length-1;
		e.scrollTop = Math.floor((thisline - e.rows / 2) * e.scrollHeight / linecount);
	} else if(document.selection) {
		var range = document.selection.createRange();
		if(range.parentElement() == e) {
			var isCollapsed = range.text == "";
			range.text = text;
			if(!isCollapsed) {
				range.moveStart("character", -text.length);
				range.select();
			}
		}
	}
}

// Set the caret position in a text area
function setCaretPosition(e,pos)
{
	if(e.selectionStart || e.selectionStart == '0') {
		e.selectionStart = pos;
		e.selectionEnd = pos;
		e.focus();
	} else if(document.selection) {
		// IE support
		e.focus ();
		var sel = document.selection.createRange();
		sel.moveStart('character', -e.value.length);
		sel.moveStart('character',pos);
		sel.moveEnd('character',0);
		sel.select();
	}
}

// Returns the text of the given (text) node, possibly merging subsequent text nodes
function getNodeText(e)
{
	var t = "";
	while(e && e.nodeName == "#text") {
		t += e.nodeValue;
		e = e.nextSibling;
	}
	return t;
}

// Returns true if the element e has a given ancestor element
function isDescendant(e,ancestor)
{
	while(e) {
		if(e === ancestor)
			return true;
		e = e.parentNode;
	}
	return false;
}


// deprecate the following...

// Prevent an event from bubbling
function stopEvent(e)
{
	var ev = e || window.event;
	ev.cancelBubble = true;
	if(ev.stopPropagation) ev.stopPropagation();
	return false;
}

// Remove any event handlers or non-primitve custom attributes
function scrubNode(e)
{
	if(!config.browser.isIE)
		return;
	var att = e.attributes;
	if(att) {
		var t;
		for(t=0; t<att.length; t++) {
			var n = att[t].name;
			if(n !== "style" && (typeof e[n] === "function" || (typeof e[n] === "object" && e[n] != null))) {
				try {
					e[n] = null;
				} catch(ex) {
				}
			}
		}
	}
	var c = e.firstChild;
	while(c) {
		scrubNode(c);
		c = c.nextSibling;
	}
}

function setStylesheet(s,id,doc)
{
	jQuery.twStylesheet(s,{id:id,doc:doc});
}

function removeStyleSheet(id)
{
	jQuery.twStylesheet.remove({id:id});
}

//--
//-- LoaderBase and SaverBase
//--

function LoaderBase() {}

LoaderBase.prototype.loadTiddler = function(store,node,tiddlers)
{
	var title = this.getTitle(store,node);
	if(safeMode && store.isShadowTiddler(title))
		return;
	if(title) {
		var tiddler = store.createTiddler(title);
		this.internalizeTiddler(store,tiddler,title,node);
		tiddlers.push(tiddler);
	}
};

LoaderBase.prototype.loadTiddlers = function(store,nodes)
{
	var t,tiddlers = [];
	for(t = 0; t < nodes.length; t++) {
		try {
			this.loadTiddler(store,nodes[t],tiddlers);
		} catch(ex) {
			showException(ex,config.messages.tiddlerLoadError.format([this.getTitle(store,nodes[t])]));
		}
	}
	return tiddlers;
};

function SaverBase() {}

SaverBase.prototype.externalize = function(store)
{
	var results = [];
	var t,tiddlers = store.getTiddlers("title");
	for(t = 0; t < tiddlers.length; t++) {
		if(!tiddlers[t].doNotSave())
			results.push(this.externalizeTiddler(store, tiddlers[t]));
	}
	return results.join("\n");
};

//--
//-- TW21Loader (inherits from LoaderBase)
//--

function TW21Loader() {}

TW21Loader.prototype = new LoaderBase();

TW21Loader.prototype.getTitle = function(store,node)
{
	var title = null;
	if(node.getAttribute) {
		title = node.getAttribute("title");
		if(!title)
			title = node.getAttribute("tiddler");
	}
	if(!title && node.id) {
		var lenPrefix = store.idPrefix.length;
		if(node.id.substr(0,lenPrefix) == store.idPrefix)
			title = node.id.substr(lenPrefix);
	}
	return title;
};

TW21Loader.prototype.internalizeTiddler = function(store,tiddler,title,node)
{
	var e = node.firstChild;
	var text = null;
	if(node.getAttribute("tiddler")) {
		text = getNodeText(e).unescapeLineBreaks();
	} else {
		while(e.nodeName!="PRE" && e.nodeName!="pre") {
			e = e.nextSibling;
		}
		text = e.innerHTML.replace(/\r/mg,"").htmlDecode();
	}
	var creator = node.getAttribute("creator");
	var modifier = node.getAttribute("modifier");
	var c = node.getAttribute("created");
	var m = node.getAttribute("modified");
	var created = c ? Date.convertFromYYYYMMDDHHMMSS(c) : version.date;
	var modified = m ? Date.convertFromYYYYMMDDHHMMSS(m) : created;
	var tags = node.getAttribute("tags");
	var fields = {};
	var i,attrs = node.attributes;
	for(i = attrs.length-1; i >= 0; i--) {
		var name = attrs[i].name;
		if(attrs[i].specified && !TiddlyWiki.isStandardField(name)) {
			fields[name] = attrs[i].value.unescapeLineBreaks();
		}
	}
	tiddler.assign(title,text,modifier,modified,tags,created,fields,creator);
	return tiddler;
};

//--
//-- TW21Saver (inherits from SaverBase)
//--

function TW21Saver() {}

TW21Saver.prototype = new SaverBase();

TW21Saver.prototype.externalizeTiddler = function(store,tiddler)
{
	try {
		var extendedAttributes = "";
		var usePre = config.options.chkUsePreForStorage;
		store.forEachField(tiddler,
			function(tiddler,fieldName,value) {
				// don't store stuff from the temp namespace
				if(typeof value != "string")
					value = "";
				if(!fieldName.match(/^temp\./))
					extendedAttributes += ' %0="%1"'.format([fieldName,value.escapeLineBreaks().htmlEncode()]);
			},true);
		var created = tiddler.created;
		var modified = tiddler.modified;
		var attributes = tiddler.creator ? ' creator="' + tiddler.creator.htmlEncode() + '"' : "";
		attributes += tiddler.modifier ? ' modifier="' + tiddler.modifier.htmlEncode() + '"' : "";
		attributes += (usePre && created == version.date) ? "" :' created="' + created.convertToYYYYMMDDHHMM() + '"';
		attributes += (usePre && modified == created) ? "" : ' modified="' + modified.convertToYYYYMMDDHHMM() +'"';
		var tags = tiddler.getTags();
		if(!usePre || tags)
			attributes += ' tags="' + tags.htmlEncode() + '"';
		return ('<div %0="%1"%2%3>%4</'+'div>').format([
				usePre ? "title" : "tiddler",
				tiddler.title.htmlEncode(),
				attributes,
				extendedAttributes,
				usePre ? "\n<pre>" + tiddler.text.htmlEncode() + "</pre>\n" : tiddler.text.escapeLineBreaks().htmlEncode()
			]);
	} catch (ex) {
		throw exceptionText(ex,config.messages.tiddlerSaveError.format([tiddler.title]));
	}
};



//]]>
</script>

<script id="jsdeprecatedArea" type="text/javascript">
//<![CDATA[
//--
//-- Deprecated Crypto functions and associated conversion routines.
//-- Use the jQuery.encoding functions directly instead.
//--

// Crypto 'namespace'
function Crypto() {}

// Convert a string to an array of big-endian 32-bit words
Crypto.strToBe32s = function(str)
{
	return jQuery.encoding.strToBe32s(str);
};

// Convert an array of big-endian 32-bit words to a string
Crypto.be32sToStr = function(be)
{
	return jQuery.encoding.be32sToStr(be);
};

// Convert an array of big-endian 32-bit words to a hex string
Crypto.be32sToHex = function(be)
{
	return jQuery.encoding.be32sToHex(be);
};

// Return, in hex, the SHA-1 hash of a string
Crypto.hexSha1Str = function(str)
{
	return jQuery.encoding.digests.hexSha1Str(str);
};

// Return the SHA-1 hash of a string
Crypto.sha1Str = function(str)
{
	return jQuery.encoding.digests.sha1Str(str);
};

// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
Crypto.sha1 = function(x,blen)
{
	return jQuery.encoding.digests.sha1(x,blen);
};

//--
//-- Deprecated code
//--

// @Deprecated: Use createElementAndWikify and this.termRegExp instead
config.formatterHelpers.charFormatHelper = function(w)
{
	w.subWikify(createTiddlyElement(w.output,this.element),this.terminator);
};

// @Deprecated: Use enclosedTextHelper and this.lookaheadRegExp instead
config.formatterHelpers.monospacedByLineHelper = function(w)
{
	var lookaheadRegExp = new RegExp(this.lookahead,"mg");
	lookaheadRegExp.lastIndex = w.matchStart;
	var lookaheadMatch = lookaheadRegExp.exec(w.source);
	if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
		var text = lookaheadMatch[1];
		if(config.browser.isIE)
			text = text.replace(/\n/g,"\r");
		createTiddlyElement(w.output,"pre",null,null,text);
		w.nextMatch = lookaheadRegExp.lastIndex;
	}
};

// @Deprecated: Use <br> or <br /> instead of <<br>>
config.macros.br = {};
config.macros.br.handler = function(place)
{
	createTiddlyElement(place,"br");
};

// Find an entry in an array. Returns the array index or null
// @Deprecated: Use indexOf instead
Array.prototype.find = function(item)
{
	var i = this.indexOf(item);
	return i == -1 ? null : i;
};

// Load a tiddler from an HTML DIV. The caller should make sure to later call Tiddler.changed()
// @Deprecated: Use store.getLoader().internalizeTiddler instead
Tiddler.prototype.loadFromDiv = function(divRef,title)
{
	return store.getLoader().internalizeTiddler(store,this,title,divRef);
};

// Format the text for storage in an HTML DIV
// @Deprecated Use store.getSaver().externalizeTiddler instead.
Tiddler.prototype.saveToDiv = function()
{
	return store.getSaver().externalizeTiddler(store,this);
};

// @Deprecated: Use store.allTiddlersAsHtml() instead
function allTiddlersAsHtml()
{
	return store.allTiddlersAsHtml();
}

// @Deprecated: Use refreshPageTemplate instead
function applyPageTemplate(title)
{
	refreshPageTemplate(title);
}

// @Deprecated: Use story.displayTiddlers instead
function displayTiddlers(srcElement,titles,template,unused1,unused2,animate,unused3)
{
	story.displayTiddlers(srcElement,titles,template,animate);
}

// @Deprecated: Use story.displayTiddler instead
function displayTiddler(srcElement,title,template,unused1,unused2,animate,unused3)
{
	story.displayTiddler(srcElement,title,template,animate);
}

// @Deprecated: Use functions on right hand side directly instead
var createTiddlerPopup = Popup.create;
var scrollToTiddlerPopup = Popup.show;
var hideTiddlerPopup = Popup.remove;

// @Deprecated: Use right hand side directly instead
var regexpBackSlashEn = new RegExp("\\\\n","mg");
var regexpBackSlash = new RegExp("\\\\","mg");
var regexpBackSlashEss = new RegExp("\\\\s","mg");
var regexpNewLine = new RegExp("\n","mg");
var regexpCarriageReturn = new RegExp("\r","mg");

//--
//-- Deprecated FileAdaptor functions
//--

FileAdaptor.loadTiddlyWikiCallback = function(status,context,responseText,url,xhr)
{
	context.status = status;
	if(!status) {
		context.statusText = "Error reading file";
	} else {
		context.adaptor.store = new TiddlyWiki();
		if(!context.adaptor.store.importTiddlyWiki(responseText)) {
			context.statusText = config.messages.invalidFileError.format([url]);
			context.status = false;
		}
	}
	context.complete(context,context.userParams);
};

//--
//-- Deprecated HTTP request code
//-- Use the jQuery ajax functions directly instead
//--

function loadRemoteFile(url,callback,params)
{
	return httpReq("GET",url,callback,params);
}

function doHttp(type,url,data,contentType,username,password,callback,params,headers,allowCache)
{
	return httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache);
}

//--
//-- Deprecated String functions
//--

// @Deprecated: no direct replacement, since not used in core code
String.prototype.toJSONString = function()
{
	// Convert a string to it's JSON representation by encoding control characters, double quotes and backslash. See json.org
	var m = {
		'\b': '\\b',
		'\f': '\\f',
		'\n': '\\n',
		'\r': '\\r',
		'\t': '\\t',
		'"' : '\\"',
		'\\': '\\\\'
		};
	var replaceFn = function(a,b) {
		var c = m[b];
		if(c)
			return c;
		c = b.charCodeAt();
		return '\\u00' + Math.floor(c / 16).toString(16) + (c % 16).toString(16);
		};
	if(/["\\\x00-\x1f]/.test(this))
		return '"' + this.replace(/([\x00-\x1f\\"])/g,replaceFn) + '"';
	return '"' + this + '"';
};

//--
//-- Deprecated Tiddler code
//--

// @Deprecated: Use tiddlerToRssItem(tiddler,uri) instead
Tiddler.prototype.toRssItem = function(uri)
{
	return tiddlerToRssItem(this,uri);
};

// @Deprecated: Use "<item>\n" + tiddlerToRssItem(tiddler,uri)  + "\n</item>" instead
Tiddler.prototype.saveToRss = function(uri)
{
	return "<item>\n" + tiddlerToRssItem(this,uri) + "\n</item>";
};

// @Deprecated: Use jQuery.encoding.digests.hexSha1Str instead
Tiddler.prototype.generateFingerprint = function()
{
	return "0x" + Crypto.hexSha1Str(this.text);
};

//--
//-- Deprecated Number functions
//--

// @Deprecated: no direct replacement, since not used in core code
// Clamp a number to a range
Number.prototype.clamp = function(min,max)
{
	var c = this;
	if(c < min)
		c = min;
	if(c > max)
		c = max;
	return Number(c);
};

//--
//-- Deprecated utility functions
//-- Use the jQuery functions directly instead
//--

// Remove all children of a node
function removeChildren(e)
{
	jQuery(e).empty();
}

// Remove a node and all it's children
function removeNode(e)
{
	jQuery(e).remove();
}

// Return the content of an element as plain text with no formatting
function getPlainText(e)
{
	return jQuery(e).text();
}

function addClass(e,className)
{
	jQuery(e).addClass(className);
}

function removeClass(e,className)
{
	jQuery(e).removeClass(className);
}

function hasClass(e,className)
{
	return jQuery(e).hasClass(className);
}

//--
//-- Deprecated Wikifier code
//--

function wikifyPlain(title,theStore,limit)
{
	if(!theStore)
		theStore = store;
	if(theStore.tiddlerExists(title) || theStore.isShadowTiddler(title)) {
		return wikifyPlainText(theStore.getTiddlerText(title),limit,tiddler);
	} else {
		return "";
	}
}


//]]>
</script>
<script id="jslibArea" type="text/javascript">
//<![CDATA[
/*! jQuery v1.8.3 jquery.com | jquery.org/license */
(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++)f.tweens[s].run(i);return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show"))continue;m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden"in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d)v.style(e,t,d[t])});for(r=0;r<o;r++)i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("\ufeff\u00a0")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++)nt(e,t[r],n);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window);
//]]>
</script>
<script id="jqueryArea" type="text/javascript">
//<![CDATA[
/*
jQuery.encoding.digests.sha1.js

SHA-1 digest and associated utility functions

Copyright (c) UnaMesa Association 2009

Dual licensed under the MIT and GPL licenses:
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

if(!$.encoding)
	$.encoding = {};
	$.extend($.encoding,{
		strToBe32s: function(str) {
			// Convert a string to an array of big-endian 32-bit words
			var be=[];
			var len=Math.floor(str.length/4);
			var i, j;
			for(i=0, j=0; i<len; i++, j+=4) {
				be[i]=((str.charCodeAt(j)&0xff) << 24)|((str.charCodeAt(j+1)&0xff) << 16)|((str.charCodeAt(j+2)&0xff) << 8)|(str.charCodeAt(j+3)&0xff);
			}
			while(j<str.length) {
				be[j>>2] |= (str.charCodeAt(j)&0xff)<<(24-(j*8)%32);
				j++;
			}
			return be;
		},
		be32sToStr: function(be) {
			// Convert an array of big-endian 32-bit words to a string
			var str='';
			for(var i=0;i<be.length*32;i+=8) {
				str += String.fromCharCode((be[i>>5]>>>(24-i%32)) & 0xff);
			}
			return str;
		},
		be32sToHex: function(be) {
			// Convert an array of big-endian 32-bit words to a hex string
			var hex='0123456789ABCDEF';
			var str='';
			for(var i=0;i<be.length*4;i++) {
				str += hex.charAt((be[i>>2]>>((3-i%4)*8+4))&0xF) + hex.charAt((be[i>>2]>>((3-i%4)*8))&0xF);
			}
			return str;
		}
	});
})(jQuery);


(function($) {

if(!$.encoding.digests)
	$.encoding.digests = {};
	$.extend($.encoding.digests,{
		hexSha1Str: function(str) {
			// Return, in hex, the SHA-1 hash of a string
			return $.encoding.be32sToHex($.encoding.digests.sha1Str(str));
		},
		sha1Str: function(str) {
			// Return the SHA-1 hash of a string
			return sha1($.encoding.strToBe32s(str),str.length);
		},
		sha1: function(x,blen) {
			// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
			return sha1($.encoding.strToBe32s(str),str.length);
		}
	});

	// Private functions.
	function sha1(x,blen) {
		// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
		function add32(a,b) {
			// Add 32-bit integers, wrapping at 32 bits
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			var lsw=(a&0xFFFF)+(b&0xFFFF);
			var msw=(a>>16)+(b>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function AA(a,b,c,d,e) {
			// Cryptographic round helper function. Add five 32-bit integers, wrapping at 32 bits, second parameter is rotated left 5 bits before the addition
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			b=(b>>>27)|(b<<5);
			var lsw=(a&0xFFFF)+(b&0xFFFF)+(c&0xFFFF)+(d&0xFFFF)+(e&0xFFFF);
			var msw=(a>>16)+(b>>16)+(c>>16)+(d>>16)+(e>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function RR(w,j) {
			// Cryptographic round helper function.
			var n=w[j-3]^w[j-8]^w[j-14]^w[j-16];
			return (n>>>31)|(n<<1);
		}

		var len=blen*8;
		x[len>>5] |= 0x80 << (24-len%32);
		x[((len+64>>9)<<4)+15]=len;
		var w=new Array(80);

		var k1=0x5A827999;
		var k2=0x6ED9EBA1;
		var k3=0x8F1BBCDC;
		var k4=0xCA62C1D6;

		var h0=0x67452301;
		var h1=0xEFCDAB89;
		var h2=0x98BADCFE;
		var h3=0x10325476;
		var h4=0xC3D2E1F0;

		for(var i=0;i<x.length;i+=16) {
			var j=0;
			var t;
			var a=h0;
			var b=h1;
			var c=h2;
			var d=h3;
			var e=h4;
			while(j<16) {
				w[j]=x[i+j];
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<20) {
				w[j]=RR(w,j);
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<40) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k2);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<60) {
				w[j]=RR(w,j);
				t=AA(e,a,(b&c)|(d&(b|c)),w[j],k3);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<80) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k4);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			h0=add32(h0,a);
			h1=add32(h1,b);
			h2=add32(h2,c);
			h3=add32(h3,d);
			h4=add32(h4,e);
		}
		return [h0,h1,h2,h3,h4];
	}
})(jQuery);
/*
jQuery.twStylesheet.js

jQuery plugin to dynamically insert CSS rules into a document

Usage:
  jQuery.twStylesheet applies style definitions
  jQuery.twStylesheet.remove neutralizes style definitions

Copyright (c) UnaMesa Association 2009

Triple licensed under the BSD, MIT and GPL licenses:
  http://www.opensource.org/licenses/bsd-license.php
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

var defaultId = "customStyleSheet"; // XXX: rename to dynamicStyleSheet?

// Add or replace a style sheet
// css argument is a string of CSS rule sets
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
// N.B.: Uses DOM methods instead of jQuery to ensure cross-browser comaptibility.
$.twStylesheet = function(css, options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(doc.createStyleSheet) { // IE-specific handling
		if(el) {
			el.parentNode.removeChild(el);
		}
		doc.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd",
			'&nbsp;<style id="' + id + '" type="text/css">' + css + '</style>'); // fails without &nbsp;
	} else { // modern browsers
		if(el) {
			el.replaceChild(doc.createTextNode(css), el.firstChild);
		} else {
			el = doc.createElement("style");
			el.type = "text/css";
			el.id = id;
			el.appendChild(doc.createTextNode(css));
			doc.getElementsByTagName("head")[0].appendChild(el);
		}
	}
};

// Remove existing style sheet
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
$.twStylesheet.remove = function(options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(el) {
		el.parentNode.removeChild(el);
	}
};

})(jQuery);

//]]>
</script>
<script type="text/javascript">
//<![CDATA[
if(useJavaSaver)
	document.write("<applet style='position:absolute;left:-1px' name='TiddlySaver' code='TiddlySaver.class' archive='TiddlySaver.jar' width='1' height='1'></applet>");
//]]>
</script>
<!--POST-SCRIPT-START-->

<!--POST-SCRIPT-END-->
</body>
</html>
